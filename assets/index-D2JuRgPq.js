const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/IIIFMediaPlayer-oDb2GyZI.js","assets/IIIFMediaPlayer-JvhYHZWX.css"])))=>i.map(i=>d[i]);
function Hh(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const l=Object.getOwnPropertyDescriptor(n,s);l&&Object.defineProperty(t,s,l.get?l:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}})();var Gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ua(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kp={exports:{}},Jc={},Yp={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function Db(){if(Qv)return Tt;Qv=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),w=Symbol.iterator;function b(U){return U===null||typeof U!="object"?null:(U=w&&U[w]||U["@@iterator"],typeof U=="function"?U:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,C={};function j(U,oe,_e){this.props=U,this.context=oe,this.refs=C,this.updater=_e||R}j.prototype.isReactComponent={},j.prototype.setState=function(U,oe){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,oe,"setState")},j.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function O(){}O.prototype=j.prototype;function L(U,oe,_e){this.props=U,this.context=oe,this.refs=C,this.updater=_e||R}var A=L.prototype=new O;A.constructor=L,P(A,j.prototype),A.isPureReactComponent=!0;var F=Array.isArray,z=Object.prototype.hasOwnProperty,B={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function K(U,oe,_e){var Me,Ne={},Ke=null,Qe=null;if(oe!=null)for(Me in oe.ref!==void 0&&(Qe=oe.ref),oe.key!==void 0&&(Ke=""+oe.key),oe)z.call(oe,Me)&&!$.hasOwnProperty(Me)&&(Ne[Me]=oe[Me]);var nt=arguments.length-2;if(nt===1)Ne.children=_e;else if(1<nt){for(var ft=Array(nt),Ct=0;Ct<nt;Ct++)ft[Ct]=arguments[Ct+2];Ne.children=ft}if(U&&U.defaultProps)for(Me in nt=U.defaultProps,nt)Ne[Me]===void 0&&(Ne[Me]=nt[Me]);return{$$typeof:t,type:U,key:Ke,ref:Qe,props:Ne,_owner:B.current}}function fe(U,oe){return{$$typeof:t,type:U.type,key:oe,ref:U.ref,props:U.props,_owner:U._owner}}function J(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function H(U){var oe={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(_e){return oe[_e]})}var Y=/\/+/g;function xe(U,oe){return typeof U=="object"&&U!==null&&U.key!=null?H(""+U.key):oe.toString(36)}function te(U,oe,_e,Me,Ne){var Ke=typeof U;(Ke==="undefined"||Ke==="boolean")&&(U=null);var Qe=!1;if(U===null)Qe=!0;else switch(Ke){case"string":case"number":Qe=!0;break;case"object":switch(U.$$typeof){case t:case e:Qe=!0}}if(Qe)return Qe=U,Ne=Ne(Qe),U=Me===""?"."+xe(Qe,0):Me,F(Ne)?(_e="",U!=null&&(_e=U.replace(Y,"$&/")+"/"),te(Ne,oe,_e,"",function(Ct){return Ct})):Ne!=null&&(J(Ne)&&(Ne=fe(Ne,_e+(!Ne.key||Qe&&Qe.key===Ne.key?"":(""+Ne.key).replace(Y,"$&/")+"/")+U)),oe.push(Ne)),1;if(Qe=0,Me=Me===""?".":Me+":",F(U))for(var nt=0;nt<U.length;nt++){Ke=U[nt];var ft=Me+xe(Ke,nt);Qe+=te(Ke,oe,_e,ft,Ne)}else if(ft=b(U),typeof ft=="function")for(U=ft.call(U),nt=0;!(Ke=U.next()).done;)Ke=Ke.value,ft=Me+xe(Ke,nt++),Qe+=te(Ke,oe,_e,ft,Ne);else if(Ke==="object")throw oe=String(U),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.");return Qe}function Te(U,oe,_e){if(U==null)return U;var Me=[],Ne=0;return te(U,Me,"","",function(Ke){return oe.call(_e,Ke,Ne++)}),Me}function de(U){if(U._status===-1){var oe=U._result;oe=oe(),oe.then(function(_e){(U._status===0||U._status===-1)&&(U._status=1,U._result=_e)},function(_e){(U._status===0||U._status===-1)&&(U._status=2,U._result=_e)}),U._status===-1&&(U._status=0,U._result=oe)}if(U._status===1)return U._result.default;throw U._result}var je={current:null},ee={transition:null},Q={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:ee,ReactCurrentOwner:B};function ue(){throw Error("act(...) is not supported in production builds of React.")}return Tt.Children={map:Te,forEach:function(U,oe,_e){Te(U,function(){oe.apply(this,arguments)},_e)},count:function(U){var oe=0;return Te(U,function(){oe++}),oe},toArray:function(U){return Te(U,function(oe){return oe})||[]},only:function(U){if(!J(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Tt.Component=j,Tt.Fragment=r,Tt.Profiler=s,Tt.PureComponent=L,Tt.StrictMode=n,Tt.Suspense=h,Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Tt.act=ue,Tt.cloneElement=function(U,oe,_e){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Me=P({},U.props),Ne=U.key,Ke=U.ref,Qe=U._owner;if(oe!=null){if(oe.ref!==void 0&&(Ke=oe.ref,Qe=B.current),oe.key!==void 0&&(Ne=""+oe.key),U.type&&U.type.defaultProps)var nt=U.type.defaultProps;for(ft in oe)z.call(oe,ft)&&!$.hasOwnProperty(ft)&&(Me[ft]=oe[ft]===void 0&&nt!==void 0?nt[ft]:oe[ft])}var ft=arguments.length-2;if(ft===1)Me.children=_e;else if(1<ft){nt=Array(ft);for(var Ct=0;Ct<ft;Ct++)nt[Ct]=arguments[Ct+2];Me.children=nt}return{$$typeof:t,type:U.type,key:Ne,ref:Ke,props:Me,_owner:Qe}},Tt.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:l,_context:U},U.Consumer=U},Tt.createElement=K,Tt.createFactory=function(U){var oe=K.bind(null,U);return oe.type=U,oe},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(U){return{$$typeof:d,render:U}},Tt.isValidElement=J,Tt.lazy=function(U){return{$$typeof:g,_payload:{_status:-1,_result:U},_init:de}},Tt.memo=function(U,oe){return{$$typeof:v,type:U,compare:oe===void 0?null:oe}},Tt.startTransition=function(U){var oe=ee.transition;ee.transition={};try{U()}finally{ee.transition=oe}},Tt.unstable_act=ue,Tt.useCallback=function(U,oe){return je.current.useCallback(U,oe)},Tt.useContext=function(U){return je.current.useContext(U)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(U){return je.current.useDeferredValue(U)},Tt.useEffect=function(U,oe){return je.current.useEffect(U,oe)},Tt.useId=function(){return je.current.useId()},Tt.useImperativeHandle=function(U,oe,_e){return je.current.useImperativeHandle(U,oe,_e)},Tt.useInsertionEffect=function(U,oe){return je.current.useInsertionEffect(U,oe)},Tt.useLayoutEffect=function(U,oe){return je.current.useLayoutEffect(U,oe)},Tt.useMemo=function(U,oe){return je.current.useMemo(U,oe)},Tt.useReducer=function(U,oe,_e){return je.current.useReducer(U,oe,_e)},Tt.useRef=function(U){return je.current.useRef(U)},Tt.useState=function(U){return je.current.useState(U)},Tt.useSyncExternalStore=function(U,oe,_e){return je.current.useSyncExternalStore(U,oe,_e)},Tt.useTransition=function(){return je.current.useTransition()},Tt.version="18.3.1",Tt}var qv;function Ha(){return qv||(qv=1,Yp.exports=Db()),Yp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function Bb(){if(Gv)return Jc;Gv=1;var t=Ha(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(d,h,v){var g,w={},b=null,R=null;v!==void 0&&(b=""+v),h.key!==void 0&&(b=""+h.key),h.ref!==void 0&&(R=h.ref);for(g in h)n.call(h,g)&&!l.hasOwnProperty(g)&&(w[g]=h[g]);if(d&&d.defaultProps)for(g in h=d.defaultProps,h)w[g]===void 0&&(w[g]=h[g]);return{$$typeof:e,type:d,key:b,ref:R,props:w,_owner:s.current}}return Jc.Fragment=r,Jc.jsx=u,Jc.jsxs=u,Jc}var Kv;function Ub(){return Kv||(Kv=1,Kp.exports=Bb()),Kp.exports}var k=Ub(),_=Ha();const ct=Ua(_),Ju=Hh({__proto__:null,default:ct},[_]);var Kf={},Xp={exports:{}},pi={},Zp={exports:{}},Jp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function Hb(){return Yv||(Yv=1,(function(t){function e(ee,Q){var ue=ee.length;ee.push(Q);e:for(;0<ue;){var U=ue-1>>>1,oe=ee[U];if(0<s(oe,Q))ee[U]=Q,ee[ue]=oe,ue=U;else break e}}function r(ee){return ee.length===0?null:ee[0]}function n(ee){if(ee.length===0)return null;var Q=ee[0],ue=ee.pop();if(ue!==Q){ee[0]=ue;e:for(var U=0,oe=ee.length,_e=oe>>>1;U<_e;){var Me=2*(U+1)-1,Ne=ee[Me],Ke=Me+1,Qe=ee[Ke];if(0>s(Ne,ue))Ke<oe&&0>s(Qe,Ne)?(ee[U]=Qe,ee[Ke]=ue,U=Ke):(ee[U]=Ne,ee[Me]=ue,U=Me);else if(Ke<oe&&0>s(Qe,ue))ee[U]=Qe,ee[Ke]=ue,U=Ke;else break e}}return Q}function s(ee,Q){var ue=ee.sortIndex-Q.sortIndex;return ue!==0?ue:ee.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var h=[],v=[],g=1,w=null,b=3,R=!1,P=!1,C=!1,j=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(ee){for(var Q=r(v);Q!==null;){if(Q.callback===null)n(v);else if(Q.startTime<=ee)n(v),Q.sortIndex=Q.expirationTime,e(h,Q);else break;Q=r(v)}}function F(ee){if(C=!1,A(ee),!P)if(r(h)!==null)P=!0,de(z);else{var Q=r(v);Q!==null&&je(F,Q.startTime-ee)}}function z(ee,Q){P=!1,C&&(C=!1,O(K),K=-1),R=!0;var ue=b;try{for(A(Q),w=r(h);w!==null&&(!(w.expirationTime>Q)||ee&&!H());){var U=w.callback;if(typeof U=="function"){w.callback=null,b=w.priorityLevel;var oe=U(w.expirationTime<=Q);Q=t.unstable_now(),typeof oe=="function"?w.callback=oe:w===r(h)&&n(h),A(Q)}else n(h);w=r(h)}if(w!==null)var _e=!0;else{var Me=r(v);Me!==null&&je(F,Me.startTime-Q),_e=!1}return _e}finally{w=null,b=ue,R=!1}}var B=!1,$=null,K=-1,fe=5,J=-1;function H(){return!(t.unstable_now()-J<fe)}function Y(){if($!==null){var ee=t.unstable_now();J=ee;var Q=!0;try{Q=$(!0,ee)}finally{Q?xe():(B=!1,$=null)}}else B=!1}var xe;if(typeof L=="function")xe=function(){L(Y)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,Te=te.port2;te.port1.onmessage=Y,xe=function(){Te.postMessage(null)}}else xe=function(){j(Y,0)};function de(ee){$=ee,B||(B=!0,xe())}function je(ee,Q){K=j(function(){ee(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){P||R||(P=!0,de(z))},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(ee){switch(b){case 1:case 2:case 3:var Q=3;break;default:Q=b}var ue=b;b=Q;try{return ee()}finally{b=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ee,Q){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ue=b;b=ee;try{return Q()}finally{b=ue}},t.unstable_scheduleCallback=function(ee,Q,ue){var U=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?U+ue:U):ue=U,ee){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=ue+oe,ee={id:g++,callback:Q,priorityLevel:ee,startTime:ue,expirationTime:oe,sortIndex:-1},ue>U?(ee.sortIndex=ue,e(v,ee),r(h)===null&&ee===r(v)&&(C?(O(K),K=-1):C=!0,je(F,ue-U))):(ee.sortIndex=oe,e(h,ee),P||R||(P=!0,de(z))),ee},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(ee){var Q=b;return function(){var ue=b;b=Q;try{return ee.apply(this,arguments)}finally{b=ue}}}})(Jp)),Jp}var Xv;function G0(){return Xv||(Xv=1,Zp.exports=Hb()),Zp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function Wb(){if(Zv)return pi;Zv=1;var t=Ha(),e=G0();function r(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,f=1;f<arguments.length;f++)o+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function l(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)n.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},w={};function b(i){return h.call(w,i)?!0:h.call(g,i)?!1:v.test(i)?w[i]=!0:(g[i]=!0,!1)}function R(i,o,f,m){if(f!==null&&f.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return m?!1:f!==null?!f.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function P(i,o,f,m){if(o===null||typeof o>"u"||R(i,o,f,m))return!0;if(m)return!1;if(f!==null)switch(f.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function C(i,o,f,m,x,E,M){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=m,this.attributeNamespace=x,this.mustUseProperty=f,this.propertyName=i,this.type=o,this.sanitizeURL=E,this.removeEmptyString=M}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){j[i]=new C(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];j[o]=new C(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){j[i]=new C(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){j[i]=new C(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){j[i]=new C(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){j[i]=new C(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){j[i]=new C(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){j[i]=new C(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){j[i]=new C(i,5,!1,i.toLowerCase(),null,!1,!1)});var O=/[\-:]([a-z])/g;function L(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(O,L);j[o]=new C(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(O,L);j[o]=new C(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(O,L);j[o]=new C(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){j[i]=new C(i,1,!1,i.toLowerCase(),null,!1,!1)}),j.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){j[i]=new C(i,1,!1,i.toLowerCase(),null,!0,!0)});function A(i,o,f,m){var x=j.hasOwnProperty(o)?j[o]:null;(x!==null?x.type!==0:m||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(P(o,f,x,m)&&(f=null),m||x===null?b(o)&&(f===null?i.removeAttribute(o):i.setAttribute(o,""+f)):x.mustUseProperty?i[x.propertyName]=f===null?x.type===3?!1:"":f:(o=x.attributeName,m=x.attributeNamespace,f===null?i.removeAttribute(o):(x=x.type,f=x===3||x===4&&f===!0?"":""+f,m?i.setAttributeNS(m,o,f):i.setAttribute(o,f))))}var F=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),B=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),J=Symbol.for("react.provider"),H=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),Te=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),je=Symbol.for("react.offscreen"),ee=Symbol.iterator;function Q(i){return i===null||typeof i!="object"?null:(i=ee&&i[ee]||i["@@iterator"],typeof i=="function"?i:null)}var ue=Object.assign,U;function oe(i){if(U===void 0)try{throw Error()}catch(f){var o=f.stack.trim().match(/\n( *(at )?)/);U=o&&o[1]||""}return`
`+U+i}var _e=!1;function Me(i,o){if(!i||_e)return"";_e=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(le){var m=le}Reflect.construct(i,[],o)}else{try{o.call()}catch(le){m=le}i.call(o.prototype)}else{try{throw Error()}catch(le){m=le}i()}}catch(le){if(le&&m&&typeof le.stack=="string"){for(var x=le.stack.split(`
`),E=m.stack.split(`
`),M=x.length-1,D=E.length-1;1<=M&&0<=D&&x[M]!==E[D];)D--;for(;1<=M&&0<=D;M--,D--)if(x[M]!==E[D]){if(M!==1||D!==1)do if(M--,D--,0>D||x[M]!==E[D]){var V=`
`+x[M].replace(" at new "," at ");return i.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",i.displayName)),V}while(1<=M&&0<=D);break}}}finally{_e=!1,Error.prepareStackTrace=f}return(i=i?i.displayName||i.name:"")?oe(i):""}function Ne(i){switch(i.tag){case 5:return oe(i.type);case 16:return oe("Lazy");case 13:return oe("Suspense");case 19:return oe("SuspenseList");case 0:case 2:case 15:return i=Me(i.type,!1),i;case 11:return i=Me(i.type.render,!1),i;case 1:return i=Me(i.type,!0),i;default:return""}}function Ke(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case $:return"Fragment";case B:return"Portal";case fe:return"Profiler";case K:return"StrictMode";case xe:return"Suspense";case te:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case H:return(i.displayName||"Context")+".Consumer";case J:return(i._context.displayName||"Context")+".Provider";case Y:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Te:return o=i.displayName||null,o!==null?o:Ke(i.type)||"Memo";case de:o=i._payload,i=i._init;try{return Ke(i(o))}catch{}}return null}function Qe(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ke(o);case 8:return o===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function nt(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ft(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ct(i){var o=ft(i)?"checked":"value",f=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),m=""+i[o];if(!i.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var x=f.get,E=f.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return x.call(this)},set:function(M){m=""+M,E.call(this,M)}}),Object.defineProperty(i,o,{enumerable:f.enumerable}),{getValue:function(){return m},setValue:function(M){m=""+M},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ye(i){i._valueTracker||(i._valueTracker=Ct(i))}function Ce(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var f=o.getValue(),m="";return i&&(m=ft(i)?i.checked?"true":"false":i.value),i=m,i!==f?(o.setValue(i),!0):!1}function Re(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function bt(i,o){var f=o.checked;return ue({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??i._wrapperState.initialChecked})}function jr(i,o){var f=o.defaultValue==null?"":o.defaultValue,m=o.checked!=null?o.checked:o.defaultChecked;f=nt(o.value!=null?o.value:f),i._wrapperState={initialChecked:m,initialValue:f,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function pr(i,o){o=o.checked,o!=null&&A(i,"checked",o,!1)}function Or(i,o){pr(i,o);var f=nt(o.value),m=o.type;if(f!=null)m==="number"?(f===0&&i.value===""||i.value!=f)&&(i.value=""+f):i.value!==""+f&&(i.value=""+f);else if(m==="submit"||m==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?hs(i,o.type,f):o.hasOwnProperty("defaultValue")&&hs(i,o.type,nt(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Sr(i,o,f){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var m=o.type;if(!(m!=="submit"&&m!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,f||o===i.value||(i.value=o),i.defaultValue=o}f=i.name,f!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,f!==""&&(i.name=f)}function hs(i,o,f){(o!=="number"||Re(i.ownerDocument)!==i)&&(f==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+f&&(i.defaultValue=""+f))}var Tn=Array.isArray;function ri(i,o,f,m){if(i=i.options,o){o={};for(var x=0;x<f.length;x++)o["$"+f[x]]=!0;for(f=0;f<i.length;f++)x=o.hasOwnProperty("$"+i[f].value),i[f].selected!==x&&(i[f].selected=x),x&&m&&(i[f].defaultSelected=!0)}else{for(f=""+nt(f),o=null,x=0;x<i.length;x++){if(i[x].value===f){i[x].selected=!0,m&&(i[x].defaultSelected=!0);return}o!==null||i[x].disabled||(o=i[x])}o!==null&&(o.selected=!0)}}function _i(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(r(91));return ue({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function ps(i,o){var f=o.value;if(f==null){if(f=o.children,o=o.defaultValue,f!=null){if(o!=null)throw Error(r(92));if(Tn(f)){if(1<f.length)throw Error(r(93));f=f[0]}o=f}o==null&&(o=""),f=o}i._wrapperState={initialValue:nt(f)}}function on(i,o){var f=nt(o.value),m=nt(o.defaultValue);f!=null&&(f=""+f,f!==i.value&&(i.value=f),o.defaultValue==null&&i.defaultValue!==f&&(i.defaultValue=f)),m!=null&&(i.defaultValue=""+m)}function ve(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function ne(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Se(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?ne(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ye,lt=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,f,m,x){MSApp.execUnsafeLocalFunction(function(){return i(o,f,m,x)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(ye=ye||document.createElement("div"),ye.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=ye.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function dt(i,o){if(o){var f=i.firstChild;if(f&&f===i.lastChild&&f.nodeType===3){f.nodeValue=o;return}}i.textContent=o}var wt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];Object.keys(wt).forEach(function(i){he.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),wt[o]=wt[i]})});function me(i,o,f){return o==null||typeof o=="boolean"||o===""?"":f||typeof o!="number"||o===0||wt.hasOwnProperty(i)&&wt[i]?(""+o).trim():o+"px"}function De(i,o){i=i.style;for(var f in o)if(o.hasOwnProperty(f)){var m=f.indexOf("--")===0,x=me(f,o[f],m);f==="float"&&(f="cssFloat"),m?i.setProperty(f,x):i[f]=x}}var ze=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $e(i,o){if(o){if(ze[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(r(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(r(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(r(61))}if(o.style!=null&&typeof o.style!="object")throw Error(r(62))}}function pt(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ut=null;function Mt(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var It=null,qt=null,Ft=null;function yr(i){if(i=aa(i)){if(typeof It!="function")throw Error(r(280));var o=i.stateNode;o&&(o=Wr(o),It(i.stateNode,i.type,o))}}function zn(i){qt?Ft?Ft.push(i):Ft=[i]:qt=i}function Fn(){if(qt){var i=qt,o=Ft;if(Ft=qt=null,yr(i),o)for(i=0;i<o.length;i++)yr(o[i])}}function ji(i,o){return i(o)}function ni(){}var ii=!1;function Vl(i,o,f){if(ii)return i(o,f);ii=!0;try{return ji(i,o,f)}finally{ii=!1,(qt!==null||Ft!==null)&&(ni(),Fn())}}function Qs(i,o){var f=i.stateNode;if(f===null)return null;var m=Wr(f);if(m===null)return null;f=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(f&&typeof f!="function")throw Error(r(231,o,typeof f));return f}var W=!1;if(d)try{var X={};Object.defineProperty(X,"passive",{get:function(){W=!0}}),window.addEventListener("test",X,X),window.removeEventListener("test",X,X)}catch{W=!1}function ae(i,o,f,m,x,E,M,D,V){var le=Array.prototype.slice.call(arguments,3);try{o.apply(f,le)}catch(be){this.onError(be)}}var ge=!1,Oe=null,Ze=!1,st=null,We={onError:function(i){ge=!0,Oe=i}};function qe(i,o,f,m,x,E,M,D,V){ge=!1,Oe=null,ae.apply(We,arguments)}function Be(i,o,f,m,x,E,M,D,V){if(qe.apply(this,arguments),ge){if(ge){var le=Oe;ge=!1,Oe=null}else throw Error(r(198));Ze||(Ze=!0,st=le)}}function Ue(i){var o=i,f=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(f=o.return),i=o.return;while(i)}return o.tag===3?f:null}function mt(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Et(i){if(Ue(i)!==i)throw Error(r(188))}function Lr(i){var o=i.alternate;if(!o){if(o=Ue(i),o===null)throw Error(r(188));return o!==i?null:i}for(var f=i,m=o;;){var x=f.return;if(x===null)break;var E=x.alternate;if(E===null){if(m=x.return,m!==null){f=m;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===f)return Et(x),i;if(E===m)return Et(x),o;E=E.sibling}throw Error(r(188))}if(f.return!==m.return)f=x,m=E;else{for(var M=!1,D=x.child;D;){if(D===f){M=!0,f=x,m=E;break}if(D===m){M=!0,m=x,f=E;break}D=D.sibling}if(!M){for(D=E.child;D;){if(D===f){M=!0,f=E,m=x;break}if(D===m){M=!0,m=E,f=x;break}D=D.sibling}if(!M)throw Error(r(189))}}if(f.alternate!==m)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?i:o}function Wt(i){return i=Lr(i),i!==null?_t(i):null}function _t(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=_t(i);if(o!==null)return o;i=i.sibling}return null}var rr=e.unstable_scheduleCallback,Qi=e.unstable_cancelCallback,qs=e.unstable_shouldYield,gi=e.unstable_requestPaint,At=e.unstable_now,Gs=e.unstable_getCurrentPriorityLevel,Dn=e.unstable_ImmediatePriority,si=e.unstable_UserBlockingPriority,vi=e.unstable_NormalPriority,Io=e.unstable_LowPriority,Pt=e.unstable_IdlePriority,$t=null,or=null;function Dt(i){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot($t,i,void 0,(i.current.flags&128)===128)}catch{}}var tt=Math.clz32?Math.clz32:ln,gn=Math.log,Mr=Math.LN2;function ln(i){return i>>>=0,i===0?32:31-(gn(i)/Mr|0)|0}var Oi=64,qi=4194304;function Br(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ks(i,o){var f=i.pendingLanes;if(f===0)return 0;var m=0,x=i.suspendedLanes,E=i.pingedLanes,M=f&268435455;if(M!==0){var D=M&~x;D!==0?m=Br(D):(E&=M,E!==0&&(m=Br(E)))}else M=f&~x,M!==0?m=Br(M):E!==0&&(m=Br(E));if(m===0)return 0;if(o!==0&&o!==m&&(o&x)===0&&(x=m&-m,E=o&-o,x>=E||x===16&&(E&4194240)!==0))return o;if((m&4)!==0&&(m|=f&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=m;0<o;)f=31-tt(o),x=1<<f,m|=i[f],o&=~x;return m}function Vd(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qd(i,o){for(var f=i.suspendedLanes,m=i.pingedLanes,x=i.expirationTimes,E=i.pendingLanes;0<E;){var M=31-tt(E),D=1<<M,V=x[M];V===-1?((D&f)===0||(D&m)!==0)&&(x[M]=Vd(D,o)):V<=o&&(i.expiredLanes|=D),E&=~D}}function Ao(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function ac(){var i=Oi;return Oi<<=1,(Oi&4194240)===0&&(Oi=64),i}function Bn(i){for(var o=[],f=0;31>f;f++)o.push(i);return o}function Ql(i,o,f){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-tt(o),i[o]=f}function yp(i,o){var f=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var m=i.eventTimes;for(i=i.expirationTimes;0<f;){var x=31-tt(f),E=1<<x;o[x]=0,m[x]=-1,i[x]=-1,f&=~E}}function uc(i,o){var f=i.entangledLanes|=o;for(i=i.entanglements;f;){var m=31-tt(f),x=1<<m;x&o|i[m]&o&&(i[m]|=o),f&=~x}}var Nt=0;function ql(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var $o,No,qd,Gd,qa,Ga=!1,zo=[],oi=null,ms=null,Li=null,kt=new Map,Fo=new Map,Mi=[],Kd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yd(i,o){switch(i){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":kt.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fo.delete(o.pointerId)}}function Gl(i,o,f,m,x,E){return i===null||i.nativeEvent!==E?(i={blockedOn:o,domEventName:f,eventSystemFlags:m,nativeEvent:E,targetContainers:[x]},o!==null&&(o=aa(o),o!==null&&No(o)),i):(i.eventSystemFlags|=m,o=i.targetContainers,x!==null&&o.indexOf(x)===-1&&o.push(x),i)}function Ur(i,o,f,m,x){switch(o){case"focusin":return oi=Gl(oi,i,o,f,m,x),!0;case"dragenter":return ms=Gl(ms,i,o,f,m,x),!0;case"mouseover":return Li=Gl(Li,i,o,f,m,x),!0;case"pointerover":var E=x.pointerId;return kt.set(E,Gl(kt.get(E)||null,i,o,f,m,x)),!0;case"gotpointercapture":return E=x.pointerId,Fo.set(E,Gl(Fo.get(E)||null,i,o,f,m,x)),!0}return!1}function Ka(i){var o=Cs(i.target);if(o!==null){var f=Ue(o);if(f!==null){if(o=f.tag,o===13){if(o=mt(f),o!==null){i.blockedOn=o,qa(i.priority,function(){qd(f)});return}}else if(o===3&&f.stateNode.current.memoizedState.isDehydrated){i.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ya(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var f=Ja(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(f===null){f=i.nativeEvent;var m=new f.constructor(f.type,f);Ut=m,f.target.dispatchEvent(m),Ut=null}else return o=aa(f),o!==null&&No(o),i.blockedOn=f,!1;o.shift()}return!0}function Xa(i,o,f){Ya(i)&&f.delete(o)}function wp(){Ga=!1,oi!==null&&Ya(oi)&&(oi=null),ms!==null&&Ya(ms)&&(ms=null),Li!==null&&Ya(Li)&&(Li=null),kt.forEach(Xa),Fo.forEach(Xa)}function gs(i,o){i.blockedOn===o&&(i.blockedOn=null,Ga||(Ga=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wp)))}function Rn(i){function o(x){return gs(x,i)}if(0<zo.length){gs(zo[0],i);for(var f=1;f<zo.length;f++){var m=zo[f];m.blockedOn===i&&(m.blockedOn=null)}}for(oi!==null&&gs(oi,i),ms!==null&&gs(ms,i),Li!==null&&gs(Li,i),kt.forEach(o),Fo.forEach(o),f=0;f<Mi.length;f++)m=Mi[f],m.blockedOn===i&&(m.blockedOn=null);for(;0<Mi.length&&(f=Mi[0],f.blockedOn===null);)Ka(f),f.blockedOn===null&&Mi.shift()}var Do=F.ReactCurrentBatchConfig,Za=!0;function yi(i,o,f,m){var x=Nt,E=Do.transition;Do.transition=null;try{Nt=1,Bo(i,o,f,m)}finally{Nt=x,Do.transition=E}}function Gi(i,o,f,m){var x=Nt,E=Do.transition;Do.transition=null;try{Nt=4,Bo(i,o,f,m)}finally{Nt=x,Do.transition=E}}function Bo(i,o,f,m){if(Za){var x=Ja(i,o,f,m);if(x===null)mu(i,o,m,Uo,f),Yd(i,m);else if(Ur(x,i,o,f,m))m.stopPropagation();else if(Yd(i,m),o&4&&-1<Kd.indexOf(i)){for(;x!==null;){var E=aa(x);if(E!==null&&$o(E),E=Ja(i,o,f,m),E===null&&mu(i,o,m,Uo,f),E===x)break;x=E}x!==null&&m.stopPropagation()}else mu(i,o,m,null,f)}}var Uo=null;function Ja(i,o,f,m){if(Uo=null,i=Mt(m),i=Cs(i),i!==null)if(o=Ue(i),o===null)i=null;else if(f=o.tag,f===13){if(i=mt(o),i!==null)return i;i=null}else if(f===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Uo=i,null}function Xd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gs()){case Dn:return 1;case si:return 4;case vi:case Io:return 16;case Pt:return 536870912;default:return 16}default:return 16}}var Xr=null,vs=null,Ki=null;function Kl(){if(Ki)return Ki;var i,o=vs,f=o.length,m,x="value"in Xr?Xr.value:Xr.textContent,E=x.length;for(i=0;i<f&&o[i]===x[i];i++);var M=f-i;for(m=1;m<=M&&o[f-m]===x[E-m];m++);return Ki=x.slice(i,1<m?1-m:void 0)}function Ys(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function vn(){return!0}function Un(){return!1}function Ir(i){function o(f,m,x,E,M){this._reactName=f,this._targetInst=x,this.type=m,this.nativeEvent=E,this.target=M,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(f=i[D],this[D]=f?f(E):E[D]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?vn:Un,this.isPropagationStopped=Un,this}return ue(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=vn)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=vn)},persist:function(){},isPersistent:vn}),o}var _n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wi=Ir(_n),xi=ue({},_n,{view:0,detail:0}),Zd=Ir(xi),Yl,Xl,Zr,yn=ue({},xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Zr&&(Zr&&i.type==="mousemove"?(Yl=i.screenX-Zr.screenX,Xl=i.screenY-Zr.screenY):Xl=Yl=0,Zr=i),Yl)},movementY:function(i){return"movementY"in i?i.movementY:Xl}}),nr=Ir(yn),Zl=ue({},yn,{dataTransfer:0}),Si=Ir(Zl),Jd=ue({},xi,{relatedTarget:0}),eu=Ir(Jd),cc=ue({},_n,{animationName:0,elapsedTime:0,pseudoElement:0}),dc=Ir(cc),ef=ue({},_n,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),tu=Ir(ef),tf=ue({},_n,{data:0}),Xs=Ir(tf),fc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ru={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sp(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=ru[i])?!!o[i]:!1}function Zs(){return Sp}var nu=ue({},xi,{key:function(i){if(i.key){var o=fc[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Ys(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?xp[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zs,charCode:function(i){return i.type==="keypress"?Ys(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ys(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),rf=Ir(nu),nf=ue({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Js=Ir(nf),sf=ue({},xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zs}),iu=Ir(sf),su=ue({},_n,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ho=Ir(su),hc=ue({},yn,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),pc=Ir(hc),of=[9,13,27,32],Jl=d&&"CompositionEvent"in window,eo=null;d&&"documentMode"in document&&(eo=document.documentMode);var Wo=d&&"TextEvent"in window&&!eo,Hn=d&&(!Jl||eo&&8<eo&&11>=eo),ys=" ",ou=!1;function mc(i,o){switch(i){case"keyup":return of.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bi(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Wn=!1;function gc(i,o){switch(i){case"compositionend":return bi(o);case"keypress":return o.which!==32?null:(ou=!0,ys);case"textInput":return i=o.data,i===ys&&ou?null:i;default:return null}}function lf(i,o){if(Wn)return i==="compositionend"||!Jl&&mc(i,o)?(i=Kl(),Ki=vs=Xr=null,Wn=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Hn&&o.locale!=="ko"?null:o.data;default:return null}}var Yi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xi(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Yi[i.type]:o==="textarea"}function ea(i,o,f,m){zn(m),o=gu(o,"onChange"),0<o.length&&(f=new wi("onChange","change",null,f,m),i.push({event:f,listeners:o}))}var Vo=null,ws=null;function af(i){Tc(i,0)}function xs(i){var o=$r(i);if(Ce(o))return i}function li(i,o){if(i==="change")return o}var Qo=!1;if(d){var Ss;if(d){var ai="oninput"in document;if(!ai){var lu=document.createElement("div");lu.setAttribute("oninput","return;"),ai=typeof lu.oninput=="function"}Ss=ai}else Ss=!1;Qo=Ss&&(!document.documentMode||9<document.documentMode)}function to(){Vo&&(Vo.detachEvent("onpropertychange",vc),ws=Vo=null)}function vc(i){if(i.propertyName==="value"&&xs(ws)){var o=[];ea(o,ws,i,Mt(i)),Vl(af,o)}}function yc(i,o,f){i==="focusin"?(to(),Vo=o,ws=f,Vo.attachEvent("onpropertychange",vc)):i==="focusout"&&to()}function dr(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return xs(ws)}function au(i,o){if(i==="click")return xs(o)}function wc(i,o){if(i==="input"||i==="change")return xs(o)}function xc(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var jn=typeof Object.is=="function"?Object.is:xc;function ro(i,o){if(jn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var f=Object.keys(i),m=Object.keys(o);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var x=f[m];if(!h.call(o,x)||!jn(i[x],o[x]))return!1}return!0}function bs(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function lr(i,o){var f=bs(i);i=0;for(var m;f;){if(f.nodeType===3){if(m=i+f.textContent.length,i<=o&&m>=o)return{node:f,offset:o-i};i=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=bs(f)}}function br(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?br(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Ar(){for(var i=window,o=Re();o instanceof i.HTMLIFrameElement;){try{var f=typeof o.contentWindow.location.href=="string"}catch{f=!1}if(f)i=o.contentWindow;else break;o=Re(i.document)}return o}function qo(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function ta(i){var o=Ar(),f=i.focusedElem,m=i.selectionRange;if(o!==f&&f&&f.ownerDocument&&br(f.ownerDocument.documentElement,f)){if(m!==null&&qo(f)){if(o=m.start,i=m.end,i===void 0&&(i=o),"selectionStart"in f)f.selectionStart=o,f.selectionEnd=Math.min(i,f.value.length);else if(i=(o=f.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var x=f.textContent.length,E=Math.min(m.start,x);m=m.end===void 0?E:Math.min(m.end,x),!i.extend&&E>m&&(x=m,m=E,E=x),x=lr(f,E);var M=lr(f,m);x&&M&&(i.rangeCount!==1||i.anchorNode!==x.node||i.anchorOffset!==x.offset||i.focusNode!==M.node||i.focusOffset!==M.offset)&&(o=o.createRange(),o.setStart(x.node,x.offset),i.removeAllRanges(),E>m?(i.addRange(o),i.extend(M.node,M.offset)):(o.setEnd(M.node,M.offset),i.addRange(o)))}}for(o=[],i=f;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<o.length;f++)i=o[f],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var ra=d&&"documentMode"in document&&11>=document.documentMode,Go=null,Hr=null,no=null,na=!1;function uu(i,o,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;na||Go==null||Go!==Re(m)||(m=Go,"selectionStart"in m&&qo(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),no&&ro(no,m)||(no=m,m=gu(Hr,"onSelect"),0<m.length&&(o=new wi("onSelect","select",null,o,f),i.push({event:o,listeners:m}),o.target=Go)))}function Vn(i,o){var f={};return f[i.toLowerCase()]=o.toLowerCase(),f["Webkit"+i]="webkit"+o,f["Moz"+i]="moz"+o,f}var Jr={animationend:Vn("Animation","AnimationEnd"),animationiteration:Vn("Animation","AnimationIteration"),animationstart:Vn("Animation","AnimationStart"),transitionend:Vn("Transition","TransitionEnd")},io={},cu={};d&&(cu=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function Ko(i){if(io[i])return io[i];if(!Jr[i])return i;var o=Jr[i],f;for(f in o)if(o.hasOwnProperty(f)&&f in cu)return io[i]=o[f];return i}var Sc=Ko("animationend"),bc=Ko("animationiteration"),Ec=Ko("animationstart"),Pc=Ko("transitionend"),Cc=new Map,kc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zi(i,o){Cc.set(i,o),l(o,[i])}for(var du=0;du<kc.length;du++){var so=kc[du],uf=so.toLowerCase(),fu=so[0].toUpperCase()+so.slice(1);Zi(uf,"on"+fu)}Zi(Sc,"onAnimationEnd"),Zi(bc,"onAnimationIteration"),Zi(Ec,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(Pc,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Es));function hu(i,o,f){var m=i.type||"unknown-event";i.currentTarget=f,Be(m,o,void 0,i),i.currentTarget=null}function Tc(i,o){o=(o&4)!==0;for(var f=0;f<i.length;f++){var m=i[f],x=m.event;m=m.listeners;e:{var E=void 0;if(o)for(var M=m.length-1;0<=M;M--){var D=m[M],V=D.instance,le=D.currentTarget;if(D=D.listener,V!==E&&x.isPropagationStopped())break e;hu(x,D,le),E=V}else for(M=0;M<m.length;M++){if(D=m[M],V=D.instance,le=D.currentTarget,D=D.listener,V!==E&&x.isPropagationStopped())break e;hu(x,D,le),E=V}}}if(Ze)throw i=st,Ze=!1,st=null,i}function Zt(i,o){var f=o[yu];f===void 0&&(f=o[yu]=new Set);var m=i+"__bubble";f.has(m)||(Rc(o,i,2,!1),f.add(m))}function pu(i,o,f){var m=0;o&&(m|=4),Rc(f,i,m,o)}var ia="_reactListening"+Math.random().toString(36).slice(2);function oo(i){if(!i[ia]){i[ia]=!0,n.forEach(function(f){f!=="selectionchange"&&(cf.has(f)||pu(f,!1,i),pu(f,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[ia]||(o[ia]=!0,pu("selectionchange",!1,o))}}function Rc(i,o,f,m){switch(Xd(o)){case 1:var x=yi;break;case 4:x=Gi;break;default:x=Bo}f=x.bind(null,o,f,i),x=void 0,!W||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(x=!0),m?x!==void 0?i.addEventListener(o,f,{capture:!0,passive:x}):i.addEventListener(o,f,!0):x!==void 0?i.addEventListener(o,f,{passive:x}):i.addEventListener(o,f,!1)}function mu(i,o,f,m,x){var E=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var M=m.tag;if(M===3||M===4){var D=m.stateNode.containerInfo;if(D===x||D.nodeType===8&&D.parentNode===x)break;if(M===4)for(M=m.return;M!==null;){var V=M.tag;if((V===3||V===4)&&(V=M.stateNode.containerInfo,V===x||V.nodeType===8&&V.parentNode===x))return;M=M.return}for(;D!==null;){if(M=Cs(D),M===null)return;if(V=M.tag,V===5||V===6){m=E=M;continue e}D=D.parentNode}}m=m.return}Vl(function(){var le=E,be=Mt(f),Ee=[];e:{var we=Cc.get(i);if(we!==void 0){var Fe=wi,Ge=i;switch(i){case"keypress":if(Ys(f)===0)break e;case"keydown":case"keyup":Fe=rf;break;case"focusin":Ge="focus",Fe=eu;break;case"focusout":Ge="blur",Fe=eu;break;case"beforeblur":case"afterblur":Fe=eu;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Fe=nr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Fe=Si;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Fe=iu;break;case Sc:case bc:case Ec:Fe=dc;break;case Pc:Fe=Ho;break;case"scroll":Fe=Zd;break;case"wheel":Fe=pc;break;case"copy":case"cut":case"paste":Fe=tu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Fe=Js}var Xe=(o&4)!==0,Dr=!Xe&&i==="scroll",re=Xe?we!==null?we+"Capture":null:we;Xe=[];for(var q=le,ie;q!==null;){ie=q;var ke=ie.stateNode;if(ie.tag===5&&ke!==null&&(ie=ke,re!==null&&(ke=Qs(q,re),ke!=null&&Xe.push(Yo(q,ke,ie)))),Dr)break;q=q.return}0<Xe.length&&(we=new Fe(we,Ge,null,f,be),Ee.push({event:we,listeners:Xe}))}}if((o&7)===0){e:{if(we=i==="mouseover"||i==="pointerover",Fe=i==="mouseout"||i==="pointerout",we&&f!==Ut&&(Ge=f.relatedTarget||f.fromElement)&&(Cs(Ge)||Ge[Ai]))break e;if((Fe||we)&&(we=be.window===be?be:(we=be.ownerDocument)?we.defaultView||we.parentWindow:window,Fe?(Ge=f.relatedTarget||f.toElement,Fe=le,Ge=Ge?Cs(Ge):null,Ge!==null&&(Dr=Ue(Ge),Ge!==Dr||Ge.tag!==5&&Ge.tag!==6)&&(Ge=null)):(Fe=null,Ge=le),Fe!==Ge)){if(Xe=nr,ke="onMouseLeave",re="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(Xe=Js,ke="onPointerLeave",re="onPointerEnter",q="pointer"),Dr=Fe==null?we:$r(Fe),ie=Ge==null?we:$r(Ge),we=new Xe(ke,q+"leave",Fe,f,be),we.target=Dr,we.relatedTarget=ie,ke=null,Cs(be)===le&&(Xe=new Xe(re,q+"enter",Ge,f,be),Xe.target=ie,Xe.relatedTarget=Dr,ke=Xe),Dr=ke,Fe&&Ge)t:{for(Xe=Fe,re=Ge,q=0,ie=Xe;ie;ie=lo(ie))q++;for(ie=0,ke=re;ke;ke=lo(ke))ie++;for(;0<q-ie;)Xe=lo(Xe),q--;for(;0<ie-q;)re=lo(re),ie--;for(;q--;){if(Xe===re||re!==null&&Xe===re.alternate)break t;Xe=lo(Xe),re=lo(re)}Xe=null}else Xe=null;Fe!==null&&df(Ee,we,Fe,Xe,!1),Ge!==null&&Dr!==null&&df(Ee,Dr,Ge,Xe,!0)}}e:{if(we=le?$r(le):window,Fe=we.nodeName&&we.nodeName.toLowerCase(),Fe==="select"||Fe==="input"&&we.type==="file")var et=li;else if(Xi(we))if(Qo)et=wc;else{et=dr;var at=yc}else(Fe=we.nodeName)&&Fe.toLowerCase()==="input"&&(we.type==="checkbox"||we.type==="radio")&&(et=au);if(et&&(et=et(i,le))){ea(Ee,et,f,be);break e}at&&at(i,we,le),i==="focusout"&&(at=we._wrapperState)&&at.controlled&&we.type==="number"&&hs(we,"number",we.value)}switch(at=le?$r(le):window,i){case"focusin":(Xi(at)||at.contentEditable==="true")&&(Go=at,Hr=le,no=null);break;case"focusout":no=Hr=Go=null;break;case"mousedown":na=!0;break;case"contextmenu":case"mouseup":case"dragend":na=!1,uu(Ee,f,be);break;case"selectionchange":if(ra)break;case"keydown":case"keyup":uu(Ee,f,be)}var ut;if(Jl)e:{switch(i){case"compositionstart":var ht="onCompositionStart";break e;case"compositionend":ht="onCompositionEnd";break e;case"compositionupdate":ht="onCompositionUpdate";break e}ht=void 0}else Wn?mc(i,f)&&(ht="onCompositionEnd"):i==="keydown"&&f.keyCode===229&&(ht="onCompositionStart");ht&&(Hn&&f.locale!=="ko"&&(Wn||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&Wn&&(ut=Kl()):(Xr=be,vs="value"in Xr?Xr.value:Xr.textContent,Wn=!0)),at=gu(le,ht),0<at.length&&(ht=new Xs(ht,i,null,f,be),Ee.push({event:ht,listeners:at}),ut?ht.data=ut:(ut=bi(f),ut!==null&&(ht.data=ut)))),(ut=Wo?gc(i,f):lf(i,f))&&(le=gu(le,"onBeforeInput"),0<le.length&&(be=new Xs("onBeforeInput","beforeinput",null,f,be),Ee.push({event:be,listeners:le}),be.data=ut))}Tc(Ee,o)})}function Yo(i,o,f){return{instance:i,listener:o,currentTarget:f}}function gu(i,o){for(var f=o+"Capture",m=[];i!==null;){var x=i,E=x.stateNode;x.tag===5&&E!==null&&(x=E,E=Qs(i,f),E!=null&&m.unshift(Yo(i,E,x)),E=Qs(i,o),E!=null&&m.push(Yo(i,E,x))),i=i.return}return m}function lo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function df(i,o,f,m,x){for(var E=o._reactName,M=[];f!==null&&f!==m;){var D=f,V=D.alternate,le=D.stateNode;if(V!==null&&V===m)break;D.tag===5&&le!==null&&(D=le,x?(V=Qs(f,E),V!=null&&M.unshift(Yo(f,V,D))):x||(V=Qs(f,E),V!=null&&M.push(Yo(f,V,D)))),f=f.return}M.length!==0&&i.push({event:o,listeners:M})}var bp=/\r\n?/g,ff=/\u0000|\uFFFD/g;function _c(i){return(typeof i=="string"?i:""+i).replace(bp,`
`).replace(ff,"")}function sa(i,o,f){if(o=_c(o),_c(i)!==o&&f)throw Error(r(425))}function ao(){}var jc=null,Oc=null;function Lc(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Qn=typeof setTimeout=="function"?setTimeout:void 0,Mc=typeof clearTimeout=="function"?clearTimeout:void 0,oa=typeof Promise=="function"?Promise:void 0,hf=typeof queueMicrotask=="function"?queueMicrotask:typeof oa<"u"?function(i){return oa.resolve(null).then(i).catch(pf)}:Qn;function pf(i){setTimeout(function(){throw i})}function vu(i,o){var f=o,m=0;do{var x=f.nextSibling;if(i.removeChild(f),x&&x.nodeType===8)if(f=x.data,f==="/$"){if(m===0){i.removeChild(x),Rn(o);return}m--}else f!=="$"&&f!=="$?"&&f!=="$!"||m++;f=x}while(f);Rn(o)}function Ii(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function uo(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var f=i.data;if(f==="$"||f==="$!"||f==="$?"){if(o===0)return i;o--}else f==="/$"&&o++}i=i.previousSibling}return null}var Ps=Math.random().toString(36).slice(2),ui="__reactFiber$"+Ps,la="__reactProps$"+Ps,Ai="__reactContainer$"+Ps,yu="__reactEvents$"+Ps,mf="__reactListeners$"+Ps,gf="__reactHandles$"+Ps;function Cs(i){var o=i[ui];if(o)return o;for(var f=i.parentNode;f;){if(o=f[Ai]||f[ui]){if(f=o.alternate,o.child!==null||f!==null&&f.child!==null)for(i=uo(i);i!==null;){if(f=i[ui])return f;i=uo(i)}return o}i=f,f=i.parentNode}return null}function aa(i){return i=i[ui]||i[Ai],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function $r(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(r(33))}function Wr(i){return i[la]||null}var wu=[],co=-1;function Ji(i){return{current:i}}function Jt(i){0>co||(i.current=wu[co],wu[co]=null,co--)}function Kt(i,o){co++,wu[co]=i.current,i.current=o}var $i={},en=Ji($i),an=Ji(!1),ks=$i;function fo(i,o){var f=i.type.contextTypes;if(!f)return $i;var m=i.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===o)return m.__reactInternalMemoizedMaskedChildContext;var x={},E;for(E in f)x[E]=o[E];return m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=x),x}function un(i){return i=i.childContextTypes,i!=null}function Xo(){Jt(an),Jt(en)}function Ic(i,o,f){if(en.current!==$i)throw Error(r(168));Kt(en,o),Kt(an,f)}function xu(i,o,f){var m=i.stateNode;if(o=o.childContextTypes,typeof m.getChildContext!="function")return f;m=m.getChildContext();for(var x in m)if(!(x in o))throw Error(r(108,Qe(i)||"Unknown",x));return ue({},f,m)}function ho(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||$i,ks=en.current,Kt(en,i),Kt(an,an.current),!0}function vf(i,o,f){var m=i.stateNode;if(!m)throw Error(r(169));f?(i=xu(i,o,ks),m.__reactInternalMemoizedMergedChildContext=i,Jt(an),Jt(en),Kt(en,i)):Jt(an),Kt(an,f)}var Ni=null,Zo=!1,Su=!1;function ua(i){Ni===null?Ni=[i]:Ni.push(i)}function es(i){Zo=!0,ua(i)}function Ts(){if(!Su&&Ni!==null){Su=!0;var i=0,o=Nt;try{var f=Ni;for(Nt=1;i<f.length;i++){var m=f[i];do m=m(!0);while(m!==null)}Ni=null,Zo=!1}catch(x){throw Ni!==null&&(Ni=Ni.slice(i+1)),rr(Dn,Ts),x}finally{Nt=o,Su=!1}}return null}var wn=[],po=0,Rs=null,_s=0,xn=[],Sn=0,js=null,qn=1,ar="";function mo(i,o){wn[po++]=_s,wn[po++]=Rs,Rs=i,_s=o}function yf(i,o,f){xn[Sn++]=qn,xn[Sn++]=ar,xn[Sn++]=js,js=i;var m=qn;i=ar;var x=32-tt(m)-1;m&=~(1<<x),f+=1;var E=32-tt(o)+x;if(30<E){var M=x-x%5;E=(m&(1<<M)-1).toString(32),m>>=M,x-=M,qn=1<<32-tt(o)+x|f<<x|m,ar=E+i}else qn=1<<E|f<<x|m,ar=i}function Jo(i){i.return!==null&&(mo(i,1),yf(i,1,0))}function Vr(i){for(;i===Rs;)Rs=wn[--po],wn[po]=null,_s=wn[--po],wn[po]=null;for(;i===js;)js=xn[--Sn],xn[Sn]=null,ar=xn[--Sn],xn[Sn]=null,qn=xn[--Sn],xn[Sn]=null}var Gn=null,Le=null,Vt=!1,Kn=null;function Ac(i,o){var f=Wi(5,null,null,0);f.elementType="DELETED",f.stateNode=o,f.return=i,o=i.deletions,o===null?(i.deletions=[f],i.flags|=16):o.push(f)}function wf(i,o){switch(i.tag){case 5:var f=i.type;return o=o.nodeType!==1||f.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Gn=i,Le=Ii(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Gn=i,Le=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(f=js!==null?{id:qn,overflow:ar}:null,i.memoizedState={dehydrated:o,treeContext:f,retryLane:1073741824},f=Wi(18,null,null,0),f.stateNode=o,f.return=i,i.child=f,Gn=i,Le=null,!0):!1;default:return!1}}function go(i){return(i.mode&1)!==0&&(i.flags&128)===0}function el(i){if(Vt){var o=Le;if(o){var f=o;if(!wf(i,o)){if(go(i))throw Error(r(418));o=Ii(f.nextSibling);var m=Gn;o&&wf(i,o)?Ac(m,f):(i.flags=i.flags&-4097|2,Vt=!1,Gn=i)}}else{if(go(i))throw Error(r(418));i.flags=i.flags&-4097|2,Vt=!1,Gn=i}}}function bu(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Gn=i}function ca(i){if(i!==Gn)return!1;if(!Vt)return bu(i),Vt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Lc(i.type,i.memoizedProps)),o&&(o=Le)){if(go(i))throw $c(),Error(r(418));for(;o;)Ac(i,o),o=Ii(o.nextSibling)}if(bu(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var f=i.data;if(f==="/$"){if(o===0){Le=Ii(i.nextSibling);break e}o--}else f!=="$"&&f!=="$!"&&f!=="$?"||o++}i=i.nextSibling}Le=null}}else Le=Gn?Ii(i.stateNode.nextSibling):null;return!0}function $c(){for(var i=Le;i;)i=Ii(i.nextSibling)}function vo(){Le=Gn=null,Vt=!1}function da(i){Kn===null?Kn=[i]:Kn.push(i)}var Nc=F.ReactCurrentBatchConfig;function wr(i,o,f){if(i=f.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(r(309));var m=f.stateNode}if(!m)throw Error(r(147,i));var x=m,E=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===E?o.ref:(o=function(M){var D=x.refs;M===null?delete D[E]:D[E]=M},o._stringRef=E,o)}if(typeof i!="string")throw Error(r(284));if(!f._owner)throw Error(r(290,i))}return i}function On(i,o){throw i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Ei(i){var o=i._init;return o(i._payload)}function Eu(i){function o(re,q){if(i){var ie=re.deletions;ie===null?(re.deletions=[q],re.flags|=16):ie.push(q)}}function f(re,q){if(!i)return null;for(;q!==null;)o(re,q),q=q.sibling;return null}function m(re,q){for(re=new Map;q!==null;)q.key!==null?re.set(q.key,q):re.set(q.index,q),q=q.sibling;return re}function x(re,q){return re=xl(re,q),re.index=0,re.sibling=null,re}function E(re,q,ie){return re.index=ie,i?(ie=re.alternate,ie!==null?(ie=ie.index,ie<q?(re.flags|=2,q):ie):(re.flags|=2,q)):(re.flags|=1048576,q)}function M(re){return i&&re.alternate===null&&(re.flags|=2),re}function D(re,q,ie,ke){return q===null||q.tag!==6?(q=Hp(ie,re.mode,ke),q.return=re,q):(q=x(q,ie),q.return=re,q)}function V(re,q,ie,ke){var et=ie.type;return et===$?be(re,q,ie.props.children,ke,ie.key):q!==null&&(q.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===de&&Ei(et)===q.type)?(ke=x(q,ie.props),ke.ref=wr(re,q,ie),ke.return=re,ke):(ke=Df(ie.type,ie.key,ie.props,null,re.mode,ke),ke.ref=wr(re,q,ie),ke.return=re,ke)}function le(re,q,ie,ke){return q===null||q.tag!==4||q.stateNode.containerInfo!==ie.containerInfo||q.stateNode.implementation!==ie.implementation?(q=Wp(ie,re.mode,ke),q.return=re,q):(q=x(q,ie.children||[]),q.return=re,q)}function be(re,q,ie,ke,et){return q===null||q.tag!==7?(q=ba(ie,re.mode,ke,et),q.return=re,q):(q=x(q,ie),q.return=re,q)}function Ee(re,q,ie){if(typeof q=="string"&&q!==""||typeof q=="number")return q=Hp(""+q,re.mode,ie),q.return=re,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case z:return ie=Df(q.type,q.key,q.props,null,re.mode,ie),ie.ref=wr(re,null,q),ie.return=re,ie;case B:return q=Wp(q,re.mode,ie),q.return=re,q;case de:var ke=q._init;return Ee(re,ke(q._payload),ie)}if(Tn(q)||Q(q))return q=ba(q,re.mode,ie,null),q.return=re,q;On(re,q)}return null}function we(re,q,ie,ke){var et=q!==null?q.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number")return et!==null?null:D(re,q,""+ie,ke);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case z:return ie.key===et?V(re,q,ie,ke):null;case B:return ie.key===et?le(re,q,ie,ke):null;case de:return et=ie._init,we(re,q,et(ie._payload),ke)}if(Tn(ie)||Q(ie))return et!==null?null:be(re,q,ie,ke,null);On(re,ie)}return null}function Fe(re,q,ie,ke,et){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return re=re.get(ie)||null,D(q,re,""+ke,et);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case z:return re=re.get(ke.key===null?ie:ke.key)||null,V(q,re,ke,et);case B:return re=re.get(ke.key===null?ie:ke.key)||null,le(q,re,ke,et);case de:var at=ke._init;return Fe(re,q,ie,at(ke._payload),et)}if(Tn(ke)||Q(ke))return re=re.get(ie)||null,be(q,re,ke,et,null);On(q,ke)}return null}function Ge(re,q,ie,ke){for(var et=null,at=null,ut=q,ht=q=0,mn=null;ut!==null&&ht<ie.length;ht++){ut.index>ht?(mn=ut,ut=null):mn=ut.sibling;var Ht=we(re,ut,ie[ht],ke);if(Ht===null){ut===null&&(ut=mn);break}i&&ut&&Ht.alternate===null&&o(re,ut),q=E(Ht,q,ht),at===null?et=Ht:at.sibling=Ht,at=Ht,ut=mn}if(ht===ie.length)return f(re,ut),Vt&&mo(re,ht),et;if(ut===null){for(;ht<ie.length;ht++)ut=Ee(re,ie[ht],ke),ut!==null&&(q=E(ut,q,ht),at===null?et=ut:at.sibling=ut,at=ut);return Vt&&mo(re,ht),et}for(ut=m(re,ut);ht<ie.length;ht++)mn=Fe(ut,re,ht,ie[ht],ke),mn!==null&&(i&&mn.alternate!==null&&ut.delete(mn.key===null?ht:mn.key),q=E(mn,q,ht),at===null?et=mn:at.sibling=mn,at=mn);return i&&ut.forEach(function(Sl){return o(re,Sl)}),Vt&&mo(re,ht),et}function Xe(re,q,ie,ke){var et=Q(ie);if(typeof et!="function")throw Error(r(150));if(ie=et.call(ie),ie==null)throw Error(r(151));for(var at=et=null,ut=q,ht=q=0,mn=null,Ht=ie.next();ut!==null&&!Ht.done;ht++,Ht=ie.next()){ut.index>ht?(mn=ut,ut=null):mn=ut.sibling;var Sl=we(re,ut,Ht.value,ke);if(Sl===null){ut===null&&(ut=mn);break}i&&ut&&Sl.alternate===null&&o(re,ut),q=E(Sl,q,ht),at===null?et=Sl:at.sibling=Sl,at=Sl,ut=mn}if(Ht.done)return f(re,ut),Vt&&mo(re,ht),et;if(ut===null){for(;!Ht.done;ht++,Ht=ie.next())Ht=Ee(re,Ht.value,ke),Ht!==null&&(q=E(Ht,q,ht),at===null?et=Ht:at.sibling=Ht,at=Ht);return Vt&&mo(re,ht),et}for(ut=m(re,ut);!Ht.done;ht++,Ht=ie.next())Ht=Fe(ut,re,ht,Ht.value,ke),Ht!==null&&(i&&Ht.alternate!==null&&ut.delete(Ht.key===null?ht:Ht.key),q=E(Ht,q,ht),at===null?et=Ht:at.sibling=Ht,at=Ht);return i&&ut.forEach(function(Fb){return o(re,Fb)}),Vt&&mo(re,ht),et}function Dr(re,q,ie,ke){if(typeof ie=="object"&&ie!==null&&ie.type===$&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case z:e:{for(var et=ie.key,at=q;at!==null;){if(at.key===et){if(et=ie.type,et===$){if(at.tag===7){f(re,at.sibling),q=x(at,ie.props.children),q.return=re,re=q;break e}}else if(at.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===de&&Ei(et)===at.type){f(re,at.sibling),q=x(at,ie.props),q.ref=wr(re,at,ie),q.return=re,re=q;break e}f(re,at);break}else o(re,at);at=at.sibling}ie.type===$?(q=ba(ie.props.children,re.mode,ke,ie.key),q.return=re,re=q):(ke=Df(ie.type,ie.key,ie.props,null,re.mode,ke),ke.ref=wr(re,q,ie),ke.return=re,re=ke)}return M(re);case B:e:{for(at=ie.key;q!==null;){if(q.key===at)if(q.tag===4&&q.stateNode.containerInfo===ie.containerInfo&&q.stateNode.implementation===ie.implementation){f(re,q.sibling),q=x(q,ie.children||[]),q.return=re,re=q;break e}else{f(re,q);break}else o(re,q);q=q.sibling}q=Wp(ie,re.mode,ke),q.return=re,re=q}return M(re);case de:return at=ie._init,Dr(re,q,at(ie._payload),ke)}if(Tn(ie))return Ge(re,q,ie,ke);if(Q(ie))return Xe(re,q,ie,ke);On(re,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"?(ie=""+ie,q!==null&&q.tag===6?(f(re,q.sibling),q=x(q,ie),q.return=re,re=q):(f(re,q),q=Hp(ie,re.mode,ke),q.return=re,re=q),M(re)):f(re,q)}return Dr}var yo=Eu(!0),ci=Eu(!1),fa=Ji(null),Yn=null,tl=null,Pu=null;function Cu(){Pu=tl=Yn=null}function ku(i){var o=fa.current;Jt(fa),i._currentValue=o}function Tu(i,o,f){for(;i!==null;){var m=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),i===f)break;i=i.return}}function ts(i,o){Yn=i,Pu=tl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(T=!0),i.firstContext=null)}function bn(i){var o=i._currentValue;if(Pu!==i)if(i={context:i,memoizedValue:o,next:null},tl===null){if(Yn===null)throw Error(r(308));tl=i,Yn.dependencies={lanes:0,firstContext:i}}else tl=tl.next=i;return o}var zi=null;function rl(i){zi===null?zi=[i]:zi.push(i)}function ha(i,o,f,m){var x=o.interleaved;return x===null?(f.next=f,rl(o)):(f.next=x.next,x.next=f),o.interleaved=f,Xn(i,m)}function Xn(i,o){i.lanes|=o;var f=i.alternate;for(f!==null&&(f.lanes|=o),f=i,i=i.return;i!==null;)i.childLanes|=o,f=i.alternate,f!==null&&(f.childLanes|=o),f=i,i=i.return;return f.tag===3?f.stateNode:null}var Fi=!1;function pa(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ru(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Di(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Bi(i,o,f){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(Bt&2)!==0){var x=m.pending;return x===null?o.next=o:(o.next=x.next,x.next=o),m.pending=o,Xn(i,f)}return x=m.interleaved,x===null?(o.next=o,rl(m)):(o.next=x.next,x.next=o),m.interleaved=o,Xn(i,f)}function _u(i,o,f){if(o=o.updateQueue,o!==null&&(o=o.shared,(f&4194240)!==0)){var m=o.lanes;m&=i.pendingLanes,f|=m,o.lanes=f,uc(i,f)}}function ma(i,o){var f=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var x=null,E=null;if(f=f.firstBaseUpdate,f!==null){do{var M={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};E===null?x=E=M:E=E.next=M,f=f.next}while(f!==null);E===null?x=E=o:E=E.next=o}else x=E=o;f={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:m.shared,effects:m.effects},i.updateQueue=f;return}i=f.lastBaseUpdate,i===null?f.firstBaseUpdate=o:i.next=o,f.lastBaseUpdate=o}function nl(i,o,f,m){var x=i.updateQueue;Fi=!1;var E=x.firstBaseUpdate,M=x.lastBaseUpdate,D=x.shared.pending;if(D!==null){x.shared.pending=null;var V=D,le=V.next;V.next=null,M===null?E=le:M.next=le,M=V;var be=i.alternate;be!==null&&(be=be.updateQueue,D=be.lastBaseUpdate,D!==M&&(D===null?be.firstBaseUpdate=le:D.next=le,be.lastBaseUpdate=V))}if(E!==null){var Ee=x.baseState;M=0,be=le=V=null,D=E;do{var we=D.lane,Fe=D.eventTime;if((m&we)===we){be!==null&&(be=be.next={eventTime:Fe,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var Ge=i,Xe=D;switch(we=o,Fe=f,Xe.tag){case 1:if(Ge=Xe.payload,typeof Ge=="function"){Ee=Ge.call(Fe,Ee,we);break e}Ee=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=Xe.payload,we=typeof Ge=="function"?Ge.call(Fe,Ee,we):Ge,we==null)break e;Ee=ue({},Ee,we);break e;case 2:Fi=!0}}D.callback!==null&&D.lane!==0&&(i.flags|=64,we=x.effects,we===null?x.effects=[D]:we.push(D))}else Fe={eventTime:Fe,lane:we,tag:D.tag,payload:D.payload,callback:D.callback,next:null},be===null?(le=be=Fe,V=Ee):be=be.next=Fe,M|=we;if(D=D.next,D===null){if(D=x.shared.pending,D===null)break;we=D,D=we.next,we.next=null,x.lastBaseUpdate=we,x.shared.pending=null}}while(!0);if(be===null&&(V=Ee),x.baseState=V,x.firstBaseUpdate=le,x.lastBaseUpdate=be,o=x.shared.interleaved,o!==null){x=o;do M|=x.lane,x=x.next;while(x!==o)}else E===null&&(x.shared.lanes=0);ya|=M,i.lanes=M,i.memoizedState=Ee}}function mr(i,o,f){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var m=i[o],x=m.callback;if(x!==null){if(m.callback=null,m=f,typeof x!="function")throw Error(r(191,x));x.call(m)}}}var yt={},Yt=Ji(yt),ur=Ji(yt),xr=Ji(yt);function Nr(i){if(i===yt)throw Error(r(174));return i}function Os(i,o){switch(Kt(xr,o),Kt(ur,i),Kt(Yt,yt),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Se(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Se(o,i)}Jt(Yt),Kt(Yt,o)}function cr(){Jt(Yt),Jt(ur),Jt(xr)}function il(i){Nr(xr.current);var o=Nr(Yt.current),f=Se(o,i.type);o!==f&&(Kt(ur,i),Kt(Yt,f))}function rs(i){ur.current===i&&(Jt(Yt),Jt(ur))}var er=Ji(0);function sl(i){for(var o=i;o!==null;){if(o.tag===13){var f=o.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var wo=[];function cn(){for(var i=0;i<wo.length;i++)wo[i]._workInProgressVersionPrimary=null;wo.length=0}var ol=F.ReactCurrentDispatcher,ga=F.ReactCurrentBatchConfig,En=0,Gt=null,gr=null,Er=null,Pi=!1,Ls=!1,di=0,ju=0;function Pr(){throw Error(r(321))}function va(i,o){if(o===null)return!1;for(var f=0;f<o.length&&f<i.length;f++)if(!jn(i[f],o[f]))return!1;return!0}function ll(i,o,f,m,x,E){if(En=E,Gt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ol.current=i===null||i.memoizedState===null?Pp:As,i=f(m,x),Ls){E=0;do{if(Ls=!1,di=0,25<=E)throw Error(r(301));E+=1,Er=gr=null,o.updateQueue=null,ol.current=Au,i=f(m,x)}while(Ls)}if(ol.current=dl,o=gr!==null&&gr.next!==null,En=0,Er=gr=Gt=null,Pi=!1,o)throw Error(r(300));return i}function al(){var i=di!==0;return di=0,i}function ir(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Er===null?Gt.memoizedState=Er=i:Er=Er.next=i,Er}function zr(){if(gr===null){var i=Gt.alternate;i=i!==null?i.memoizedState:null}else i=gr.next;var o=Er===null?Gt.memoizedState:Er.next;if(o!==null)Er=o,gr=i;else{if(i===null)throw Error(r(310));gr=i,i={memoizedState:gr.memoizedState,baseState:gr.baseState,baseQueue:gr.baseQueue,queue:gr.queue,next:null},Er===null?Gt.memoizedState=Er=i:Er=Er.next=i}return Er}function dn(i,o){return typeof o=="function"?o(i):o}function fn(i){var o=zr(),f=o.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=i;var m=gr,x=m.baseQueue,E=f.pending;if(E!==null){if(x!==null){var M=x.next;x.next=E.next,E.next=M}m.baseQueue=x=E,f.pending=null}if(x!==null){E=x.next,m=m.baseState;var D=M=null,V=null,le=E;do{var be=le.lane;if((En&be)===be)V!==null&&(V=V.next={lane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),m=le.hasEagerState?le.eagerState:i(m,le.action);else{var Ee={lane:be,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null};V===null?(D=V=Ee,M=m):V=V.next=Ee,Gt.lanes|=be,ya|=be}le=le.next}while(le!==null&&le!==E);V===null?M=m:V.next=D,jn(m,o.memoizedState)||(T=!0),o.memoizedState=m,o.baseState=M,o.baseQueue=V,f.lastRenderedState=m}if(i=f.interleaved,i!==null){x=i;do E=x.lane,Gt.lanes|=E,ya|=E,x=x.next;while(x!==i)}else x===null&&(f.lanes=0);return[o.memoizedState,f.dispatch]}function Ou(i){var o=zr(),f=o.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=i;var m=f.dispatch,x=f.pending,E=o.memoizedState;if(x!==null){f.pending=null;var M=x=x.next;do E=i(E,M.action),M=M.next;while(M!==x);jn(E,o.memoizedState)||(T=!0),o.memoizedState=E,o.baseQueue===null&&(o.baseState=E),f.lastRenderedState=E}return[E,m]}function Lu(){}function Mu(i,o){var f=Gt,m=zr(),x=o(),E=!jn(m.memoizedState,x);if(E&&(m.memoizedState=x,T=!0),m=m.queue,Bc(zc.bind(null,f,m,i),[i]),m.getSnapshot!==o||E||Er!==null&&Er.memoizedState.tag&1){if(f.flags|=2048,ul(9,ns.bind(null,f,m,x,o),void 0,null),pn===null)throw Error(r(349));(En&30)!==0||xf(f,o,x)}return x}function xf(i,o,f){i.flags|=16384,i={getSnapshot:o,value:f},o=Gt.updateQueue,o===null?(o={lastEffect:null,stores:null},Gt.updateQueue=o,o.stores=[i]):(f=o.stores,f===null?o.stores=[i]:f.push(i))}function ns(i,o,f,m){o.value=f,o.getSnapshot=m,Fc(o)&&Iu(i)}function zc(i,o,f){return f(function(){Fc(o)&&Iu(i)})}function Fc(i){var o=i.getSnapshot;i=i.value;try{var f=o();return!jn(i,f)}catch{return!0}}function Iu(i){var o=Xn(i,1);o!==null&&ls(o,i,1,-1)}function Ms(i){var o=ir();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:i},o.queue=i,i=i.dispatch=kf.bind(null,Gt,i),[o.memoizedState,i]}function ul(i,o,f,m){return i={tag:i,create:o,destroy:f,deps:m,next:null},o=Gt.updateQueue,o===null?(o={lastEffect:null,stores:null},Gt.updateQueue=o,o.lastEffect=i.next=i):(f=o.lastEffect,f===null?o.lastEffect=i.next=i:(m=f.next,f.next=i,i.next=m,o.lastEffect=i)),i}function Dc(){return zr().memoizedState}function cl(i,o,f,m){var x=ir();Gt.flags|=i,x.memoizedState=ul(1|o,f,void 0,m===void 0?null:m)}function xo(i,o,f,m){var x=zr();m=m===void 0?null:m;var E=void 0;if(gr!==null){var M=gr.memoizedState;if(E=M.destroy,m!==null&&va(m,M.deps)){x.memoizedState=ul(o,f,E,m);return}}Gt.flags|=i,x.memoizedState=ul(1|o,f,E,m)}function Sf(i,o){return cl(8390656,8,i,o)}function Bc(i,o){return xo(2048,8,i,o)}function Uc(i,o){return xo(4,2,i,o)}function Hc(i,o){return xo(4,4,i,o)}function Is(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function bf(i,o,f){return f=f!=null?f.concat([i]):null,xo(4,4,Is.bind(null,o,i),f)}function is(){}function Wc(i,o){var f=zr();o=o===void 0?null:o;var m=f.memoizedState;return m!==null&&o!==null&&va(o,m[1])?m[0]:(f.memoizedState=[i,o],i)}function sr(i,o){var f=zr();o=o===void 0?null:o;var m=f.memoizedState;return m!==null&&o!==null&&va(o,m[1])?m[0]:(i=i(),f.memoizedState=[i,o],i)}function Ef(i,o,f){return(En&21)===0?(i.baseState&&(i.baseState=!1,T=!0),i.memoizedState=f):(jn(f,o)||(f=ac(),Gt.lanes|=f,ya|=f,i.baseState=!0),o)}function Pf(i,o){var f=Nt;Nt=f!==0&&4>f?f:4,i(!0);var m=ga.transition;ga.transition={};try{i(!1),o()}finally{Nt=f,ga.transition=m}}function Cf(){return zr().memoizedState}function Ep(i,o,f){var m=yl(i);if(f={lane:m,action:f,hasEagerState:!1,eagerState:null,next:null},Vc(i))Tf(o,f);else if(f=ha(i,o,f,m),f!==null){var x=Jn();ls(f,i,m,x),Zn(f,o,m)}}function kf(i,o,f){var m=yl(i),x={lane:m,action:f,hasEagerState:!1,eagerState:null,next:null};if(Vc(i))Tf(o,x);else{var E=i.alternate;if(i.lanes===0&&(E===null||E.lanes===0)&&(E=o.lastRenderedReducer,E!==null))try{var M=o.lastRenderedState,D=E(M,f);if(x.hasEagerState=!0,x.eagerState=D,jn(D,M)){var V=o.interleaved;V===null?(x.next=x,rl(o)):(x.next=V.next,V.next=x),o.interleaved=x;return}}catch{}finally{}f=ha(i,o,x,m),f!==null&&(x=Jn(),ls(f,i,m,x),Zn(f,o,m))}}function Vc(i){var o=i.alternate;return i===Gt||o!==null&&o===Gt}function Tf(i,o){Ls=Pi=!0;var f=i.pending;f===null?o.next=o:(o.next=f.next,f.next=o),i.pending=o}function Zn(i,o,f){if((f&4194240)!==0){var m=o.lanes;m&=i.pendingLanes,f|=m,o.lanes=f,uc(i,f)}}var dl={readContext:bn,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useInsertionEffect:Pr,useLayoutEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useMutableSource:Pr,useSyncExternalStore:Pr,useId:Pr,unstable_isNewReconciler:!1},Pp={readContext:bn,useCallback:function(i,o){return ir().memoizedState=[i,o===void 0?null:o],i},useContext:bn,useEffect:Sf,useImperativeHandle:function(i,o,f){return f=f!=null?f.concat([i]):null,cl(4194308,4,Is.bind(null,o,i),f)},useLayoutEffect:function(i,o){return cl(4194308,4,i,o)},useInsertionEffect:function(i,o){return cl(4,2,i,o)},useMemo:function(i,o){var f=ir();return o=o===void 0?null:o,i=i(),f.memoizedState=[i,o],i},useReducer:function(i,o,f){var m=ir();return o=f!==void 0?f(o):o,m.memoizedState=m.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},m.queue=i,i=i.dispatch=Ep.bind(null,Gt,i),[m.memoizedState,i]},useRef:function(i){var o=ir();return i={current:i},o.memoizedState=i},useState:Ms,useDebugValue:is,useDeferredValue:function(i){return ir().memoizedState=i},useTransition:function(){var i=Ms(!1),o=i[0];return i=Pf.bind(null,i[1]),ir().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,f){var m=Gt,x=ir();if(Vt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=o(),pn===null)throw Error(r(349));(En&30)!==0||xf(m,o,f)}x.memoizedState=f;var E={value:f,getSnapshot:o};return x.queue=E,Sf(zc.bind(null,m,E,i),[i]),m.flags|=2048,ul(9,ns.bind(null,m,E,f,o),void 0,null),f},useId:function(){var i=ir(),o=pn.identifierPrefix;if(Vt){var f=ar,m=qn;f=(m&~(1<<32-tt(m)-1)).toString(32)+f,o=":"+o+"R"+f,f=di++,0<f&&(o+="H"+f.toString(32)),o+=":"}else f=ju++,o=":"+o+"r"+f.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},As={readContext:bn,useCallback:Wc,useContext:bn,useEffect:Bc,useImperativeHandle:bf,useInsertionEffect:Uc,useLayoutEffect:Hc,useMemo:sr,useReducer:fn,useRef:Dc,useState:function(){return fn(dn)},useDebugValue:is,useDeferredValue:function(i){var o=zr();return Ef(o,gr.memoizedState,i)},useTransition:function(){var i=fn(dn)[0],o=zr().memoizedState;return[i,o]},useMutableSource:Lu,useSyncExternalStore:Mu,useId:Cf,unstable_isNewReconciler:!1},Au={readContext:bn,useCallback:Wc,useContext:bn,useEffect:Bc,useImperativeHandle:bf,useInsertionEffect:Uc,useLayoutEffect:Hc,useMemo:sr,useReducer:Ou,useRef:Dc,useState:function(){return Ou(dn)},useDebugValue:is,useDeferredValue:function(i){var o=zr();return gr===null?o.memoizedState=i:Ef(o,gr.memoizedState,i)},useTransition:function(){var i=Ou(dn)[0],o=zr().memoizedState;return[i,o]},useMutableSource:Lu,useSyncExternalStore:Mu,useId:Cf,unstable_isNewReconciler:!1};function tn(i,o){if(i&&i.defaultProps){o=ue({},o),i=i.defaultProps;for(var f in i)o[f]===void 0&&(o[f]=i[f]);return o}return o}function fl(i,o,f,m){o=i.memoizedState,f=f(m,o),f=f==null?o:ue({},o,f),i.memoizedState=f,i.lanes===0&&(i.updateQueue.baseState=f)}var hl={isMounted:function(i){return(i=i._reactInternals)?Ue(i)===i:!1},enqueueSetState:function(i,o,f){i=i._reactInternals;var m=Jn(),x=yl(i),E=Di(m,x);E.payload=o,f!=null&&(E.callback=f),o=Bi(i,E,x),o!==null&&(ls(o,i,x,m),_u(o,i,x))},enqueueReplaceState:function(i,o,f){i=i._reactInternals;var m=Jn(),x=yl(i),E=Di(m,x);E.tag=1,E.payload=o,f!=null&&(E.callback=f),o=Bi(i,E,x),o!==null&&(ls(o,i,x,m),_u(o,i,x))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var f=Jn(),m=yl(i),x=Di(f,m);x.tag=2,o!=null&&(x.callback=o),o=Bi(i,x,m),o!==null&&(ls(o,i,m,f),_u(o,i,m))}};function $u(i,o,f,m,x,E,M){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,E,M):o.prototype&&o.prototype.isPureReactComponent?!ro(f,m)||!ro(x,E):!0}function Rf(i,o,f){var m=!1,x=$i,E=o.contextType;return typeof E=="object"&&E!==null?E=bn(E):(x=un(o)?ks:en.current,m=o.contextTypes,E=(m=m!=null)?fo(i,x):$i),o=new o(f,E),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=hl,i.stateNode=o,o._reactInternals=i,m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=x,i.__reactInternalMemoizedMaskedChildContext=E),o}function Qc(i,o,f,m){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(f,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(f,m),o.state!==i&&hl.enqueueReplaceState(o,o.state,null)}function Nu(i,o,f,m){var x=i.stateNode;x.props=f,x.state=i.memoizedState,x.refs={},pa(i);var E=o.contextType;typeof E=="object"&&E!==null?x.context=bn(E):(E=un(o)?ks:en.current,x.context=fo(i,E)),x.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(fl(i,o,E,f),x.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(o=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),o!==x.state&&hl.enqueueReplaceState(x,x.state,null),nl(i,f,x,m),x.state=i.memoizedState),typeof x.componentDidMount=="function"&&(i.flags|=4194308)}function So(i,o){try{var f="",m=o;do f+=Ne(m),m=m.return;while(m);var x=f}catch(E){x=`
Error generating stack: `+E.message+`
`+E.stack}return{value:i,source:o,stack:x,digest:null}}function zu(i,o,f){return{value:i,source:null,stack:f??null,digest:o??null}}function pl(i,o){try{console.error(o.value)}catch(f){setTimeout(function(){throw f})}}var Cp=typeof WeakMap=="function"?WeakMap:Map;function _f(i,o,f){f=Di(-1,f),f.tag=3,f.payload={element:null};var m=o.value;return f.callback=function(){If||(If=!0,Ap=m),pl(i,o)},f}function a(i,o,f){f=Di(-1,f),f.tag=3;var m=i.type.getDerivedStateFromError;if(typeof m=="function"){var x=o.value;f.payload=function(){return m(x)},f.callback=function(){pl(i,o)}}var E=i.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(f.callback=function(){pl(i,o),typeof m!="function"&&(gl===null?gl=new Set([this]):gl.add(this));var M=o.stack;this.componentDidCatch(o.value,{componentStack:M!==null?M:""})}),f}function c(i,o,f){var m=i.pingCache;if(m===null){m=i.pingCache=new Cp;var x=new Set;m.set(o,x)}else x=m.get(o),x===void 0&&(x=new Set,m.set(o,x));x.has(f)||(x.add(f),i=Rb.bind(null,i,o,f),o.then(i,i))}function p(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function y(i,o,f,m,x){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(o=Di(-1,1),o.tag=2,Bi(f,o,1))),f.lanes|=1),i):(i.flags|=65536,i.lanes=x,i)}var S=F.ReactCurrentOwner,T=!1;function I(i,o,f,m){o.child=i===null?ci(o,null,f,m):yo(o,i.child,f,m)}function G(i,o,f,m,x){f=f.render;var E=o.ref;return ts(o,x),m=ll(i,o,f,m,E,x),f=al(),i!==null&&!T?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~x,hn(i,o,x)):(Vt&&f&&Jo(o),o.flags|=1,I(i,o,m,x),o.child)}function ce(i,o,f,m,x){if(i===null){var E=f.type;return typeof E=="function"&&!Up(E)&&E.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(o.tag=15,o.type=E,Pe(i,o,E,m,x)):(i=Df(f.type,null,m,o,o.mode,x),i.ref=o.ref,i.return=o,o.child=i)}if(E=i.child,(i.lanes&x)===0){var M=E.memoizedProps;if(f=f.compare,f=f!==null?f:ro,f(M,m)&&i.ref===o.ref)return hn(i,o,x)}return o.flags|=1,i=xl(E,m),i.ref=o.ref,i.return=o,o.child=i}function Pe(i,o,f,m,x){if(i!==null){var E=i.memoizedProps;if(ro(E,m)&&i.ref===o.ref)if(T=!1,o.pendingProps=m=E,(i.lanes&x)!==0)(i.flags&131072)!==0&&(T=!0);else return o.lanes=i.lanes,hn(i,o,x)}return Ie(i,o,f,m,x)}function He(i,o,f){var m=o.pendingProps,x=m.children,E=i!==null?i.memoizedState:null;if(m.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(Du,Ci),Ci|=f;else{if((f&1073741824)===0)return i=E!==null?E.baseLanes|f:f,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Kt(Du,Ci),Ci|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=E!==null?E.baseLanes:f,Kt(Du,Ci),Ci|=m}else E!==null?(m=E.baseLanes|f,o.memoizedState=null):m=f,Kt(Du,Ci),Ci|=m;return I(i,o,x,f),o.child}function gt(i,o){var f=o.ref;(i===null&&f!==null||i!==null&&i.ref!==f)&&(o.flags|=512,o.flags|=2097152)}function Ie(i,o,f,m,x){var E=un(f)?ks:en.current;return E=fo(o,E),ts(o,x),f=ll(i,o,f,m,E,x),m=al(),i!==null&&!T?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~x,hn(i,o,x)):(Vt&&m&&Jo(o),o.flags|=1,I(i,o,f,x),o.child)}function tr(i,o,f,m,x){if(un(f)){var E=!0;ho(o)}else E=!1;if(ts(o,x),o.stateNode===null)Rt(i,o),Rf(o,f,m),Nu(o,f,m,x),m=!0;else if(i===null){var M=o.stateNode,D=o.memoizedProps;M.props=D;var V=M.context,le=f.contextType;typeof le=="object"&&le!==null?le=bn(le):(le=un(f)?ks:en.current,le=fo(o,le));var be=f.getDerivedStateFromProps,Ee=typeof be=="function"||typeof M.getSnapshotBeforeUpdate=="function";Ee||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(D!==m||V!==le)&&Qc(o,M,m,le),Fi=!1;var we=o.memoizedState;M.state=we,nl(o,m,M,x),V=o.memoizedState,D!==m||we!==V||an.current||Fi?(typeof be=="function"&&(fl(o,f,be,m),V=o.memoizedState),(D=Fi||$u(o,f,D,m,we,V,le))?(Ee||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(o.flags|=4194308)):(typeof M.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=V),M.props=m,M.state=V,M.context=le,m=D):(typeof M.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{M=o.stateNode,Ru(i,o),D=o.memoizedProps,le=o.type===o.elementType?D:tn(o.type,D),M.props=le,Ee=o.pendingProps,we=M.context,V=f.contextType,typeof V=="object"&&V!==null?V=bn(V):(V=un(f)?ks:en.current,V=fo(o,V));var Fe=f.getDerivedStateFromProps;(be=typeof Fe=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(D!==Ee||we!==V)&&Qc(o,M,m,V),Fi=!1,we=o.memoizedState,M.state=we,nl(o,m,M,x);var Ge=o.memoizedState;D!==Ee||we!==Ge||an.current||Fi?(typeof Fe=="function"&&(fl(o,f,Fe,m),Ge=o.memoizedState),(le=Fi||$u(o,f,le,m,we,Ge,V)||!1)?(be||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(m,Ge,V),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(m,Ge,V)),typeof M.componentDidUpdate=="function"&&(o.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof M.componentDidUpdate!="function"||D===i.memoizedProps&&we===i.memoizedState||(o.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&we===i.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Ge),M.props=m,M.state=Ge,M.context=V,m=le):(typeof M.componentDidUpdate!="function"||D===i.memoizedProps&&we===i.memoizedState||(o.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&we===i.memoizedState||(o.flags|=1024),m=!1)}return Qt(i,o,f,m,E,x)}function Qt(i,o,f,m,x,E){gt(i,o);var M=(o.flags&128)!==0;if(!m&&!M)return x&&vf(o,f,!1),hn(i,o,E);m=o.stateNode,S.current=o;var D=M&&typeof f.getDerivedStateFromError!="function"?null:m.render();return o.flags|=1,i!==null&&M?(o.child=yo(o,i.child,null,E),o.child=yo(o,null,D,E)):I(i,o,D,E),o.memoizedState=m.state,x&&vf(o,f,!0),o.child}function Pn(i){var o=i.stateNode;o.pendingContext?Ic(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Ic(i,o.context,!1),Os(i,o.containerInfo)}function Ui(i,o,f,m,x){return vo(),da(x),o.flags|=256,I(i,o,f,m),o.child}var se={dehydrated:null,treeContext:null,retryLane:0};function Z(i){return{baseLanes:i,cachePool:null,transitions:null}}function pe(i,o,f){var m=o.pendingProps,x=er.current,E=!1,M=(o.flags&128)!==0,D;if((D=M)||(D=i!==null&&i.memoizedState===null?!1:(x&2)!==0),D?(E=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(x|=1),Kt(er,x&1),i===null)return el(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(M=m.children,i=m.fallback,E?(m=o.mode,E=o.child,M={mode:"hidden",children:M},(m&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=M):E=Bf(M,m,0,null),i=ba(i,m,f,null),E.return=o,i.return=o,E.sibling=i,o.child=E,o.child.memoizedState=Z(f),o.memoizedState=se,i):Ae(o,M));if(x=i.memoizedState,x!==null&&(D=x.dehydrated,D!==null))return xt(i,o,M,m,D,x,f);if(E){E=m.fallback,M=o.mode,x=i.child,D=x.sibling;var V={mode:"hidden",children:m.children};return(M&1)===0&&o.child!==x?(m=o.child,m.childLanes=0,m.pendingProps=V,o.deletions=null):(m=xl(x,V),m.subtreeFlags=x.subtreeFlags&14680064),D!==null?E=xl(D,E):(E=ba(E,M,f,null),E.flags|=2),E.return=o,m.return=o,m.sibling=E,o.child=m,m=E,E=o.child,M=i.child.memoizedState,M=M===null?Z(f):{baseLanes:M.baseLanes|f,cachePool:null,transitions:M.transitions},E.memoizedState=M,E.childLanes=i.childLanes&~f,o.memoizedState=se,m}return E=i.child,i=E.sibling,m=xl(E,{mode:"visible",children:m.children}),(o.mode&1)===0&&(m.lanes=f),m.return=o,m.sibling=null,i!==null&&(f=o.deletions,f===null?(o.deletions=[i],o.flags|=16):f.push(i)),o.child=m,o.memoizedState=null,m}function Ae(i,o){return o=Bf({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function it(i,o,f,m){return m!==null&&da(m),yo(o,i.child,null,f),i=Ae(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function xt(i,o,f,m,x,E,M){if(f)return o.flags&256?(o.flags&=-257,m=zu(Error(r(422))),it(i,o,M,m)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(E=m.fallback,x=o.mode,m=Bf({mode:"visible",children:m.children},x,0,null),E=ba(E,x,M,null),E.flags|=2,m.return=o,E.return=o,m.sibling=E,o.child=m,(o.mode&1)!==0&&yo(o,i.child,null,M),o.child.memoizedState=Z(M),o.memoizedState=se,E);if((o.mode&1)===0)return it(i,o,M,null);if(x.data==="$!"){if(m=x.nextSibling&&x.nextSibling.dataset,m)var D=m.dgst;return m=D,E=Error(r(419)),m=zu(E,m,void 0),it(i,o,M,m)}if(D=(M&i.childLanes)!==0,T||D){if(m=pn,m!==null){switch(M&-M){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(m.suspendedLanes|M))!==0?0:x,x!==0&&x!==E.retryLane&&(E.retryLane=x,Xn(i,x),ls(m,i,x,-1))}return Bp(),m=zu(Error(r(421))),it(i,o,M,m)}return x.data==="$?"?(o.flags|=128,o.child=i.child,o=_b.bind(null,i),x._reactRetry=o,null):(i=E.treeContext,Le=Ii(x.nextSibling),Gn=o,Vt=!0,Kn=null,i!==null&&(xn[Sn++]=qn,xn[Sn++]=ar,xn[Sn++]=js,qn=i.id,ar=i.overflow,js=o),o=Ae(o,m.children),o.flags|=4096,o)}function vt(i,o,f){i.lanes|=o;var m=i.alternate;m!==null&&(m.lanes|=o),Tu(i.return,o,f)}function jt(i,o,f,m,x){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:x}:(E.isBackwards=o,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=f,E.tailMode=x)}function Fr(i,o,f){var m=o.pendingProps,x=m.revealOrder,E=m.tail;if(I(i,o,m.children,f),m=er.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&vt(i,f,o);else if(i.tag===19)vt(i,f,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}if(Kt(er,m),(o.mode&1)===0)o.memoizedState=null;else switch(x){case"forwards":for(f=o.child,x=null;f!==null;)i=f.alternate,i!==null&&sl(i)===null&&(x=f),f=f.sibling;f=x,f===null?(x=o.child,o.child=null):(x=f.sibling,f.sibling=null),jt(o,!1,x,f,E);break;case"backwards":for(f=null,x=o.child,o.child=null;x!==null;){if(i=x.alternate,i!==null&&sl(i)===null){o.child=x;break}i=x.sibling,x.sibling=f,f=x,x=i}jt(o,!0,f,null,E);break;case"together":jt(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Rt(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function hn(i,o,f){if(i!==null&&(o.dependencies=i.dependencies),ya|=o.lanes,(f&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,f=xl(i,i.pendingProps),o.child=f,f.return=o;i.sibling!==null;)i=i.sibling,f=f.sibling=xl(i,i.pendingProps),f.return=o;f.sibling=null}return o.child}function kp(i,o,f){switch(o.tag){case 3:Pn(o),vo();break;case 5:il(o);break;case 1:un(o.type)&&ho(o);break;case 4:Os(o,o.stateNode.containerInfo);break;case 10:var m=o.type._context,x=o.memoizedProps.value;Kt(fa,m._currentValue),m._currentValue=x;break;case 13:if(m=o.memoizedState,m!==null)return m.dehydrated!==null?(Kt(er,er.current&1),o.flags|=128,null):(f&o.child.childLanes)!==0?pe(i,o,f):(Kt(er,er.current&1),i=hn(i,o,f),i!==null?i.sibling:null);Kt(er,er.current&1);break;case 19:if(m=(f&o.childLanes)!==0,(i.flags&128)!==0){if(m)return Fr(i,o,f);o.flags|=128}if(x=o.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Kt(er,er.current),m)break;return null;case 22:case 23:return o.lanes=0,He(i,o,f)}return hn(i,o,f)}var vv,Tp,yv,wv;vv=function(i,o){for(var f=o.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===o)break;for(;f.sibling===null;){if(f.return===null||f.return===o)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Tp=function(){},yv=function(i,o,f,m){var x=i.memoizedProps;if(x!==m){i=o.stateNode,Nr(Yt.current);var E=null;switch(f){case"input":x=bt(i,x),m=bt(i,m),E=[];break;case"select":x=ue({},x,{value:void 0}),m=ue({},m,{value:void 0}),E=[];break;case"textarea":x=_i(i,x),m=_i(i,m),E=[];break;default:typeof x.onClick!="function"&&typeof m.onClick=="function"&&(i.onclick=ao)}$e(f,m);var M;f=null;for(le in x)if(!m.hasOwnProperty(le)&&x.hasOwnProperty(le)&&x[le]!=null)if(le==="style"){var D=x[le];for(M in D)D.hasOwnProperty(M)&&(f||(f={}),f[M]="")}else le!=="dangerouslySetInnerHTML"&&le!=="children"&&le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(s.hasOwnProperty(le)?E||(E=[]):(E=E||[]).push(le,null));for(le in m){var V=m[le];if(D=x!=null?x[le]:void 0,m.hasOwnProperty(le)&&V!==D&&(V!=null||D!=null))if(le==="style")if(D){for(M in D)!D.hasOwnProperty(M)||V&&V.hasOwnProperty(M)||(f||(f={}),f[M]="");for(M in V)V.hasOwnProperty(M)&&D[M]!==V[M]&&(f||(f={}),f[M]=V[M])}else f||(E||(E=[]),E.push(le,f)),f=V;else le==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,D=D?D.__html:void 0,V!=null&&D!==V&&(E=E||[]).push(le,V)):le==="children"?typeof V!="string"&&typeof V!="number"||(E=E||[]).push(le,""+V):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&(s.hasOwnProperty(le)?(V!=null&&le==="onScroll"&&Zt("scroll",i),E||D===V||(E=[])):(E=E||[]).push(le,V))}f&&(E=E||[]).push("style",f);var le=E;(o.updateQueue=le)&&(o.flags|=4)}},wv=function(i,o,f,m){f!==m&&(o.flags|=4)};function qc(i,o){if(!Vt)switch(i.tailMode){case"hidden":o=i.tail;for(var f=null;o!==null;)o.alternate!==null&&(f=o),o=o.sibling;f===null?i.tail=null:f.sibling=null;break;case"collapsed":f=i.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function Ln(i){var o=i.alternate!==null&&i.alternate.child===i.child,f=0,m=0;if(o)for(var x=i.child;x!==null;)f|=x.lanes|x.childLanes,m|=x.subtreeFlags&14680064,m|=x.flags&14680064,x.return=i,x=x.sibling;else for(x=i.child;x!==null;)f|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=i,x=x.sibling;return i.subtreeFlags|=m,i.childLanes=f,o}function yb(i,o,f){var m=o.pendingProps;switch(Vr(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(o),null;case 1:return un(o.type)&&Xo(),Ln(o),null;case 3:return m=o.stateNode,cr(),Jt(an),Jt(en),cn(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(i===null||i.child===null)&&(ca(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Kn!==null&&(zp(Kn),Kn=null))),Tp(i,o),Ln(o),null;case 5:rs(o);var x=Nr(xr.current);if(f=o.type,i!==null&&o.stateNode!=null)yv(i,o,f,m,x),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!m){if(o.stateNode===null)throw Error(r(166));return Ln(o),null}if(i=Nr(Yt.current),ca(o)){m=o.stateNode,f=o.type;var E=o.memoizedProps;switch(m[ui]=o,m[la]=E,i=(o.mode&1)!==0,f){case"dialog":Zt("cancel",m),Zt("close",m);break;case"iframe":case"object":case"embed":Zt("load",m);break;case"video":case"audio":for(x=0;x<Es.length;x++)Zt(Es[x],m);break;case"source":Zt("error",m);break;case"img":case"image":case"link":Zt("error",m),Zt("load",m);break;case"details":Zt("toggle",m);break;case"input":jr(m,E),Zt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!E.multiple},Zt("invalid",m);break;case"textarea":ps(m,E),Zt("invalid",m)}$e(f,E),x=null;for(var M in E)if(E.hasOwnProperty(M)){var D=E[M];M==="children"?typeof D=="string"?m.textContent!==D&&(E.suppressHydrationWarning!==!0&&sa(m.textContent,D,i),x=["children",D]):typeof D=="number"&&m.textContent!==""+D&&(E.suppressHydrationWarning!==!0&&sa(m.textContent,D,i),x=["children",""+D]):s.hasOwnProperty(M)&&D!=null&&M==="onScroll"&&Zt("scroll",m)}switch(f){case"input":Ye(m),Sr(m,E,!0);break;case"textarea":Ye(m),ve(m);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(m.onclick=ao)}m=x,o.updateQueue=m,m!==null&&(o.flags|=4)}else{M=x.nodeType===9?x:x.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=ne(f)),i==="http://www.w3.org/1999/xhtml"?f==="script"?(i=M.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof m.is=="string"?i=M.createElement(f,{is:m.is}):(i=M.createElement(f),f==="select"&&(M=i,m.multiple?M.multiple=!0:m.size&&(M.size=m.size))):i=M.createElementNS(i,f),i[ui]=o,i[la]=m,vv(i,o,!1,!1),o.stateNode=i;e:{switch(M=pt(f,m),f){case"dialog":Zt("cancel",i),Zt("close",i),x=m;break;case"iframe":case"object":case"embed":Zt("load",i),x=m;break;case"video":case"audio":for(x=0;x<Es.length;x++)Zt(Es[x],i);x=m;break;case"source":Zt("error",i),x=m;break;case"img":case"image":case"link":Zt("error",i),Zt("load",i),x=m;break;case"details":Zt("toggle",i),x=m;break;case"input":jr(i,m),x=bt(i,m),Zt("invalid",i);break;case"option":x=m;break;case"select":i._wrapperState={wasMultiple:!!m.multiple},x=ue({},m,{value:void 0}),Zt("invalid",i);break;case"textarea":ps(i,m),x=_i(i,m),Zt("invalid",i);break;default:x=m}$e(f,x),D=x;for(E in D)if(D.hasOwnProperty(E)){var V=D[E];E==="style"?De(i,V):E==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&lt(i,V)):E==="children"?typeof V=="string"?(f!=="textarea"||V!=="")&&dt(i,V):typeof V=="number"&&dt(i,""+V):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(s.hasOwnProperty(E)?V!=null&&E==="onScroll"&&Zt("scroll",i):V!=null&&A(i,E,V,M))}switch(f){case"input":Ye(i),Sr(i,m,!1);break;case"textarea":Ye(i),ve(i);break;case"option":m.value!=null&&i.setAttribute("value",""+nt(m.value));break;case"select":i.multiple=!!m.multiple,E=m.value,E!=null?ri(i,!!m.multiple,E,!1):m.defaultValue!=null&&ri(i,!!m.multiple,m.defaultValue,!0);break;default:typeof x.onClick=="function"&&(i.onclick=ao)}switch(f){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Ln(o),null;case 6:if(i&&o.stateNode!=null)wv(i,o,i.memoizedProps,m);else{if(typeof m!="string"&&o.stateNode===null)throw Error(r(166));if(f=Nr(xr.current),Nr(Yt.current),ca(o)){if(m=o.stateNode,f=o.memoizedProps,m[ui]=o,(E=m.nodeValue!==f)&&(i=Gn,i!==null))switch(i.tag){case 3:sa(m.nodeValue,f,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&sa(m.nodeValue,f,(i.mode&1)!==0)}E&&(o.flags|=4)}else m=(f.nodeType===9?f:f.ownerDocument).createTextNode(m),m[ui]=o,o.stateNode=m}return Ln(o),null;case 13:if(Jt(er),m=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Vt&&Le!==null&&(o.mode&1)!==0&&(o.flags&128)===0)$c(),vo(),o.flags|=98560,E=!1;else if(E=ca(o),m!==null&&m.dehydrated!==null){if(i===null){if(!E)throw Error(r(318));if(E=o.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[ui]=o}else vo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ln(o),E=!1}else Kn!==null&&(zp(Kn),Kn=null),E=!0;if(!E)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=f,o):(m=m!==null,m!==(i!==null&&i.memoizedState!==null)&&m&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(er.current&1)!==0?rn===0&&(rn=3):Bp())),o.updateQueue!==null&&(o.flags|=4),Ln(o),null);case 4:return cr(),Tp(i,o),i===null&&oo(o.stateNode.containerInfo),Ln(o),null;case 10:return ku(o.type._context),Ln(o),null;case 17:return un(o.type)&&Xo(),Ln(o),null;case 19:if(Jt(er),E=o.memoizedState,E===null)return Ln(o),null;if(m=(o.flags&128)!==0,M=E.rendering,M===null)if(m)qc(E,!1);else{if(rn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(M=sl(i),M!==null){for(o.flags|=128,qc(E,!1),m=M.updateQueue,m!==null&&(o.updateQueue=m,o.flags|=4),o.subtreeFlags=0,m=f,f=o.child;f!==null;)E=f,i=m,E.flags&=14680066,M=E.alternate,M===null?(E.childLanes=0,E.lanes=i,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=M.childLanes,E.lanes=M.lanes,E.child=M.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=M.memoizedProps,E.memoizedState=M.memoizedState,E.updateQueue=M.updateQueue,E.type=M.type,i=M.dependencies,E.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),f=f.sibling;return Kt(er,er.current&1|2),o.child}i=i.sibling}E.tail!==null&&At()>Bu&&(o.flags|=128,m=!0,qc(E,!1),o.lanes=4194304)}else{if(!m)if(i=sl(M),i!==null){if(o.flags|=128,m=!0,f=i.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),qc(E,!0),E.tail===null&&E.tailMode==="hidden"&&!M.alternate&&!Vt)return Ln(o),null}else 2*At()-E.renderingStartTime>Bu&&f!==1073741824&&(o.flags|=128,m=!0,qc(E,!1),o.lanes=4194304);E.isBackwards?(M.sibling=o.child,o.child=M):(f=E.last,f!==null?f.sibling=M:o.child=M,E.last=M)}return E.tail!==null?(o=E.tail,E.rendering=o,E.tail=o.sibling,E.renderingStartTime=At(),o.sibling=null,f=er.current,Kt(er,m?f&1|2:f&1),o):(Ln(o),null);case 22:case 23:return Dp(),m=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==m&&(o.flags|=8192),m&&(o.mode&1)!==0?(Ci&1073741824)!==0&&(Ln(o),o.subtreeFlags&6&&(o.flags|=8192)):Ln(o),null;case 24:return null;case 25:return null}throw Error(r(156,o.tag))}function wb(i,o){switch(Vr(o),o.tag){case 1:return un(o.type)&&Xo(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return cr(),Jt(an),Jt(en),cn(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return rs(o),null;case 13:if(Jt(er),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));vo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Jt(er),null;case 4:return cr(),null;case 10:return ku(o.type._context),null;case 22:case 23:return Dp(),null;case 24:return null;default:return null}}var jf=!1,Mn=!1,xb=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function Fu(i,o){var f=i.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(m){Cr(i,o,m)}else f.current=null}function Rp(i,o,f){try{f()}catch(m){Cr(i,o,m)}}var xv=!1;function Sb(i,o){if(jc=Za,i=Ar(),qo(i)){if("selectionStart"in i)var f={start:i.selectionStart,end:i.selectionEnd};else e:{f=(f=i.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var x=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{f.nodeType,E.nodeType}catch{f=null;break e}var M=0,D=-1,V=-1,le=0,be=0,Ee=i,we=null;t:for(;;){for(var Fe;Ee!==f||x!==0&&Ee.nodeType!==3||(D=M+x),Ee!==E||m!==0&&Ee.nodeType!==3||(V=M+m),Ee.nodeType===3&&(M+=Ee.nodeValue.length),(Fe=Ee.firstChild)!==null;)we=Ee,Ee=Fe;for(;;){if(Ee===i)break t;if(we===f&&++le===x&&(D=M),we===E&&++be===m&&(V=M),(Fe=Ee.nextSibling)!==null)break;Ee=we,we=Ee.parentNode}Ee=Fe}f=D===-1||V===-1?null:{start:D,end:V}}else f=null}f=f||{start:0,end:0}}else f=null;for(Oc={focusedElem:i,selectionRange:f},Za=!1,Ve=o;Ve!==null;)if(o=Ve,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Ve=i;else for(;Ve!==null;){o=Ve;try{var Ge=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Ge!==null){var Xe=Ge.memoizedProps,Dr=Ge.memoizedState,re=o.stateNode,q=re.getSnapshotBeforeUpdate(o.elementType===o.type?Xe:tn(o.type,Xe),Dr);re.__reactInternalSnapshotBeforeUpdate=q}break;case 3:var ie=o.stateNode.containerInfo;ie.nodeType===1?ie.textContent="":ie.nodeType===9&&ie.documentElement&&ie.removeChild(ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ke){Cr(o,o.return,ke)}if(i=o.sibling,i!==null){i.return=o.return,Ve=i;break}Ve=o.return}return Ge=xv,xv=!1,Ge}function Gc(i,o,f){var m=o.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var x=m=m.next;do{if((x.tag&i)===i){var E=x.destroy;x.destroy=void 0,E!==void 0&&Rp(o,f,E)}x=x.next}while(x!==m)}}function Of(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var f=o=o.next;do{if((f.tag&i)===i){var m=f.create;f.destroy=m()}f=f.next}while(f!==o)}}function _p(i){var o=i.ref;if(o!==null){var f=i.stateNode;switch(i.tag){case 5:i=f;break;default:i=f}typeof o=="function"?o(i):o.current=i}}function Sv(i){var o=i.alternate;o!==null&&(i.alternate=null,Sv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[ui],delete o[la],delete o[yu],delete o[mf],delete o[gf])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function bv(i){return i.tag===5||i.tag===3||i.tag===4}function Ev(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||bv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function jp(i,o,f){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?f.nodeType===8?f.parentNode.insertBefore(i,o):f.insertBefore(i,o):(f.nodeType===8?(o=f.parentNode,o.insertBefore(i,f)):(o=f,o.appendChild(i)),f=f._reactRootContainer,f!=null||o.onclick!==null||(o.onclick=ao));else if(m!==4&&(i=i.child,i!==null))for(jp(i,o,f),i=i.sibling;i!==null;)jp(i,o,f),i=i.sibling}function Op(i,o,f){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?f.insertBefore(i,o):f.appendChild(i);else if(m!==4&&(i=i.child,i!==null))for(Op(i,o,f),i=i.sibling;i!==null;)Op(i,o,f),i=i.sibling}var Cn=null,ss=!1;function ml(i,o,f){for(f=f.child;f!==null;)Pv(i,o,f),f=f.sibling}function Pv(i,o,f){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount($t,f)}catch{}switch(f.tag){case 5:Mn||Fu(f,o);case 6:var m=Cn,x=ss;Cn=null,ml(i,o,f),Cn=m,ss=x,Cn!==null&&(ss?(i=Cn,f=f.stateNode,i.nodeType===8?i.parentNode.removeChild(f):i.removeChild(f)):Cn.removeChild(f.stateNode));break;case 18:Cn!==null&&(ss?(i=Cn,f=f.stateNode,i.nodeType===8?vu(i.parentNode,f):i.nodeType===1&&vu(i,f),Rn(i)):vu(Cn,f.stateNode));break;case 4:m=Cn,x=ss,Cn=f.stateNode.containerInfo,ss=!0,ml(i,o,f),Cn=m,ss=x;break;case 0:case 11:case 14:case 15:if(!Mn&&(m=f.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){x=m=m.next;do{var E=x,M=E.destroy;E=E.tag,M!==void 0&&((E&2)!==0||(E&4)!==0)&&Rp(f,o,M),x=x.next}while(x!==m)}ml(i,o,f);break;case 1:if(!Mn&&(Fu(f,o),m=f.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=f.memoizedProps,m.state=f.memoizedState,m.componentWillUnmount()}catch(D){Cr(f,o,D)}ml(i,o,f);break;case 21:ml(i,o,f);break;case 22:f.mode&1?(Mn=(m=Mn)||f.memoizedState!==null,ml(i,o,f),Mn=m):ml(i,o,f);break;default:ml(i,o,f)}}function Cv(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var f=i.stateNode;f===null&&(f=i.stateNode=new xb),o.forEach(function(m){var x=jb.bind(null,i,m);f.has(m)||(f.add(m),m.then(x,x))})}}function os(i,o){var f=o.deletions;if(f!==null)for(var m=0;m<f.length;m++){var x=f[m];try{var E=i,M=o,D=M;e:for(;D!==null;){switch(D.tag){case 5:Cn=D.stateNode,ss=!1;break e;case 3:Cn=D.stateNode.containerInfo,ss=!0;break e;case 4:Cn=D.stateNode.containerInfo,ss=!0;break e}D=D.return}if(Cn===null)throw Error(r(160));Pv(E,M,x),Cn=null,ss=!1;var V=x.alternate;V!==null&&(V.return=null),x.return=null}catch(le){Cr(x,o,le)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)kv(o,i),o=o.sibling}function kv(i,o){var f=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(os(o,i),$s(i),m&4){try{Gc(3,i,i.return),Of(3,i)}catch(Xe){Cr(i,i.return,Xe)}try{Gc(5,i,i.return)}catch(Xe){Cr(i,i.return,Xe)}}break;case 1:os(o,i),$s(i),m&512&&f!==null&&Fu(f,f.return);break;case 5:if(os(o,i),$s(i),m&512&&f!==null&&Fu(f,f.return),i.flags&32){var x=i.stateNode;try{dt(x,"")}catch(Xe){Cr(i,i.return,Xe)}}if(m&4&&(x=i.stateNode,x!=null)){var E=i.memoizedProps,M=f!==null?f.memoizedProps:E,D=i.type,V=i.updateQueue;if(i.updateQueue=null,V!==null)try{D==="input"&&E.type==="radio"&&E.name!=null&&pr(x,E),pt(D,M);var le=pt(D,E);for(M=0;M<V.length;M+=2){var be=V[M],Ee=V[M+1];be==="style"?De(x,Ee):be==="dangerouslySetInnerHTML"?lt(x,Ee):be==="children"?dt(x,Ee):A(x,be,Ee,le)}switch(D){case"input":Or(x,E);break;case"textarea":on(x,E);break;case"select":var we=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!E.multiple;var Fe=E.value;Fe!=null?ri(x,!!E.multiple,Fe,!1):we!==!!E.multiple&&(E.defaultValue!=null?ri(x,!!E.multiple,E.defaultValue,!0):ri(x,!!E.multiple,E.multiple?[]:"",!1))}x[la]=E}catch(Xe){Cr(i,i.return,Xe)}}break;case 6:if(os(o,i),$s(i),m&4){if(i.stateNode===null)throw Error(r(162));x=i.stateNode,E=i.memoizedProps;try{x.nodeValue=E}catch(Xe){Cr(i,i.return,Xe)}}break;case 3:if(os(o,i),$s(i),m&4&&f!==null&&f.memoizedState.isDehydrated)try{Rn(o.containerInfo)}catch(Xe){Cr(i,i.return,Xe)}break;case 4:os(o,i),$s(i);break;case 13:os(o,i),$s(i),x=i.child,x.flags&8192&&(E=x.memoizedState!==null,x.stateNode.isHidden=E,!E||x.alternate!==null&&x.alternate.memoizedState!==null||(Ip=At())),m&4&&Cv(i);break;case 22:if(be=f!==null&&f.memoizedState!==null,i.mode&1?(Mn=(le=Mn)||be,os(o,i),Mn=le):os(o,i),$s(i),m&8192){if(le=i.memoizedState!==null,(i.stateNode.isHidden=le)&&!be&&(i.mode&1)!==0)for(Ve=i,be=i.child;be!==null;){for(Ee=Ve=be;Ve!==null;){switch(we=Ve,Fe=we.child,we.tag){case 0:case 11:case 14:case 15:Gc(4,we,we.return);break;case 1:Fu(we,we.return);var Ge=we.stateNode;if(typeof Ge.componentWillUnmount=="function"){m=we,f=we.return;try{o=m,Ge.props=o.memoizedProps,Ge.state=o.memoizedState,Ge.componentWillUnmount()}catch(Xe){Cr(m,f,Xe)}}break;case 5:Fu(we,we.return);break;case 22:if(we.memoizedState!==null){_v(Ee);continue}}Fe!==null?(Fe.return=we,Ve=Fe):_v(Ee)}be=be.sibling}e:for(be=null,Ee=i;;){if(Ee.tag===5){if(be===null){be=Ee;try{x=Ee.stateNode,le?(E=x.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(D=Ee.stateNode,V=Ee.memoizedProps.style,M=V!=null&&V.hasOwnProperty("display")?V.display:null,D.style.display=me("display",M))}catch(Xe){Cr(i,i.return,Xe)}}}else if(Ee.tag===6){if(be===null)try{Ee.stateNode.nodeValue=le?"":Ee.memoizedProps}catch(Xe){Cr(i,i.return,Xe)}}else if((Ee.tag!==22&&Ee.tag!==23||Ee.memoizedState===null||Ee===i)&&Ee.child!==null){Ee.child.return=Ee,Ee=Ee.child;continue}if(Ee===i)break e;for(;Ee.sibling===null;){if(Ee.return===null||Ee.return===i)break e;be===Ee&&(be=null),Ee=Ee.return}be===Ee&&(be=null),Ee.sibling.return=Ee.return,Ee=Ee.sibling}}break;case 19:os(o,i),$s(i),m&4&&Cv(i);break;case 21:break;default:os(o,i),$s(i)}}function $s(i){var o=i.flags;if(o&2){try{e:{for(var f=i.return;f!==null;){if(bv(f)){var m=f;break e}f=f.return}throw Error(r(160))}switch(m.tag){case 5:var x=m.stateNode;m.flags&32&&(dt(x,""),m.flags&=-33);var E=Ev(i);Op(i,E,x);break;case 3:case 4:var M=m.stateNode.containerInfo,D=Ev(i);jp(i,D,M);break;default:throw Error(r(161))}}catch(V){Cr(i,i.return,V)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function bb(i,o,f){Ve=i,Tv(i)}function Tv(i,o,f){for(var m=(i.mode&1)!==0;Ve!==null;){var x=Ve,E=x.child;if(x.tag===22&&m){var M=x.memoizedState!==null||jf;if(!M){var D=x.alternate,V=D!==null&&D.memoizedState!==null||Mn;D=jf;var le=Mn;if(jf=M,(Mn=V)&&!le)for(Ve=x;Ve!==null;)M=Ve,V=M.child,M.tag===22&&M.memoizedState!==null?jv(x):V!==null?(V.return=M,Ve=V):jv(x);for(;E!==null;)Ve=E,Tv(E),E=E.sibling;Ve=x,jf=D,Mn=le}Rv(i)}else(x.subtreeFlags&8772)!==0&&E!==null?(E.return=x,Ve=E):Rv(i)}}function Rv(i){for(;Ve!==null;){var o=Ve;if((o.flags&8772)!==0){var f=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Mn||Of(5,o);break;case 1:var m=o.stateNode;if(o.flags&4&&!Mn)if(f===null)m.componentDidMount();else{var x=o.elementType===o.type?f.memoizedProps:tn(o.type,f.memoizedProps);m.componentDidUpdate(x,f.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var E=o.updateQueue;E!==null&&mr(o,E,m);break;case 3:var M=o.updateQueue;if(M!==null){if(f=null,o.child!==null)switch(o.child.tag){case 5:f=o.child.stateNode;break;case 1:f=o.child.stateNode}mr(o,M,f)}break;case 5:var D=o.stateNode;if(f===null&&o.flags&4){f=D;var V=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&f.focus();break;case"img":V.src&&(f.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var le=o.alternate;if(le!==null){var be=le.memoizedState;if(be!==null){var Ee=be.dehydrated;Ee!==null&&Rn(Ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Mn||o.flags&512&&_p(o)}catch(we){Cr(o,o.return,we)}}if(o===i){Ve=null;break}if(f=o.sibling,f!==null){f.return=o.return,Ve=f;break}Ve=o.return}}function _v(i){for(;Ve!==null;){var o=Ve;if(o===i){Ve=null;break}var f=o.sibling;if(f!==null){f.return=o.return,Ve=f;break}Ve=o.return}}function jv(i){for(;Ve!==null;){var o=Ve;try{switch(o.tag){case 0:case 11:case 15:var f=o.return;try{Of(4,o)}catch(V){Cr(o,f,V)}break;case 1:var m=o.stateNode;if(typeof m.componentDidMount=="function"){var x=o.return;try{m.componentDidMount()}catch(V){Cr(o,x,V)}}var E=o.return;try{_p(o)}catch(V){Cr(o,E,V)}break;case 5:var M=o.return;try{_p(o)}catch(V){Cr(o,M,V)}}}catch(V){Cr(o,o.return,V)}if(o===i){Ve=null;break}var D=o.sibling;if(D!==null){D.return=o.return,Ve=D;break}Ve=o.return}}var Eb=Math.ceil,Lf=F.ReactCurrentDispatcher,Lp=F.ReactCurrentOwner,Hi=F.ReactCurrentBatchConfig,Bt=0,pn=null,Qr=null,kn=0,Ci=0,Du=Ji(0),rn=0,Kc=null,ya=0,Mf=0,Mp=0,Yc=null,fi=null,Ip=0,Bu=1/0,bo=null,If=!1,Ap=null,gl=null,Af=!1,vl=null,$f=0,Xc=0,$p=null,Nf=-1,zf=0;function Jn(){return(Bt&6)!==0?At():Nf!==-1?Nf:Nf=At()}function yl(i){return(i.mode&1)===0?1:(Bt&2)!==0&&kn!==0?kn&-kn:Nc.transition!==null?(zf===0&&(zf=ac()),zf):(i=Nt,i!==0||(i=window.event,i=i===void 0?16:Xd(i.type)),i)}function ls(i,o,f,m){if(50<Xc)throw Xc=0,$p=null,Error(r(185));Ql(i,f,m),((Bt&2)===0||i!==pn)&&(i===pn&&((Bt&2)===0&&(Mf|=f),rn===4&&wl(i,kn)),hi(i,m),f===1&&Bt===0&&(o.mode&1)===0&&(Bu=At()+500,Zo&&Ts()))}function hi(i,o){var f=i.callbackNode;Qd(i,o);var m=Ks(i,i===pn?kn:0);if(m===0)f!==null&&Qi(f),i.callbackNode=null,i.callbackPriority=0;else if(o=m&-m,i.callbackPriority!==o){if(f!=null&&Qi(f),o===1)i.tag===0?es(Lv.bind(null,i)):ua(Lv.bind(null,i)),hf(function(){(Bt&6)===0&&Ts()}),f=null;else{switch(ql(m)){case 1:f=Dn;break;case 4:f=si;break;case 16:f=vi;break;case 536870912:f=Pt;break;default:f=vi}f=Dv(f,Ov.bind(null,i))}i.callbackPriority=o,i.callbackNode=f}}function Ov(i,o){if(Nf=-1,zf=0,(Bt&6)!==0)throw Error(r(327));var f=i.callbackNode;if(Uu()&&i.callbackNode!==f)return null;var m=Ks(i,i===pn?kn:0);if(m===0)return null;if((m&30)!==0||(m&i.expiredLanes)!==0||o)o=Ff(i,m);else{o=m;var x=Bt;Bt|=2;var E=Iv();(pn!==i||kn!==o)&&(bo=null,Bu=At()+500,xa(i,o));do try{kb();break}catch(D){Mv(i,D)}while(!0);Cu(),Lf.current=E,Bt=x,Qr!==null?o=0:(pn=null,kn=0,o=rn)}if(o!==0){if(o===2&&(x=Ao(i),x!==0&&(m=x,o=Np(i,x))),o===1)throw f=Kc,xa(i,0),wl(i,m),hi(i,At()),f;if(o===6)wl(i,m);else{if(x=i.current.alternate,(m&30)===0&&!Pb(x)&&(o=Ff(i,m),o===2&&(E=Ao(i),E!==0&&(m=E,o=Np(i,E))),o===1))throw f=Kc,xa(i,0),wl(i,m),hi(i,At()),f;switch(i.finishedWork=x,i.finishedLanes=m,o){case 0:case 1:throw Error(r(345));case 2:Sa(i,fi,bo);break;case 3:if(wl(i,m),(m&130023424)===m&&(o=Ip+500-At(),10<o)){if(Ks(i,0)!==0)break;if(x=i.suspendedLanes,(x&m)!==m){Jn(),i.pingedLanes|=i.suspendedLanes&x;break}i.timeoutHandle=Qn(Sa.bind(null,i,fi,bo),o);break}Sa(i,fi,bo);break;case 4:if(wl(i,m),(m&4194240)===m)break;for(o=i.eventTimes,x=-1;0<m;){var M=31-tt(m);E=1<<M,M=o[M],M>x&&(x=M),m&=~E}if(m=x,m=At()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*Eb(m/1960))-m,10<m){i.timeoutHandle=Qn(Sa.bind(null,i,fi,bo),m);break}Sa(i,fi,bo);break;case 5:Sa(i,fi,bo);break;default:throw Error(r(329))}}}return hi(i,At()),i.callbackNode===f?Ov.bind(null,i):null}function Np(i,o){var f=Yc;return i.current.memoizedState.isDehydrated&&(xa(i,o).flags|=256),i=Ff(i,o),i!==2&&(o=fi,fi=f,o!==null&&zp(o)),i}function zp(i){fi===null?fi=i:fi.push.apply(fi,i)}function Pb(i){for(var o=i;;){if(o.flags&16384){var f=o.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var m=0;m<f.length;m++){var x=f[m],E=x.getSnapshot;x=x.value;try{if(!jn(E(),x))return!1}catch{return!1}}}if(f=o.child,o.subtreeFlags&16384&&f!==null)f.return=o,o=f;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function wl(i,o){for(o&=~Mp,o&=~Mf,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var f=31-tt(o),m=1<<f;i[f]=-1,o&=~m}}function Lv(i){if((Bt&6)!==0)throw Error(r(327));Uu();var o=Ks(i,0);if((o&1)===0)return hi(i,At()),null;var f=Ff(i,o);if(i.tag!==0&&f===2){var m=Ao(i);m!==0&&(o=m,f=Np(i,m))}if(f===1)throw f=Kc,xa(i,0),wl(i,o),hi(i,At()),f;if(f===6)throw Error(r(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Sa(i,fi,bo),hi(i,At()),null}function Fp(i,o){var f=Bt;Bt|=1;try{return i(o)}finally{Bt=f,Bt===0&&(Bu=At()+500,Zo&&Ts())}}function wa(i){vl!==null&&vl.tag===0&&(Bt&6)===0&&Uu();var o=Bt;Bt|=1;var f=Hi.transition,m=Nt;try{if(Hi.transition=null,Nt=1,i)return i()}finally{Nt=m,Hi.transition=f,Bt=o,(Bt&6)===0&&Ts()}}function Dp(){Ci=Du.current,Jt(Du)}function xa(i,o){i.finishedWork=null,i.finishedLanes=0;var f=i.timeoutHandle;if(f!==-1&&(i.timeoutHandle=-1,Mc(f)),Qr!==null)for(f=Qr.return;f!==null;){var m=f;switch(Vr(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Xo();break;case 3:cr(),Jt(an),Jt(en),cn();break;case 5:rs(m);break;case 4:cr();break;case 13:Jt(er);break;case 19:Jt(er);break;case 10:ku(m.type._context);break;case 22:case 23:Dp()}f=f.return}if(pn=i,Qr=i=xl(i.current,null),kn=Ci=o,rn=0,Kc=null,Mp=Mf=ya=0,fi=Yc=null,zi!==null){for(o=0;o<zi.length;o++)if(f=zi[o],m=f.interleaved,m!==null){f.interleaved=null;var x=m.next,E=f.pending;if(E!==null){var M=E.next;E.next=x,m.next=M}f.pending=m}zi=null}return i}function Mv(i,o){do{var f=Qr;try{if(Cu(),ol.current=dl,Pi){for(var m=Gt.memoizedState;m!==null;){var x=m.queue;x!==null&&(x.pending=null),m=m.next}Pi=!1}if(En=0,Er=gr=Gt=null,Ls=!1,di=0,Lp.current=null,f===null||f.return===null){rn=1,Kc=o,Qr=null;break}e:{var E=i,M=f.return,D=f,V=o;if(o=kn,D.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var le=V,be=D,Ee=be.tag;if((be.mode&1)===0&&(Ee===0||Ee===11||Ee===15)){var we=be.alternate;we?(be.updateQueue=we.updateQueue,be.memoizedState=we.memoizedState,be.lanes=we.lanes):(be.updateQueue=null,be.memoizedState=null)}var Fe=p(M);if(Fe!==null){Fe.flags&=-257,y(Fe,M,D,E,o),Fe.mode&1&&c(E,le,o),o=Fe,V=le;var Ge=o.updateQueue;if(Ge===null){var Xe=new Set;Xe.add(V),o.updateQueue=Xe}else Ge.add(V);break e}else{if((o&1)===0){c(E,le,o),Bp();break e}V=Error(r(426))}}else if(Vt&&D.mode&1){var Dr=p(M);if(Dr!==null){(Dr.flags&65536)===0&&(Dr.flags|=256),y(Dr,M,D,E,o),da(So(V,D));break e}}E=V=So(V,D),rn!==4&&(rn=2),Yc===null?Yc=[E]:Yc.push(E),E=M;do{switch(E.tag){case 3:E.flags|=65536,o&=-o,E.lanes|=o;var re=_f(E,V,o);ma(E,re);break e;case 1:D=V;var q=E.type,ie=E.stateNode;if((E.flags&128)===0&&(typeof q.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(gl===null||!gl.has(ie)))){E.flags|=65536,o&=-o,E.lanes|=o;var ke=a(E,D,o);ma(E,ke);break e}}E=E.return}while(E!==null)}$v(f)}catch(et){o=et,Qr===f&&f!==null&&(Qr=f=f.return);continue}break}while(!0)}function Iv(){var i=Lf.current;return Lf.current=dl,i===null?dl:i}function Bp(){(rn===0||rn===3||rn===2)&&(rn=4),pn===null||(ya&268435455)===0&&(Mf&268435455)===0||wl(pn,kn)}function Ff(i,o){var f=Bt;Bt|=2;var m=Iv();(pn!==i||kn!==o)&&(bo=null,xa(i,o));do try{Cb();break}catch(x){Mv(i,x)}while(!0);if(Cu(),Bt=f,Lf.current=m,Qr!==null)throw Error(r(261));return pn=null,kn=0,rn}function Cb(){for(;Qr!==null;)Av(Qr)}function kb(){for(;Qr!==null&&!qs();)Av(Qr)}function Av(i){var o=Fv(i.alternate,i,Ci);i.memoizedProps=i.pendingProps,o===null?$v(i):Qr=o,Lp.current=null}function $v(i){var o=i;do{var f=o.alternate;if(i=o.return,(o.flags&32768)===0){if(f=yb(f,o,Ci),f!==null){Qr=f;return}}else{if(f=wb(f,o),f!==null){f.flags&=32767,Qr=f;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{rn=6,Qr=null;return}}if(o=o.sibling,o!==null){Qr=o;return}Qr=o=i}while(o!==null);rn===0&&(rn=5)}function Sa(i,o,f){var m=Nt,x=Hi.transition;try{Hi.transition=null,Nt=1,Tb(i,o,f,m)}finally{Hi.transition=x,Nt=m}return null}function Tb(i,o,f,m){do Uu();while(vl!==null);if((Bt&6)!==0)throw Error(r(327));f=i.finishedWork;var x=i.finishedLanes;if(f===null)return null;if(i.finishedWork=null,i.finishedLanes=0,f===i.current)throw Error(r(177));i.callbackNode=null,i.callbackPriority=0;var E=f.lanes|f.childLanes;if(yp(i,E),i===pn&&(Qr=pn=null,kn=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||Af||(Af=!0,Dv(vi,function(){return Uu(),null})),E=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||E){E=Hi.transition,Hi.transition=null;var M=Nt;Nt=1;var D=Bt;Bt|=4,Lp.current=null,Sb(i,f),kv(f,i),ta(Oc),Za=!!jc,Oc=jc=null,i.current=f,bb(f),gi(),Bt=D,Nt=M,Hi.transition=E}else i.current=f;if(Af&&(Af=!1,vl=i,$f=x),E=i.pendingLanes,E===0&&(gl=null),Dt(f.stateNode),hi(i,At()),o!==null)for(m=i.onRecoverableError,f=0;f<o.length;f++)x=o[f],m(x.value,{componentStack:x.stack,digest:x.digest});if(If)throw If=!1,i=Ap,Ap=null,i;return($f&1)!==0&&i.tag!==0&&Uu(),E=i.pendingLanes,(E&1)!==0?i===$p?Xc++:(Xc=0,$p=i):Xc=0,Ts(),null}function Uu(){if(vl!==null){var i=ql($f),o=Hi.transition,f=Nt;try{if(Hi.transition=null,Nt=16>i?16:i,vl===null)var m=!1;else{if(i=vl,vl=null,$f=0,(Bt&6)!==0)throw Error(r(331));var x=Bt;for(Bt|=4,Ve=i.current;Ve!==null;){var E=Ve,M=E.child;if((Ve.flags&16)!==0){var D=E.deletions;if(D!==null){for(var V=0;V<D.length;V++){var le=D[V];for(Ve=le;Ve!==null;){var be=Ve;switch(be.tag){case 0:case 11:case 15:Gc(8,be,E)}var Ee=be.child;if(Ee!==null)Ee.return=be,Ve=Ee;else for(;Ve!==null;){be=Ve;var we=be.sibling,Fe=be.return;if(Sv(be),be===le){Ve=null;break}if(we!==null){we.return=Fe,Ve=we;break}Ve=Fe}}}var Ge=E.alternate;if(Ge!==null){var Xe=Ge.child;if(Xe!==null){Ge.child=null;do{var Dr=Xe.sibling;Xe.sibling=null,Xe=Dr}while(Xe!==null)}}Ve=E}}if((E.subtreeFlags&2064)!==0&&M!==null)M.return=E,Ve=M;else e:for(;Ve!==null;){if(E=Ve,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Gc(9,E,E.return)}var re=E.sibling;if(re!==null){re.return=E.return,Ve=re;break e}Ve=E.return}}var q=i.current;for(Ve=q;Ve!==null;){M=Ve;var ie=M.child;if((M.subtreeFlags&2064)!==0&&ie!==null)ie.return=M,Ve=ie;else e:for(M=q;Ve!==null;){if(D=Ve,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:Of(9,D)}}catch(et){Cr(D,D.return,et)}if(D===M){Ve=null;break e}var ke=D.sibling;if(ke!==null){ke.return=D.return,Ve=ke;break e}Ve=D.return}}if(Bt=x,Ts(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot($t,i)}catch{}m=!0}return m}finally{Nt=f,Hi.transition=o}}return!1}function Nv(i,o,f){o=So(f,o),o=_f(i,o,1),i=Bi(i,o,1),o=Jn(),i!==null&&(Ql(i,1,o),hi(i,o))}function Cr(i,o,f){if(i.tag===3)Nv(i,i,f);else for(;o!==null;){if(o.tag===3){Nv(o,i,f);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(gl===null||!gl.has(m))){i=So(f,i),i=a(o,i,1),o=Bi(o,i,1),i=Jn(),o!==null&&(Ql(o,1,i),hi(o,i));break}}o=o.return}}function Rb(i,o,f){var m=i.pingCache;m!==null&&m.delete(o),o=Jn(),i.pingedLanes|=i.suspendedLanes&f,pn===i&&(kn&f)===f&&(rn===4||rn===3&&(kn&130023424)===kn&&500>At()-Ip?xa(i,0):Mp|=f),hi(i,o)}function zv(i,o){o===0&&((i.mode&1)===0?o=1:(o=qi,qi<<=1,(qi&130023424)===0&&(qi=4194304)));var f=Jn();i=Xn(i,o),i!==null&&(Ql(i,o,f),hi(i,f))}function _b(i){var o=i.memoizedState,f=0;o!==null&&(f=o.retryLane),zv(i,f)}function jb(i,o){var f=0;switch(i.tag){case 13:var m=i.stateNode,x=i.memoizedState;x!==null&&(f=x.retryLane);break;case 19:m=i.stateNode;break;default:throw Error(r(314))}m!==null&&m.delete(o),zv(i,f)}var Fv;Fv=function(i,o,f){if(i!==null)if(i.memoizedProps!==o.pendingProps||an.current)T=!0;else{if((i.lanes&f)===0&&(o.flags&128)===0)return T=!1,kp(i,o,f);T=(i.flags&131072)!==0}else T=!1,Vt&&(o.flags&1048576)!==0&&yf(o,_s,o.index);switch(o.lanes=0,o.tag){case 2:var m=o.type;Rt(i,o),i=o.pendingProps;var x=fo(o,en.current);ts(o,f),x=ll(null,o,m,i,x,f);var E=al();return o.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,un(m)?(E=!0,ho(o)):E=!1,o.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,pa(o),x.updater=hl,o.stateNode=x,x._reactInternals=o,Nu(o,m,i,f),o=Qt(null,o,m,!0,E,f)):(o.tag=0,Vt&&E&&Jo(o),I(null,o,x,f),o=o.child),o;case 16:m=o.elementType;e:{switch(Rt(i,o),i=o.pendingProps,x=m._init,m=x(m._payload),o.type=m,x=o.tag=Lb(m),i=tn(m,i),x){case 0:o=Ie(null,o,m,i,f);break e;case 1:o=tr(null,o,m,i,f);break e;case 11:o=G(null,o,m,i,f);break e;case 14:o=ce(null,o,m,tn(m.type,i),f);break e}throw Error(r(306,m,""))}return o;case 0:return m=o.type,x=o.pendingProps,x=o.elementType===m?x:tn(m,x),Ie(i,o,m,x,f);case 1:return m=o.type,x=o.pendingProps,x=o.elementType===m?x:tn(m,x),tr(i,o,m,x,f);case 3:e:{if(Pn(o),i===null)throw Error(r(387));m=o.pendingProps,E=o.memoizedState,x=E.element,Ru(i,o),nl(o,m,null,f);var M=o.memoizedState;if(m=M.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},o.updateQueue.baseState=E,o.memoizedState=E,o.flags&256){x=So(Error(r(423)),o),o=Ui(i,o,m,f,x);break e}else if(m!==x){x=So(Error(r(424)),o),o=Ui(i,o,m,f,x);break e}else for(Le=Ii(o.stateNode.containerInfo.firstChild),Gn=o,Vt=!0,Kn=null,f=ci(o,null,m,f),o.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(vo(),m===x){o=hn(i,o,f);break e}I(i,o,m,f)}o=o.child}return o;case 5:return il(o),i===null&&el(o),m=o.type,x=o.pendingProps,E=i!==null?i.memoizedProps:null,M=x.children,Lc(m,x)?M=null:E!==null&&Lc(m,E)&&(o.flags|=32),gt(i,o),I(i,o,M,f),o.child;case 6:return i===null&&el(o),null;case 13:return pe(i,o,f);case 4:return Os(o,o.stateNode.containerInfo),m=o.pendingProps,i===null?o.child=yo(o,null,m,f):I(i,o,m,f),o.child;case 11:return m=o.type,x=o.pendingProps,x=o.elementType===m?x:tn(m,x),G(i,o,m,x,f);case 7:return I(i,o,o.pendingProps,f),o.child;case 8:return I(i,o,o.pendingProps.children,f),o.child;case 12:return I(i,o,o.pendingProps.children,f),o.child;case 10:e:{if(m=o.type._context,x=o.pendingProps,E=o.memoizedProps,M=x.value,Kt(fa,m._currentValue),m._currentValue=M,E!==null)if(jn(E.value,M)){if(E.children===x.children&&!an.current){o=hn(i,o,f);break e}}else for(E=o.child,E!==null&&(E.return=o);E!==null;){var D=E.dependencies;if(D!==null){M=E.child;for(var V=D.firstContext;V!==null;){if(V.context===m){if(E.tag===1){V=Di(-1,f&-f),V.tag=2;var le=E.updateQueue;if(le!==null){le=le.shared;var be=le.pending;be===null?V.next=V:(V.next=be.next,be.next=V),le.pending=V}}E.lanes|=f,V=E.alternate,V!==null&&(V.lanes|=f),Tu(E.return,f,o),D.lanes|=f;break}V=V.next}}else if(E.tag===10)M=E.type===o.type?null:E.child;else if(E.tag===18){if(M=E.return,M===null)throw Error(r(341));M.lanes|=f,D=M.alternate,D!==null&&(D.lanes|=f),Tu(M,f,o),M=E.sibling}else M=E.child;if(M!==null)M.return=E;else for(M=E;M!==null;){if(M===o){M=null;break}if(E=M.sibling,E!==null){E.return=M.return,M=E;break}M=M.return}E=M}I(i,o,x.children,f),o=o.child}return o;case 9:return x=o.type,m=o.pendingProps.children,ts(o,f),x=bn(x),m=m(x),o.flags|=1,I(i,o,m,f),o.child;case 14:return m=o.type,x=tn(m,o.pendingProps),x=tn(m.type,x),ce(i,o,m,x,f);case 15:return Pe(i,o,o.type,o.pendingProps,f);case 17:return m=o.type,x=o.pendingProps,x=o.elementType===m?x:tn(m,x),Rt(i,o),o.tag=1,un(m)?(i=!0,ho(o)):i=!1,ts(o,f),Rf(o,m,x),Nu(o,m,x,f),Qt(null,o,m,!0,i,f);case 19:return Fr(i,o,f);case 22:return He(i,o,f)}throw Error(r(156,o.tag))};function Dv(i,o){return rr(i,o)}function Ob(i,o,f,m){this.tag=i,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wi(i,o,f,m){return new Ob(i,o,f,m)}function Up(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Lb(i){if(typeof i=="function")return Up(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Y)return 11;if(i===Te)return 14}return 2}function xl(i,o){var f=i.alternate;return f===null?(f=Wi(i.tag,o,i.key,i.mode),f.elementType=i.elementType,f.type=i.type,f.stateNode=i.stateNode,f.alternate=i,i.alternate=f):(f.pendingProps=o,f.type=i.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=i.flags&14680064,f.childLanes=i.childLanes,f.lanes=i.lanes,f.child=i.child,f.memoizedProps=i.memoizedProps,f.memoizedState=i.memoizedState,f.updateQueue=i.updateQueue,o=i.dependencies,f.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},f.sibling=i.sibling,f.index=i.index,f.ref=i.ref,f}function Df(i,o,f,m,x,E){var M=2;if(m=i,typeof i=="function")Up(i)&&(M=1);else if(typeof i=="string")M=5;else e:switch(i){case $:return ba(f.children,x,E,o);case K:M=8,x|=8;break;case fe:return i=Wi(12,f,o,x|2),i.elementType=fe,i.lanes=E,i;case xe:return i=Wi(13,f,o,x),i.elementType=xe,i.lanes=E,i;case te:return i=Wi(19,f,o,x),i.elementType=te,i.lanes=E,i;case je:return Bf(f,x,E,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case J:M=10;break e;case H:M=9;break e;case Y:M=11;break e;case Te:M=14;break e;case de:M=16,m=null;break e}throw Error(r(130,i==null?i:typeof i,""))}return o=Wi(M,f,o,x),o.elementType=i,o.type=m,o.lanes=E,o}function ba(i,o,f,m){return i=Wi(7,i,m,o),i.lanes=f,i}function Bf(i,o,f,m){return i=Wi(22,i,m,o),i.elementType=je,i.lanes=f,i.stateNode={isHidden:!1},i}function Hp(i,o,f){return i=Wi(6,i,null,o),i.lanes=f,i}function Wp(i,o,f){return o=Wi(4,i.children!==null?i.children:[],i.key,o),o.lanes=f,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function Mb(i,o,f,m,x){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bn(0),this.expirationTimes=Bn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bn(0),this.identifierPrefix=m,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Vp(i,o,f,m,x,E,M,D,V){return i=new Mb(i,o,f,D,V),o===1?(o=1,E===!0&&(o|=8)):o=0,E=Wi(3,null,null,o),i.current=E,E.stateNode=i,E.memoizedState={element:m,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},pa(E),i}function Ib(i,o,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:m==null?null:""+m,children:i,containerInfo:o,implementation:f}}function Bv(i){if(!i)return $i;i=i._reactInternals;e:{if(Ue(i)!==i||i.tag!==1)throw Error(r(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(un(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(r(171))}if(i.tag===1){var f=i.type;if(un(f))return xu(i,f,o)}return o}function Uv(i,o,f,m,x,E,M,D,V){return i=Vp(f,m,!0,i,x,E,M,D,V),i.context=Bv(null),f=i.current,m=Jn(),x=yl(f),E=Di(m,x),E.callback=o??null,Bi(f,E,x),i.current.lanes=x,Ql(i,x,m),hi(i,m),i}function Uf(i,o,f,m){var x=o.current,E=Jn(),M=yl(x);return f=Bv(f),o.context===null?o.context=f:o.pendingContext=f,o=Di(E,M),o.payload={element:i},m=m===void 0?null:m,m!==null&&(o.callback=m),i=Bi(x,o,M),i!==null&&(ls(i,x,M,E),_u(i,x,M)),M}function Hf(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Hv(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var f=i.retryLane;i.retryLane=f!==0&&f<o?f:o}}function Qp(i,o){Hv(i,o),(i=i.alternate)&&Hv(i,o)}function Ab(){return null}var Wv=typeof reportError=="function"?reportError:function(i){console.error(i)};function qp(i){this._internalRoot=i}Wf.prototype.render=qp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));Uf(i,o,null,null)},Wf.prototype.unmount=qp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;wa(function(){Uf(null,i,null,null)}),o[Ai]=null}};function Wf(i){this._internalRoot=i}Wf.prototype.unstable_scheduleHydration=function(i){if(i){var o=Gd();i={blockedOn:null,target:i,priority:o};for(var f=0;f<Mi.length&&o!==0&&o<Mi[f].priority;f++);Mi.splice(f,0,i),f===0&&Ka(i)}};function Gp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Vf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Vv(){}function $b(i,o,f,m,x){if(x){if(typeof m=="function"){var E=m;m=function(){var le=Hf(M);E.call(le)}}var M=Uv(o,m,i,0,null,!1,!1,"",Vv);return i._reactRootContainer=M,i[Ai]=M.current,oo(i.nodeType===8?i.parentNode:i),wa(),M}for(;x=i.lastChild;)i.removeChild(x);if(typeof m=="function"){var D=m;m=function(){var le=Hf(V);D.call(le)}}var V=Vp(i,0,!1,null,null,!1,!1,"",Vv);return i._reactRootContainer=V,i[Ai]=V.current,oo(i.nodeType===8?i.parentNode:i),wa(function(){Uf(o,V,f,m)}),V}function Qf(i,o,f,m,x){var E=f._reactRootContainer;if(E){var M=E;if(typeof x=="function"){var D=x;x=function(){var V=Hf(M);D.call(V)}}Uf(o,M,i,x)}else M=$b(f,o,i,x,m);return Hf(M)}$o=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var f=Br(o.pendingLanes);f!==0&&(uc(o,f|1),hi(o,At()),(Bt&6)===0&&(Bu=At()+500,Ts()))}break;case 13:wa(function(){var m=Xn(i,1);if(m!==null){var x=Jn();ls(m,i,1,x)}}),Qp(i,1)}},No=function(i){if(i.tag===13){var o=Xn(i,134217728);if(o!==null){var f=Jn();ls(o,i,134217728,f)}Qp(i,134217728)}},qd=function(i){if(i.tag===13){var o=yl(i),f=Xn(i,o);if(f!==null){var m=Jn();ls(f,i,o,m)}Qp(i,o)}},Gd=function(){return Nt},qa=function(i,o){var f=Nt;try{return Nt=i,o()}finally{Nt=f}},It=function(i,o,f){switch(o){case"input":if(Or(i,f),o=f.name,f.type==="radio"&&o!=null){for(f=i;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<f.length;o++){var m=f[o];if(m!==i&&m.form===i.form){var x=Wr(m);if(!x)throw Error(r(90));Ce(m),Or(m,x)}}}break;case"textarea":on(i,f);break;case"select":o=f.value,o!=null&&ri(i,!!f.multiple,o,!1)}},ji=Fp,ni=wa;var Nb={usingClientEntryPoint:!1,Events:[aa,$r,Wr,zn,Fn,Fp]},Zc={findFiberByHostInstance:Cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zb={bundleType:Zc.bundleType,version:Zc.version,rendererPackageName:Zc.rendererPackageName,rendererConfig:Zc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Wt(i),i===null?null:i.stateNode},findFiberByHostInstance:Zc.findFiberByHostInstance||Ab,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qf.isDisabled&&qf.supportsFiber)try{$t=qf.inject(zb),or=qf}catch{}}return pi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nb,pi.createPortal=function(i,o){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gp(o))throw Error(r(200));return Ib(i,o,null,f)},pi.createRoot=function(i,o){if(!Gp(i))throw Error(r(299));var f=!1,m="",x=Wv;return o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(x=o.onRecoverableError)),o=Vp(i,1,!1,null,null,f,!1,m,x),i[Ai]=o.current,oo(i.nodeType===8?i.parentNode:i),new qp(o)},pi.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=Wt(o),i=i===null?null:i.stateNode,i},pi.flushSync=function(i){return wa(i)},pi.hydrate=function(i,o,f){if(!Vf(o))throw Error(r(200));return Qf(null,i,o,!0,f)},pi.hydrateRoot=function(i,o,f){if(!Gp(i))throw Error(r(405));var m=f!=null&&f.hydratedSources||null,x=!1,E="",M=Wv;if(f!=null&&(f.unstable_strictMode===!0&&(x=!0),f.identifierPrefix!==void 0&&(E=f.identifierPrefix),f.onRecoverableError!==void 0&&(M=f.onRecoverableError)),o=Uv(o,null,i,1,f??null,x,!1,E,M),i[Ai]=o.current,oo(i),m)for(i=0;i<m.length;i++)f=m[i],x=f._getVersion,x=x(f._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[f,x]:o.mutableSourceEagerHydrationData.push(f,x);return new Wf(o)},pi.render=function(i,o,f){if(!Vf(o))throw Error(r(200));return Qf(null,i,o,!1,f)},pi.unmountComponentAtNode=function(i){if(!Vf(i))throw Error(r(40));return i._reactRootContainer?(wa(function(){Qf(null,null,i,!1,function(){i._reactRootContainer=null,i[Ai]=null})}),!0):!1},pi.unstable_batchedUpdates=Fp,pi.unstable_renderSubtreeIntoContainer=function(i,o,f,m){if(!Vf(f))throw Error(r(200));if(i==null||i._reactInternals===void 0)throw Error(r(38));return Qf(i,o,f,!1,m)},pi.version="18.3.1-next-f1338f8080-20240426",pi}var Jv;function K0(){if(Jv)return Xp.exports;Jv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xp.exports=Wb(),Xp.exports}var ey;function Vb(){if(ey)return Kf;ey=1;var t=K0();return Kf.createRoot=t.createRoot,Kf.hydrateRoot=t.hydrateRoot,Kf}var _g=Vb();const Qb=Ua(_g),qb=Hh({__proto__:null,default:Qb},[_g]);var jg=K0();const Gb=Ua(jg),Y0=Hh({__proto__:null,default:Gb},[jg]);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vr(){return vr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vr.apply(this,arguments)}var qr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qr||(qr={}));const ty="popstate";function Kb(t){t===void 0&&(t={});function e(n,s){let{pathname:l,search:u,hash:d}=n.location;return kd("",{pathname:l,search:u,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Da(s)}return Xb(e,r,null,t)}function Ot(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ec(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Yb(){return Math.random().toString(36).substr(2,8)}function ry(t,e){return{usr:t.state,key:t.key,idx:e}}function kd(t,e,r,n){return r===void 0&&(r=null),vr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bl(e):e,{state:r,key:e&&e.key||n||Yb()})}function Da(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Bl(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function Xb(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:l=!1}=n,u=s.history,d=qr.Pop,h=null,v=g();v==null&&(v=0,u.replaceState(vr({},u.state,{idx:v}),""));function g(){return(u.state||{idx:null}).idx}function w(){d=qr.Pop;let j=g(),O=j==null?null:j-v;v=j,h&&h({action:d,location:C.location,delta:O})}function b(j,O){d=qr.Push;let L=kd(C.location,j,O);v=g()+1;let A=ry(L,v),F=C.createHref(L);try{u.pushState(A,"",F)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;s.location.assign(F)}l&&h&&h({action:d,location:C.location,delta:1})}function R(j,O){d=qr.Replace;let L=kd(C.location,j,O);v=g();let A=ry(L,v),F=C.createHref(L);u.replaceState(A,"",F),l&&h&&h({action:d,location:C.location,delta:0})}function P(j){let O=s.location.origin!=="null"?s.location.origin:s.location.href,L=typeof j=="string"?j:Da(j);return L=L.replace(/ $/,"%20"),Ot(O,"No window.location.(origin|href) available to create URL for href: "+L),new URL(L,O)}let C={get action(){return d},get location(){return t(s,u)},listen(j){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(ty,w),h=j,()=>{s.removeEventListener(ty,w),h=null}},createHref(j){return e(s,j)},createURL:P,encodeLocation(j){let O=P(j);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:b,replace:R,go(j){return u.go(j)}};return C}var Xt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Xt||(Xt={}));const Zb=new Set(["lazy","caseSensitive","path","id","index","children"]);function Jb(t){return t.index===!0}function Th(t,e,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),t.map((s,l)=>{let u=[...r,String(l)],d=typeof s.id=="string"?s.id:u.join("-");if(Ot(s.index!==!0||!s.children,"Cannot specify children on an index route"),Ot(!n[d],'Found a route id collision on id "'+d+`".  Route id's must be globally unique within Data Router usages`),Jb(s)){let h=vr({},s,e(s),{id:d});return n[d]=h,h}else{let h=vr({},s,e(s),{id:d,children:void 0});return n[d]=h,s.children&&(h.children=Th(s.children,e,u,n)),h}})}function _a(t,e,r){return r===void 0&&(r="/"),vh(t,e,r,!1)}function vh(t,e,r,n){let s=typeof e=="string"?Bl(e):e,l=rc(s.pathname||"/",r);if(l==null)return null;let u=X0(t);tE(u);let d=null;for(let h=0;d==null&&h<u.length;++h){let v=fE(l);d=cE(u[h],v,n)}return d}function eE(t,e){let{route:r,pathname:n,params:s}=t;return{id:r.id,pathname:n,params:s,data:e[r.id],handle:r.handle}}function X0(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(l,u,d)=>{let h={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};h.relativePath.startsWith("/")&&(Ot(h.relativePath.startsWith(n),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(n.length));let v=Co([n,h.relativePath]),g=r.concat(h);l.children&&l.children.length>0&&(Ot(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),X0(l.children,e,g,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:aE(v,l.index),routesMeta:g})};return t.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))s(l,u);else for(let h of Z0(l.path))s(l,u,h)}),e}function Z0(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return s?[l,""]:[l];let u=Z0(n.join("/")),d=[];return d.push(...u.map(h=>h===""?l:[l,h].join("/"))),s&&d.push(...u),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function tE(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:uE(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const rE=/^:[\w-]+$/,nE=3,iE=2,sE=1,oE=10,lE=-2,ny=t=>t==="*";function aE(t,e){let r=t.split("/"),n=r.length;return r.some(ny)&&(n+=lE),e&&(n+=iE),r.filter(s=>!ny(s)).reduce((s,l)=>s+(rE.test(l)?nE:l===""?sE:oE),n)}function uE(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function cE(t,e,r){r===void 0&&(r=!1);let{routesMeta:n}=t,s={},l="/",u=[];for(let d=0;d<n.length;++d){let h=n[d],v=d===n.length-1,g=l==="/"?e:e.slice(l.length)||"/",w=iy({path:h.relativePath,caseSensitive:h.caseSensitive,end:v},g),b=h.route;if(!w&&v&&r&&!n[n.length-1].route.index&&(w=iy({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!w)return null;Object.assign(s,w.params),u.push({params:s,pathname:Co([l,w.pathname]),pathnameBase:mE(Co([l,w.pathnameBase])),route:b}),w.pathnameBase!=="/"&&(l=Co([l,w.pathnameBase]))}return u}function iy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=dE(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let l=s[0],u=l.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:n.reduce((v,g,w)=>{let{paramName:b,isOptional:R}=g;if(b==="*"){let C=d[w]||"";u=l.slice(0,l.length-C.length).replace(/(.)\/+$/,"$1")}const P=d[w];return R&&!P?v[b]=void 0:v[b]=(P||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:u,pattern:t}}function dE(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),ec(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,h)=>(n.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function fE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ec(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function rc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function hE(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Bl(t):t;return{pathname:r?r.startsWith("/")?r:pE(r,e):e,search:gE(n),hash:vE(s)}}function pE(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function em(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function J0(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Og(t,e){let r=J0(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Lg(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Bl(t):(s=vr({},t),Ot(!s.pathname||!s.pathname.includes("?"),em("?","pathname","search",s)),Ot(!s.pathname||!s.pathname.includes("#"),em("#","pathname","hash",s)),Ot(!s.search||!s.search.includes("#"),em("#","search","hash",s)));let l=t===""||s.pathname==="",u=l?"/":s.pathname,d;if(u==null)d=r;else{let w=e.length-1;if(!n&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),w-=1;s.pathname=b.join("/")}d=w>=0?e[w]:"/"}let h=hE(s,d),v=u&&u!=="/"&&u.endsWith("/"),g=(l||u===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(v||g)&&(h.pathname+="/"),h}const Co=t=>t.join("/").replace(/\/\/+/g,"/"),mE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Rh{constructor(e,r,n,s){s===void 0&&(s=!1),this.status=e,this.statusText=r||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function Td(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ew=["post","put","patch","delete"],yE=new Set(ew),wE=["get",...ew],xE=new Set(wE),SE=new Set([301,302,303,307,308]),bE=new Set([307,308]),tm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},EE={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ed={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Mg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PE=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),tw="remix-router-transitions";function CE(t){const e=t.window?t.window:typeof window<"u"?window:void 0,r=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",n=!r;Ot(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let W=t.detectErrorBoundary;s=X=>({hasErrorBoundary:W(X)})}else s=PE;let l={},u=Th(t.routes,s,void 0,l),d,h=t.basename||"/",v=t.dataStrategy||_E,g=t.patchRoutesOnNavigation,w=vr({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),b=null,R=new Set,P=null,C=null,j=null,O=t.hydrationData!=null,L=_a(u,t.history.location,h),A=!1,F=null;if(L==null&&!g){let W=mi(404,{pathname:t.history.location.pathname}),{matches:X,route:ae}=my(u);L=X,F={[ae.id]:W}}L&&!t.hydrationData&&ni(L,u,t.history.location.pathname).active&&(L=null);let z;if(L)if(L.some(W=>W.route.lazy))z=!1;else if(!L.some(W=>W.route.loader))z=!0;else if(w.v7_partialHydration){let W=t.hydrationData?t.hydrationData.loaderData:null,X=t.hydrationData?t.hydrationData.errors:null;if(X){let ae=L.findIndex(ge=>X[ge.route.id]!==void 0);z=L.slice(0,ae+1).every(ge=>!Vm(ge.route,W,X))}else z=L.every(ae=>!Vm(ae.route,W,X))}else z=t.hydrationData!=null;else if(z=!1,L=[],w.v7_partialHydration){let W=ni(null,u,t.history.location.pathname);W.active&&W.matches&&(A=!0,L=W.matches)}let B,$={historyAction:t.history.action,location:t.history.location,matches:L,initialized:z,navigation:tm,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||F,fetchers:new Map,blockers:new Map},K=qr.Pop,fe=!1,J,H=!1,Y=new Map,xe=null,te=!1,Te=!1,de=[],je=new Set,ee=new Map,Q=0,ue=-1,U=new Map,oe=new Set,_e=new Map,Me=new Map,Ne=new Set,Ke=new Map,Qe=new Map,nt;function ft(){if(b=t.history.listen(W=>{let{action:X,location:ae,delta:ge}=W;if(nt){nt(),nt=void 0;return}ec(Qe.size===0||ge!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Oe=It({currentLocation:$.location,nextLocation:ae,historyAction:X});if(Oe&&ge!=null){let Ze=new Promise(st=>{nt=st});t.history.go(ge*-1),Mt(Oe,{state:"blocked",location:ae,proceed(){Mt(Oe,{state:"proceeding",proceed:void 0,reset:void 0,location:ae}),Ze.then(()=>t.history.go(ge))},reset(){let st=new Map($.blockers);st.set(Oe,ed),Ce({blockers:st})}});return}return pr(X,ae)}),r){HE(e,Y);let W=()=>WE(e,Y);e.addEventListener("pagehide",W),xe=()=>e.removeEventListener("pagehide",W)}return $.initialized||pr(qr.Pop,$.location,{initialHydration:!0}),B}function Ct(){b&&b(),xe&&xe(),R.clear(),J&&J.abort(),$.fetchers.forEach((W,X)=>wt(X)),$.blockers.forEach((W,X)=>Ut(X))}function Ye(W){return R.add(W),()=>R.delete(W)}function Ce(W,X){X===void 0&&(X={}),$=vr({},$,W);let ae=[],ge=[];w.v7_fetcherPersist&&$.fetchers.forEach((Oe,Ze)=>{Oe.state==="idle"&&(Ne.has(Ze)?ge.push(Ze):ae.push(Ze))}),Ne.forEach(Oe=>{!$.fetchers.has(Oe)&&!ee.has(Oe)&&ge.push(Oe)}),[...R].forEach(Oe=>Oe($,{deletedFetchers:ge,viewTransitionOpts:X.viewTransitionOpts,flushSync:X.flushSync===!0})),w.v7_fetcherPersist?(ae.forEach(Oe=>$.fetchers.delete(Oe)),ge.forEach(Oe=>wt(Oe))):ge.forEach(Oe=>Ne.delete(Oe))}function Re(W,X,ae){var ge,Oe;let{flushSync:Ze}=ae===void 0?{}:ae,st=$.actionData!=null&&$.navigation.formMethod!=null&&cs($.navigation.formMethod)&&$.navigation.state==="loading"&&((ge=W.state)==null?void 0:ge._isRedirect)!==!0,We;X.actionData?Object.keys(X.actionData).length>0?We=X.actionData:We=null:st?We=$.actionData:We=null;let qe=X.loaderData?hy($.loaderData,X.loaderData,X.matches||[],X.errors):$.loaderData,Be=$.blockers;Be.size>0&&(Be=new Map(Be),Be.forEach((Et,Lr)=>Be.set(Lr,ed)));let Ue=fe===!0||$.navigation.formMethod!=null&&cs($.navigation.formMethod)&&((Oe=W.state)==null?void 0:Oe._isRedirect)!==!0;d&&(u=d,d=void 0),te||K===qr.Pop||(K===qr.Push?t.history.push(W,W.state):K===qr.Replace&&t.history.replace(W,W.state));let mt;if(K===qr.Pop){let Et=Y.get($.location.pathname);Et&&Et.has(W.pathname)?mt={currentLocation:$.location,nextLocation:W}:Y.has(W.pathname)&&(mt={currentLocation:W,nextLocation:$.location})}else if(H){let Et=Y.get($.location.pathname);Et?Et.add(W.pathname):(Et=new Set([W.pathname]),Y.set($.location.pathname,Et)),mt={currentLocation:$.location,nextLocation:W}}Ce(vr({},X,{actionData:We,loaderData:qe,historyAction:K,location:W,initialized:!0,navigation:tm,revalidation:"idle",restoreScrollPosition:ji(W,X.matches||$.matches),preventScrollReset:Ue,blockers:Be}),{viewTransitionOpts:mt,flushSync:Ze===!0}),K=qr.Pop,fe=!1,H=!1,te=!1,Te=!1,de=[]}async function bt(W,X){if(typeof W=="number"){t.history.go(W);return}let ae=Wm($.location,$.matches,h,w.v7_prependBasename,W,w.v7_relativeSplatPath,X==null?void 0:X.fromRouteId,X==null?void 0:X.relative),{path:ge,submission:Oe,error:Ze}=sy(w.v7_normalizeFormMethod,!1,ae,X),st=$.location,We=kd($.location,ge,X&&X.state);We=vr({},We,t.history.encodeLocation(We));let qe=X&&X.replace!=null?X.replace:void 0,Be=qr.Push;qe===!0?Be=qr.Replace:qe===!1||Oe!=null&&cs(Oe.formMethod)&&Oe.formAction===$.location.pathname+$.location.search&&(Be=qr.Replace);let Ue=X&&"preventScrollReset"in X?X.preventScrollReset===!0:void 0,mt=(X&&X.flushSync)===!0,Et=It({currentLocation:st,nextLocation:We,historyAction:Be});if(Et){Mt(Et,{state:"blocked",location:We,proceed(){Mt(Et,{state:"proceeding",proceed:void 0,reset:void 0,location:We}),bt(W,X)},reset(){let Lr=new Map($.blockers);Lr.set(Et,ed),Ce({blockers:Lr})}});return}return await pr(Be,We,{submission:Oe,pendingError:Ze,preventScrollReset:Ue,replace:X&&X.replace,enableViewTransition:X&&X.viewTransition,flushSync:mt})}function jr(){if(Se(),Ce({revalidation:"loading"}),$.navigation.state!=="submitting"){if($.navigation.state==="idle"){pr($.historyAction,$.location,{startUninterruptedRevalidation:!0});return}pr(K||$.historyAction,$.navigation.location,{overrideNavigation:$.navigation,enableViewTransition:H===!0})}}async function pr(W,X,ae){J&&J.abort(),J=null,K=W,te=(ae&&ae.startUninterruptedRevalidation)===!0,Fn($.location,$.matches),fe=(ae&&ae.preventScrollReset)===!0,H=(ae&&ae.enableViewTransition)===!0;let ge=d||u,Oe=ae&&ae.overrideNavigation,Ze=ae!=null&&ae.initialHydration&&$.matches&&$.matches.length>0&&!A?$.matches:_a(ge,X,h),st=(ae&&ae.flushSync)===!0;if(Ze&&$.initialized&&!Te&&AE($.location,X)&&!(ae&&ae.submission&&cs(ae.submission.formMethod))){Re(X,{matches:Ze},{flushSync:st});return}let We=ni(Ze,ge,X.pathname);if(We.active&&We.matches&&(Ze=We.matches),!Ze){let{error:Wt,notFoundMatches:_t,route:rr}=qt(X.pathname);Re(X,{matches:_t,loaderData:{},errors:{[rr.id]:Wt}},{flushSync:st});return}J=new AbortController;let qe=Hu(t.history,X,J.signal,ae&&ae.submission),Be;if(ae&&ae.pendingError)Be=[ja(Ze).route.id,{type:Xt.error,error:ae.pendingError}];else if(ae&&ae.submission&&cs(ae.submission.formMethod)){let Wt=await Or(qe,X,ae.submission,Ze,We.active,{replace:ae.replace,flushSync:st});if(Wt.shortCircuited)return;if(Wt.pendingActionResult){let[_t,rr]=Wt.pendingActionResult;if(Ti(rr)&&Td(rr.error)&&rr.error.status===404){J=null,Re(X,{matches:Wt.matches,loaderData:{},errors:{[_t]:rr.error}});return}}Ze=Wt.matches||Ze,Be=Wt.pendingActionResult,Oe=rm(X,ae.submission),st=!1,We.active=!1,qe=Hu(t.history,qe.url,qe.signal)}let{shortCircuited:Ue,matches:mt,loaderData:Et,errors:Lr}=await Sr(qe,X,Ze,We.active,Oe,ae&&ae.submission,ae&&ae.fetcherSubmission,ae&&ae.replace,ae&&ae.initialHydration===!0,st,Be);Ue||(J=null,Re(X,vr({matches:mt||Ze},py(Be),{loaderData:Et,errors:Lr})))}async function Or(W,X,ae,ge,Oe,Ze){Ze===void 0&&(Ze={}),Se();let st=BE(X,ae);if(Ce({navigation:st},{flushSync:Ze.flushSync===!0}),Oe){let Be=await ii(ge,X.pathname,W.signal);if(Be.type==="aborted")return{shortCircuited:!0};if(Be.type==="error"){let Ue=ja(Be.partialMatches).route.id;return{matches:Be.partialMatches,pendingActionResult:[Ue,{type:Xt.error,error:Be.error}]}}else if(Be.matches)ge=Be.matches;else{let{notFoundMatches:Ue,error:mt,route:Et}=qt(X.pathname);return{matches:Ue,pendingActionResult:[Et.id,{type:Xt.error,error:mt}]}}}let We,qe=hd(ge,X);if(!qe.route.action&&!qe.route.lazy)We={type:Xt.error,error:mi(405,{method:W.method,pathname:X.pathname,routeId:qe.route.id})};else if(We=(await ve("action",$,W,[qe],ge,null))[qe.route.id],W.signal.aborted)return{shortCircuited:!0};if($a(We)){let Be;return Ze&&Ze.replace!=null?Be=Ze.replace:Be=cy(We.response.headers.get("Location"),new URL(W.url),h)===$.location.pathname+$.location.search,await on(W,We,!0,{submission:ae,replace:Be}),{shortCircuited:!0}}if(Ml(We))throw mi(400,{type:"defer-action"});if(Ti(We)){let Be=ja(ge,qe.route.id);return(Ze&&Ze.replace)!==!0&&(K=qr.Push),{matches:ge,pendingActionResult:[Be.route.id,We]}}return{matches:ge,pendingActionResult:[qe.route.id,We]}}async function Sr(W,X,ae,ge,Oe,Ze,st,We,qe,Be,Ue){let mt=Oe||rm(X,Ze),Et=Ze||st||vy(mt),Lr=!te&&(!w.v7_partialHydration||!qe);if(ge){if(Lr){let $t=hs(Ue);Ce(vr({navigation:mt},$t!==void 0?{actionData:$t}:{}),{flushSync:Be})}let Pt=await ii(ae,X.pathname,W.signal);if(Pt.type==="aborted")return{shortCircuited:!0};if(Pt.type==="error"){let $t=ja(Pt.partialMatches).route.id;return{matches:Pt.partialMatches,loaderData:{},errors:{[$t]:Pt.error}}}else if(Pt.matches)ae=Pt.matches;else{let{error:$t,notFoundMatches:or,route:Dt}=qt(X.pathname);return{matches:or,loaderData:{},errors:{[Dt.id]:$t}}}}let Wt=d||u,[_t,rr]=ly(t.history,$,ae,Et,X,w.v7_partialHydration&&qe===!0,w.v7_skipActionErrorRevalidation,Te,de,je,Ne,_e,oe,Wt,h,Ue);if(Ft(Pt=>!(ae&&ae.some($t=>$t.route.id===Pt))||_t&&_t.some($t=>$t.route.id===Pt)),ue=++Q,_t.length===0&&rr.length===0){let Pt=ze();return Re(X,vr({matches:ae,loaderData:{},errors:Ue&&Ti(Ue[1])?{[Ue[0]]:Ue[1].error}:null},py(Ue),Pt?{fetchers:new Map($.fetchers)}:{}),{flushSync:Be}),{shortCircuited:!0}}if(Lr){let Pt={};if(!ge){Pt.navigation=mt;let $t=hs(Ue);$t!==void 0&&(Pt.actionData=$t)}rr.length>0&&(Pt.fetchers=Tn(rr)),Ce(Pt,{flushSync:Be})}rr.forEach(Pt=>{me(Pt.key),Pt.controller&&ee.set(Pt.key,Pt.controller)});let Qi=()=>rr.forEach(Pt=>me(Pt.key));J&&J.signal.addEventListener("abort",Qi);let{loaderResults:qs,fetcherResults:gi}=await ne($,ae,_t,rr,W);if(W.signal.aborted)return{shortCircuited:!0};J&&J.signal.removeEventListener("abort",Qi),rr.forEach(Pt=>ee.delete(Pt.key));let At=Yf(qs);if(At)return await on(W,At.result,!0,{replace:We}),{shortCircuited:!0};if(At=Yf(gi),At)return oe.add(At.key),await on(W,At.result,!0,{replace:We}),{shortCircuited:!0};let{loaderData:Gs,errors:Dn}=fy($,ae,qs,Ue,rr,gi,Ke);Ke.forEach((Pt,$t)=>{Pt.subscribe(or=>{(or||Pt.done)&&Ke.delete($t)})}),w.v7_partialHydration&&qe&&$.errors&&(Dn=vr({},$.errors,Dn));let si=ze(),vi=$e(ue),Io=si||vi||rr.length>0;return vr({matches:ae,loaderData:Gs,errors:Dn},Io?{fetchers:new Map($.fetchers)}:{})}function hs(W){if(W&&!Ti(W[1]))return{[W[0]]:W[1].data};if($.actionData)return Object.keys($.actionData).length===0?null:$.actionData}function Tn(W){return W.forEach(X=>{let ae=$.fetchers.get(X.key),ge=td(void 0,ae?ae.data:void 0);$.fetchers.set(X.key,ge)}),new Map($.fetchers)}function ri(W,X,ae,ge){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");me(W);let Oe=(ge&&ge.flushSync)===!0,Ze=d||u,st=Wm($.location,$.matches,h,w.v7_prependBasename,ae,w.v7_relativeSplatPath,X,ge==null?void 0:ge.relative),We=_a(Ze,st,h),qe=ni(We,Ze,st);if(qe.active&&qe.matches&&(We=qe.matches),!We){lt(W,X,mi(404,{pathname:st}),{flushSync:Oe});return}let{path:Be,submission:Ue,error:mt}=sy(w.v7_normalizeFormMethod,!0,st,ge);if(mt){lt(W,X,mt,{flushSync:Oe});return}let Et=hd(We,Be),Lr=(ge&&ge.preventScrollReset)===!0;if(Ue&&cs(Ue.formMethod)){_i(W,X,Be,Et,We,qe.active,Oe,Lr,Ue);return}_e.set(W,{routeId:X,path:Be}),ps(W,X,Be,Et,We,qe.active,Oe,Lr,Ue)}async function _i(W,X,ae,ge,Oe,Ze,st,We,qe){Se(),_e.delete(W);function Be(tt){if(!tt.route.action&&!tt.route.lazy){let gn=mi(405,{method:qe.formMethod,pathname:ae,routeId:X});return lt(W,X,gn,{flushSync:st}),!0}return!1}if(!Ze&&Be(ge))return;let Ue=$.fetchers.get(W);ye(W,UE(qe,Ue),{flushSync:st});let mt=new AbortController,Et=Hu(t.history,ae,mt.signal,qe);if(Ze){let tt=await ii(Oe,new URL(Et.url).pathname,Et.signal,W);if(tt.type==="aborted")return;if(tt.type==="error"){lt(W,X,tt.error,{flushSync:st});return}else if(tt.matches){if(Oe=tt.matches,ge=hd(Oe,ae),Be(ge))return}else{lt(W,X,mi(404,{pathname:ae}),{flushSync:st});return}}ee.set(W,mt);let Lr=Q,_t=(await ve("action",$,Et,[ge],Oe,W))[ge.route.id];if(Et.signal.aborted){ee.get(W)===mt&&ee.delete(W);return}if(w.v7_fetcherPersist&&Ne.has(W)){if($a(_t)||Ti(_t)){ye(W,Tl(void 0));return}}else{if($a(_t))if(ee.delete(W),ue>Lr){ye(W,Tl(void 0));return}else return oe.add(W),ye(W,td(qe)),on(Et,_t,!1,{fetcherSubmission:qe,preventScrollReset:We});if(Ti(_t)){lt(W,X,_t.error);return}}if(Ml(_t))throw mi(400,{type:"defer-action"});let rr=$.navigation.location||$.location,Qi=Hu(t.history,rr,mt.signal),qs=d||u,gi=$.navigation.state!=="idle"?_a(qs,$.navigation.location,h):$.matches;Ot(gi,"Didn't find any matches after fetcher action");let At=++Q;U.set(W,At);let Gs=td(qe,_t.data);$.fetchers.set(W,Gs);let[Dn,si]=ly(t.history,$,gi,qe,rr,!1,w.v7_skipActionErrorRevalidation,Te,de,je,Ne,_e,oe,qs,h,[ge.route.id,_t]);si.filter(tt=>tt.key!==W).forEach(tt=>{let gn=tt.key,Mr=$.fetchers.get(gn),ln=td(void 0,Mr?Mr.data:void 0);$.fetchers.set(gn,ln),me(gn),tt.controller&&ee.set(gn,tt.controller)}),Ce({fetchers:new Map($.fetchers)});let vi=()=>si.forEach(tt=>me(tt.key));mt.signal.addEventListener("abort",vi);let{loaderResults:Io,fetcherResults:Pt}=await ne($,gi,Dn,si,Qi);if(mt.signal.aborted)return;mt.signal.removeEventListener("abort",vi),U.delete(W),ee.delete(W),si.forEach(tt=>ee.delete(tt.key));let $t=Yf(Io);if($t)return on(Qi,$t.result,!1,{preventScrollReset:We});if($t=Yf(Pt),$t)return oe.add($t.key),on(Qi,$t.result,!1,{preventScrollReset:We});let{loaderData:or,errors:Dt}=fy($,gi,Io,void 0,si,Pt,Ke);if($.fetchers.has(W)){let tt=Tl(_t.data);$.fetchers.set(W,tt)}$e(At),$.navigation.state==="loading"&&At>ue?(Ot(K,"Expected pending action"),J&&J.abort(),Re($.navigation.location,{matches:gi,loaderData:or,errors:Dt,fetchers:new Map($.fetchers)})):(Ce({errors:Dt,loaderData:hy($.loaderData,or,gi,Dt),fetchers:new Map($.fetchers)}),Te=!1)}async function ps(W,X,ae,ge,Oe,Ze,st,We,qe){let Be=$.fetchers.get(W);ye(W,td(qe,Be?Be.data:void 0),{flushSync:st});let Ue=new AbortController,mt=Hu(t.history,ae,Ue.signal);if(Ze){let _t=await ii(Oe,new URL(mt.url).pathname,mt.signal,W);if(_t.type==="aborted")return;if(_t.type==="error"){lt(W,X,_t.error,{flushSync:st});return}else if(_t.matches)Oe=_t.matches,ge=hd(Oe,ae);else{lt(W,X,mi(404,{pathname:ae}),{flushSync:st});return}}ee.set(W,Ue);let Et=Q,Wt=(await ve("loader",$,mt,[ge],Oe,W))[ge.route.id];if(Ml(Wt)&&(Wt=await Ig(Wt,mt.signal,!0)||Wt),ee.get(W)===Ue&&ee.delete(W),!mt.signal.aborted){if(Ne.has(W)){ye(W,Tl(void 0));return}if($a(Wt))if(ue>Et){ye(W,Tl(void 0));return}else{oe.add(W),await on(mt,Wt,!1,{preventScrollReset:We});return}if(Ti(Wt)){lt(W,X,Wt.error);return}Ot(!Ml(Wt),"Unhandled fetcher deferred data"),ye(W,Tl(Wt.data))}}async function on(W,X,ae,ge){let{submission:Oe,fetcherSubmission:Ze,preventScrollReset:st,replace:We}=ge===void 0?{}:ge;X.response.headers.has("X-Remix-Revalidate")&&(Te=!0);let qe=X.response.headers.get("Location");Ot(qe,"Expected a Location header on the redirect Response"),qe=cy(qe,new URL(W.url),h);let Be=kd($.location,qe,{_isRedirect:!0});if(r){let _t=!1;if(X.response.headers.has("X-Remix-Reload-Document"))_t=!0;else if(Mg.test(qe)){const rr=t.history.createURL(qe);_t=rr.origin!==e.location.origin||rc(rr.pathname,h)==null}if(_t){We?e.location.replace(qe):e.location.assign(qe);return}}J=null;let Ue=We===!0||X.response.headers.has("X-Remix-Replace")?qr.Replace:qr.Push,{formMethod:mt,formAction:Et,formEncType:Lr}=$.navigation;!Oe&&!Ze&&mt&&Et&&Lr&&(Oe=vy($.navigation));let Wt=Oe||Ze;if(bE.has(X.response.status)&&Wt&&cs(Wt.formMethod))await pr(Ue,Be,{submission:vr({},Wt,{formAction:qe}),preventScrollReset:st||fe,enableViewTransition:ae?H:void 0});else{let _t=rm(Be,Oe);await pr(Ue,Be,{overrideNavigation:_t,fetcherSubmission:Ze,preventScrollReset:st||fe,enableViewTransition:ae?H:void 0})}}async function ve(W,X,ae,ge,Oe,Ze){let st,We={};try{st=await jE(v,W,X,ae,ge,Oe,Ze,l,s)}catch(qe){return ge.forEach(Be=>{We[Be.route.id]={type:Xt.error,error:qe}}),We}for(let[qe,Be]of Object.entries(st))if($E(Be)){let Ue=Be.result;We[qe]={type:Xt.redirect,response:ME(Ue,ae,qe,Oe,h,w.v7_relativeSplatPath)}}else We[qe]=await LE(Be);return We}async function ne(W,X,ae,ge,Oe){let Ze=W.matches,st=ve("loader",W,Oe,ae,X,null),We=Promise.all(ge.map(async Ue=>{if(Ue.matches&&Ue.match&&Ue.controller){let Et=(await ve("loader",W,Hu(t.history,Ue.path,Ue.controller.signal),[Ue.match],Ue.matches,Ue.key))[Ue.match.route.id];return{[Ue.key]:Et}}else return Promise.resolve({[Ue.key]:{type:Xt.error,error:mi(404,{pathname:Ue.path})}})})),qe=await st,Be=(await We).reduce((Ue,mt)=>Object.assign(Ue,mt),{});return await Promise.all([FE(X,qe,Oe.signal,Ze,W.loaderData),DE(X,Be,ge)]),{loaderResults:qe,fetcherResults:Be}}function Se(){Te=!0,de.push(...Ft()),_e.forEach((W,X)=>{ee.has(X)&&je.add(X),me(X)})}function ye(W,X,ae){ae===void 0&&(ae={}),$.fetchers.set(W,X),Ce({fetchers:new Map($.fetchers)},{flushSync:(ae&&ae.flushSync)===!0})}function lt(W,X,ae,ge){ge===void 0&&(ge={});let Oe=ja($.matches,X);wt(W),Ce({errors:{[Oe.route.id]:ae},fetchers:new Map($.fetchers)},{flushSync:(ge&&ge.flushSync)===!0})}function dt(W){return Me.set(W,(Me.get(W)||0)+1),Ne.has(W)&&Ne.delete(W),$.fetchers.get(W)||EE}function wt(W){let X=$.fetchers.get(W);ee.has(W)&&!(X&&X.state==="loading"&&U.has(W))&&me(W),_e.delete(W),U.delete(W),oe.delete(W),w.v7_fetcherPersist&&Ne.delete(W),je.delete(W),$.fetchers.delete(W)}function he(W){let X=(Me.get(W)||0)-1;X<=0?(Me.delete(W),Ne.add(W),w.v7_fetcherPersist||wt(W)):Me.set(W,X),Ce({fetchers:new Map($.fetchers)})}function me(W){let X=ee.get(W);X&&(X.abort(),ee.delete(W))}function De(W){for(let X of W){let ae=dt(X),ge=Tl(ae.data);$.fetchers.set(X,ge)}}function ze(){let W=[],X=!1;for(let ae of oe){let ge=$.fetchers.get(ae);Ot(ge,"Expected fetcher: "+ae),ge.state==="loading"&&(oe.delete(ae),W.push(ae),X=!0)}return De(W),X}function $e(W){let X=[];for(let[ae,ge]of U)if(ge<W){let Oe=$.fetchers.get(ae);Ot(Oe,"Expected fetcher: "+ae),Oe.state==="loading"&&(me(ae),U.delete(ae),X.push(ae))}return De(X),X.length>0}function pt(W,X){let ae=$.blockers.get(W)||ed;return Qe.get(W)!==X&&Qe.set(W,X),ae}function Ut(W){$.blockers.delete(W),Qe.delete(W)}function Mt(W,X){let ae=$.blockers.get(W)||ed;Ot(ae.state==="unblocked"&&X.state==="blocked"||ae.state==="blocked"&&X.state==="blocked"||ae.state==="blocked"&&X.state==="proceeding"||ae.state==="blocked"&&X.state==="unblocked"||ae.state==="proceeding"&&X.state==="unblocked","Invalid blocker state transition: "+ae.state+" -> "+X.state);let ge=new Map($.blockers);ge.set(W,X),Ce({blockers:ge})}function It(W){let{currentLocation:X,nextLocation:ae,historyAction:ge}=W;if(Qe.size===0)return;Qe.size>1&&ec(!1,"A router only supports one blocker at a time");let Oe=Array.from(Qe.entries()),[Ze,st]=Oe[Oe.length-1],We=$.blockers.get(Ze);if(!(We&&We.state==="proceeding")&&st({currentLocation:X,nextLocation:ae,historyAction:ge}))return Ze}function qt(W){let X=mi(404,{pathname:W}),ae=d||u,{matches:ge,route:Oe}=my(ae);return Ft(),{notFoundMatches:ge,route:Oe,error:X}}function Ft(W){let X=[];return Ke.forEach((ae,ge)=>{(!W||W(ge))&&(ae.cancel(),X.push(ge),Ke.delete(ge))}),X}function yr(W,X,ae){if(P=W,j=X,C=ae||null,!O&&$.navigation===tm){O=!0;let ge=ji($.location,$.matches);ge!=null&&Ce({restoreScrollPosition:ge})}return()=>{P=null,j=null,C=null}}function zn(W,X){return C&&C(W,X.map(ge=>eE(ge,$.loaderData)))||W.key}function Fn(W,X){if(P&&j){let ae=zn(W,X);P[ae]=j()}}function ji(W,X){if(P){let ae=zn(W,X),ge=P[ae];if(typeof ge=="number")return ge}return null}function ni(W,X,ae){if(g)if(W){if(Object.keys(W[0].params).length>0)return{active:!0,matches:vh(X,ae,h,!0)}}else return{active:!0,matches:vh(X,ae,h,!0)||[]};return{active:!1,matches:null}}async function ii(W,X,ae,ge){if(!g)return{type:"success",matches:W};let Oe=W;for(;;){let Ze=d==null,st=d||u,We=l;try{await g({signal:ae,path:X,matches:Oe,fetcherKey:ge,patch:(Ue,mt)=>{ae.aborted||uy(Ue,mt,st,We,s)}})}catch(Ue){return{type:"error",error:Ue,partialMatches:Oe}}finally{Ze&&!ae.aborted&&(u=[...u])}if(ae.aborted)return{type:"aborted"};let qe=_a(st,X,h);if(qe)return{type:"success",matches:qe};let Be=vh(st,X,h,!0);if(!Be||Oe.length===Be.length&&Oe.every((Ue,mt)=>Ue.route.id===Be[mt].route.id))return{type:"success",matches:null};Oe=Be}}function Vl(W){l={},d=Th(W,s,void 0,l)}function Qs(W,X){let ae=d==null;uy(W,X,d||u,l,s),ae&&(u=[...u],Ce({}))}return B={get basename(){return h},get future(){return w},get state(){return $},get routes(){return u},get window(){return e},initialize:ft,subscribe:Ye,enableScrollRestoration:yr,navigate:bt,fetch:ri,revalidate:jr,createHref:W=>t.history.createHref(W),encodeLocation:W=>t.history.encodeLocation(W),getFetcher:dt,deleteFetcher:he,dispose:Ct,getBlocker:pt,deleteBlocker:Ut,patchRoutes:Qs,_internalFetchControllers:ee,_internalActiveDeferreds:Ke,_internalSetRoutes:Vl},B}function kE(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Wm(t,e,r,n,s,l,u,d){let h,v;if(u){h=[];for(let w of e)if(h.push(w),w.route.id===u){v=w;break}}else h=e,v=e[e.length-1];let g=Lg(s||".",Og(h,l),rc(t.pathname,r)||t.pathname,d==="path");if(s==null&&(g.search=t.search,g.hash=t.hash),(s==null||s===""||s===".")&&v){let w=Ag(g.search);if(v.route.index&&!w)g.search=g.search?g.search.replace(/^\?/,"?index&"):"?index";else if(!v.route.index&&w){let b=new URLSearchParams(g.search),R=b.getAll("index");b.delete("index"),R.filter(C=>C).forEach(C=>b.append("index",C));let P=b.toString();g.search=P?"?"+P:""}}return n&&r!=="/"&&(g.pathname=g.pathname==="/"?r:Co([r,g.pathname])),Da(g)}function sy(t,e,r,n){if(!n||!kE(n))return{path:r};if(n.formMethod&&!zE(n.formMethod))return{path:r,error:mi(405,{method:n.formMethod})};let s=()=>({path:r,error:mi(400,{type:"invalid-body"})}),l=n.formMethod||"get",u=t?l.toUpperCase():l.toLowerCase(),d=iw(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!cs(u))return s();let b=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((R,P)=>{let[C,j]=P;return""+R+C+"="+j+`
`},""):String(n.body);return{path:r,submission:{formMethod:u,formAction:d,formEncType:n.formEncType,formData:void 0,json:void 0,text:b}}}else if(n.formEncType==="application/json"){if(!cs(u))return s();try{let b=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:u,formAction:d,formEncType:n.formEncType,formData:void 0,json:b,text:void 0}}}catch{return s()}}}Ot(typeof FormData=="function","FormData is not available in this environment");let h,v;if(n.formData)h=Qm(n.formData),v=n.formData;else if(n.body instanceof FormData)h=Qm(n.body),v=n.body;else if(n.body instanceof URLSearchParams)h=n.body,v=dy(h);else if(n.body==null)h=new URLSearchParams,v=new FormData;else try{h=new URLSearchParams(n.body),v=dy(h)}catch{return s()}let g={formMethod:u,formAction:d,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:v,json:void 0,text:void 0};if(cs(g.formMethod))return{path:r,submission:g};let w=Bl(r);return e&&w.search&&Ag(w.search)&&h.append("index",""),w.search="?"+h,{path:Da(w),submission:g}}function oy(t,e,r){r===void 0&&(r=!1);let n=t.findIndex(s=>s.route.id===e);return n>=0?t.slice(0,r?n+1:n):t}function ly(t,e,r,n,s,l,u,d,h,v,g,w,b,R,P,C){let j=C?Ti(C[1])?C[1].error:C[1].data:void 0,O=t.createURL(e.location),L=t.createURL(s),A=r;l&&e.errors?A=oy(r,Object.keys(e.errors)[0],!0):C&&Ti(C[1])&&(A=oy(r,C[0]));let F=C?C[1].statusCode:void 0,z=u&&F&&F>=400,B=A.filter((K,fe)=>{let{route:J}=K;if(J.lazy)return!0;if(J.loader==null)return!1;if(l)return Vm(J,e.loaderData,e.errors);if(TE(e.loaderData,e.matches[fe],K)||h.some(xe=>xe===K.route.id))return!0;let H=e.matches[fe],Y=K;return ay(K,vr({currentUrl:O,currentParams:H.params,nextUrl:L,nextParams:Y.params},n,{actionResult:j,actionStatus:F,defaultShouldRevalidate:z?!1:d||O.pathname+O.search===L.pathname+L.search||O.search!==L.search||rw(H,Y)}))}),$=[];return w.forEach((K,fe)=>{if(l||!r.some(te=>te.route.id===K.routeId)||g.has(fe))return;let J=_a(R,K.path,P);if(!J){$.push({key:fe,routeId:K.routeId,path:K.path,matches:null,match:null,controller:null});return}let H=e.fetchers.get(fe),Y=hd(J,K.path),xe=!1;b.has(fe)?xe=!1:v.has(fe)?(v.delete(fe),xe=!0):H&&H.state!=="idle"&&H.data===void 0?xe=d:xe=ay(Y,vr({currentUrl:O,currentParams:e.matches[e.matches.length-1].params,nextUrl:L,nextParams:r[r.length-1].params},n,{actionResult:j,actionStatus:F,defaultShouldRevalidate:z?!1:d})),xe&&$.push({key:fe,routeId:K.routeId,path:K.path,matches:J,match:Y,controller:new AbortController})}),[B,$]}function Vm(t,e,r){if(t.lazy)return!0;if(!t.loader)return!1;let n=e!=null&&e[t.id]!==void 0,s=r!=null&&r[t.id]!==void 0;return!n&&s?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!n&&!s}function TE(t,e,r){let n=!e||r.route.id!==e.route.id,s=t[r.route.id]===void 0;return n||s}function rw(t,e){let r=t.route.path;return t.pathname!==e.pathname||r!=null&&r.endsWith("*")&&t.params["*"]!==e.params["*"]}function ay(t,e){if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate(e);if(typeof r=="boolean")return r}return e.defaultShouldRevalidate}function uy(t,e,r,n,s){var l;let u;if(t){let v=n[t];Ot(v,"No route found to patch children into: routeId = "+t),v.children||(v.children=[]),u=v.children}else u=r;let d=e.filter(v=>!u.some(g=>nw(v,g))),h=Th(d,s,[t||"_","patch",String(((l=u)==null?void 0:l.length)||"0")],n);u.push(...h)}function nw(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((r,n)=>{var s;return(s=e.children)==null?void 0:s.some(l=>nw(r,l))}):!1}async function RE(t,e,r){if(!t.lazy)return;let n=await t.lazy();if(!t.lazy)return;let s=r[t.id];Ot(s,"No route found in manifest");let l={};for(let u in n){let h=s[u]!==void 0&&u!=="hasErrorBoundary";ec(!h,'Route "'+s.id+'" has a static property "'+u+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+u+'" will be ignored.')),!h&&!Zb.has(u)&&(l[u]=n[u])}Object.assign(s,l),Object.assign(s,vr({},e(s),{lazy:void 0}))}async function _E(t){let{matches:e}=t,r=e.filter(s=>s.shouldLoad);return(await Promise.all(r.map(s=>s.resolve()))).reduce((s,l,u)=>Object.assign(s,{[r[u].route.id]:l}),{})}async function jE(t,e,r,n,s,l,u,d,h,v){let g=l.map(R=>R.route.lazy?RE(R.route,h,d):void 0),w=l.map((R,P)=>{let C=g[P],j=s.some(L=>L.route.id===R.route.id);return vr({},R,{shouldLoad:j,resolve:async L=>(L&&n.method==="GET"&&(R.route.lazy||R.route.loader)&&(j=!0),j?OE(e,n,R,C,L,v):Promise.resolve({type:Xt.data,result:void 0}))})}),b=await t({matches:w,request:n,params:l[0].params,fetcherKey:u,context:v});try{await Promise.all(g)}catch{}return b}async function OE(t,e,r,n,s,l){let u,d,h=v=>{let g,w=new Promise((P,C)=>g=C);d=()=>g(),e.signal.addEventListener("abort",d);let b=P=>typeof v!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+r.route.id+"]"))):v({request:e,params:r.params,context:l},...P!==void 0?[P]:[]),R=(async()=>{try{return{type:"data",result:await(s?s(C=>b(C)):b())}}catch(P){return{type:"error",result:P}}})();return Promise.race([R,w])};try{let v=r.route[t];if(n)if(v){let g,[w]=await Promise.all([h(v).catch(b=>{g=b}),n]);if(g!==void 0)throw g;u=w}else if(await n,v=r.route[t],v)u=await h(v);else if(t==="action"){let g=new URL(e.url),w=g.pathname+g.search;throw mi(405,{method:e.method,pathname:w,routeId:r.route.id})}else return{type:Xt.data,result:void 0};else if(v)u=await h(v);else{let g=new URL(e.url),w=g.pathname+g.search;throw mi(404,{pathname:w})}Ot(u.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(v){return{type:Xt.error,result:v}}finally{d&&e.signal.removeEventListener("abort",d)}return u}async function LE(t){let{result:e,type:r}=t;if(sw(e)){let w;try{let b=e.headers.get("Content-Type");b&&/\bapplication\/json\b/.test(b)?e.body==null?w=null:w=await e.json():w=await e.text()}catch(b){return{type:Xt.error,error:b}}return r===Xt.error?{type:Xt.error,error:new Rh(e.status,e.statusText,w),statusCode:e.status,headers:e.headers}:{type:Xt.data,data:w,statusCode:e.status,headers:e.headers}}if(r===Xt.error){if(gy(e)){var n,s;if(e.data instanceof Error){var l,u;return{type:Xt.error,error:e.data,statusCode:(l=e.init)==null?void 0:l.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}}return{type:Xt.error,error:new Rh(((n=e.init)==null?void 0:n.status)||500,void 0,e.data),statusCode:Td(e)?e.status:void 0,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:Xt.error,error:e,statusCode:Td(e)?e.status:void 0}}if(NE(e)){var d,h;return{type:Xt.deferred,deferredData:e,statusCode:(d=e.init)==null?void 0:d.status,headers:((h=e.init)==null?void 0:h.headers)&&new Headers(e.init.headers)}}if(gy(e)){var v,g;return{type:Xt.data,data:e.data,statusCode:(v=e.init)==null?void 0:v.status,headers:(g=e.init)!=null&&g.headers?new Headers(e.init.headers):void 0}}return{type:Xt.data,data:e}}function ME(t,e,r,n,s,l){let u=t.headers.get("Location");if(Ot(u,"Redirects returned/thrown from loaders/actions must have a Location header"),!Mg.test(u)){let d=n.slice(0,n.findIndex(h=>h.route.id===r)+1);u=Wm(new URL(e.url),d,s,!0,u,l),t.headers.set("Location",u)}return t}function cy(t,e,r){if(Mg.test(t)){let n=t,s=n.startsWith("//")?new URL(e.protocol+n):new URL(n),l=rc(s.pathname,r)!=null;if(s.origin===e.origin&&l)return s.pathname+s.search+s.hash}return t}function Hu(t,e,r,n){let s=t.createURL(iw(e)).toString(),l={signal:r};if(n&&cs(n.formMethod)){let{formMethod:u,formEncType:d}=n;l.method=u.toUpperCase(),d==="application/json"?(l.headers=new Headers({"Content-Type":d}),l.body=JSON.stringify(n.json)):d==="text/plain"?l.body=n.text:d==="application/x-www-form-urlencoded"&&n.formData?l.body=Qm(n.formData):l.body=n.formData}return new Request(s,l)}function Qm(t){let e=new URLSearchParams;for(let[r,n]of t.entries())e.append(r,typeof n=="string"?n:n.name);return e}function dy(t){let e=new FormData;for(let[r,n]of t.entries())e.append(r,n);return e}function IE(t,e,r,n,s){let l={},u=null,d,h=!1,v={},g=r&&Ti(r[1])?r[1].error:void 0;return t.forEach(w=>{if(!(w.route.id in e))return;let b=w.route.id,R=e[b];if(Ot(!$a(R),"Cannot handle redirect results in processLoaderData"),Ti(R)){let P=R.error;g!==void 0&&(P=g,g=void 0),u=u||{};{let C=ja(t,b);u[C.route.id]==null&&(u[C.route.id]=P)}l[b]=void 0,h||(h=!0,d=Td(R.error)?R.error.status:500),R.headers&&(v[b]=R.headers)}else Ml(R)?(n.set(b,R.deferredData),l[b]=R.deferredData.data,R.statusCode!=null&&R.statusCode!==200&&!h&&(d=R.statusCode),R.headers&&(v[b]=R.headers)):(l[b]=R.data,R.statusCode&&R.statusCode!==200&&!h&&(d=R.statusCode),R.headers&&(v[b]=R.headers))}),g!==void 0&&r&&(u={[r[0]]:g},l[r[0]]=void 0),{loaderData:l,errors:u,statusCode:d||200,loaderHeaders:v}}function fy(t,e,r,n,s,l,u){let{loaderData:d,errors:h}=IE(e,r,n,u);return s.forEach(v=>{let{key:g,match:w,controller:b}=v,R=l[g];if(Ot(R,"Did not find corresponding fetcher result"),!(b&&b.signal.aborted))if(Ti(R)){let P=ja(t.matches,w==null?void 0:w.route.id);h&&h[P.route.id]||(h=vr({},h,{[P.route.id]:R.error})),t.fetchers.delete(g)}else if($a(R))Ot(!1,"Unhandled fetcher revalidation redirect");else if(Ml(R))Ot(!1,"Unhandled fetcher deferred data");else{let P=Tl(R.data);t.fetchers.set(g,P)}}),{loaderData:d,errors:h}}function hy(t,e,r,n){let s=vr({},e);for(let l of r){let u=l.route.id;if(e.hasOwnProperty(u)?e[u]!==void 0&&(s[u]=e[u]):t[u]!==void 0&&l.route.loader&&(s[u]=t[u]),n&&n.hasOwnProperty(u))break}return s}function py(t){return t?Ti(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function ja(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function my(t){let e=t.length===1?t[0]:t.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function mi(t,e){let{pathname:r,routeId:n,method:s,type:l,message:u}=e===void 0?{}:e,d="Unknown Server Error",h="Unknown @remix-run/router error";return t===400?(d="Bad Request",s&&r&&n?h="You made a "+s+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":l==="defer-action"?h="defer() is not supported in actions":l==="invalid-body"&&(h="Unable to encode submission body")):t===403?(d="Forbidden",h='Route "'+n+'" does not match URL "'+r+'"'):t===404?(d="Not Found",h='No route matches URL "'+r+'"'):t===405&&(d="Method Not Allowed",s&&r&&n?h="You made a "+s.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":s&&(h='Invalid request method "'+s.toUpperCase()+'"')),new Rh(t||500,d,new Error(h),!0)}function Yf(t){let e=Object.entries(t);for(let r=e.length-1;r>=0;r--){let[n,s]=e[r];if($a(s))return{key:n,result:s}}}function iw(t){let e=typeof t=="string"?Bl(t):t;return Da(vr({},e,{hash:""}))}function AE(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function $E(t){return sw(t.result)&&SE.has(t.result.status)}function Ml(t){return t.type===Xt.deferred}function Ti(t){return t.type===Xt.error}function $a(t){return(t&&t.type)===Xt.redirect}function gy(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function NE(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function sw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function zE(t){return xE.has(t.toLowerCase())}function cs(t){return yE.has(t.toLowerCase())}async function FE(t,e,r,n,s){let l=Object.entries(e);for(let u=0;u<l.length;u++){let[d,h]=l[u],v=t.find(b=>(b==null?void 0:b.route.id)===d);if(!v)continue;let g=n.find(b=>b.route.id===v.route.id),w=g!=null&&!rw(g,v)&&(s&&s[v.route.id])!==void 0;Ml(h)&&w&&await Ig(h,r,!1).then(b=>{b&&(e[d]=b)})}}async function DE(t,e,r){for(let n=0;n<r.length;n++){let{key:s,routeId:l,controller:u}=r[n],d=e[s];t.find(v=>(v==null?void 0:v.route.id)===l)&&Ml(d)&&(Ot(u,"Expected an AbortController for revalidating fetcher deferred result"),await Ig(d,u.signal,!0).then(v=>{v&&(e[s]=v)}))}}async function Ig(t,e,r){if(r===void 0&&(r=!1),!await t.deferredData.resolveData(e)){if(r)try{return{type:Xt.data,data:t.deferredData.unwrappedData}}catch(s){return{type:Xt.error,error:s}}return{type:Xt.data,data:t.deferredData.data}}}function Ag(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function hd(t,e){let r=typeof e=="string"?Bl(e).search:e.search;if(t[t.length-1].route.index&&Ag(r||""))return t[t.length-1];let n=J0(t);return n[n.length-1]}function vy(t){let{formMethod:e,formAction:r,formEncType:n,text:s,formData:l,json:u}=t;if(!(!e||!r||!n)){if(s!=null)return{formMethod:e,formAction:r,formEncType:n,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:r,formEncType:n,formData:l,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:r,formEncType:n,formData:void 0,json:u,text:void 0}}}function rm(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function BE(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function td(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function UE(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Tl(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function HE(t,e){try{let r=t.sessionStorage.getItem(tw);if(r){let n=JSON.parse(r);for(let[s,l]of Object.entries(n||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function WE(t,e){if(e.size>0){let r={};for(let[n,s]of e)r[n]=[...s];try{t.sessionStorage.setItem(tw,JSON.stringify(r))}catch(n){ec(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _h(){return _h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_h.apply(this,arguments)}const Wh=_.createContext(null),ow=_.createContext(null),Wa=_.createContext(null),$g=_.createContext(null),Ul=_.createContext({outlet:null,matches:[],isDataRoute:!1}),lw=_.createContext(null);function VE(t,e){let{relative:r}=e===void 0?{}:e;Ad()||Ot(!1);let{basename:n,navigator:s}=_.useContext(Wa),{hash:l,pathname:u,search:d}=uw(t,{relative:r}),h=u;return n!=="/"&&(h=u==="/"?n:Co([n,u])),s.createHref({pathname:h,search:d,hash:l})}function Ad(){return _.useContext($g)!=null}function Vh(){return Ad()||Ot(!1),_.useContext($g).location}function aw(t){_.useContext(Wa).static||_.useLayoutEffect(t)}function QE(){let{isDataRoute:t}=_.useContext(Ul);return t?oP():qE()}function qE(){Ad()||Ot(!1);let t=_.useContext(Wh),{basename:e,future:r,navigator:n}=_.useContext(Wa),{matches:s}=_.useContext(Ul),{pathname:l}=Vh(),u=JSON.stringify(Og(s,r.v7_relativeSplatPath)),d=_.useRef(!1);return aw(()=>{d.current=!0}),_.useCallback(function(v,g){if(g===void 0&&(g={}),!d.current)return;if(typeof v=="number"){n.go(v);return}let w=Lg(v,JSON.parse(u),l,g.relative==="path");t==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Co([e,w.pathname])),(g.replace?n.replace:n.push)(w,g.state,g)},[e,n,u,l,t])}const GE=_.createContext(null);function KE(t){let e=_.useContext(Ul).outlet;return e&&_.createElement(GE.Provider,{value:t},e)}function uw(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=_.useContext(Wa),{matches:s}=_.useContext(Ul),{pathname:l}=Vh(),u=JSON.stringify(Og(s,n.v7_relativeSplatPath));return _.useMemo(()=>Lg(t,JSON.parse(u),l,r==="path"),[t,u,l,r])}function YE(t,e,r,n){Ad()||Ot(!1);let{navigator:s}=_.useContext(Wa),{matches:l}=_.useContext(Ul),u=l[l.length-1],d=u?u.params:{};u&&u.pathname;let h=u?u.pathnameBase:"/";u&&u.route;let v=Vh(),g;g=v;let w=g.pathname||"/",b=w;if(h!=="/"){let C=h.replace(/^\//,"").split("/");b="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let R=_a(t,{pathname:b});return tP(R&&R.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Co([h,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?h:Co([h,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),l,r,n)}function XE(){let t=sP(),e=Td(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),r?_.createElement("pre",{style:s},r):null,null)}const ZE=_.createElement(XE,null);class JE extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?_.createElement(Ul.Provider,{value:this.props.routeContext},_.createElement(lw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eP(t){let{routeContext:e,match:r,children:n}=t,s=_.useContext(Wh);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),_.createElement(Ul.Provider,{value:e},n)}function tP(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var l;if(!r)return null;if(r.errors)t=r.matches;else if((l=n)!=null&&l.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let u=t,d=(s=r)==null?void 0:s.errors;if(d!=null){let g=u.findIndex(w=>w.route.id&&(d==null?void 0:d[w.route.id])!==void 0);g>=0||Ot(!1),u=u.slice(0,Math.min(u.length,g+1))}let h=!1,v=-1;if(r&&n&&n.v7_partialHydration)for(let g=0;g<u.length;g++){let w=u[g];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(v=g),w.route.id){let{loaderData:b,errors:R}=r,P=w.route.loader&&b[w.route.id]===void 0&&(!R||R[w.route.id]===void 0);if(w.route.lazy||P){h=!0,v>=0?u=u.slice(0,v+1):u=[u[0]];break}}}return u.reduceRight((g,w,b)=>{let R,P=!1,C=null,j=null;r&&(R=d&&w.route.id?d[w.route.id]:void 0,C=w.route.errorElement||ZE,h&&(v<0&&b===0?(lP("route-fallback"),P=!0,j=null):v===b&&(P=!0,j=w.route.hydrateFallbackElement||null)));let O=e.concat(u.slice(0,b+1)),L=()=>{let A;return R?A=C:P?A=j:w.route.Component?A=_.createElement(w.route.Component,null):w.route.element?A=w.route.element:A=g,_.createElement(eP,{match:w,routeContext:{outlet:g,matches:O,isDataRoute:r!=null},children:A})};return r&&(w.route.ErrorBoundary||w.route.errorElement||b===0)?_.createElement(JE,{location:r.location,revalidation:r.revalidation,component:C,error:R,children:L(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):L()},null)}var cw=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(cw||{}),dw=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(dw||{});function rP(t){let e=_.useContext(Wh);return e||Ot(!1),e}function nP(t){let e=_.useContext(ow);return e||Ot(!1),e}function iP(t){let e=_.useContext(Ul);return e||Ot(!1),e}function fw(t){let e=iP(),r=e.matches[e.matches.length-1];return r.route.id||Ot(!1),r.route.id}function sP(){var t;let e=_.useContext(lw),r=nP(dw.UseRouteError),n=fw();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function oP(){let{router:t}=rP(cw.UseNavigateStable),e=fw(),r=_.useRef(!1);return aw(()=>{r.current=!0}),_.useCallback(function(s,l){l===void 0&&(l={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,_h({fromRouteId:e},l)))},[t,e])}const yy={};function lP(t,e,r){yy[t]||(yy[t]=!0)}function aP(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function uP(t){return KE(t.context)}function cP(t){let{basename:e="/",children:r=null,location:n,navigationType:s=qr.Pop,navigator:l,static:u=!1,future:d}=t;Ad()&&Ot(!1);let h=e.replace(/^\/*/,"/"),v=_.useMemo(()=>({basename:h,navigator:l,static:u,future:_h({v7_relativeSplatPath:!1},d)}),[h,d,l,u]);typeof n=="string"&&(n=Bl(n));let{pathname:g="/",search:w="",hash:b="",state:R=null,key:P="default"}=n,C=_.useMemo(()=>{let j=rc(g,h);return j==null?null:{location:{pathname:j,search:w,hash:b,state:R,key:P},navigationType:s}},[h,g,w,b,R,P,s]);return C==null?null:_.createElement(Wa.Provider,{value:v},_.createElement($g.Provider,{children:r,value:C}))}new Promise(()=>{});function dP(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:_.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:_.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:_.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rd(){return Rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rd.apply(this,arguments)}function fP(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,l;for(l=0;l<n.length;l++)s=n[l],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function hP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pP(t,e){return t.button===0&&(!e||e==="_self")&&!hP(t)}const mP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gP="6";try{window.__reactRouterVersion=gP}catch{}function vP(t,e){return CE({basename:void 0,future:Rd({},void 0,{v7_prependBasename:!0}),history:Kb({window:void 0}),hydrationData:yP(),routes:t,mapRouteProperties:dP,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function yP(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Rd({},e,{errors:wP(e.errors)})),e}function wP(t){if(!t)return null;let e=Object.entries(t),r={};for(let[n,s]of e)if(s&&s.__type==="RouteErrorResponse")r[n]=new Rh(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let u=new l(s.message);u.stack="",r[n]=u}catch{}}if(r[n]==null){let l=new Error(s.message);l.stack="",r[n]=l}}else r[n]=s;return r}const xP=_.createContext({isTransitioning:!1}),SP=_.createContext(new Map),bP="startTransition",wy=Ju[bP],EP="flushSync",xy=Y0[EP];function PP(t){wy?wy(t):t()}function rd(t){xy?xy(t):t()}class CP{constructor(){this.status="pending",this.promise=new Promise((e,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}}function kP(t){let{fallbackElement:e,router:r,future:n}=t,[s,l]=_.useState(r.state),[u,d]=_.useState(),[h,v]=_.useState({isTransitioning:!1}),[g,w]=_.useState(),[b,R]=_.useState(),[P,C]=_.useState(),j=_.useRef(new Map),{v7_startTransition:O}=n||{},L=_.useCallback(K=>{O?PP(K):K()},[O]),A=_.useCallback((K,fe)=>{let{deletedFetchers:J,flushSync:H,viewTransitionOpts:Y}=fe;K.fetchers.forEach((te,Te)=>{te.data!==void 0&&j.current.set(Te,te.data)}),J.forEach(te=>j.current.delete(te));let xe=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!Y||xe){H?rd(()=>l(K)):L(()=>l(K));return}if(H){rd(()=>{b&&(g&&g.resolve(),b.skipTransition()),v({isTransitioning:!0,flushSync:!0,currentLocation:Y.currentLocation,nextLocation:Y.nextLocation})});let te=r.window.document.startViewTransition(()=>{rd(()=>l(K))});te.finished.finally(()=>{rd(()=>{w(void 0),R(void 0),d(void 0),v({isTransitioning:!1})})}),rd(()=>R(te));return}b?(g&&g.resolve(),b.skipTransition(),C({state:K,currentLocation:Y.currentLocation,nextLocation:Y.nextLocation})):(d(K),v({isTransitioning:!0,flushSync:!1,currentLocation:Y.currentLocation,nextLocation:Y.nextLocation}))},[r.window,b,g,j,L]);_.useLayoutEffect(()=>r.subscribe(A),[r,A]),_.useEffect(()=>{h.isTransitioning&&!h.flushSync&&w(new CP)},[h]),_.useEffect(()=>{if(g&&u&&r.window){let K=u,fe=g.promise,J=r.window.document.startViewTransition(async()=>{L(()=>l(K)),await fe});J.finished.finally(()=>{w(void 0),R(void 0),d(void 0),v({isTransitioning:!1})}),R(J)}},[L,u,g,r.window]),_.useEffect(()=>{g&&u&&s.location.key===u.location.key&&g.resolve()},[g,b,s.location,u]),_.useEffect(()=>{!h.isTransitioning&&P&&(d(P.state),v({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}),C(void 0))},[h.isTransitioning,P]),_.useEffect(()=>{},[]);let F=_.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:K=>r.navigate(K),push:(K,fe,J)=>r.navigate(K,{state:fe,preventScrollReset:J==null?void 0:J.preventScrollReset}),replace:(K,fe,J)=>r.navigate(K,{replace:!0,state:fe,preventScrollReset:J==null?void 0:J.preventScrollReset})}),[r]),z=r.basename||"/",B=_.useMemo(()=>({router:r,navigator:F,static:!1,basename:z}),[r,F,z]),$=_.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return _.useEffect(()=>aP(n,r.future),[n,r.future]),_.createElement(_.Fragment,null,_.createElement(Wh.Provider,{value:B},_.createElement(ow.Provider,{value:s},_.createElement(SP.Provider,{value:j.current},_.createElement(xP.Provider,{value:h},_.createElement(cP,{basename:z,location:s.location,navigationType:s.historyAction,navigator:F,future:$},s.initialized||r.future.v7_partialHydration?_.createElement(TP,{routes:r.routes,future:r.future,state:s}):e))))),null)}const TP=_.memo(RP);function RP(t){let{routes:e,future:r,state:n}=t;return YE(e,void 0,n,r)}const _P=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nm=_.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:l,replace:u,state:d,target:h,to:v,preventScrollReset:g,viewTransition:w}=e,b=fP(e,mP),{basename:R}=_.useContext(Wa),P,C=!1;if(typeof v=="string"&&jP.test(v)&&(P=v,_P))try{let A=new URL(window.location.href),F=v.startsWith("//")?new URL(A.protocol+v):new URL(v),z=rc(F.pathname,R);F.origin===A.origin&&z!=null?v=z+F.search+F.hash:C=!0}catch{}let j=VE(v,{relative:s}),O=OP(v,{replace:u,state:d,target:h,preventScrollReset:g,relative:s,viewTransition:w});function L(A){n&&n(A),A.defaultPrevented||O(A)}return _.createElement("a",Rd({},b,{href:P||j,onClick:C||l?n:L,ref:r,target:h}))});var Sy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Sy||(Sy={}));var by;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(by||(by={}));function OP(t,e){let{target:r,replace:n,state:s,preventScrollReset:l,relative:u,viewTransition:d}=e===void 0?{}:e,h=QE(),v=Vh(),g=uw(t,{relative:u});return _.useCallback(w=>{if(pP(w,r)){w.preventDefault();let b=n!==void 0?n:Da(v)===Da(g);h(t,{replace:b,state:s,preventScrollReset:l,relative:u,viewTransition:d})}},[v,h,g,n,s,r,t,l,u,d])}function LP(){return k.jsxs("div",{className:"min-h-screen",children:[k.jsxs("header",{className:"mx-auto max-w-screen-xl p-4 flex items-center justify-between",children:[k.jsx("h1",{className:"text-xl font-semibold",children:"Exhibition Site"}),k.jsxs("nav",{className:"flex gap-4",children:[k.jsx(nm,{to:"/",children:"Home"}),k.jsx(nm,{to:"/exhibition",children:"Exhibition"}),k.jsx(nm,{to:"/presentation",children:"Presentation"})]})]}),k.jsx("main",{className:"mx-auto max-w-screen-xl p-4",children:k.jsx(uP,{})})]})}function MP(){return k.jsxs("div",{className:"prose",children:[k.jsx("h2",{children:"Welcome"}),k.jsx("p",{children:"Select a page from the navigation to view the exhibition or presentation."})]})}const IP="modulepreload",AP=function(t){return"/"+t},Ey={},jh=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let u=function(v){return Promise.all(v.map(g=>Promise.resolve(g).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));s=u(r.map(v=>{if(v=AP(v),v in Ey)return;Ey[v]=!0;const g=v.endsWith(".css"),w=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${w}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":IP,g||(b.as="script"),b.crossOrigin="",b.href=v,h&&b.setAttribute("nonce",h),document.head.appendChild(b),g)return new Promise((R,P)=>{b.addEventListener("load",R),b.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return s.then(u=>{for(const d of u||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})};var $P=Object.defineProperty,NP=(t,e,r)=>e in t?$P(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,im=(t,e,r)=>(NP(t,typeof e!="symbol"?e+"":e,r),r);let zP=class{constructor(){im(this,"current",this.detect()),im(this,"handoffState","pending"),im(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},ko=new zP,_o=(t,e)=>{ko.isServer?_.useEffect(t,e):_.useLayoutEffect(t,e)};function Qh(t){let e=_.useRef(t);return _o(()=>{e.current=t},[t]),e}let $n=function(t){let e=Qh(t);return ct.useCallback((...r)=>e.current(...r),[e])};function qh(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Gh(){let t=[],e={addEventListener(r,n,s,l){return r.addEventListener(n,s,l),e.add(()=>r.removeEventListener(n,s,l))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return e.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return e.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return qh(()=>{n.current&&r[0]()}),e.add(()=>{n.current=!1})},style(r,n,s){let l=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:s}),this.add(()=>{Object.assign(r.style,{[n]:l})})},group(r){let n=Gh();return r(n),this.add(()=>n.dispose())},add(r){return t.push(r),()=>{let n=t.indexOf(r);if(n>=0)for(let s of t.splice(n,1))s()}},dispose(){for(let r of t.splice(0))r()}};return e}function FP(){let[t]=_.useState(Gh);return _.useEffect(()=>()=>t.dispose(),[t]),t}function DP(){let t=typeof document>"u";return"useSyncExternalStore"in Ju?(e=>e.useSyncExternalStore)(Ju)(()=>()=>{},()=>!1,()=>!t):!1}function Kh(){let t=DP(),[e,r]=_.useState(ko.isHandoffComplete);return e&&ko.isHandoffComplete===!1&&r(!1),_.useEffect(()=>{e!==!0&&r(!0)},[e]),_.useEffect(()=>ko.handoff(),[]),t?!1:e}var Py;let nc=(Py=ct.useId)!=null?Py:function(){let t=Kh(),[e,r]=ct.useState(t?()=>ko.nextId():null);return _o(()=>{e===null&&r(ko.nextId())},[e]),e!=null?""+e:void 0};function Nl(t,e,...r){if(t in e){let s=e[t];return typeof s=="function"?s(...r):s}let n=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Nl),n}function hw(t){return ko.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}let qm=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Oa=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(Oa||{}),pw=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(pw||{}),BP=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(BP||{});function UP(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(qm)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var mw=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(mw||{});function HP(t,e=0){var r;return t===((r=hw(t))==null?void 0:r.body)?!1:Nl(e,{0(){return t.matches(qm)},1(){let n=t;for(;n!==null;){if(n.matches(qm))return!0;n=n.parentElement}return!1}})}var WP=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(WP||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Fa(t){t==null||t.focus({preventScroll:!0})}let VP=["textarea","input"].join(",");function QP(t){var e,r;return(r=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,VP))!=null?r:!1}function qP(t,e=r=>r){return t.slice().sort((r,n)=>{let s=e(r),l=e(n);if(s===null||l===null)return 0;let u=s.compareDocumentPosition(l);return u&Node.DOCUMENT_POSITION_FOLLOWING?-1:u&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function yh(t,e,{sorted:r=!0,relativeTo:n=null,skipElements:s=[]}={}){let l=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,u=Array.isArray(t)?r?qP(t):t:UP(t);s.length>0&&u.length>1&&(u=u.filter(R=>!s.includes(R))),n=n??l.activeElement;let d=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),h=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,u.indexOf(n))-1;if(e&4)return Math.max(0,u.indexOf(n))+1;if(e&8)return u.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),v=e&32?{preventScroll:!0}:{},g=0,w=u.length,b;do{if(g>=w||g+w<=0)return 0;let R=h+g;if(e&16)R=(R+w)%w;else{if(R<0)return 3;if(R>=w)return 1}b=u[R],b==null||b.focus(v),g+=d}while(b!==l.activeElement);return e&6&&QP(b)&&b.select(),2}function gw(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function GP(){return/Android/gi.test(window.navigator.userAgent)}function KP(){return gw()||GP()}function Xf(t,e,r){let n=Qh(e);_.useEffect(()=>{function s(l){n.current(l)}return document.addEventListener(t,s,r),()=>document.removeEventListener(t,s,r)},[t,r])}function vw(t,e,r){let n=Qh(e);_.useEffect(()=>{function s(l){n.current(l)}return window.addEventListener(t,s,r),()=>window.removeEventListener(t,s,r)},[t,r])}function YP(t,e,r=!0){let n=_.useRef(!1);_.useEffect(()=>{requestAnimationFrame(()=>{n.current=r})},[r]);function s(u,d){if(!n.current||u.defaultPrevented)return;let h=d(u);if(h===null||!h.getRootNode().contains(h)||!h.isConnected)return;let v=(function g(w){return typeof w=="function"?g(w()):Array.isArray(w)||w instanceof Set?w:[w]})(t);for(let g of v){if(g===null)continue;let w=g instanceof HTMLElement?g:g.current;if(w!=null&&w.contains(h)||u.composed&&u.composedPath().includes(w))return}return!HP(h,mw.Loose)&&h.tabIndex!==-1&&u.preventDefault(),e(u,h)}let l=_.useRef(null);Xf("pointerdown",u=>{var d,h;n.current&&(l.current=((h=(d=u.composedPath)==null?void 0:d.call(u))==null?void 0:h[0])||u.target)},!0),Xf("mousedown",u=>{var d,h;n.current&&(l.current=((h=(d=u.composedPath)==null?void 0:d.call(u))==null?void 0:h[0])||u.target)},!0),Xf("click",u=>{KP()||l.current&&(s(u,()=>l.current),l.current=null)},!0),Xf("touchend",u=>s(u,()=>u.target instanceof HTMLElement?u.target:null),!0),vw("blur",u=>s(u,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function $d(...t){return _.useMemo(()=>hw(...t),[...t])}let yw=Symbol();function XP(t,e=!0){return Object.assign(t,{[yw]:e})}function Oo(...t){let e=_.useRef(t);_.useEffect(()=>{e.current=t},[t]);let r=$n(n=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(n):s.current=n)});return t.every(n=>n==null||(n==null?void 0:n[yw]))?void 0:r}function Ng(t,e){let r=_.useRef([]),n=$n(t);_.useEffect(()=>{let s=[...r.current];for(let[l,u]of e.entries())if(r.current[l]!==u){let d=n(e,s);return r.current=e,d}},[n,...e])}function Cy(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}var Gm=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Gm||{}),ZP=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(ZP||{});function Bs({ourProps:t,theirProps:e,slot:r,defaultTag:n,features:s,visible:l=!0,name:u,mergeRefs:d}){d=d??JP;let h=ww(e,t);if(l)return Zf(h,r,n,u,d);let v=s??0;if(v&2){let{static:g=!1,...w}=h;if(g)return Zf(w,r,n,u,d)}if(v&1){let{unmount:g=!0,...w}=h;return Nl(g?0:1,{0(){return null},1(){return Zf({...w,hidden:!0,style:{display:"none"}},r,n,u,d)}})}return Zf(h,r,n,u,d)}function Zf(t,e={},r,n,s){let{as:l=r,children:u,refName:d="ref",...h}=sm(t,["unmount","static"]),v=t.ref!==void 0?{[d]:t.ref}:{},g=typeof u=="function"?u(e):u;"className"in h&&h.className&&typeof h.className=="function"&&(h.className=h.className(e));let w={};if(e){let b=!1,R=[];for(let[P,C]of Object.entries(e))typeof C=="boolean"&&(b=!0),C===!0&&R.push(P);b&&(w["data-headlessui-state"]=R.join(" "))}if(l===_.Fragment&&Object.keys(ky(h)).length>0){if(!_.isValidElement(g)||Array.isArray(g)&&g.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(h).map(C=>`  - ${C}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(C=>`  - ${C}`).join(`
`)].join(`
`));let b=g.props,R=typeof(b==null?void 0:b.className)=="function"?(...C)=>Cy(b==null?void 0:b.className(...C),h.className):Cy(b==null?void 0:b.className,h.className),P=R?{className:R}:{};return _.cloneElement(g,Object.assign({},ww(g.props,ky(sm(h,["ref"]))),w,v,{ref:s(g.ref,v.ref)},P))}return _.createElement(l,Object.assign({},sm(h,["ref"]),l!==_.Fragment&&v,l!==_.Fragment&&w),g)}function JP(...t){return t.every(e=>e==null)?void 0:e=>{for(let r of t)r!=null&&(typeof r=="function"?r(e):r.current=e)}}function ww(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let s in n)s.startsWith("on")&&typeof n[s]=="function"?(r[s]!=null||(r[s]=[]),r[s].push(n[s])):e[s]=n[s];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(r).map(n=>[n,void 0])));for(let n in r)Object.assign(e,{[n](s,...l){let u=r[n];for(let d of u){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;d(s,...l)}}});return e}function Us(t){var e;return Object.assign(_.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function ky(t){let e=Object.assign({},t);for(let r in e)e[r]===void 0&&delete e[r];return e}function sm(t,e=[]){let r=Object.assign({},t);for(let n of e)n in r&&delete r[n];return r}let eC="div";var Oh=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(Oh||{});function tC(t,e){var r;let{features:n=1,...s}=t,l={ref:e,"aria-hidden":(n&2)===2?!0:(r=s["aria-hidden"])!=null?r:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return Bs({ourProps:l,theirProps:s,slot:{},defaultTag:eC,name:"Hidden"})}let Km=Us(tC),xw=_.createContext(null);xw.displayName="OpenClosedContext";var pd=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(pd||{});function rC(){return _.useContext(xw)}function nC(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let Ol=[];nC(()=>{function t(e){e.target instanceof HTMLElement&&e.target!==document.body&&Ol[0]!==e.target&&(Ol.unshift(e.target),Ol=Ol.filter(r=>r!=null&&r.isConnected),Ol.splice(10))}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function iC(t){let e=t.parentElement,r=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(r=e),e=e.parentElement;let n=(e==null?void 0:e.getAttribute("disabled"))==="";return n&&sC(r)?!1:n}function sC(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}var Sw=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Sw||{});function bw(t,e,r,n){let s=Qh(r);_.useEffect(()=>{t=t??window;function l(u){s.current(u)}return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)},[t,e,n])}function Ew(){let t=_.useRef(!1);return _o(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function Pw(t){let e=$n(t),r=_.useRef(!1);_.useEffect(()=>(r.current=!1,()=>{r.current=!0,qh(()=>{r.current&&e()})}),[e])}var md=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(md||{});function oC(){let t=_.useRef(0);return vw("keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function Cw(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let r of t.current)r.current instanceof HTMLElement&&e.add(r.current);return e}let lC="div";var kw=(t=>(t[t.None=1]="None",t[t.InitialFocus=2]="InitialFocus",t[t.TabLock=4]="TabLock",t[t.FocusLock=8]="FocusLock",t[t.RestoreFocus=16]="RestoreFocus",t[t.All=30]="All",t))(kw||{});function aC(t,e){let r=_.useRef(null),n=Oo(r,e),{initialFocus:s,containers:l,features:u=30,...d}=t;Kh()||(u=1);let h=$d(r);dC({ownerDocument:h},!!(u&16));let v=fC({ownerDocument:h,container:r,initialFocus:s},!!(u&2));hC({ownerDocument:h,container:r,containers:l,previousActiveElement:v},!!(u&8));let g=oC(),w=$n(C=>{let j=r.current;j&&(O=>O())(()=>{Nl(g.current,{[md.Forwards]:()=>{yh(j,Oa.First,{skipElements:[C.relatedTarget]})},[md.Backwards]:()=>{yh(j,Oa.Last,{skipElements:[C.relatedTarget]})}})})}),b=FP(),R=_.useRef(!1),P={ref:n,onKeyDown(C){C.key=="Tab"&&(R.current=!0,b.requestAnimationFrame(()=>{R.current=!1}))},onBlur(C){let j=Cw(l);r.current instanceof HTMLElement&&j.add(r.current);let O=C.relatedTarget;O instanceof HTMLElement&&O.dataset.headlessuiFocusGuard!=="true"&&(Tw(j,O)||(R.current?yh(r.current,Nl(g.current,{[md.Forwards]:()=>Oa.Next,[md.Backwards]:()=>Oa.Previous})|Oa.WrapAround,{relativeTo:C.target}):C.target instanceof HTMLElement&&Fa(C.target)))}};return ct.createElement(ct.Fragment,null,!!(u&4)&&ct.createElement(Km,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:w,features:Oh.Focusable}),Bs({ourProps:P,theirProps:d,defaultTag:lC,name:"FocusTrap"}),!!(u&4)&&ct.createElement(Km,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:w,features:Oh.Focusable}))}let uC=Us(aC),nd=Object.assign(uC,{features:kw});function cC(t=!0){let e=_.useRef(Ol.slice());return Ng(([r],[n])=>{n===!0&&r===!1&&qh(()=>{e.current.splice(0)}),n===!1&&r===!0&&(e.current=Ol.slice())},[t,Ol,e]),$n(()=>{var r;return(r=e.current.find(n=>n!=null&&n.isConnected))!=null?r:null})}function dC({ownerDocument:t},e){let r=cC(e);Ng(()=>{e||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&Fa(r())},[e]),Pw(()=>{e&&Fa(r())})}function fC({ownerDocument:t,container:e,initialFocus:r},n){let s=_.useRef(null),l=Ew();return Ng(()=>{if(!n)return;let u=e.current;u&&qh(()=>{if(!l.current)return;let d=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===d){s.current=d;return}}else if(u.contains(d)){s.current=d;return}r!=null&&r.current?Fa(r.current):yh(u,Oa.First)===pw.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),s.current=t==null?void 0:t.activeElement})},[n]),s}function hC({ownerDocument:t,container:e,containers:r,previousActiveElement:n},s){let l=Ew();bw(t==null?void 0:t.defaultView,"focus",u=>{if(!s||!l.current)return;let d=Cw(r);e.current instanceof HTMLElement&&d.add(e.current);let h=n.current;if(!h)return;let v=u.target;v&&v instanceof HTMLElement?Tw(d,v)?(n.current=v,Fa(v)):(u.preventDefault(),u.stopPropagation(),Fa(h)):Fa(n.current)},!0)}function Tw(t,e){for(let r of t)if(r.contains(e))return!0;return!1}let Rw=_.createContext(!1);function pC(){return _.useContext(Rw)}function Ym(t){return ct.createElement(Rw.Provider,{value:t.force},t.children)}function mC(t){let e=pC(),r=_.useContext(_w),n=$d(t),[s,l]=_.useState(()=>{if(!e&&r!==null||ko.isServer)return null;let u=n==null?void 0:n.getElementById("headlessui-portal-root");if(u)return u;if(n===null)return null;let d=n.createElement("div");return d.setAttribute("id","headlessui-portal-root"),n.body.appendChild(d)});return _.useEffect(()=>{s!==null&&(n!=null&&n.body.contains(s)||n==null||n.body.appendChild(s))},[s,n]),_.useEffect(()=>{e||r!==null&&l(r.current)},[r,l,e]),s}let gC=_.Fragment;function vC(t,e){let r=t,n=_.useRef(null),s=Oo(XP(g=>{n.current=g}),e),l=$d(n),u=mC(n),[d]=_.useState(()=>{var g;return ko.isServer?null:(g=l==null?void 0:l.createElement("div"))!=null?g:null}),h=_.useContext(Xm),v=Kh();return _o(()=>{!u||!d||u.contains(d)||(d.setAttribute("data-headlessui-portal",""),u.appendChild(d))},[u,d]),_o(()=>{if(d&&h)return h.register(d)},[h,d]),Pw(()=>{var g;!u||!d||(d instanceof Node&&u.contains(d)&&u.removeChild(d),u.childNodes.length<=0&&((g=u.parentElement)==null||g.removeChild(u)))}),v?!u||!d?null:jg.createPortal(Bs({ourProps:{ref:s},theirProps:r,defaultTag:gC,name:"Portal"}),d):null}let yC=_.Fragment,_w=_.createContext(null);function wC(t,e){let{target:r,...n}=t,s={ref:Oo(e)};return ct.createElement(_w.Provider,{value:r},Bs({ourProps:s,theirProps:n,defaultTag:yC,name:"Popover.Group"}))}let Xm=_.createContext(null);function xC(){let t=_.useContext(Xm),e=_.useRef([]),r=$n(l=>(e.current.push(l),t&&t.register(l),()=>n(l))),n=$n(l=>{let u=e.current.indexOf(l);u!==-1&&e.current.splice(u,1),t&&t.unregister(l)}),s=_.useMemo(()=>({register:r,unregister:n,portals:e}),[r,n,e]);return[e,_.useMemo(()=>function({children:l}){return ct.createElement(Xm.Provider,{value:s},l)},[s])]}let SC=Us(vC),bC=Us(wC),Zm=Object.assign(SC,{Group:bC});function EC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const PC=typeof Object.is=="function"?Object.is:EC,{useState:CC,useEffect:kC,useLayoutEffect:TC,useDebugValue:RC}=Ju;function _C(t,e,r){const n=e(),[{inst:s},l]=CC({inst:{value:n,getSnapshot:e}});return TC(()=>{s.value=n,s.getSnapshot=e,om(s)&&l({inst:s})},[t,n,e]),kC(()=>(om(s)&&l({inst:s}),t(()=>{om(s)&&l({inst:s})})),[t]),RC(n),n}function om(t){const e=t.getSnapshot,r=t.value;try{const n=e();return!PC(r,n)}catch{return!0}}function jC(t,e,r){return e()}const OC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",LC=!OC,MC=LC?jC:_C,IC="useSyncExternalStore"in Ju?(t=>t.useSyncExternalStore)(Ju):MC;function AC(t){return IC(t.subscribe,t.getSnapshot,t.getSnapshot)}function $C(t,e){let r=t(),n=new Set;return{getSnapshot(){return r},subscribe(s){return n.add(s),()=>n.delete(s)},dispatch(s,...l){let u=e[s].call(r,...l);u&&(r=u,n.forEach(d=>d()))}}}function NC(){let t;return{before({doc:e}){var r;let n=e.documentElement;t=((r=e.defaultView)!=null?r:window).innerWidth-n.clientWidth},after({doc:e,d:r}){let n=e.documentElement,s=n.clientWidth-n.offsetWidth,l=t-s;r.style(n,"paddingRight",`${l}px`)}}}function zC(){return gw()?{before({doc:t,d:e,meta:r}){function n(s){return r.containers.flatMap(l=>l()).some(l=>l.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let d=Gh();d.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>d.dispose()))}let l=(s=window.scrollY)!=null?s:window.pageYOffset,u=null;e.addEventListener(t,"click",d=>{if(d.target instanceof HTMLElement)try{let h=d.target.closest("a");if(!h)return;let{hash:v}=new URL(h.href),g=t.querySelector(v);g&&!n(g)&&(u=g)}catch{}},!0),e.addEventListener(t,"touchstart",d=>{if(d.target instanceof HTMLElement)if(n(d.target)){let h=d.target;for(;h.parentElement&&n(h.parentElement);)h=h.parentElement;e.style(h,"overscrollBehavior","contain")}else e.style(d.target,"touchAction","none")}),e.addEventListener(t,"touchmove",d=>{if(d.target instanceof HTMLElement)if(n(d.target)){let h=d.target;for(;h.parentElement&&h.dataset.headlessuiPortal!==""&&!(h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth);)h=h.parentElement;h.dataset.headlessuiPortal===""&&d.preventDefault()}else d.preventDefault()},{passive:!1}),e.add(()=>{var d;let h=(d=window.scrollY)!=null?d:window.pageYOffset;l!==h&&window.scrollTo(0,l),u&&u.isConnected&&(u.scrollIntoView({block:"nearest"}),u=null)})})}}:{}}function FC(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function DC(t){let e={};for(let r of t)Object.assign(e,r(e));return e}let Na=$C(()=>new Map,{PUSH(t,e){var r;let n=(r=this.get(t))!=null?r:{doc:t,count:0,d:Gh(),meta:new Set};return n.count++,n.meta.add(e),this.set(t,n),this},POP(t,e){let r=this.get(t);return r&&(r.count--,r.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:r}){let n={doc:t,d:e,meta:DC(r)},s=[zC(),NC(),FC()];s.forEach(({before:l})=>l==null?void 0:l(n)),s.forEach(({after:l})=>l==null?void 0:l(n))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Na.subscribe(()=>{let t=Na.getSnapshot(),e=new Map;for(let[r]of t)e.set(r,r.documentElement.style.overflow);for(let r of t.values()){let n=e.get(r.doc)==="hidden",s=r.count!==0;(s&&!n||!s&&n)&&Na.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&Na.dispatch("TEARDOWN",r)}});function BC(t,e,r){let n=AC(Na),s=t?n.get(t):void 0,l=s?s.count>0:!1;return _o(()=>{if(!(!t||!e))return Na.dispatch("PUSH",t,r),()=>Na.dispatch("POP",t,r)},[e,t]),l}let lm=new Map,id=new Map;function Ty(t,e=!0){_o(()=>{var r;if(!e)return;let n=typeof t=="function"?t():t.current;if(!n)return;function s(){var u;if(!n)return;let d=(u=id.get(n))!=null?u:1;if(d===1?id.delete(n):id.set(n,d-1),d!==1)return;let h=lm.get(n);h&&(h["aria-hidden"]===null?n.removeAttribute("aria-hidden"):n.setAttribute("aria-hidden",h["aria-hidden"]),n.inert=h.inert,lm.delete(n))}let l=(r=id.get(n))!=null?r:0;return id.set(n,l+1),l!==0||(lm.set(n,{"aria-hidden":n.getAttribute("aria-hidden"),inert:n.inert}),n.setAttribute("aria-hidden","true"),n.inert=!0),s},[t,e])}function UC({defaultContainers:t=[],portals:e,mainTreeNodeRef:r}={}){var n;let s=_.useRef((n=r==null?void 0:r.current)!=null?n:null),l=$d(s),u=$n(()=>{var d,h,v;let g=[];for(let w of t)w!==null&&(w instanceof HTMLElement?g.push(w):"current"in w&&w.current instanceof HTMLElement&&g.push(w.current));if(e!=null&&e.current)for(let w of e.current)g.push(w);for(let w of(d=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?d:[])w!==document.body&&w!==document.head&&w instanceof HTMLElement&&w.id!=="headlessui-portal-root"&&(w.contains(s.current)||w.contains((v=(h=s.current)==null?void 0:h.getRootNode())==null?void 0:v.host)||g.some(b=>w.contains(b))||g.push(w));return g});return{resolveContainers:u,contains:$n(d=>u().some(h=>h.contains(d))),mainTreeNodeRef:s,MainTreeNode:_.useMemo(()=>function(){return r!=null?null:ct.createElement(Km,{features:Oh.Hidden,ref:s})},[s,r])}}let zg=_.createContext(()=>{});zg.displayName="StackContext";var Jm=(t=>(t[t.Add=0]="Add",t[t.Remove=1]="Remove",t))(Jm||{});function HC(){return _.useContext(zg)}function WC({children:t,onUpdate:e,type:r,element:n,enabled:s}){let l=HC(),u=$n((...d)=>{e==null||e(...d),l(...d)});return _o(()=>{let d=s===void 0||s===!0;return d&&u(0,r,n),()=>{d&&u(1,r,n)}},[u,r,n,s]),ct.createElement(zg.Provider,{value:u},t)}let jw=_.createContext(null);function Ow(){let t=_.useContext(jw);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Ow),e}return t}function VC(){let[t,e]=_.useState([]);return[t.length>0?t.join(" "):void 0,_.useMemo(()=>function(r){let n=$n(l=>(e(u=>[...u,l]),()=>e(u=>{let d=u.slice(),h=d.indexOf(l);return h!==-1&&d.splice(h,1),d}))),s=_.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props}),[n,r.slot,r.name,r.props]);return ct.createElement(jw.Provider,{value:s},r.children)},[e])]}let QC="p";function qC(t,e){let r=nc(),{id:n=`headlessui-description-${r}`,...s}=t,l=Ow(),u=Oo(e);_o(()=>l.register(n),[n,l.register]);let d={ref:u,...l.props,id:n};return Bs({ourProps:d,theirProps:s,slot:l.slot||{},defaultTag:QC,name:l.name||"Description"})}let GC=Us(qC),KC=Object.assign(GC,{});var YC=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(YC||{}),XC=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(XC||{});let ZC={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},Lh=_.createContext(null);Lh.displayName="DialogContext";function Nd(t){let e=_.useContext(Lh);if(e===null){let r=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Nd),r}return e}function JC(t,e,r=()=>[document.body]){BC(t,e,n=>{var s;return{containers:[...(s=n.containers)!=null?s:[],r]}})}function ek(t,e){return Nl(e.type,ZC,t,e)}let tk="div",rk=Gm.RenderStrategy|Gm.Static;function nk(t,e){let r=nc(),{id:n=`headlessui-dialog-${r}`,open:s,onClose:l,initialFocus:u,role:d="dialog",__demoMode:h=!1,...v}=t,[g,w]=_.useState(0),b=_.useRef(!1);d=(function(){return d==="dialog"||d==="alertdialog"?d:(b.current||(b.current=!0,console.warn(`Invalid role [${d}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let R=rC();s===void 0&&R!==null&&(s=(R&pd.Open)===pd.Open);let P=_.useRef(null),C=Oo(P,e),j=$d(P),O=t.hasOwnProperty("open")||R!==null,L=t.hasOwnProperty("onClose");if(!O&&!L)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!O)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!L)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof s!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${s}`);if(typeof l!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${l}`);let A=s?0:1,[F,z]=_.useReducer(ek,{titleId:null,descriptionId:null,panelRef:_.createRef()}),B=$n(()=>l(!1)),$=$n(Ye=>z({type:0,id:Ye})),K=Kh()?h?!1:A===0:!1,fe=g>1,J=_.useContext(Lh)!==null,[H,Y]=xC(),xe={get current(){var Ye;return(Ye=F.panelRef.current)!=null?Ye:P.current}},{resolveContainers:te,mainTreeNodeRef:Te,MainTreeNode:de}=UC({portals:H,defaultContainers:[xe]}),je=fe?"parent":"leaf",ee=R!==null?(R&pd.Closing)===pd.Closing:!1,Q=J||ee?!1:K,ue=_.useCallback(()=>{var Ye,Ce;return(Ce=Array.from((Ye=j==null?void 0:j.querySelectorAll("body > *"))!=null?Ye:[]).find(Re=>Re.id==="headlessui-portal-root"?!1:Re.contains(Te.current)&&Re instanceof HTMLElement))!=null?Ce:null},[Te]);Ty(ue,Q);let U=fe?!0:K,oe=_.useCallback(()=>{var Ye,Ce;return(Ce=Array.from((Ye=j==null?void 0:j.querySelectorAll("[data-headlessui-portal]"))!=null?Ye:[]).find(Re=>Re.contains(Te.current)&&Re instanceof HTMLElement))!=null?Ce:null},[Te]);Ty(oe,U),YP(te,B,!(!K||fe));let Me=!(fe||A!==0);bw(j==null?void 0:j.defaultView,"keydown",Ye=>{Me&&(Ye.defaultPrevented||Ye.key===Sw.Escape&&(Ye.preventDefault(),Ye.stopPropagation(),B()))}),JC(j,!(ee||A!==0||J),te),_.useEffect(()=>{if(A!==0||!P.current)return;let Ye=new ResizeObserver(Ce=>{for(let Re of Ce){let bt=Re.target.getBoundingClientRect();bt.x===0&&bt.y===0&&bt.width===0&&bt.height===0&&B()}});return Ye.observe(P.current),()=>Ye.disconnect()},[A,P,B]);let[Ke,Qe]=VC(),nt=_.useMemo(()=>[{dialogState:A,close:B,setTitleId:$},F],[A,F,B,$]),ft=_.useMemo(()=>({open:A===0}),[A]),Ct={ref:C,id:n,role:d,"aria-modal":A===0?!0:void 0,"aria-labelledby":F.titleId,"aria-describedby":Ke};return ct.createElement(WC,{type:"Dialog",enabled:A===0,element:P,onUpdate:$n((Ye,Ce)=>{Ce==="Dialog"&&Nl(Ye,{[Jm.Add]:()=>w(Re=>Re+1),[Jm.Remove]:()=>w(Re=>Re-1)})})},ct.createElement(Ym,{force:!0},ct.createElement(Zm,null,ct.createElement(Lh.Provider,{value:nt},ct.createElement(Zm.Group,{target:P},ct.createElement(Ym,{force:!1},ct.createElement(Qe,{slot:ft,name:"Dialog.Description"},ct.createElement(nd,{initialFocus:u,containers:te,features:K?Nl(je,{parent:nd.features.RestoreFocus,leaf:nd.features.All&~nd.features.FocusLock}):nd.features.None},ct.createElement(Y,null,Bs({ourProps:Ct,theirProps:v,slot:ft,defaultTag:tk,features:rk,visible:A===0,name:"Dialog"}))))))))),ct.createElement(de,null))}let ik="div";function sk(t,e){let r=nc(),{id:n=`headlessui-dialog-overlay-${r}`,...s}=t,[{dialogState:l,close:u}]=Nd("Dialog.Overlay"),d=Oo(e),h=$n(g=>{if(g.target===g.currentTarget){if(iC(g.currentTarget))return g.preventDefault();g.preventDefault(),g.stopPropagation(),u()}}),v=_.useMemo(()=>({open:l===0}),[l]);return Bs({ourProps:{ref:d,id:n,"aria-hidden":!0,onClick:h},theirProps:s,slot:v,defaultTag:ik,name:"Dialog.Overlay"})}let ok="div";function lk(t,e){let r=nc(),{id:n=`headlessui-dialog-backdrop-${r}`,...s}=t,[{dialogState:l},u]=Nd("Dialog.Backdrop"),d=Oo(e);_.useEffect(()=>{if(u.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[u.panelRef]);let h=_.useMemo(()=>({open:l===0}),[l]);return ct.createElement(Ym,{force:!0},ct.createElement(Zm,null,Bs({ourProps:{ref:d,id:n,"aria-hidden":!0},theirProps:s,slot:h,defaultTag:ok,name:"Dialog.Backdrop"})))}let ak="div";function uk(t,e){let r=nc(),{id:n=`headlessui-dialog-panel-${r}`,...s}=t,[{dialogState:l},u]=Nd("Dialog.Panel"),d=Oo(e,u.panelRef),h=_.useMemo(()=>({open:l===0}),[l]),v=$n(g=>{g.stopPropagation()});return Bs({ourProps:{ref:d,id:n,onClick:v},theirProps:s,slot:h,defaultTag:ak,name:"Dialog.Panel"})}let ck="h2";function dk(t,e){let r=nc(),{id:n=`headlessui-dialog-title-${r}`,...s}=t,[{dialogState:l,setTitleId:u}]=Nd("Dialog.Title"),d=Oo(e);_.useEffect(()=>(u(n),()=>u(null)),[n,u]);let h=_.useMemo(()=>({open:l===0}),[l]);return Bs({ourProps:{ref:d,id:n},theirProps:s,slot:h,defaultTag:ck,name:"Dialog.Title"})}let fk=Us(nk),hk=Us(lk),pk=Us(uk),mk=Us(sk),gk=Us(dk),Fs=Object.assign(fk,{Backdrop:hk,Panel:pk,Overlay:mk,Title:gk,Description:KC});const Jf={},ic={get(t){return t},setMetaValue([t,e,r],n){let s=ic.getResourceMeta(t,e),l=s?s[r]:void 0,u=typeof n=="function"?n(l):n;Jf[t]={...Jf[t]||{},[e]:{...(Jf[t]||{})[e]||{},[r]:u}}},getResourceMeta:((t,e)=>{let r=Jf[t];if(r)return e?r[e]:r}),async load(t){let e=typeof t=="string"?t:t.id;return fetch(e).then(r=>r.json())},requestStatus(t){}};function vk(t){return t.type==="SpecificResource"?[t.source,{selector:t.selector}]:[t,{selector:null}]}function Fg(t=ic){function e(s){let l=s?typeof s=="string"?t.get(s):s:null;if(!l)return[];let u=t.get(l.items,{parent:l}),d=[];for(let h of u)d.push(...t.get(h.items,{parent:h}));return d}function r(s,l=[]){let u=Array.isArray(s)?s:e(s),d=[],h={items:[],type:"complex-choice"},v=[];for(let g of u){if(g.type!=="Annotation")throw Error("getPaintables() accept either a canvas or list of annotations");let w=Array.from(Array.isArray(g.body)?g.body:[g.body]);for(let b of w){let[R,{selector:P}]=vk(b),C=t.get(R),j=(C.type||"unknown").toLowerCase();if(j==="choice"){let O=t.get(C.items,{parent:C.id}),L=l.length?l.map(A=>O.find(F=>F.id===A)).filter(Boolean):[O[0]];L.length===0&&L.push(O[0]),h.items.push({type:"single-choice",items:O.map(A=>({id:A.id,label:A.label,selected:L.indexOf(A)!==-1})),label:R.label}),w.push(...L);continue}d.indexOf(j)===-1&&d.push(j),v.push({type:j,annotationId:g.id,annotation:g,resource:C,target:g.target,selector:P})}}return{types:d,items:v,choice:h.items.length<2?h.items[0]||null:h,allChoices:h.items.length?h:null}}function n(s){let{choice:l}=r(s);return l}return{getAllPaintingAnnotations:e,getPaintables:r,extractChoices:n}}function yk(t=ic){return{addEventListener(e,r,n,s){if(e)return t.setMetaValue([e.id,"eventManager",r],l=>{let u=l||[];for(let d of u)if(d.callback===n)return u;return[...u,{callback:n,scope:s}]}),n},removeEventListener(e,r,n){e&&t.setMetaValue([e.id,"eventManager",r],s=>(s||[]).filter(l=>l.callback!==n))},getListenersAsProps(e,r){let n=typeof e=="string"?{id:e}:e;if(!n||!n.id)return{};let s=t.getResourceMeta(n.id,"eventManager"),l={};if(s&&n)for(let u of Object.keys(s))l[u]=d=>{let h=t.get(n);for(let{callback:v,scope:g}of s[u]||[])(!g||r&&g.indexOf(r)!==-1)&&v(d,h)};return l}}}function Lw(t=ic){return{applyStyles(e,r,n){let s=typeof e=="string"?e:e.id;return t.setMetaValue([s,"styles",r],n)},getAppliedStyles(e){let r=typeof e=="string"?e:e.id;return t.getResourceMeta(r,"styles")}}}function _d(t){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_d(t)}function wk(t,e){if(_d(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_d(n)!="object")return n;throw TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xk(t){var e=wk(t,"string");return _d(e)=="symbol"?e:e+""}function In(t,e,r){return(e=xk(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const Sk={},Ry=t=>{let e,r=new Set,n=(g,w)=>{let b=typeof g=="function"?g(e):g;if(!Object.is(b,e)){let R=e;e=w??(typeof b!="object"||!b)?b:Object.assign({},e,b),r.forEach(P=>P(e,R))}},s=()=>e,l=()=>v,u=g=>(r.add(g),()=>r.delete(g)),d=()=>{(Sk?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()},h={setState:n,getState:s,getInitialState:l,subscribe:u,destroy:d},v=e=t(n,s,h);return h},Mw=t=>t?Ry(t):Ry;function Iw(t){return{all:t||(t=new Map),on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(s){s(r)}),(n=t.get("*"))&&n.slice().map(function(s){s(e,r)})}}}const Aw="http://library.stanford.edu/iiif/image-api/compliance.html#level0",$w="http://library.stanford.edu/iiif/image-api/compliance.html#level1",Nw="http://library.stanford.edu/iiif/image-api/compliance.html#level2",zw="http://library.stanford.edu/iiif/image-api/conformance.html#level0",Fw="http://library.stanford.edu/iiif/image-api/conformance.html#level1",Dw="http://library.stanford.edu/iiif/image-api/conformance.html#level2",Bw="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",Uw="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",Hw="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",Ww="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",Vw="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",Qw="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",qw="http://iiif.io/api/image/1/level0.json",Gw="http://iiif.io/api/image/1/profiles/level0.json",Kw="http://iiif.io/api/image/1/level1.json",Yw="http://iiif.io/api/image/1/profiles/level1.json",Xw="http://iiif.io/api/image/1/level2.json",Zw="http://iiif.io/api/image/1/profiles/level2.json",Jw="http://iiif.io/api/image/2/level0.json",ex="http://iiif.io/api/image/2/profiles/level0.json",tx="http://iiif.io/api/image/2/level1.json",rx="http://iiif.io/api/image/2/profiles/level1.json",nx="http://iiif.io/api/image/2/level2.json",ix="http://iiif.io/api/image/2/profiles/level2.json",sx="level0",ox="level1",lx="level2",ax="http://iiif.io/api/image/2/level0",ux="http://iiif.io/api/image/2/level1",cx="http://iiif.io/api/image/2/level2",Yh=[cx,Nw,Dw,Hw,Qw,Xw,Zw,nx,ix,lx],Dg=[...Yh,ux,$w,Fw,Uw,Vw,Kw,Yw,tx,rx,ox],dx=[ax,ux,cx,Aw,$w,Nw,zw,Fw,Dw,Bw,Uw,Hw,Ww,Vw,Qw,qw,Gw,Kw,Yw,Xw,Zw,Jw,ex,tx,rx,nx,ix,sx,ox,lx],bk=dx,fx=[ax,Aw,zw,Bw,Ww,qw,Gw,Jw,ex,sx],Ek={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["sizeByWhListed"]},Pk={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPx","regionSquare","sizeByWhListed","sizeByH","sizeByW","sizeByWh"]},Ck={extraFormats:["jpg","png"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPct","regionByPx","regionSquare","rotationBy90s","sizeByWhListed","sizeByConfinedWh","sizeByH","sizeByPct","sizeByW","sizeByWh"]};function kk(t){try{if(t==="full")return{full:!0};if(t==="square")return{square:!0};let e=t.startsWith("pct:"),r=t.substr(e?4:0).split(","),n=r.map(s=>parseFloat(s));return{x:n[0],y:n[1],w:n[2],h:n[3],percent:e}}catch{throw Error("Expected 'full', 'square' or 'x,y,w,h'. Found "+t)}}function Tk(t){let e={upscaled:!1,max:!1,confined:!1};if(t[0]==="^"&&(e.upscaled=!0,t=t.slice(1)),t==="max"||t==="full")return e.max=!0,e.serialiseAsFull=t==="full",e;if(t[0]==="!"&&(e.confined=!0,t=t.slice(1)),t[0]==="p")return e.percentScale=parseFloat(t.slice(4)),e;let r=t.split(",").map(n=>n.trim());return r.length&&(r[0]!==""&&(e.width=parseInt(r[0],10)),r[1]!==""&&(e.height=parseInt(r[1],10))),e}function Rk(t){let e={angle:0};if(t[0]==="!"&&(e.mirror=!0,t=t.substr(1)),e.angle=parseFloat(t)%360,Number.isNaN(e.angle))throw Error(`Invalid rotation ${t}`);return e}function _k(t,e=""){let r=t.match(/^(([a-zA-Z]+):\/\/([^/]+))?((.*)+)/);if(!r)throw Error(`Invalid or unknown input ${t}`);let n=r[2],s=r[3],l=r[4];if(l[0]==="/"&&(l=l.substring(1)),e.length>0){if(e[0]==="/"&&(e=e.substring(1)),e!==l.substring(0,e.length))throw Error(`Path does not start with prefix (path: ${l}, prefix: ${e})`);l=l.substring(e.length)}return{scheme:n,server:s,path:l,prefix:e}}function jk(t,e=""){let{path:r,scheme:n,server:s,prefix:l}=_k(t,e),u=r.split("/").reverse(),[d,h,v,g,...w]=u,b=w.reverse().filter(Boolean).join("/");if(u.length===1||d==="")return{type:"base",scheme:n,server:s,prefix:l,identifier:b};if(d==="info.json"){let[,...C]=u;return{type:"info",scheme:n,server:s,prefix:l,identifier:C.reverse().filter(Boolean).join("/")}}if(n===void 0||s===void 0||r===void 0||g===void 0||v===void 0||h===void 0||d===void 0)throw Error("Invalid image service URL");let[R="",P=""]=d.split(".");return{type:"image",scheme:n,server:s,prefix:l,identifier:b,originalPath:r,region:kk(g),size:Tk(v),rotation:Rk(h),quality:R,format:P}}function Ok(t){return Yh.indexOf(t)!==-1?Ck:Dg.indexOf(t)!==-1?Pk:Ek}function Lk(t){let e=t?Array.isArray(t.profile)?t.profile:[t.profile]:[],r={extraQualities:[],extraFormats:[],extraFeatures:[]};for(let n of e)if(typeof n=="string"&&(n=Ok(n)),!!n){if(n.formats)for(let s of n.formats)r.extraFormats.indexOf(s)===-1&&r.extraFormats.push(s);if(n.qualities)for(let s of n.qualities)r.extraQualities.indexOf(s)===-1&&r.extraQualities.push(s);if(n.supports)for(let s of n.supports)r.extraFeatures.indexOf(s)===-1&&r.extraFeatures.push(s);if(n.maxHeight&&(r.maxHeight=n.maxHeight),n.maxWidth&&(r.maxWidth=n.maxWidth),n.maxArea&&(r.maxArea=n.maxArea),n.extraFormats)for(let s of n.extraFormats)r.extraFormats.indexOf(s)===-1&&r.extraFormats.push(s);if(n.extraQualities)for(let s of n.extraQualities)r.extraQualities.indexOf(s)===-1&&r.extraQualities.push(s);if(n.extraFeatures)for(let s of n.extraFeatures)r.extraFeatures.indexOf(s)===-1&&r.extraFeatures.push(s);n.maxHeight&&(r.maxHeight=n.maxHeight),n.maxWidth&&(r.maxWidth=n.maxWidth),n.maxArea&&(r.maxArea=n.maxArea)}if(t.extraFormats)for(let n of t.extraFormats)r.extraFormats.indexOf(n)===-1&&r.extraFormats.push(n);if(t.extraFeatures)for(let n of t.extraFeatures)r.extraFeatures.indexOf(n)===-1&&r.extraFeatures.push(n);if(t.extraQualities)for(let n of t.extraQualities)r.extraQualities.indexOf(n)===-1&&r.extraQualities.push(n);return r}function _y(t){let e=Array.isArray(t.profile)?t.profile:[t.profile];for(let r of e)if(typeof r=="string"&&fx.indexOf(r)!==-1)return!0;return!1}function hr(t){if(t["@id"])return t["@id"];if(t.id)return t.id}function Xh(t){if(!t||!t.profile||!hr(t))return!1;let e=Array.isArray(t.profile)?t.profile:[t.profile];for(let r of e)if(typeof r=="string"&&dx.indexOf(r)!==-1)return!0;return!1}function Mk(t){if(!Xh(t))return!1;let e=Array.isArray(t.profile)?t.profile:[t.profile];for(let r of e)if(typeof r=="string"){if(Dg.indexOf(r)!==-1)return!0}else{let n=[...r.supports||[],...r.extraFeatures||[]];if(n.indexOf("regionByPx")!==-1&&(n.indexOf("sizeByW")!==-1||n.indexOf("sizeByWh")!==-1))return!0}return!1}function Ik({x:t=0,y:e=0,w:r,h:n,full:s,square:l,percent:u}){return"full"}function Ak({max:t,percentScale:e,upscaled:r,confined:n,width:s,height:l,serialiseAsFull:u,version:d}){let h=[];return r&&h.push("^"),t?(h.push(u?"full":"max"),h.join("")):(n&&h.push("!"),e&&h.push(`pct:${e}`),s&&h.push(`${s}`),h.push(","),l&&d===3&&h.push(`${l}`),h.join(""))}function $k(t){return`${t.mirror?"!":""}${(t.angle||0)%360}`}function Nk(t,e){let r=t.prefix.startsWith("/")?t.prefix.substring(1):t.prefix,n=`${t.scheme}://${t.server}/${r?`${r}/`:""}${t.identifier}`,{size:s}=t,{region:l,rotation:u,format:d,quality:h}=t;return[n,Ik(l),Ak(s),$k(u),`${h}.${d}`].filter(Boolean).join("/")}function La(t){return t.endsWith("info.json")?t:t.endsWith("/")?`${t}info.json`:`${t}/info.json`}function zk(t){let e=jk(La(t.id));if(e.type!=="info")throw Error("Invalid service URL");let r=Lk(t);return{identifier:e.identifier,originalPath:"",server:e.server,prefix:e.prefix,scheme:e.scheme,type:"image",quality:r.extraQualities.indexOf("default")===-1?r.extraQualities[0]:"default",region:{full:!0},size:{max:!0,upscaled:!1,confined:!1},format:"jpg",rotation:{angle:0}}}function Fk(t,e,r){let n=r.length,s=[];for(let l=0;l<n;l++){let u=r[l];if(!u)continue;let d=u.width;s.push(t/d)}return s}function Dk(t,e,r){let n=r.length,s=[];for(let l=0;l<n;l++){let u=r[l];u&&s.push({width:Math.floor(t/u),height:Math.floor(e/u)})}return s}function wh(t,e){if(e&&e.profile){let r=e.profile;if(r){let n=Array.isArray(r)?r:[r];if(n.includes(`level${t}`)||n.includes(`http://iiif.io/api/image/2/level${t}.json`)||n.includes(`http://iiif.io/api/image/1/level${t}.json`)||n.includes(`http://iiif.io/api/image/1/profiles/level${t}.json`))return!0;if(t===2){for(let s of n)if(Yh.includes(s))return!0}if(t===1){for(let s of n)if(Dg.includes(s))return!0}if(t===0){for(let s of n)if(fx.includes(s))return!0}}}return!1}function eg(t){return Xh(t)?wh(2,t)?2:wh(1,t)?1:wh(0,t)?0:null:null}function Bg(t){let e=t.service?Array.isArray(t.service)?t.service:[t.service]:[],r=e.length,n=[];for(let s=0;s<r;s++)Xh(e[s])&&n.push(e[s]);return n}function Bk(t){if(t["@type"])return t["@type"];if(t.type)return t.type}function Wu(t){let e=t.replace(/(https?:\/\/)?(www.)?/i,"");return e.indexOf("/")===-1?e:e.split("/")[0]}function Uk(t,e,r){let n=t>e?t:e,s=r.length,l=[];for(let u=0;u<s;u++){let d=r[u];if(!d||d.scaleFactors.length===0)continue;let h=d.scaleFactors[0];if(!h)continue;let v=n/h,g=[h];for(;v>=d.width;)h*=2,g.push(h),v/=2;l.push({...d,scaleFactors:g})}return l}function am(t,e,r){let n=zk({"@context":t.version===3?"http://iiif.io/api/image/3/context.json":"http://iiif.io/api/image/2/context.json",id:La(hr(t)),profile:t.level===null||t.level===void 0?"level0":`level${t.level}`,type:t.version===3?"ImageService3":"ImageService2"});return n.size.max=!1,n.size.width=e,n.size.height=r,{id:Nk(n),type:"fixed",width:e,height:r||t.height/(t.width||1)*e,unsafe:t.width>e}}function Hk(t,e,r){let n=t.width?t.width:t.maxWidth;return r.height<=t.maxHeight&&r.width<=t.maxWidth&&r.height>=t.minHeight&&r.width>=t.minWidth&&(!e||Math.abs(r.width-n)<Math.abs(e.width-n))}function Wk(t,e){let r=[],n=Object.assign({unsafeImageService:!1,atAnyCost:!0,fallback:!0,minHeight:64,minWidth:64,maxHeight:1/0,maxWidth:1/0,returnAllOptions:!1,preferFixedSize:!1,allowUnsafe:!1,explain:!1,height:0,width:0},t),s=(g,w=0)=>n.explain?r.push(Array(w).fill(0).map(b=>"    ").join("")+g().trim()):void 0,l=[],u=[],d=null;s(()=>`Using configuration: ${JSON.stringify(n,null,2)}`);let h=(g,w)=>{if(s(()=>"Swapping choice",3),Hk(n,w,g)){if(n.preferFixedSize&&g.unsafe){s(()=>`We found an image that was marked as unsafe, but it was the best size. (${g.id})`,4),u.push(g);return}n.returnAllOptions&&w&&u.push(w),s(()=>`We found a new image that was the best size. (${g.id})`,4),d=g}else n.returnAllOptions&&u.push(g)};s(()=>`The input shows we have ${e.length} list(s) of candidates to choose from.`);let v=e.length;for(let g=0;g<v;g++){let w=e[g]();s(()=>`Candidate group ${g}: ${JSON.stringify(w,null,2)}`,1);let b=w.length;s(()=>`Checking candidate list number ${g} and found ${b} potential ways of creating image(s)`,1);for(let R=0;R<b;R++){let P=w[R];if(s(()=>`-> Checking candidate ${R}`,1),P.type==="unknown"&&n.atAnyCost&&(s(()=>`We've found an unknown image type, adding this to the "last resort" list`,2),l.push(P)),P.type==="fixed"&&(P.unsafe?(s(()=>`We've found an unsafe fixed image type, adding this to the "last resort" list`,2),l.push(P)):(s(()=>"We've found a fixed size image, checking if it matches the request",2),h(P,d))),P.type==="fixed-service")if(n.unsafeImageService){s(()=>"Checking for an image from the tile source, without calculating the right height and width (unsafeImageService)",2);let C=am(P,n.width,n.height);h(C,d)}else{s(()=>"Checking for an image from the tile source 3",2);let C=am(P,P.width,P.height);h(C,d)}if(P.type==="variable"&&P.maxWidth){let C=am({id:P.id,type:"fixed-service",width:P.maxWidth,height:P.maxWidth,level:P.level,version:P.version},P.maxWidth);h(C,d)}}if(d&&!n.returnAllOptions){if(d.unsafe||n.allowUnsafe)continue;s(()=>`We found a match in choice list number ${g}, no searching any more`);break}}return n.atAnyCost&&u.length===0?(s(()=>d?`We found an image! ${d.id} of type ${d.type}`:'We found no images, but "atAnyCost" is set, so returning that'),{best:d||l[0]||null,fallback:l.slice(1),log:r}):n.returnAllOptions?(s(()=>"Returning all options that we have found"),{best:(n.atAnyCost?d||u[0]||l[0]:d||u[0])||null,fallback:[...u,...l],log:r}):(s(()=>"Returning the best image that we found, and a fallback"),{best:d||u[0]||null,fallback:d?u:u.slice(1),log:r})}function hx(t){return(t["@context"]?Array.isArray(t["@context"])?t["@context"]:[t["@context"]]:[]).indexOf("http://iiif.io/api/image/3/context.json")!==-1}function Vk(t){return Xh(t)?(t&&t.sizes?t.sizes:[]).map(e=>({id:hr(t),type:"fixed-service",height:e.height,width:e.width,level:eg(t),version:hx(t)?3:2})):[]}function Qk(t){if(!Mk(t))return[];let e=[],r=Array.isArray(t.profile)?t.profile:[t.profile],n=r.length;for(let s=0;s<n;s++){let l=r[s];if(l&&typeof l!="string"&&(l.maxHeight||l.maxWidth))return[{id:hr(t),type:"variable",minWidth:0,minHeight:0,maxHeight:l.maxHeight||l.maxWidth,maxWidth:l.maxWidth||l.maxHeight,level:eg(t),version:t["@context"]==="http://iiif.io/api/image/3/context.json"?3:2}]}if(t.tiles){let s=t.tiles.length;for(let l=0;l<s;l++){let u=t.tiles[l];u&&(u.height||u.width)&&e.push({id:hr(t),type:"variable",minHeight:0,minWidth:0,maxHeight:u.height||u.width,maxWidth:u.width,level:eg(t),version:hx(t)?3:2})}}return e}function jy(t){let e=[],r=t.length;for(let n=0;n<r;n++){let s=t[n];if(!s)continue;let l=Vk(s);l.length&&e.push(...l);let u=Qk(s);u.length&&e.push(...u)}return e}function Oy(t){let e=/^.*\/(full)\/(((\d+),(\d+)?)|max)\/(\d+)\/default\.(jpg|png|jpeg)$/,r=t.match(e);if(r&&r[4]&&r[5]){let n=r[1],s=parseInt(r[4],10),l=parseInt(r[5],10),u=r[7];if((n==="max"||n==="full")&&s&&l&&u)return{type:"fixed",id:t,height:l,width:s}}return{type:"unknown",id:t}}function tg(t){if(typeof t=="string")return Oy(t);let e=Bk(t);if(e!=="Image"&&e!=="sc:Image")return null;let r=t,n=hr(r);return n?n&&r.width&&r.height?{id:n,type:"fixed",width:r.width,height:r.height,unsafe:!0}:Oy(n):null}function qk(t,e=!0,r){let n=[],s=tg(t);if(s===null)return n;let l=t;if(n.push(s),e&&l&&l.width&&l.height){let u=[],d=Bg(l);for(let h of d){let v={id:hr(h),width:l.width,height:l.height};if(r.canLoadSync(v)){let g=r.loadServiceSync(v);g&&(g.height||(g.height=l.height),g.width||(g.width=l.width),u.push(...jy([g])))}}if(u.length)return n.push(...u),n}return l.service&&n.push(...jy(l.service)),n}function Gk(t,e){if(t.length!==e.length)return!1;if(t.length===0&&e.length===0)return!0;let r=t.length,n=!0;for(let l=0;l<r;l++){let u=t[l],d=e[l];if(u.width!==d.width||u.height!==d.height){n=!1;break}}if(n)return!0;let s=0;for(let l=0;l<r;l++)for(let u=0;u<r;u++)if(t[l].width===e[u].width&&t[l].height===e[u].height){s++;break}return s===r}var Ug=class{constructor(e={}){In(this,"config",{verificationsRequired:1,approximateServices:!1,enableFetching:!0,disableThrottling:!1}),In(this,"fetchingCount",0),In(this,"imageServices",{}),In(this,"knownImageServers",{}),this.config=Object.assign(this.config,e)}setConfig(e){Object.assign(this.config,e)}sample(e,r,n=!0){let s=Wu(hr(e)),l=La(hr(e)),u=this.knownImageServers[s];return this.imageServices[l]=Object.assign(e,{real:!0}),!u&&e.tiles&&!_y(e)?(this.knownImageServers[s]={verifications:0,malformed:!1,root:s,preLoaded:n,sampledId:hr(e),verified:!1,server:null,result:{context:e["@context"]||[],sampledProfile:e.profile,resourceServiceRatio:r&&e.height?r.height/e.height:1,sampledSizes:e.sizes||[],sizeRatios:Fk(e.width,e.height,e.sizes||[]),sampledTiles:e.tiles||[]}},!0):this.verify(e)}preLoad(e,r=!0){this.knownImageServers[e.root]=e,r&&(this.knownImageServers[e.root].malformed=!1,this.knownImageServers[e.root].verifications=this.config.verificationsRequired)}predict(e,r=!1,n=!1){let s=e==null?void 0:e.source,l=Wu(hr(e)),u=this.knownImageServers[l],d=La(hr(e));return this.imageServices[d]?this.imageServices[d]||null:!this.config.approximateServices||!u||!u.result||!(s!=null&&s.height||e.height)||!(s!=null&&s.width||e.width)||!n&&(u.malformed||u.verifications<this.config.verificationsRequired)||e.source&&_y(e.source)?null:(this.imageServices[d]||(this.imageServices[d]={"@context":u.result.context,"@id":hr(e),id:hr(e),protocol:"http://iiif.io/api/image",tiles:(s==null?void 0:s.tiles)||Uk(e.width,e.height,u.result.sampledTiles),sizes:(s==null?void 0:s.sizes)||Dk(Math.round(e.width/u.result.resourceServiceRatio),Math.round(e.height/u.result.resourceServiceRatio),u.result.sizeRatios),profile:(s==null?void 0:s.profile)||u.result.sampledProfile,height:(s==null?void 0:s.height)||e.height,width:(s==null?void 0:s.width)||e.width,real:!1}),this.imageServices[d]||null)}async getThumbnailFromResource(e,r,n=!0,s=[]){let l=e?await this.getImageCandidates(e,n):[];return Wk(r,[()=>s,()=>l])}async getImageCandidates(e,r=!0){let n=e;if(r&&n&&n.height&&n.width){let s=Bg(n);for(let l of s){let u={id:hr(l),width:l.width?l.width:n.width,height:l.height?l.height:n.height,source:l};await this.loadService(u)}}return qk(e,r,this)}async verify(e){let r=this.predict(e,!1,!0),n=await this.fetchService(hr(e));if(!r)return!1;let s=r.height===n.height&&r.width===n.width&&r["@context"]===n["@context"]&&Gk(r.sizes||[],n.sizes||[]);if(s){let l=Wu(hr(e)),u=this.knownImageServers[l];u&&(u.verifications+=1,u.verifications>=this.config.verificationsRequired&&(u.verified=!0))}return s}canLoadSync(e){let r=typeof e=="string"?e:hr(e),n=La(r);if(this.imageServices[n])return!0;let s=this.knownImageServers[Wu(r)];return!!(s&&!s.malformed&&s.verifications>=this.config.verificationsRequired)}async markAsMalformed(e){return this.knownImageServers[Wu(hr(e))].malformed=!0,this.loadService(e,!0)}async fetchService(e,r=!1){let n=La(e),s=this.imageServices[n];if(s&&(!r||s.real))return s;if(!this.config.enableFetching)throw Error("Fetching is not enabled");let l=await this.fetch(n).then(u=>u.json());return!l.id&&l["@id"]&&(l.id=l["@id"]),l.id!==e&&(l.id=e,l["@id"]&&(l["@id"]=e)),this.imageServices[n]=Object.assign(l,{real:!0}),this.imageServices[n]}async fetch(e,r){return fetch(e,r)}async loadService(e,r=!1){if(!this.config.disableThrottling){let l=!0;for(;l;)if(this.fetchingCount>=this.config.verificationsRequired)await new Promise(u=>setTimeout(u,500));else{l=!1;break}}let n=this.knownImageServers[Wu(hr(e))];if(n&&!n.malformed&&!r){await n.result;let l=this.loadServiceSync(e);if(l)return l}this.fetchingCount++;let s=await this.fetchService(hr(e),r);return this.fetchingCount--,s.real&&this.sample(s,e),s}loadServiceSync(e){let r=La(hr(e));return this.imageServices[r]?this.imageServices[r]:this.config.approximateServices?this.predict(e):null}};function Kk(t={}){let e=t.events||Iw(),r=t.loader||new Ug;return{store:Mw((s,l)=>({loaded:{},loadServiceSync:(u,d,h)=>{let v=u.id||u["@id"],g=l().loaded[v];if(g&&g.status==="done")return g.service;if(g&&g.status==="loading")return null;if(g&&g.status==="error")throw Error("Failed to load image service");let w={id:hr(u),width:u.width||(d==null?void 0:d.width)||0,height:u.height||(d==null?void 0:d.height)||0,source:u},b=r.loadServiceSync(w);return b?(s(R=>({loaded:{...R.loaded,[v]:{status:"done",service:b,real:!0}}})),e.emit("image-service.loaded",{id:v,service:b})):h&&l().loadService(u,d).then(()=>{}),b},loadService:async(u,d)=>{let h=u.id||u["@id"],v=l().loaded[h];if(v&&v.status==="done")return v.service;if(v&&v.status==="loading")return new Promise((g,w)=>{let b=R=>{R.id===h&&(e.off("image-service.loaded",b),g(R.service||u))};e.on("image-service.loaded",b)});if(v&&v.status==="error"&&!(d!=null&&d.force))throw Error("Failed to load image service");e.emit("image-service.loading",{id:h});try{let g={id:hr(u),width:u.width||0,height:u.height||0,source:u},w=await r.loadService(g,d==null?void 0:d.force);return s(b=>({loaded:{...b.loaded,[h]:{status:"done",service:w,real:w.real}}})),e.emit("image-service.loaded",{id:h,service:w}),w}catch(g){throw e.emit("image-service.error",{id:h,error:g}),g}}})),events:e}}const Yk=Kk(),Xk=new Ug;function Zk(t=ic,e={}){let r=e.imageServiceLoader||Xk;async function n(s,l,u=!1,d=[],h){let v=()=>r.getThumbnailFromResource(void 0,l,u,d);if(!s)return await r.getThumbnailFromResource(void 0,l,u,d);if(typeof s=="string"){let b=tg(s);return b&&d.push(b),await r.getThumbnailFromResource(void 0,l,u,d)}let g=t.get(s,{skipSelfReturn:!1});if(typeof g=="string")return{best:tg(g),fallback:[],log:[]};if(!g)return await v();switch(await(async b=>{if(b&&b.thumbnail&&b.thumbnail.length){let R=t.get(b.thumbnail[0]),P=await r.getImageCandidates(R,u);P&&P.length&&d.push(...P)}})(g),g.type){case"Annotation":{let b=Array.isArray(g.body)?g.body:[g.body],R=t.get(b[0]);return h&&!R.width&&(R.width=h.width,R.height=h.height),await r.getThumbnailFromResource(R,l,u,d)}case"Canvas":{let b=g;return n(b.items[0],l,u,d,{width:b.width,height:b.height})}case"AnnotationPage":return n(g.items[0],l,u,d,h);case"Choice":{let b=g;return!b.items||b.items[0]?await v():n(b.items[0],l,u,d,h)}case"Collection":{let b=g,R=b.items[0];return R?n(R,l,u,d,h):await v()}case"Manifest":{let b=g,R=b.items[0];return R?n(R,l,u,d,h):await v()}case"SpecificResource":case"Image":case"Dataset":case"Sound":case"Text":case"TextualBody":case"Video":return h&&!g.width&&(g.width=h.width,g.height=h.height),r.getThumbnailFromResource(g,l,u,d)}return await v()}return{getBestThumbnailAtSize:n}}function jd(t){"@babel/helpers - typeof";return jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jd(t)}function Jk(t,e){if(jd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jd(n)!="object")return n;throw TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eT(t){var e=Jk(t,"string");return jd(e)=="symbol"?e:e+""}function _l(t,e,r){return(e=eT(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Po(t){return Array.isArray(t)?t:t?[t]:[]}function Hs(t){for(let e in t)(t[e]===void 0||t[e]===null)&&delete t[e];return t}function Al(t){return typeof t=="string"?!1:t&&!t.type&&"source"in t?(t.type="SpecificResource",!0):!!t&&t.type==="SpecificResource"}function eh(...t){return e=>t.reduce((r,n)=>n(r),e)}const Ly=["Collection","Manifest","Canvas","AnnotationPage","AnnotationCollection","Annotation","ContentResource","Range","Service","Selector","Agent"];function tT(t,e){if(t==null)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(t))throw Error("Array is not a valid entity");if(typeof t!="object"){if(e)return e;throw Error(`${typeof t} is not a valid entity`)}if(typeof t.type=="string"){let r=Ly.indexOf(t.type);if(r!==-1)return Ly[r]}if(t.profile)return"Service";throw Error("Resource type is not known")}var rT=class px{constructor(e,r={}){_l(this,"traversals",void 0),_l(this,"options",void 0),_l(this,"_traverseManifest",eh(this.traverseManifestItems.bind(this),this.traverseNavPlace.bind(this),this.traverseLinking.bind(this),this.traverseDescriptive.bind(this),this.traverseLinkedCanvases.bind(this),this.traverseManifestStructures.bind(this),this.traverseInlineAnnotationPages.bind(this))),_l(this,"_traverseCanvas",eh(this.traverseCanvasItems.bind(this),this.traverseLinking.bind(this),this.traverseDescriptive.bind(this),this.traverseLinkedCanvases.bind(this),this.traverseInlineAnnotationPages.bind(this))),_l(this,"_traverseAnnotationPage",eh(this.traverseAnnotationPageItems.bind(this),this.traverseLinking.bind(this),this.traverseDescriptive.bind(this))),_l(this,"_traverseRange",eh(this.traverseRangeRanges.bind(this),this.traverseLinking.bind(this),this.traverseDescriptive.bind(this),this.traverseLinkedCanvases.bind(this))),this.traversals={collection:[],manifest:[],canvas:[],annotationCollection:[],annotationPage:[],annotation:[],contentResource:[],choice:[],range:[],service:[],agent:[],specificResource:[],geoJson:[],...e},this.options={allowUndefinedReturn:!1,...r}}static all(e){return new px({collection:[e],manifest:[e],canvas:[e],annotationCollection:[e],annotationPage:[e],annotation:[e],contentResource:[e],choice:[e],range:[e],service:[e],geoJson:[e],specificResource:[e],agent:[e]})}traverseDescriptive(e){return e.thumbnail&&(e.thumbnail=Po(e.thumbnail).map(r=>this.traverseType(r,{parent:e},this.traversals.contentResource))),e.provider&&(e.provider=e.provider.map(r=>this.traverseAgent(r,e))),e}traverseLinking(e){return e.seeAlso&&(e.seeAlso=Po(e.seeAlso).map(r=>this.traverseType(r,{parent:e},this.traversals.contentResource))),e.service&&(e.service=Po(e.service).map(r=>this.traverseService(r))),e.services&&(e.services=Po(e.services).map(r=>this.traverseService(r,e))),e.logo&&(e.logo=Po(e.logo).map(r=>this.traverseType(r,{parent:e},this.traversals.contentResource))),e.homepage&&(e.homepage=Po(e.homepage).map(r=>this.traverseType(r,{parent:e},this.traversals.contentResource))),e.partOf&&(e.partOf=e.partOf.map(r=>typeof r=="string"||!r.type?this.traverseType(r,{parent:e},this.traversals.contentResource):r.type==="Canvas"?this.traverseType(r,{parent:e},this.traversals.canvas):r.type==="AnnotationCollection"?this.traverseType(r,{parent:e},this.traversals.annotationCollection):r.type==="Collection"?this.traverseType(r,{parent:e},this.traversals.collection):this.traverseType(r,{parent:e},this.traversals.contentResource))),e.start&&(Al(e.start)?e.start=this.traverseSpecificResource(e.start,"Canvas",e):e.start=this.traverseType(e.start,{parent:e},this.traversals.canvas)),e.rendering&&(e.rendering=e.rendering.map(r=>this.traverseType(r,{parent:e},this.traversals.contentResource))),e.supplementary&&(e.supplementary=e.supplementary.map(r=>this.traverseType(r,{parent:e},this.traversals.contentResource))),e}traverseCollectionItems(e){return e.items&&e.items.map(r=>r.type==="Collection"?this.traverseCollection(r):this.traverseManifest(r)),e}traverseCollection(e,r){return this.traverseType(this.traverseDescriptive(this.traverseNavPlace(this.traverseInlineAnnotationPages(this.traverseLinking(this.traverseLinkedCanvases(this.traverseCollectionItems(e)))))),{parent:r},this.traversals.collection)}traverseGeoJson(e,r){return this.traverseType(e,{parent:r},this.traversals.geoJson)}traverseNavPlace(e){return e.navPlace&&(e.navPlace=this.traverseGeoJson(e.navPlace,e)),e}traverseManifestItems(e){return e.items&&(e.items=e.items.map(r=>this.traverseCanvas(r))),e}traverseManifestStructures(e){return e.structures&&(e.structures=e.structures.map(r=>this.traverseRange(r))),e}traverseManifest(e,r){return this.traverseType(this._traverseManifest(e),{parent:r},this.traversals.manifest)}traverseCanvasItems(e){return e.items=(e.items||[]).map(r=>this.traverseAnnotationPage(r,e)),e}traverseInlineAnnotationPages(e){return typeof e=="string"||!e||e.annotations&&(e.annotations=e.annotations.map(r=>this.traverseAnnotationPage(r,e))),e}traverseCanvas(e,r){return this.traverseType(this._traverseCanvas(e),{parent:r},this.traversals.canvas)}traverseAnnotationPageItems(e){return e.items&&(e.items=e.items.map(r=>this.traverseAnnotation(r,e))),e}traverseAnnotationPage(e,r){return this.traverseType(this._traverseAnnotationPage(e),{parent:r},this.traversals.annotationPage)}traverseAnnotationBody(e){return Array.isArray(e.body)?e.body=e.body.map(r=>this.traverseContentResource(r,e)):e.body&&(e.body=this.traverseContentResource(e.body,e)),e}traverseLinkedCanvases(e){return e.placeholderCanvas&&(e.placeholderCanvas=this.traverseCanvas(e.placeholderCanvas)),e.accompanyingCanvas&&(e.accompanyingCanvas=this.traverseCanvas(e.accompanyingCanvas)),e}traverseAnnotation(e,r){return this.traverseType(this.traverseLinking(this.traverseAnnotationBody(this.traverseDescriptive(e))),{parent:r},this.traversals.annotation)}traverseContentResourceLinking(e){return typeof e=="string"||!e||e&&e.service&&(e.service=Po(e.service||[]).map(r=>this.traverseService(r,e))),e}traverseContentResource(e,r){return e.type==="Choice"&&(e.items=e.items.map(n=>this.traverseContentResource(n,e))),Al(e)?this.traverseSpecificResource(e,"ContentResource"):this.traverseType(this.traverseInlineAnnotationPages(this.traverseContentResourceLinking(e)),{parent:r},this.traversals.contentResource)}traverseSpecificResource(e,r,n){let s=e.source;return typeof e.source=="string"&&(s={id:e.source,type:r||"unknown"}),this.traverseType({...e,source:r==="Canvas"||s.type==="Canvas"?this.traverseType(s,{parent:n},this.traversals.canvas):r==="ContentResource"?this.traverseContentResource(s,{parent:n}):this.traverseUnknown(s,{parent:n,typeHint:r})},{parent:n},this.traversals.specificResource)}traverseRangeRanges(e){return e.items&&(e.items=e.items.map(r=>typeof r=="string"?this.traverseCanvas({id:r,type:"Canvas"},e):Al(r)?this.traverseSpecificResource(r,"Canvas",e):r.type==="Manifest"?this.traverseManifest(r,e):this.traverseRange(r,e))),e}traverseRange(e,r){return this.traverseType(this._traverseRange(e),{parent:r},this.traversals.range)}traverseAgent(e,r){return this.traverseType(this.traverseDescriptive(this.traverseLinking(e)),{parent:r},this.traversals.agent)}traverseType(e,r,n){return n.reduce((s,l)=>{let u=l(s,r);return u===void 0&&!this.options.allowUndefinedReturn?s:u},e)}traverseService(e,r){let n=Object.assign({},e);return n&&n.service&&(n.service=Po(n.service).map(s=>this.traverseService(s))),this.traverseType(n,{parent:r},this.traversals.service)}traverseUnknown(e,{parent:r,typeHint:n}={}){let s=tT(e,n);switch(s){case"Collection":return this.traverseCollection(e,r);case"Manifest":return this.traverseManifest(e,r);case"Canvas":return this.traverseCanvas(e,r);case"AnnotationPage":return this.traverseAnnotationPage(e,r);case"Annotation":return this.traverseAnnotation(e,r);case"ContentResource":return this.traverseContentResource(e,r);case"Range":return this.traverseRange(e,r);case"Service":return this.traverseService(e,r);case"Agent":return this.traverseAgent(e,r);default:throw Error(`Unknown or unsupported resource type of ${s}`)}}};const My=["sc:Collection","sc:Manifest","sc:Canvas","sc:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];function nT(t){if(t==null)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(t))throw Error("Array is not a valid entity");if(typeof t!="object")throw Error(`${typeof t} is not a valid entity`);if(typeof t["@type"]=="string"){let e=My.indexOf(t["@type"]);if(e!==-1)return My[e]}if(t.profile)return"Service";if(t.format||t["@type"])return"ContentResource";throw Error("Resource type is not known")}var iT=class mx{constructor(e,r={}){_l(this,"traversals",void 0),_l(this,"options",void 0),this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],...e},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...r}}static all(e){return new mx({collection:[e],manifest:[e],canvas:[e],annotationList:[e],sequence:[e],annotation:[e],contentResource:[e],choice:[e],range:[e],service:[e],layer:[e]})}traverseCollection(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(e))),this.traversals.collection)}traverseCollectionItems(e){if(this.options.mergeMemberProperties){let r=[...(e.manifests||[]).map(l=>typeof l=="string"?{"@id":l,"@type":"sc:Manifest"}:l),...(e.collections||[]).map(l=>typeof l=="string"?{"@id":l,"@type":"sc:Collection"}:l),...e.members||[]],n=[],s=r.filter(l=>n.includes(l["@id"])?!1:(n.push(l["@id"]),!0));delete e.collections,delete e.manifests,e.members=s}return e.manifests&&(e.manifests=e.manifests.map(r=>this.traverseManifest(typeof r=="string"?{"@id":r,"@type":"sc:Manifest"}:r))),e.collections&&(e.collections=e.collections.map(r=>this.traverseCollection(typeof r=="string"?{"@id":r,"@type":"sc:Collection"}:r))),e.members&&(e.members=e.members.map(r=>typeof r=="string"?r:r["@type"]==="sc:Collection"?this.traverseCollection(r):r["@type"]==="sc:Manifest"?this.traverseManifest(r):this.traverseUnknown(r))),e}traverseManifest(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(e))),this.traversals.manifest)}traverseManifestItems(e){return e.sequences&&(e.sequences=e.sequences.map(r=>this.traverseSequence(r))),e.structures&&(e.structures=e.structures.map(r=>this.traverseRange(r))),e}traverseSequence(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(e))),this.traversals.sequence)}traverseSequenceItems(e){return e.canvases&&(e.canvases=e.canvases.map(r=>this.traverseCanvas(r))),e}traverseCanvas(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(e))),this.traversals.canvas)}traverseCanvasItems(e){return e.images&&(e.images=e.images.map(r=>this.traverseAnnotation(r))),e.otherContent&&(e.otherContent=e.otherContent.map(r=>this.traverseAnnotationList(r))),e}traverseRange(e){return e["@type"]!=="sc:Range"&&(e["@type"]="sc:Range"),this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(e))),this.traversals.range)}traverseRangeItems(e){if(this.options.mergeMemberProperties){let r=[...(e.ranges||[]).map(n=>typeof n=="string"?{"@id":n,"@type":"sc:Range"}:n),...(e.canvases||[]).map(n=>typeof n=="string"?{"@id":n,"@type":"sc:Canvas"}:n),...e.members||[]];delete e.ranges,delete e.canvases,e.members=r.length?r.map(n=>this.traverseUnknown(n)):void 0}return e}traverseAnnotationList(e){let r=typeof e=="string"?{"@id":e,"@type":"sc:AnnotationList"}:e;return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems(r)),this.traversals.annotationList)}traverseAnnotationListItems(e){return e.resources&&(e.resources=e.resources.map(r=>this.traverseAnnotation(r))),e}traverseAnnotation(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(e))),this.traversals.annotation)}traverseAnnotationItems(e){return e.resource&&(Array.isArray(e.resource)?e.resource=e.resource.map(r=>this.traverseContentResource(r)):e.resource=this.traverseContentResource(e.resource)),e.on,e}traverseLayer(e){return this.traverseType(this.traverseLinking(this.traverseLayerItems(e)),this.traversals.layer)}traverseLayerItems(e){return e.otherContent&&(e.otherContent=e.otherContent.map(r=>this.traverseAnnotationList(r))),e}traverseChoice(e){return this.traverseType(this.traverseChoiceItems(e),this.traversals.choice)}traverseChoiceItems(e){return e.default&&e.default!=="rdf:nil"&&(e.default=this.traverseContentResource(e.default)),e.item&&e.item!=="rdf:nil"&&(e.item=e.item.map(r=>this.traverseContentResource(r))),e}traverseService(e){return this.traverseType(this.traverseLinking(e),this.traversals.service)}traverseContentResource(e){return e["@type"]==="oa:Choice"?this.traverseChoice(e):this.traverseType(this.traverseDescriptive(this.traverseLinking(e)),this.traversals.contentResource)}traverseUnknown(e){if(!e["@type"]||typeof e=="string")return e;switch(nT(e)){case"sc:Collection":return this.traverseCollection(e);case"sc:Manifest":return this.traverseManifest(e);case"sc:Canvas":return this.traverseCanvas(e);case"sc:Sequence":return this.traverseSequence(e);case"sc:Range":return this.traverseRange(e);case"oa:Annotation":return this.traverseAnnotation(e);case"sc:AnnotationList":return this.traverseAnnotationList(e);case"sc:Layer":return this.traverseLayer(e);case"Service":return this.traverseService(e);case"oa:Choice":return this.traverseChoice(e);case"ContentResource":return this.traverseContentResource(e)}return e.profile?this.traverseService(e):e}traverseImageResource(e){let r=Array.isArray(e),n=Array.isArray(e)?e:[e],s=[];for(let l of n)typeof l=="string"?s.push(this.traverseContentResource({"@id":l,"@type":"dctypes:Image"})):s.push(this.traverseContentResource(l));return!r&&!this.options.convertPropsToArray?s[0]:s}traverseDescriptive(e){return e.thumbnail&&(e.thumbnail=this.traverseImageResource(e.thumbnail)),e.logo&&(e.logo=this.traverseImageResource(e.logo)),e}traverseOneOrMoreServices(e){let r=Array.isArray(e),n=Array.isArray(e)?e:[e],s=[];for(let l of n)s.push(this.traverseService(l));return!r&&!this.options.convertPropsToArray?s[0]:s}traverseLinking(e){return e.related&&(e.related=this.traverseOneOrManyType(e.related,this.traversals.contentResource)),e.rendering&&(e.rendering=this.traverseOneOrManyType(e.rendering,this.traversals.contentResource)),e.service&&(e.service=this.traverseOneOrMoreServices(e.service)),e.seeAlso&&(e.seeAlso=this.traverseOneOrManyType(e.seeAlso,this.traversals.contentResource)),e.within&&(typeof e.within=="string"||(e.within=this.traverseOneOrManyType(e.within,this.traversals.contentResource))),e.startCanvas&&(typeof e.startCanvas=="string"?e.startCanvas=this.traverseType({"@id":e.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):e.startCanvas&&this.traverseType(e.startCanvas,this.traversals.canvas)),e.contentLayer&&(typeof e.contentLayer=="string"?e.contentLayer=this.traverseLayer({"@id":e.contentLayer,"@type":"sc:Layer"}):e.contentLayer=this.traverseLayer(e.contentLayer)),e}traverseOneOrManyType(e,r){if(!Array.isArray(e))if(this.options.convertPropsToArray)e=[e];else return this.traverseType(e,r);return e.map(n=>this.traverseType(n,r))}traverseType(e,r){return r.reduce((n,s)=>{let l=s(n);return l===void 0&&!this.options.allowUndefinedReturn?n:l},e)}};const sT=["http://iiif.io/api/image/2/level1","http://iiif.io/api/image/2/level2","http://library.stanford.edu/iiif/image-api/compliance.html#level1","http://library.stanford.edu/iiif/image-api/compliance.html#level2","http://library.stanford.edu/iiif/image-api/conformance.html#level1","http://library.stanford.edu/iiif/image-api/conformance.html#level2","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2","http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1","http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2","http://iiif.io/api/image/1/level1.json","http://iiif.io/api/image/1/profiles/level1.json","http://iiif.io/api/image/1/level2.json","http://iiif.io/api/image/1/profiles/level2.json","http://iiif.io/api/image/2/level1.json","http://iiif.io/api/image/2/profiles/level1.json","http://iiif.io/api/image/2/level2.json","http://iiif.io/api/image/2/profiles/level2.json","level1","level2"],rg={attributionLabel:"Attribution",providerId:"http://example.org/provider",providerName:""};function oT(t){if(typeof t=="string")return[t];if(!t)return[];let e=Array.isArray(t)?t:[t],r=[];for(let n of e){if(typeof n=="string"){r.push(n);continue}r.push({"@language":n["@language"]||n.language,"@value":n["@value"]||n.value})}return r}function za(t,e="none"){if(!t)return{none:[""]};let r=oT(t),n={};for(let s of r){if(typeof s=="string"){n[e]=n[e]?n[e]:[],n[e].push(s||"");continue}if(!s["@language"]){n[e]=n[e]?n[e]:[],n[e].push(s["@value"]||"");continue}let l=s["@language"];n[l]=n[l]?n[l]:[],n[l].push(s["@value"]||"")}return Object.keys(n).length===0?{none:[""]}:n}function gx(t){if(Array.isArray(t))return gx(t.find(e=>typeof e=="string"));if(Yh.indexOf(t)!==-1)return"level2";if(sT.indexOf(t)!==-1)return"level1";if(bk.indexOf(t)!==-1)return"level0";if(typeof t=="string")return t}function lT(t){let e=Array.isArray(t)?t:[t];for(let r of e)switch(r){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}function aT(t){switch(t){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}function Iy(t){for(let e of["sc","oa","dcterms","dctypes","iiif"])if(t.startsWith(`${e}:`))return t.slice(e.length+1);return t}const uT=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function Hg(t){let e=t["@id"]||t.id,r=t["@type"]||t.type,n=t.profile||void 0,s=t["@context"]||void 0;if(n){let l=aT(n);if(l)return l}if(s){let l=lT(s);if(l)return l}if(r){if(Array.isArray(r)){if(r.indexOf("oa:CssStylesheet")!==-1)return"CssStylesheet";if(r.indexOf("cnt:ContentAsText")!==-1)return"TextualBody";r=r[0]}for(let l of["sc","oa","dcterms","dctypes","iiif"])if(r.startsWith(`${l}:`)){r=r.slice(l.length+1);break}switch(r){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(r&&uT.indexOf(r)!==-1)return r;if(t.format){if(t.format.startsWith("image/"))return"Image";if(t.format.startsWith("text/")||t.format==="application/pdf")return"Text";if(t.format.startsWith("application/"))return"Dataset"}return e&&(e.endsWith(".jpg")||e.endsWith(".png")||e.endsWith(".jpeg"))?"Image":r||"unknown"}const cT=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm;function dT(t){let e=t.match(cT);return e?e[0]:t}function fT(t,e="Rights/License",r="none"){let n=null,s=[],l=Array.isArray(t)?t:[t];for(let u of l){let d=u?dT(u):void 0;if(d&&(d.indexOf("creativecommons.org")!==-1||d.indexOf("rightsstatements.org")!==-1)){n=d.startsWith("https://")?`http://${d.slice(8)}`:d;continue}d&&s.push({label:{[r]:[e]},value:{[r]:[d]}})}return[n,s]}const hT=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function pT(t){if(t){let e=Array.isArray(t)?t:[t],r=[];for(let n of e)n==="http://iiif.io/api/presentation/2/context.json"&&r.push("http://iiif.io/api/presentation/3/context.json"),hT.indexOf(n)===-1&&r.push(n);if(e.length)return r.length===1?r[0]:r}}function mT(t){return t?t.map(e=>({label:za(e.label),value:za(e.value)})):[]}let Ay=0;function vx(t,e){let r=encodeURI(t.id||t["@id"]||"").trim();return r&&e?`${r}/${e}`:r||(Ay++,`http://example.org/${t["@type"]}${e?`/${e}`:""}/${Ay}`)}function Lo(t){let e=[...t.behavior||[]];t.viewingHint&&e.push(t.viewingHint);let r;return Array.isArray(t.motivation)?r=t.motivation.map(Iy):t.motivation&&(r=Iy(t.motivation)),{"@context":t["@context"]?pT(t["@context"]):void 0,id:(t["@id"]||vx(t)).trim(),type:Hg(t),behavior:e.length?e:void 0,height:t.height?t.height:void 0,width:t.width?t.width:void 0,motivation:r,viewingDirection:t.viewingDirection,profile:t.profile,format:t.format?t.format:void 0,duration:void 0,timeMode:void 0}}function Mo(t){let[e,r]=fT(t.license),n=[...t.metadata?mT(t.metadata):[],...r];return{rights:e,metadata:n.length?n:void 0,label:t.label?za(t.label):void 0,requiredStatement:t.attribution?{label:za(rg.attributionLabel),value:za(t.attribution)}:void 0,navDate:t.navDate,summary:t.description?za(t.description):void 0,thumbnail:gT(t.thumbnail)}}function gT(t){return t&&(Array.isArray(t)?t:[t]).map(r=>typeof r=="string"?{id:r,type:"Image"}:(r.type==="unknown"&&(r.type="Image"),r))}function vT(t){if(!t.within)return;let e=Array.isArray(t.within)?t.within:[t.within],r=[];for(let n of e)if(typeof n=="string"){if(n)switch(t["@type"]){case"sc:Manifest":r.push({id:n,type:"Collection"});break}}else n["@id"]&&r.push({id:n["@id"],type:Hg(n)});return r.length?r:void 0}function Hl(t){let e=t.related?Array.isArray(t.related)?t.related:[t.related]:[],r=t.contentLayer;return{provider:t.logo||e.length?[{id:rg.providerId,type:"Agent",homepage:e.length?[e[0]]:void 0,logo:t.logo?Array.isArray(t.logo)?t.logo:[t.logo]:void 0,label:za(rg.providerName)}]:void 0,partOf:vT(t),rendering:t.rendering,seeAlso:t.seeAlso,start:t.startCanvas,service:t.service?Po(t.service):void 0,supplementary:r?[r]:void 0}}function yT(t){return{chars:t.chars,format:t.format?t.format:void 0,language:t.language}}function um(t,e){return t?typeof t=="string"?{id:t,type:e}:typeof(t==null?void 0:t["@id"])=="string"?{id:t["@id"],type:e}:typeof t.id=="string"?{id:t.id,type:e}:null:null}function wT(t){let e={};if(t.first){let r=um(t.first,"Collection");r&&(e.first=r)}if((t.total||t.total===0)&&(e.total=t.total),t.prev){let r=um(t.prev,"Collection");r&&(e.prev=r)}if(t.next){let r=um(t.next,"Collection");r&&(e.next=r)}return e}function xT(t){let e=[];for(let r of t){let n={...r};n.items&&n.items.length===0&&delete n.items,e.push(n)}return e}function ST(t){return Hs({...Lo(t),...Mo(t),...Hl(t),...wT(t),items:xT(t.members)})}function bT(t){let e=[],r=[],n,s;for(let u of t.sequences||[])u.canvases.length&&e.push(...u.canvases),u.behavior&&r.push(...u.behavior),u.viewingDirection&&(s=u.viewingDirection),u.startCanvas&&(n=u.startCanvas);let l=Lo(t);return r.length&&(l.behavior?l.behavior.push(...r):l.behavior=r),Hs({...l,...Mo(t),...Hl(t),viewingDirection:s,start:n,items:e,structures:ET(t.structures)})}function ET(t){if(!t)return t;let e=new Map;for(let n of t)e.set(n.id,n);let r=[];for(let n of t)if(n.items){let s=n.items.map(l=>typeof l=="string"?(r.push(l),e.get(l)||l):l&&l.id?(r.push(l.id),e.get(l.id)||l):l);n.items=s}return t.filter(n=>r.indexOf(n.id)===-1)}function PT(t){return Hs({...Lo(t),...Mo(t),...Hl(t),annotations:t.otherContent&&t.otherContent.length?t.otherContent:void 0,items:t.images&&t.images.length?[{id:vx(t,"annotation-page"),type:"AnnotationPage",items:t.images}]:void 0})}function CT(t){return Hs({...Lo(t),...Mo(t),...Hl(t),items:t.resources&&t.resources.length?t.resources:void 0})}function kT(t){return!t.canvases||t.canvases.length===0?{canvases:[],behavior:[]}:{canvases:t.canvases,behavior:t.viewingHint?[t.viewingHint]:[],viewingDirection:t.viewingDirection,startCanvas:t.startCanvas}}function TT(t){function e(r){if(Array.isArray(r)){if(r.length>1)return{type:"List",items:r.map(e)};r=r[0]}if(typeof r=="string")return encodeURI(r).trim();if("@type"in r){let n;if(typeof r.full=="string")n=r.full;else if(r.full["@type"]==="dctypes:Image")n={id:r.full["@id"],type:"Image"};else if(r.full["@type"]==="sc:Canvas")n={id:r.full["@id"],type:"Canvas"};else throw Error(`Unsupported source type on annotation: ${r.full["@type"]}`);return{type:"SpecificResource",source:n,selector:ng(r.selector)}}else return encodeURI(r["@id"]).trim()}return Hs({...Lo(t),...Mo(t),...Hl(t),target:e(t.on),body:Array.isArray(t.resource)?t.resource.map($y):$y(t.resource)})}function $y(t){return t.type==="Choice"?t:yx(t)}function yx(t){let e=t;return Hs({...Lo(e),...Mo(e),...Hl(e),...yT(e)})}function RT(t){let e=[];return t.default&&t.default!=="rdf:nil"&&e.push(t.default),t.item&&t.item!=="rdf:nil"&&e.push(...t.item),Hs({...Lo(t),...Mo(t),items:e})}function _T(t){return Hs({...Lo(t),...Mo(t),...Hl(t),items:t.members})}function jT(t){let{"@id":e,"@type":r,"@context":n,profile:s,...l}=t,u={};return e&&(u["@id"]=e),u["@type"]=Hg(t),u["@type"]==="unknown"&&(n&&n.length&&(u["@context"]=n),u["@type"]="Service"),s&&(u.profile=gx(s)),Hs({...u,...l})}function OT(t){return Hs({...Lo(t),...Mo(t),...Hl(t)})}const LT=new iT({collection:[ST],manifest:[bT],canvas:[PT],annotationList:[CT],sequence:[kT],annotation:[TT],contentResource:[yx],choice:[RT],range:[_T],service:[jT],layer:[OT]});function MT(t){return t&&t["@context"]&&(t["@context"]==="http://iiif.io/api/presentation/2/context.json"||t["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")!==-1||t["@context"]==="http://www.shared-canvas.org/ns/context.json")||t["@context"]==="http://iiif.io/api/image/2/context.json"||t["@id"]&&t["@type"]==="sc:Collection"||t["@id"]&&t["@type"]==="sc:Manifest"?(t["@context"]||(t["@context"]="http://iiif.io/api/presentation/2/context.json"),LT.traverseUnknown(t)):t}function ng(t){if((Array.isArray(t["@type"])&&t["@type"].includes("oa:SvgSelector")||t["@type"]=="oa:SvgSelector")&&("chars"in t||"value"in t))return{type:"SvgSelector",value:"chars"in t?t.chars:t.value};if(t["@type"]==="oa:FragmentSelector")return{type:"FragmentSelector",value:t.value};if(t["@type"]==="oa:Choice")return[ng(t.default),...(Array.isArray(t.item)?t.item:[t.item]).map(ng)];if(t["@type"]=="iiif:ImageApiSelector")return{type:"ImageApiSelector",region:"region"in t?t.region:void 0,rotation:"rotation"in t?t.rotation:void 0};throw Error(`Unsupported selector type: ${t["@type"]}`)}function Wg(t,e){let r="unknown";if(!t)return;if(typeof t=="string")return{id:t,type:r};if(Al(t))return Wg(t.source);let n=t.type||t["@type"],s=t.id||t["@id"];if(n&&n.indexOf(":")!==-1&&(n=n.split(":").pop()),s&&n)return{id:s,type:n}}const yd={},nn="iiif-parser:hasPart",jo="iiif-parser:partOf",wd="iiif-parser:isExternal",ds="__$UNSET$__",wx="__$UNWRAP$__",Je=[];Object.freeze(Je),Object.freeze(yd);function IT(t){if(t===yd||Object.keys(t).length===0)return!0;for(let e in t)return!1;return!0}function Vg(t,e){if(e&&e["@explicit"]){let r={},n=Object.keys(e);for(let s of n)s===jo||s==="@explicit"||(IT(e[s])?r[s]=t[s]:r[s]=e[s]);return r}return t}function xx(t,e,r){let n=Wg(e);if(!n)return[void 0,void 0];let s=t.requests[n.id],l=n.type||t.mapping[n.id];if(!l||s&&s.resourceUri&&(!t.entities[l]||!t.entities[l][s.resourceUri]))return[void 0,void 0];let u=t.entities[l][s?s.resourceUri:n.id];if(n.type&&!u)return xx(t,{id:n.id},r);if(u&&u[nn]){let d=u[nn].find(v=>r?v[jo]===r.id:v[jo]===u.id);return[Vg(u,d),u]}return[u,u]}const AT={id:"https://iiif-parser/annotation-page",type:"AnnotationPage",behavior:Je,label:null,thumbnail:Je,summary:null,requiredStatement:null,metadata:Je,rights:null,provider:Je,items:Je,seeAlso:Je,homepage:Je,rendering:Je,service:Je},$T={id:"https://iiif-parser/empty-canvas",type:"Canvas",label:null,behavior:Je,thumbnail:Je,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:Je,rights:null,navDate:null,provider:Je,items:Je,annotations:Je,seeAlso:Je,homepage:Je,partOf:Je,rendering:Je,service:Je,duration:0,height:0,width:0},NT={id:"https://iiif-parser/empty-collection",type:"Collection",label:null,viewingDirection:"left-to-right",behavior:Je,thumbnail:Je,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:Je,rights:null,navDate:null,provider:Je,items:Je,annotations:Je,seeAlso:Je,homepage:Je,partOf:Je,rendering:Je,service:Je,services:Je},zT={id:"https://iiif-parser/empty-manifest",type:"Manifest",annotations:Je,behavior:Je,homepage:Je,items:Je,label:null,metadata:Je,navDate:null,provider:Je,partOf:Je,accompanyingCanvas:null,placeholderCanvas:null,rendering:Je,requiredStatement:null,rights:null,seeAlso:Je,service:Je,services:Je,start:null,structures:Je,summary:null,thumbnail:Je,viewingDirection:"left-to-right"},FT={id:"https://iiif-parser/empty-canvas",type:"Range",label:null,behavior:Je,thumbnail:Je,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:Je,rights:null,navDate:null,provider:Je,items:Je,annotations:Je,seeAlso:Je,homepage:Je,partOf:Je,rendering:Je,service:Je,start:null,supplementary:null,viewingDirection:"left-to-right"},DT={id:"https://iiif-parser/empty-agent",type:"Agent",label:{},logo:Je,seeAlso:Je,homepage:Je},BT={id:"https://iiif-parser/empty-service",type:"UnknownService"};function xh(t,e={}){if(Array.isArray(t))return xh(t[0]);if(typeof t=="string"){let[r,n]=t.split("#");return n?{type:"SpecificResource",source:{id:r,type:e.typeHint||"Unknown"},selector:{type:"FragmentSelector",value:n}}:{type:"SpecificResource",source:{id:r,type:e.typeMap&&e.typeMap[r]||e.typeHint||"Unknown"}}}if(t.type==="Choice"||t.type==="List"||t.type==="Composite"||t.type==="Independents")return xh(t.items[0]);if(!t.type&&"source"in t&&(t.type="SpecificResource"),t.type==="SpecificResource"){t.source.type==="Canvas"&&t.source.partOf&&typeof t.source.partOf=="string"&&(t.source.partOf=[{id:t.source.partOf,type:"Manifest"}]);let r=typeof t.source=="string"?t.source:t.source.id;if(r!=null&&r.includes("#")){let n=xh(r,e);n&&(t.selector=n.selector,t.source=n.source)}return t.selector?{...t,type:"SpecificResource",source:t.source,selector:t.selector}:{...t,type:"SpecificResource",source:t.source}}if(t.id){t.type==="Canvas"&&t.partOf&&typeof t.partOf=="string"&&(t.partOf=[{id:t.partOf,type:"Manifest"}]);let[r,n]=t.id.split("#");return n?{type:"SpecificResource",source:{...t,id:r},selector:{type:"FragmentSelector",value:n}}:{type:"SpecificResource",source:{...t,id:r}}}return{type:"SpecificResource",source:t}}function UT(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}function Sx(t,e){if(typeof t=="string")return{id:t,type:e};if(!t.id)throw Error(`Invalid resource does not have an ID (${JSON.stringify(t)}, ${e})`);return t}function HT(t,e){return(r,n)=>{let s=t[r]?t[r]:{};return(l,u)=>{let d=Sx(l,n||r);return d&&d.id&&r?(s[d.id]=s[d.id]?sg(s[d.id],d,{parent:u.parent,isTopLevel:e.id===d.id}):sg({id:d.id,type:d.type},d,{parent:u.parent,isTopLevel:e.id===d.id}),{id:d.id,type:r==="ContentResource"?r:d.type}):d}}}function ig(t,e,r){if(!e)return t;if(Array.isArray(t)){if(!Array.isArray(e))throw Error("Cannot merge array with non-array");let n=[...t];for(let s of e)if(s["@id"]&&!s.id&&(s.id=s["@id"]),s["@type"]&&!s.type&&(s.type=s["@type"]),s!=null)if(Array.isArray(s))n.push(s);else if(typeof s=="object"&&s.id&&s.type){let l=n.findIndex(u=>u.id===s.id&&u.type===s.type);l>=0&&(n[l]=ig(n[l],s))}else t.indexOf(s)===-1&&n.push(s);return n}else if(typeof t=="object"){if(Array.isArray(e)||typeof e!="object")throw Error("Cannot merge object with non-object");let n={...t},s=[],l=[],u=Object.keys(t).filter(v=>v!==nn&&v!=="id"&&v!=="type"),d={},h={};for(let[v,g]of Object.entries(e)){if(v===nn||v==="id"||v==="type")continue;let w=n[v];w===g?l.push(v):w===Je||!w?(s.push(v),n[v]=g):(w&&g&&(d[v]=w,h[v]=g),n[v]=ig(w,g),n[v]===d[v]&&(l.push(v),delete d[v]))}if(r&&(r.parent&&r.parent.id||r.isTopLevel)){let v=[],g={};if(r.parent?g[jo]=r.parent.id:r.isTopLevel&&(g[jo]=t.id),n[nn]&&n[nn].length){let w=!(n[nn]||[]).find(R=>R["@explicit"]),b=s.length>0||l.length!==u.length;if(w&&b)for(let R of n[nn]){let P={...R},C=Object.keys(d);if(P){P["@explicit"]=!0;for(let j of u)j!==nn&&(P[j]=yd);for(let j of C)P[j]=d[j]}v.push(P)}else v.push(...n[nn]);if(b){let R=Object.keys(h);g["@explicit"]=!0;for(let P of s)g[P]=yd;for(let P of l)g[P]=yd;for(let P of R)g[P]=h[P]}}g.id=n.id,g.type=n.type,v.push(g),n[nn]=v}return n}else if(t)return t;return e}function sg(t,e,r){if(typeof t=="string")return t;if(e.id!==t.id||e.type!==t.type){if(e.type==="ImageService3")return e;if(t.type==="ImageService3")return t;throw Error(`Can only merge entities with identical identifiers and type! ${e.type}(${e.id}) => ${t.type}(${t.id})`)}return ig({...t},e,r)}function WT(t){return(e,r)=>n=>{let{id:s,type:l}=Sx(n,r||e);if(s===void 0)throw Error("Found invalid entity without an ID.");return e==="ContentResource"||e==="Service"?t[s]=e:t[s]=l,n}}function VT(t){let e=Object.assign({},t);if(e["@id"]&&(e.id=e["@id"]),e["@type"]&&(e.type=e["@type"]),e.service){let r=[];e.service=Array.isArray(e.service)?e.service:[e.service];for(let n of e.service)r.push({id:n["@id"]||n.id,type:n["@type"]||n.type});e.service=r}return Object.assign({},BT,e)}function QT(t){return e=>{t.Service=t.Service?t.Service:{};let r=e.id||e["@id"],n=VT(e);return n&&n.id&&(t.Service[n.id]?t.Service[r]=sg(t.Service[r],n):t.Service[r]=n),e}}function qT(t){let e=JSON.stringify(t),r=5381,n=e.length;for(;n;)r=r*33^e.charCodeAt(--n);let s=r>>>0,l=s.toString(16);return l.length%2?"0"+l:l}function cm(t){return e=>typeof e=="string"?{id:e,type:t}:e.id?e.type?e:{type:t,...e}:{id:`vault://${qT(e)}`,type:t,...e}}function Vu(t){return e=>({...t,...e})}function sd(t){return Array.isArray(t)?t:[t]}function GT(t){return t.body&&(t.body=sd(t.body)),t.seeAlso&&(t.seeAlso=sd(t.seeAlso)),t.audience&&(t.audience=sd(t.audience)),t.accessibility&&(t.accessibility=sd(t.accessibility)),t.motivation&&(t.motivation=sd(t.motivation)),t}function bx(t,{typeHint:e,partOfTypeHint:r}={}){if(typeof t=="string"&&(t={id:t,type:e||"unknown"}),Al(t))return typeof t.source=="string"&&(t.source={id:t.source,type:e||"unknown"}),t.source.type==="Canvas"&&t.source.partOf&&typeof t.source.partOf=="string"&&(t.source.partOf=[{id:t.source.partOf,type:r||"Manifest"}]),t;let n;if((t.id||"").indexOf("#")!==-1){let[s,l]=(t.id||"").split("#");t.id=s,l&&(n={type:"FragmentSelector",value:l})}return{type:"SpecificResource",source:t,selector:n}}function KT(t){let e=Object.assign({},t);return t&&t.items&&(e.items=t.items.map(r=>typeof r=="string"||r.type==="Canvas"?bx(r):r)),e}function YT(t){let e=Object.assign({},t);return e.start?(e.start=bx(e.start,{typeHint:"Canvas"}),e):t}function XT(t){let e=Object.assign({},t);return e.target?(e.target=xh(e.target,{typeHint:"Canvas"}),e):t}function ZT(t){return t}function dm(t){return t.items===void 0&&(t[wd]=!0),t}function JT(t){let e=MT(t),r=UT(),n={},s=HT(r,e),l=WT(n),u=new rT({collection:[dm,Vu(NT),l("Collection"),s("Collection")],manifest:[dm,Vu(zT),YT,l("Manifest"),s("Manifest")],canvas:[Vu($T),l("Canvas"),s("Canvas")],annotationPage:[dm,cm("AnnotationPage"),Vu(AT),l("AnnotationPage"),s("AnnotationPage")],annotation:[cm("Annotation"),GT,XT,l("Annotation"),s("Annotation")],contentResource:[cm("ContentResource"),l("ContentResource"),s("ContentResource")],range:[Vu(FT),KT,l("Range","Canvas"),s("Range","Canvas")],agent:[Vu(DT),l("Agent"),s("Agent")],specificResource:[ZT],service:[QT(r)]}),d=u.traverseUnknown(e);return{entities:r,resource:d,mapping:n}}function e2(t){let e={};for(let[r,n]of t){if(r===wx&&n!==ds)return n;n!==ds&&n!=null&&(e[r]=n)}return e}function t2(t,e,r){if(!e.type||!e.id)throw Error("Unknown entity");if(!r[e.type])throw Error(`Serializer not found for ${e.type}`);function n(s,l,u=0){let d=r[s.type];if(!d)return ds;if(u>20)throw Error("Circular reference: "+s.id+" "+s.type);let[h,v]=xx(t,s.type?s:s.id,l)||(s.id&&s.type?s:null);if(!h)return ds;let g=d(h,t,{parent:l,isTopLevel:e.id===s.id,fullResource:v}),w=g.next();for(;!w.done;){let b=w.value,R=ds;if(b)if(Array.isArray(b)){let P=[];for(let C of b)P.push(n(C,s,u+1));R=P}else R=n(b,s,u+1);w=g.next(R)}return w.value===ds?ds:e2(w.value)}return n(e)}function Ku(t,{allowSourceString:e=!0,allowString:r=!1,allowedStringType:n}={}){let s=l=>{if(e&&l&&l.source&&typeof l.source!="string"){let u=Object.keys(l.source);if(l.source.id&&l.source.type&&u.length===2)return{...l,source:l.source.id}}return l};if(t){if(t.source&&t.source.partOf)return s(t);let l=Object.keys(t);if(l.length===2&&t.type&&t.source||l.length===3&&t.type&&t.source&&l.indexOf("selector")!==-1&&!t.selector)return r&&(!n||n===t.source.type)?t.source.id:t.source.type==="ContentResource"?{type:"SpecificResource",source:t.source.id}:t.source;if(t.selector&&!Array.isArray(t.selector)&&typeof t.selector!="string"&&t.selector.type==="FragmentSelector"){let u=`${t.source.id}#${t.selector.value}`;return r?u:{id:u,type:t.source.type}}}return s(t)}function qu(t){if(!t)return;let e=Object.keys(t);if(e.length!==0){if(e.length===1){let r=e[0];if(!r)return"";let n=(t[r]||[]).join("");return r==="@none"||r==="none"||r==="en"?n:{"@language":r,"@value":n}}return e.map(r=>({"@language":r,"@value":(t[r]||[]).join("")}))}}function Ex(t){return Array.isArray(t)?t.map(e=>Ex(e)):typeof t=="string"?t:t.type&&t.type==="Canvas"?t.id:t}function $l(t,e=!1){if(t)return t.length>1&&!e?t:t[0]||void 0}function r2(t){if(t){if(typeof t=="string")return{"@id":t};if("@id"in t){let e={...t};return delete e["@type"],e}return{"@context":"http://iiif.io/api/image/2/context.json","@id":t.id,profile:`http://iiif.io/api/image/2/profiles/${t.profile}.json`}}}function Ea(t,e){return[["@id",t.id],["@type",e],["format",t.format],["height",t.height],["width",t.width],["viewingDirection",t.viewingDirection==="left-to-right"?void 0:t.viewingDirection],["license",t.license?t.license:void 0]]}function*Pa(t){let e=t.provider?yield t.provider[0]:void 0;return[["label",qu(t.label)],["metadata",t.metadata&&t.metadata.length?t.metadata.map(r=>({label:qu(r.label)||"",value:qu(r.value)||""})):void 0],["description",qu(t.summary)],["thumbnail",$l(yield t.thumbnail)],["navDate",t.navDate],["logo",e?$l(e.logo):void 0],["homepage",e?e.homepage:void 0],["attribution",t.requiredStatement?qu(t.requiredStatement.value):void 0]]}function*od(t){let e=t.start&&t.start.type&&t.start.type==="SpecificResource"?Ku(t.start):t.start;return[["seeAlso",$l(yield t.seeAlso)],["service",$l((t.service||[]).map(r2))],["rendering",$l(yield t.rendering)],["startCanvas",e?e.id:void 0]]}function n2(t){return t.type==="SpecificResource"}function i2(t){return t&&t.type==="FragmentSelector"}function s2(t){if(t&&n2(t)){let e=t.id,r=t.selector?Array.isArray(t.selector)?t.selector[0]:t.selector:void 0;return i2(r)&&(e+="#"+r.value),e}return t==null?void 0:t.id}const o2={Manifest:function*(t,e,{isTopLevel:r}){return[...r?[["@context","http://iiif.io/api/presentation/2/context.json"]]:[],...Ea(t,"sc:Manifest"),...yield*Pa(t),...yield*od(t),["sequences",[{"@id":`${t.id}/sequence0`,"@type":"sc:Sequence",canvases:yield t.items}]],["structures",yield t.structures]]},Canvas:function*(t){let e=yield t.items,r=e[0];return[...Ea(t,"sc:Canvas"),...yield*Pa(t),...yield*od(t),["images",r?[r.resources]:void 0],["annotations",t.annotations&&t.annotations.length?$l(yield t.annotations):void 0]]},AnnotationPage:function*(t){return[...Ea(t,"sc:AnnotationList"),...yield*Pa(t),["resources",t.items&&t.items.length?$l(yield t.items):void 0]]},Annotation:function*(t){return[["@id",t.id],["@type","oa:Annotation"],["motivation","sc:painting"],["on",Ex(t.target)],["resource",$l(yield t.body,!0)]]},ContentResource:function*(t){switch(t.type){case"Image":return[...Ea(t,"dctypes:Image"),...yield*Pa(t),...yield*od(t)];case"Text":case"Dataset":default:return[...Ea(t,void 0),...yield*Pa(t)]}},AnnotationCollection:function*(t){return[["@id",t.id],["@type","sc:Layer"],["label",qu(t.label)]]},Collection:function*(t){return[...Ea(t,"sc:Collection"),...yield*Pa(t),...yield*od(t),["members",yield*t.items]]},Range:function*(t){let e=[],r=[];if(t.items)for(let n of t.items){let s=n.type==="SpecificResource"?n.source:n;if(s){let l=yield s;e.push({"@id":s2(n),"@type":s.type,label:l?l.label:void 0,within:t.id}),s.type==="Canvas"&&r.push(s.id)}}return[...Ea(t,"sc:Range"),...yield*Pa(t),...yield*od(t),["canvases",r.length===e.length?r:void 0],["members",r.length===e.length?void 0:e]]}};function Ca(t){var e;return[["id",(e=t.id)!=null&&e.startsWith("vault://")?void 0:t.id],["type",t.type],["format",t.format],["profile",t.profile],["height",t.height||void 0],["width",t.width||void 0],["duration",t.duration||void 0],["viewingDirection",t.viewingDirection==="left-to-right"?void 0:t.viewingDirection],["behavior",t.behavior&&t.behavior.length?t.behavior:void 0],["timeMode",t.timeMode],["motivation",Array.isArray(t.motivation)?t.motivation[0]:t.motivation],[nn,ds]]}function Gr(t){if(t===ds||!t||t.length===0)return;let e=t.filter(r=>r!==ds);if(e.length!==0)return e}function Px(t){if(t&&t.type&&t.type==="ImageService2"){let{id:e,type:r,profile:n,...s}=t,l=typeof n=="string"?n:Array.isArray(n)?n.find(u=>typeof u=="string"):"";return{"@id":e,"@type":r,profile:l?l.startsWith("http")?l:`http://iiif.io/api/image/2/${l}.json`:"http://iiif.io/api/image/2/level0.json",...s}}return t}function Ny(t){if(Array.isArray(t)||(t=t?[t]:[]),!(!t||t.length===0))return t.map(Px)}function*bl(t){return[["label",t.label],["metadata",Gr(t.metadata)],["summary",t.summary],["requiredStatement",t.requiredStatement],["rights",Array.isArray(t.rights)?t.rights[0]||void 0:t.rights||void 0],["navDate",t.navDate],["language",t.language],["thumbnail",Gr(yield t.thumbnail)],["placeholderCanvas",yield t.placeholderCanvas],["accompanyingCanvas",yield t.accompanyingCanvas],["provider",Gr(yield t.provider)]]}function*El(t,e){let r=[];for(let n of t.partOf||[])n.type==="Manifest"&&e.type==="Manifest"||r.push(yield n);return[["seeAlso",Gr(yield t.seeAlso)],["service",Gr(Ny(t.service))],["services",Gr(Ny(t.services))],["rendering",Gr(yield t.rendering)],["supplementary",Gr(yield t.supplementary)],["homepage",Gr(yield t.homepage)],["logo",Gr(yield t.logo)],["partOf",Gr(r)],["start",t.start?Ku(t.start):t.start]]}const l2={Manifest:function*(t,e,{isTopLevel:r}){if(!r)return[...Ca(t),...yield*bl(t),["navPlace",t.navPlace]];let n="http://iiif.io/api/presentation/3/context.json";return(t.navPlace||zy(t))&&(n=["http://iiif.io/api/presentation/3/context.json","http://iiif.io/api/extension/navplace/context.json"]),[["@context",t["@context"]?t["@context"]:n],...Ca(t),...yield*bl(t),...yield*El(t),["items",yield t.items],["structures",Gr(yield t.structures)],["annotations",Gr(yield t.annotations)],["navPlace",t.navPlace]]},Canvas:function*(t,e,{parent:r}){return r&&r.type!=="Manifest"&&r.type!=="Canvas"?[["id",t.id]]:[...Ca(t),...yield*bl(t),...yield*El(t,r),["items",yield t.items],["annotations",Gr(yield t.annotations)],["navPlace",t.navPlace]]},Agent:function*(t){return[["id",t.id],["type","Agent"],["label",t.label],...yield*El(t)]},AnnotationPage:function*(t){var n;let e=Object.entries(t).map(([s,l])=>[s,Array.isArray(l)?Gr(l):l]).filter(([s,l])=>s!=="items"&&s!=="id"&&s!==nn&&s!==jo&&s!==wd),r=yield t.items;return[["id",(n=t.id)!=null&&n.startsWith("vault://")?void 0:t.id],...e,...yield*El(t),["items",r.length||t[wd]===!1?r:ds]]},Service:function*(t){return[[wx,Px(t)]]},Annotation:function*(t){let e=Object.entries(t).map(([n,s])=>n==="motivation"?[n,Array.isArray(s)?s[0]:s]:n==="target"?[n,Ku(s,{allowString:!0,allowSourceString:!0,allowedStringType:"Canvas"})]:[n,Array.isArray(s)?Gr(s):s]).filter(([n])=>n!=="body"&&n!==nn&&n!==wd),r;if(Array.isArray(t.body)){let n=[];for(let s of t.body)if(s&&Al(s)){let l={...s};s.source.type==="Canvas"?l.source=s.source:l.source=yield s.source,n.push(Ku(l,{allowSourceString:!0}))}else n.push(yield s);r=n}else t.body&&Al(t.body)?(r={...t.body},r.source=yield t.body.source):r=yield t.body;return[...e,...yield*bl(t),...yield*El(t),["body",r.length===1?r[0]:r]]},ContentResource:function*(t){return a2([...Ca(t),...yield*bl(t),...yield*El(t),["annotations",Gr(yield t.annotations)],["items",Gr(yield t.items)]],t)},AnnotationCollection:function*(t){return[["id",t.id],["type","AnnotationCollection"],["label",t.label]]},Collection:function*(t,e,{isTopLevel:r}){if(r){let n="http://iiif.io/api/presentation/3/context.json";return(t.navPlace||zy(t))&&(n=["http://iiif.io/api/extension/navplace/context.json","http://iiif.io/api/presentation/3/context.json"]),[["@context",n],...Ca(t),...yield*bl(t),...yield*El(t),["items",Gr(yield t.items)],["navPlace",t.navPlace]]}return[...Ca(t),...yield*bl(t),["navPlace",t.navPlace]]},Range:function*(t){let e=[];for(let r of t.items)r.type==="Range"?e.push(yield r):r&&r.type==="SpecificResource"?e.push(Ku(r)):e.push(r);return[...Ca(t),...yield*bl(t),...yield*El(t),["items",e],["annotations",Gr(yield t.annotations)],["navPlace",t.navPlace]]}};function a2(t,e){let r=Object.keys(e),n=t.map(([s])=>s);for(let s of r)s===nn||s===wd||n.indexOf(s)===-1&&e[s]!==void 0&&t.push([s,e[s]]);return t}function zy(t){if(!t.items||!Array.isArray(t.items))return!1;for(let e of t.items)if(e.navPlace)return!0;return!1}function u2(t,e,r=[],n=!1,s=[]){if(s.length&&(e=e.filter(u=>s.indexOf(u)===-1)),!e||e.length===0)return;if(e.length===1)return e[0];if(!t)return e.indexOf("none")===-1?e[0]:"none";if(e.indexOf(t)!==-1)return t;let l=t.indexOf("-")===-1?null:t.slice(0,t.indexOf("-"));if(l&&e.indexOf(l)!==-1)return l;for(let u of r)if(e.indexOf(u)!==-1)return u;if(!n&&t){let u=e.map(h=>h.indexOf("-")===-1?null:h.slice(0,h.indexOf("-"))),d=u.indexOf(t);if(d!==-1)return e[d];for(let h of r){let v=h.indexOf("-")===-1?null:h.slice(0,h.indexOf("-")),g=v?e.indexOf(v):-1;if(g!==-1)return e[g]}}return e.indexOf("none")===-1?e.indexOf("@none")===-1?e[0]:"@none":"none"}function Cx(t,e,r={}){let{strictFallback:n=!1,defaultText:s="",separator:l=`
`,fallbackLanguages:u=[],closest:d,skipLanguages:h}=r,v=Object.keys(t||{}),g=d?e:u2(e,v,u,n,h);if(!t)return s;if(typeof t=="string")return t;let w=g?t[g]:void 0;if(w&&g){if(typeof w=="string")return w;if(w.length===1&&w[0]===""){let b=r.skipLanguages||[];return Cx(t,e,{...r,skipLanguages:[...b,g]})}return w.join(l)}return""}function Fy(t,e={}){return Cx(t,e.language||(typeof navigator<"u"?navigator.language:"en"),e)}var c2=Object.create,kx=Object.defineProperty,d2=Object.getOwnPropertyDescriptor,f2=Object.getOwnPropertyNames,h2=Object.getPrototypeOf,p2=Object.prototype.hasOwnProperty,Tx=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),m2=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(var s=f2(e),l=0,u=s.length,d;l<u;l++)d=s[l],!p2.call(t,d)&&d!==r&&kx(t,d,{get:(h=>e[h]).bind(null,d),enumerable:!(n=d2(e,d))||n.enumerable});return t},Rx=(t,e,r)=>(r=t==null?{}:c2(h2(t)),m2(kx(r,"default",{value:t,enumerable:!0}),t));function g2(t,e,r,n=1){return new _x(t,e,r).subdivide(n)}function v2(t,e,r,n,s=1){return new w2(new Float64Array([t.x,t.y,e.x,e.y,r.x,r.y,n.x,n.y])).subdivide(s)}function y2(t){return t.x*t.x+t.y*t.y}function xd(t){let e=.67;return t/(1-e+(e**4+.25*t*t)**.25)}function Yu(t){let e=.39;return t*(1-e+Math.sqrt(e*e+.25*t*t))}var _x=class{constructor(e,r,n){In(this,"start",void 0),In(this,"control",void 0),In(this,"end",void 0),this.start=e,this.control=r,this.end=n}eval(e){let r=1-e;return{x:this.start.x*r*r+2*this.control.x*r*e+this.end.x*e*e,y:this.start.y*r*r+2*this.control.y*r*e+this.end.y*e*e}}mapToBasic(){let{x:e,y:r}=this.start,{x:n,y:s}=this.control,{x:l,y:u}=this.end,d=2*n-e-l,h=2*s-r-u,v=(n-e)*d+(s-r)*h,g=(l-n)*d+(u-s)*h,w=(l-e)*h-(u-r)*d,b=v/w,R=g/w,P=Math.abs(w)/(Math.hypot(d,h)*Math.abs(R-b));return{x0:e,x2:l,scale:P,cross:w}}subdivide(e){let r=this.mapToBasic(),n=xd(r.x0),s=xd(r.x2),l=.5*Math.abs(s-n)*Math.sqrt(r.scale/e),u=Math.ceil(l),d=Yu(n),h=Yu(s),v=[0];for(let g=1;g<u;g++){let w=Yu(n+(s-n)*g/u),b=(w-d)/(h-d);v.push(b)}return v.push(1),v.map(g=>this.eval(g))}},w2=class jx{constructor(e){In(this,"c",void 0),this.c=e}weightsum(e,r,n,s){let l=e*this.c[0]+r*this.c[2]+n*this.c[4]+s*this.c[6],u=e*this.c[1]+r*this.c[3]+n*this.c[5]+s*this.c[7];return{x:l,y:u}}eval(e){let r=1-e,n=r*r*r,s=3*r*r*e,l=3*r*e*e,u=e*e*e;return this.weightsum(n,s,l,u)}deriv(e){let r=1-e,n=-3*r*r,s=3*e*e,l=-6*e*r-n,u=6*e*r-s;return this.weightsum(n,l,u,s)}midpoint_quadbez(){let e=this.weightsum(-.25,.75,.75,-.25);return new _x({x:this.c[0],y:this.c[1]},e,{x:this.c[6],y:this.c[7]})}subsegment(e,r){let n=new Float64Array(8),s=this.eval(e),l=this.eval(r);n[0]=s.x,n[1]=s.y;let u=(r-e)/3,d=this.deriv(e);n[2]=s.x+u*d.x,n[3]=s.y+u*d.y;let h=this.deriv(r);return n[4]=l.x-u*h.x,n[5]=l.y-u*h.y,n[6]=l.x,n[7]=l.y,new jx(n)}subdivide(e){let r=.1*e,n=e-r,s=Math.sqrt(n),l=y2(this.weightsum(1,-3,3,-1)),u=Math.ceil((l/(432*r*r))**(1/6)),d=[],h=0;for(let P=0;P<u;P++){let C=P/u,j=(P+1)/u,O=this.subsegment(C,j).midpoint_quadbez(),L=O.mapToBasic(),A=xd(L.x0),F=xd(L.x2),z=Math.sqrt(L.scale),B=Math.abs(F-A)*z;if(Math.sign(L.x0)!=Math.sign(L.x2)){let $=s/z,K=s*Math.abs(F-A)/xd($);B=Math.max(B,K)}d.push({quad:O,a0:A,a2:F,val:B}),h+=B}let v=.5*h/s,g=Math.ceil(v),w=[{x:this.c[0],y:this.c[1]}],b=0,R=0;for(let P=1;P<g;P++){let C=h*P/g;for(;b+d[R].val<C;)b+=d[R].val,R++;let j=d[R].a0,O=d[R].a2,L=Yu(j),A=Yu(O),F=j+(O-j)*(C-b)/d[R].val,z=Yu(F),B=(z-L)/(A-L);w.push(d[R].quad.eval(B))}return w.push({x:this.c[6],y:this.c[7]}),w}};function x2(t){let e={},r=t.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\s+/g," ").trim(),n=/([^{]+)\{([^}]+)\}/g,s;for(;(s=n.exec(r))!==null;){let l=s[1].trim(),u=s[2].trim(),d=l.match(/\.([a-zA-Z0-9_-]+)/);if(!d)continue;let h=d[1],v=u.split(";").filter(w=>w.trim()),g={};for(let w of v){let[b,R]=w.split(":").map(P=>P.trim());if(!(!b||!R))switch(b){case"background-color":g.backgroundColor=R;break;case"opacity":g.opacity=parseFloat(R);break;case"box-shadow":g.boxShadow=R;break;case"border-color":g.borderColor=R;break;case"border-width":g.borderWidth=R;break;case"border-style":g.borderStyle=R;break;case"outline-color":g.outlineColor=R;break;case"outline-width":g.outlineWidth=R;break;case"outline-offset":g.outlineOffset=R;break;case"outline-style":g.outlineStyle=R;break;case"border":g.border=R;break;case"outline":g.outline=R;break;case"background":g.background=R;break}}e[h]=g}return e}function Dy(t){let e={};return t&&(t.fill&&(e.backgroundColor=t.fill,t.fillOpacity),t.stroke&&(e.borderColor=t.stroke),t.strokeWidth&&(e.borderWidth=t.strokeWidth)),e}const fm=new Map;function S2(t,e){if(fm.has(t))return fm.get(t);let r=x2(e);return fm.set(t,Object.fromEntries(Object.entries(r).map(([n,s])=>[n,s]))),r}function hm(t,e,r={}){if(!t||!e)return Dy(r||{});let n=Dy(r||{}),s=Object.entries(e);for(let[l,u]of s){if(!u)continue;let d=S2(l,u),h=Object.entries(d);for(let[v,g]of h)v===t&&Object.assign(n,g)}return n}var b2=(function(){function t(e,r){var n=[],s=!0,l=!1,u=void 0;try{for(var d=e[Symbol.iterator](),h;!(s=(h=d.next()).done)&&(n.push(h.value),!(r&&n.length===r));s=!0);}catch(v){l=!0,u=v}finally{try{!s&&d.return&&d.return()}finally{if(l)throw u}}return n}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw TypeError("Invalid attempt to destructure non-iterable instance")}})(),Sd=Math.PI*2,pm=function(t,e,r,n,s,l,u){var d=t.x,h=t.y;d*=e,h*=r;var v=n*d-s*h,g=s*d+n*h;return{x:v+l,y:g+u}},E2=function(t,e){var r=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),n=Math.cos(t),s=Math.sin(t),l=Math.cos(t+e),u=Math.sin(t+e);return[{x:n-s*r,y:s+n*r},{x:l+u*r,y:u-l*r},{x:l,y:u}]},By=function(t,e,r,n){var s=t*n-e*r<0?-1:1,l=t*r+e*n;return l>1&&(l=1),l<-1&&(l=-1),s*Math.acos(l)},P2=function(t,e,r,n,s,l,u,d,h,v,g,w){var b=s**2,R=l**2,P=g**2,C=w**2,j=b*R-b*C-R*P;j<0&&(j=0),j/=b*C+R*P,j=Math.sqrt(j)*(u===d?-1:1);var O=j*s/l*w,L=j*-l/s*g,A=v*O-h*L+(t+r)/2,F=h*O+v*L+(e+n)/2,z=(g-O)/s,B=(w-L)/l,$=(-g-O)/s,K=(-w-L)/l,fe=By(1,0,z,B),J=By(z,B,$,K);return d===0&&J>0&&(J-=Sd),d===1&&J<0&&(J+=Sd),[A,F,fe,J]},C2=function(t){var e=t.px,r=t.py,n=t.cx,s=t.cy,l=t.rx,u=t.ry,d=t.xAxisRotation,h=d===void 0?0:d,v=t.largeArcFlag,g=v===void 0?0:v,w=t.sweepFlag,b=w===void 0?0:w,R=[];if(l===0||u===0)return[];var P=Math.sin(h*Sd/360),C=Math.cos(h*Sd/360),j=C*(e-n)/2+P*(r-s)/2,O=-P*(e-n)/2+C*(r-s)/2;if(j===0&&O===0)return[];l=Math.abs(l),u=Math.abs(u);var L=j**2/l**2+O**2/u**2;L>1&&(l*=Math.sqrt(L),u*=Math.sqrt(L));var A=P2(e,r,n,s,l,u,g,b,P,C,j,O),F=b2(A,4),z=F[0],B=F[1],$=F[2],K=F[3],fe=Math.abs(K)/(Sd/4);Math.abs(1-fe)<1e-7&&(fe=1);var J=Math.max(Math.ceil(fe),1);K/=J;for(var H=0;H<J;H++)R.push(E2($,K)),$+=K;return R.map(function(Y){var xe=pm(Y[0],l,u,C,P,z,B),te=xe.x,Te=xe.y,de=pm(Y[1],l,u,C,P,z,B),je=de.x,ee=de.y,Q=pm(Y[2],l,u,C,P,z,B),ue=Q.x,U=Q.y;return{x1:te,y1:Te,x2:je,y2:ee,x:ue,y:U}})},k2=C2,T2=Tx(((t,e)=>{e.exports=s;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=/([astvzqmhlc])([^astvzqmhlc]*)/gi;function s(d){var h=[];return d.replace(n,function(v,g,w){var b=g.toLowerCase();for(w=u(w),b=="m"&&w.length>2&&(h.push([g].concat(w.splice(0,2))),b="l",g=g=="m"?"l":"L");;){if(w.length==r[b])return w.unshift(g),h.push(w);if(w.length<r[b])throw Error("malformed path data");h.push([g].concat(w.splice(0,r[b])))}}),h}var l=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function u(d){var h=d.match(l);return h?h.map(Number):[]}})),R2=Tx(((t,e)=>{e.exports=r;function r(n){var s=0,l=0,u=0,d=0;return n.map(function(h){h=h.slice();var v=h[0],g=v.toUpperCase();if(v!=g)switch(h[0]=g,v){case"a":h[6]+=u,h[7]+=d;break;case"v":h[1]+=d;break;case"h":h[1]+=u;break;default:for(var w=1;w<h.length;)h[w++]+=u,h[w++]+=d}switch(g){case"Z":u=s,d=l;break;case"H":u=h[1];break;case"V":d=h[1];break;case"M":u=s=h[1],d=l=h[2];break;default:u=h[h.length-2],d=h[h.length-1]}return h})}})),_2=Rx(T2()),j2=Rx(R2());function O2(t){let e=(0,_2.default)(t),r=(0,j2.default)(e),n,s=0,l=0,u=0,d=0,h,v,g=0,w=0,b=[];for(let R=0;R<r.length;R++){let P=r[R],C=P[0];switch(C){case"M":s=P[1],l=P[2];break;case"H":P=["L",P[1],l];break;case"V":P=["L",s,P[1]];break;case"S":{let j=g,O=w;(n==="C"||n=="S")&&(j+=j-u,O+=O-d),P=["C",j,O,P[1],P[2],P[3],P[4]]}break;case"T":n==="Q"||n=="T"?(h=g*2-h,v=w*2-v):(h=g,v=w),P=["Q",h,v,P[1],P[2]];break;case"Q":h=P[1],v=P[2];break;case"A":{let j=k2({px:g,py:w,cx:P[6],cy:P[7],rx:P[1],ry:P[2],xAxisRotation:P[3],largeArcFlag:P[4],sweepFlag:P[5]});if(!j.length)continue;for(let[O,L]of j.entries())P=["C",L.x1,L.y1,L.x2,L.y2,L.x,L.y],O<j.length-1&&b.push(P);P=P}break;case"Z":P=["L",s,l];break}n=C,g=P[P.length-2],w=P[P.length-1],["C","Q","A"].indexOf(C)>-1?(u=P[P.length-4],d=P[P.length-3]):(u=g,d=w),b.push(P)}return b}const L2=/&?(xywh=)?(pixel:|percent:|pct:)?([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?)/,Uy=/&?(t=)(npt:)?([0-9]+(\.[0-9]+)?)?(,([0-9]+(\.[0-9]+)?))?/,Hy=/^rgba\((\d+),(\d+),(\d+),([0-9.]+)\)$/;function bd(t,{domParser:e,svgPreprocessor:r,iiifRenderingHints:n,loadedStylesheets:s}={},{styleClass:l}={}){if(Array.isArray(t))return Vi(t.reduce((u,d)=>{let{selector:h,selectors:v,iiifRenderingHints:g}=bd(d,{domParser:e,svgPreprocessor:r,iiifRenderingHints:n},{styleClass:l});return h&&(u.selector?(!u.selector.temporal&&h.temporal&&(u.selector.temporal=h.temporal),!u.selector.spatial&&h.spatial&&(u.selector.spatial=h.spatial),!u.selector.svg&&h.svg&&(u.selector.svg=h.svg),!u.selector.svgShape&&h.svgShape&&(u.selector.svgShape=h.svgShape)):u.selector=h,u.selectors.push(...v)),g&&(u.iiifRenderingHints=u.iiifRenderingHints||{type:"ImageApiSelector"},Object.assign(u.iiifRenderingHints,g)),u},{selector:null,selectors:[],iiifRenderingHints:n}));if(!t)return Vi({selector:null,selectors:[],iiifRenderingHints:n});if(typeof t=="string"){let[u,d]=t.split("#");return d?bd({type:"FragmentSelector",value:d},{svgPreprocessor:r,iiifRenderingHints:n,domParser:e},{styleClass:l}):Vi({selector:null,selectors:[],iiifRenderingHints:n})}if(t.type){if(t.type==="PointSelector"&&(t.t||t.t===0)){let u={type:"TemporalSelector",temporal:{startTime:t.t}};return Vi({selector:u,selectors:[u],iiifRenderingHints:n})}if(t.type==="PointSelector"&&t.x&&t.y){let u={type:"PointSelector",spatial:{x:t.x,y:t.y}};return Vi({selector:u,selectors:[u],iiifRenderingHints:n})}}if($2(t)){let u=[];if(t.region){let d=bd({type:"FragmentSelector",value:"xywh="+t.region},{domParser:e,svgPreprocessor:r,iiifRenderingHints:n},{styleClass:l});u.push(...d.selectors)}return Vi({selector:u[0],selectors:u,iiifRenderingHints:n?{...n,...t}:t})}if(t.type==="FragmentSelector"){let u=L2.exec(t.value);if(u){let h={type:"BoxSelector",spatial:{unit:u[2]==="percent:"||u[2]==="pct:"?"percent":"pixel",x:Number.parseFloat(u[3]),y:Number.parseFloat(u[4]),width:Number.parseFloat(u[5]),height:Number.parseFloat(u[6])},boxStyle:hm(l,s)},v=t.value.match(Uy);return v&&(h={type:"TemporalBoxSelector",spatial:h.spatial,temporal:{startTime:v[3]?Number.parseFloat(v[3]):0,endTime:v[6]?Number.parseFloat(v[6]):void 0},boxStyle:hm(l,s)}),Vi({selector:h,selectors:[h],iiifRenderingHints:n})}let d=t.value.match(Uy);if(d){let h={type:"TemporalSelector",temporal:{startTime:d[3]?Number.parseFloat(d[3]):0,endTime:d[6]?Number.parseFloat(d[6]):void 0}};return Vi({selector:h,selectors:[h],iiifRenderingHints:n})}return Vi({selector:null,selectors:[],iiifRenderingHints:n})}if(t.type==="SvgSelector"&&"value"in t){e||(typeof window<"u"?e=new window.DOMParser:console.warn("No DOMParser available, cannot parse SVG selector, `points`, `spatial` and `style` will be unavailable and the SVG will not be normalized."));let u=[],d,h,v=(r==null?void 0:r(t.value))??t.value,g;if(e){let b=e.parseFromString(t.value,"image/svg+xml").querySelector("svg");if(!b)return console.warn(`Illegal SVG selector: ${t.value}`),Vi({selector:null,selectors:[],iiifRenderingHints:n});let R=Ox(b);R&&(u=R.points,g=R.shapeType,d=[Math.min(...u.map(P=>P[0])),Math.min(...u.map(P=>P[1])),Math.max(...u.map(P=>P[0])),Math.max(...u.map(P=>P[1]))],{style:h,svg:v}=A2(R.element)??{svg:v})}let w={type:"SvgSelector",svg:v,svgShape:g,style:h,boxStyle:hm(l,s,h),points:u.length?u:void 0,spatial:d?{unit:"pixel",x:d[0],y:d[1],width:d[2]-d[0],height:d[3]-d[1]}:void 0};return Vi({selector:w,selectors:[w],iiifRenderingHints:n})}return Vi({selector:null,selectors:[],iiifRenderingHints:n})}function M2(t){let e=t.map(n=>n[0]).reduce((n,s)=>(n[s]+=1,n),{C:0,Q:0,L:0,M:0}),r=new Set(t.map(n=>n[0]));if(e.C>0||e.Q>0)return"path";if(e.L>0&&(r.size===1||r.size===2&&r.has("M"))){if(e.L===4)return"rect";let n=t.slice(-1)[0];return t[0][0]==="M"&&n[0]==="L"&&n[1]==t[0][1]&&n[2]===t[0][2]||n[1]===0&&n[2]===0?"polygon":"polyline"}return"path"}function Ox(t){var e;for(let r of Array.from(t.children))switch(r==null?void 0:r.tagName.toLowerCase()){case"g":{let n=Ox(r);if(n)return n}continue;case"path":{let n=r.getAttribute("d");if(!n)continue;let s=O2(n);return{element:r,points:I2(s),shapeType:M2(s)}}case"circle":{let n=Number.parseFloat(r.getAttribute("cx")??"0"),s=Number.parseFloat(r.getAttribute("cy")??"0"),l=Number.parseFloat(r.getAttribute("r")??"0");if(!l)continue;let u=[];for(let d=0;d<=360;d+=12){let h=d*Math.PI/180;u.push([n+l*Math.cos(h),s+l*Math.sin(h)])}return{element:r,points:u,shapeType:"circle"}}case"ellipse":{let n=Number.parseFloat(r.getAttribute("cx")??"0"),s=Number.parseFloat(r.getAttribute("cy")??"0"),l=Number.parseFloat(r.getAttribute("rx")??"0"),u=Number.parseFloat(r.getAttribute("ry")??"0");if(!l&&!u)continue;let d=[];for(let h=0;h<=360;h+=12){let v=Math.tan(h/360*Math.PI),g=l*(1-v**2)/(1+v**2),w=u*2*v/(1+v**2);d.push([n+g,s+w])}return{element:r,points:d,shapeType:"ellipse"}}case"line":{let n=Number.parseFloat(r.getAttribute("x0")??"0"),s=Number.parseFloat(r.getAttribute("y0")??"0"),l=Number.parseFloat(r.getAttribute("x1")??"0"),u=Number.parseFloat(r.getAttribute("y1")??"0");if(n===l&&s===u)continue;return{element:r,points:[[n,s],[l,u]],shapeType:"polyline"}}case"polygon":case"polyline":{let n=((e=r.getAttribute("points"))==null?void 0:e.split(" ").map(l=>l.split(",").map(Number.parseFloat)))??[];if(!n.length)continue;let s="polyline";return r.tagName.toLowerCase()==="polygon"&&(n.push(n[0]),s="polygon"),{element:r,points:n,shapeType:s}}case"rect":{let n=Number.parseFloat(r.getAttribute("x")??"0"),s=Number.parseFloat(r.getAttribute("y")??"0"),l=Number.parseFloat(r.getAttribute("width")??"0"),u=Number.parseFloat(r.getAttribute("height")??"0");if(!l||!u)continue;return{element:r,points:[[n,s],[n+l,s],[n+l,s+u],[n,s+u],[n,s]],shapeType:"rect"}}default:continue}return null}function I2(t){let e=[];for(let r=0;r<t.length;r++){let n=e[e.length-1]??[0,0],s=t[r];switch(s[0]){case"M":case"L":e.push([s[1],s[2]]);continue;case"C":e.push(...v2({x:n[0],y:n[1]},{x:s[1],y:s[2]},{x:s[3],y:s[4]},{x:s[5],y:s[6]}).map(l=>[l.x,l.y]).slice(1));continue;case"Q":e.push(...g2({x:n[0],y:n[1]},{x:s[1],y:s[2]},{x:s[3],y:s[4]}).map(l=>[l.x,l.y]).slice(1));continue}}return e}function A2(t){let e={};if(t.hasAttribute("fill")?(e.fill=t.getAttribute("fill"),t.removeAttribute("fill")):t.style&&t.style.fill&&(e.fill=t.style.fill),e.fill){let n=Hy.exec(e.fill);n&&(e.fillOpacity=Number.parseFloat(n[4]),e.fill=`rgb(${n[1]}, ${n[2]}, ${n[3]})`)}if(t.hasAttribute("fill-opacity")?(e.fillOpacity=Number.parseFloat(t.getAttribute("fill-opacity")),t.removeAttribute("fill-opacity")):t.style&&t.style.fillOpacity&&(e.fillOpacity=Number.parseFloat(t.style.fillOpacity)),t.hasAttribute("stroke")?(e.stroke=t.getAttribute("stroke"),t.removeAttribute("stroke")):t.style&&t.style.stroke&&(e.stroke=t.style.stroke),e.stroke){let n=Hy.exec(e.stroke);n&&(e.strokeOpacity=Number.parseFloat(n[4]),e.stroke=`rgb(${n[1]}, ${n[2]}, ${n[3]})`)}t.hasAttribute("stroke-opacity")?(e.strokeOpacity=Number.parseFloat(t.getAttribute("stroke-opacity")),t.removeAttribute("stroke-opacity")):t.style&&t.style.strokeOpacity&&(e.strokeOpacity=Number.parseFloat(t.style.strokeOpacity)),t.hasAttribute("stroke-width")?(e.strokeWidth=t.getAttribute("stroke-width"),t.removeAttribute("stroke-width")):t.style&&t.style.strokeWidth&&(e.strokeWidth=t.style.strokeWidth),t.hasAttribute("stroke-dasharray")?(e.strokeDasharray=t.getAttribute("stroke-dasharray"),t.removeAttribute("stroke-dasharray")):t.style&&t.style.strokeDasharray&&(e.strokeDasharray=t.style.strokeDasharray);let r=t;for(;r.tagName.toLowerCase()!=="svg";)if(r=r.parentElement,r===null)throw Error("Could not find root SVG element");return{svg:r.outerHTML,style:Object.keys(e).length>0?e:void 0}}function $2(t){if(!t)return!1;let e=t.type||t["@type"];return e==="iiif:ImageApiSelector"||e==="ImageApiSelector"}function Vi(t){if(t.iiifRenderingHints){let e=t.iiifRenderingHints;if(e.rotation){let r=N2(`${e.rotation}`);if(r)if(t.selectors.length)for(let n of t.selectors)n.rotation=r;else t.selectors.push({type:"RotationSelector",rotation:r})}}else delete t.iiifRenderingHints;return t}function N2(t){let e=Number.parseFloat(t);return e&&t.startsWith("!")&&(e=360-e),e&&(e%=360),e===e&&e||0}function An(t,e={}){if(Array.isArray(t))return An(t[0]);if(typeof t=="string"){let[r,n]=t.split("#");return n?An({type:"SpecificResource",source:{id:r,type:e.typeMap&&e.typeMap[r]||e.defaultType||"Canvas"},selector:{type:"FragmentSelector",value:n}},e):{type:"SpecificResource",source:{id:r,type:e.typeMap&&e.typeMap[r]||e.defaultType||"Canvas"},selector:null,selectors:[]}}if(t.type==="Choice"||t.type==="List"||t.type==="Composite"||t.type==="Independents")return An(t.items[0],e);if(!t.type&&"source"in t&&(t.type="SpecificResource"),t.type==="SpecificResource"){t.source.type==="Canvas"&&t.source.partOf&&typeof t.source.partOf=="string"&&(t.source.partOf=[{id:t.source.partOf,type:"Manifest"}]);let r=t.styleClass||e.styleClass,n={selector:null,selectors:[]};if(typeof t.source=="string"&&t.source.includes("#")){let u=An(t.source,{...e,styleClass:r});t.source=u.source,n={selector:u.selector,selectors:u.selectors}}let{selector:s,selectors:l}=t.selector?bd(t.selector,e,{styleClass:r}):n;return{type:"SpecificResource",source:t.source,selector:s,selectors:l}}if(t.id){t.type==="Canvas"&&t.partOf&&typeof t.partOf=="string"&&(t.partOf=[{id:t.partOf,type:"Manifest"}]);let[r,n]=t.id.split("#");return n?An({type:"SpecificResource",source:{...t,id:r},selector:{type:"FragmentSelector",value:n}},e):{type:"SpecificResource",source:{...t,id:r},selector:null,selectors:[]}}return{type:"SpecificResource",source:t,selector:null,selectors:[]}}function gd(t){let e=JSON.stringify(t),r=5381,n=e.length;for(;n;)r=r*33^e.charCodeAt(--n);let s=r>>>0,l=s.toString(16);return l.length%2?"0"+l:l}function z2(t=ic){return{findFirstCanvasFromRange:e=>Lx(t,e),findAllCanvasesInRange:e=>Ix(t,e),findManifestSelectedRange:(e,r)=>F2(t,e,r),findSelectedRange:(e,r)=>Qg(t,e,r),rangesToTableOfContentsTree:(e,r,n={})=>D2(t,e,r,n),rangeToTableOfContentsTree:(e,r={})=>Mh(t,e,[],r),isContiguous:(e,r,n={})=>B2(t,e,r,n)}}function Lx(t,e){var r;for(let n of e.items){if(typeof n=="string")return{id:n,type:"Canvas"};if(n.type==="Canvas")return n;if(n.type==="SpecificResource"&&((r=n.source)==null?void 0:r.type)==="Canvas")return n.source;if(n.type==="Range"){let s=Lx(t,t.get(n));if(s)return s}}return null}function Mx(t,e){var r;for(let n of e.items){if(typeof n=="string")return{type:"SpecificResource",source:{id:n,type:"Canvas"}};if(n.type==="Canvas")return{type:"SpecificResource",source:n};if(n.type==="SpecificResource"&&((r=n.source)==null?void 0:r.type)==="Canvas")return n;if(n.type==="Range"){let s=Mx(t,t.get(n));if(s)return s}}return null}function Ix(t,e){var n;let r=[];for(let s of e.items)if(s.type==="SpecificResource"&&((n=s.source)==null?void 0:n.type)==="Canvas"&&(s.source.id.indexOf("#")===-1?r.push(s.source):r.push({id:s.source.id.split("#")[0],type:"Canvas"})),s.type==="Range"&&r.push(...Ix(t,t.get(s))),s.type==="SpecificResource"){let l=typeof s.source=="string"?s.source:s.source.id;r.push({id:l,type:"Canvas"})}return r}function F2(t,e,r){for(let n of e.structures){let s=Qg(t,t.get(n),r);if(s)return s}return null}function Qg(t,e,r){var n,s,l;for(let u of e.items){let d=(s=(n=u==null?void 0:u.source)==null?void 0:n.id)==null?void 0:s.split("#")[0];if(u.type==="SpecificResource"&&u.source===r||u.type==="SpecificResource"&&((l=u.source)==null?void 0:l.type)==="Canvas"&&r===d)return e;if(u.type==="Range"){let h=Qg(t,t.get(u),r);if(h)return h}}return null}function D2(t,e,r,n={}){if(e.length===0)return null;let s=t.get(e);if(s.length===1)return Mh(t,s[0],[],n);let l={id:`vault://virtual-root/${gd(s)}`,type:"Range",label:r||{en:["Table of Contents"]},items:s};return Mh(t,l,[],n)}function Mh(t,e,r=[],n={}){var u;if(!e)return null;let s=t.get(e,{skipSelfReturn:!1}),l={id:s.id,type:"Range",label:s.label,untitled:!s.label,isCanvasLeaf:!1,isRangeLeaf:!1,isVirtual:s.id.startsWith("vault://virtual-root/"),items:[]};if(r.indexOf(l.id)!==-1&&(l.id=`vault://${gd(s)}`),s.behavior&&s.behavior.includes("no-nav"))if(n.showNoNav)l.isNoNav=!0;else return null;if(!s.items)return l;for(let d of s.items){if(typeof d=="string"){let h=t.get({id:d,type:"Canvas"},{skipSelfReturn:!1}),v={id:d,type:"Canvas",isCanvasLeaf:!0,isRangeLeaf:!1,isNoNav:s.behavior&&s.behavior.includes("no-nav"),label:h.label||{none:["Untitled"]},untitled:!h.label,resource:{type:"SpecificResource",source:{id:d,type:"Canvas"}}};r.indexOf(v.id)!==-1&&(v.id=`vault://${gd(d)}`),r.push(v.id),l.items.push(v);continue}if(d.type==="SpecificResource"&&((u=d.source)==null?void 0:u.type)==="Canvas"){let h=t.get(d.source),v=Ku(d);if(!h)continue;let g={id:v.type==="Canvas"?v.id:d.source.id,type:"Canvas",isCanvasLeaf:!0,isRangeLeaf:!1,label:h.label||{none:["Untitled"]},untitled:!h.label,resource:d};r.indexOf(g.id)!==-1&&(g.id=`vault://${gd(d)}`),r.push(g.id),l.items.push(g);continue}if(d.type==="Canvas"){let h={id:d.id,type:"Canvas",label:d.label,isCanvasLeaf:!0,isRangeLeaf:!1,resource:{type:"SpecificResource",source:d}};r.indexOf(h.id)!==-1&&(h.id=`vault://${gd(d)}`),r.push(h.id),l.items.push(h);continue}if(d.type==="Range"){let h=Mh(t,d,r,n);h&&l.items.push(h)}}return l.firstCanvas=Mx(t,s),l.isRangeLeaf=l.items?l.items.filter(d=>d.type==="Range").length===0:!0,l}function Ax(t,e,r=[]){let n=t.get(e),s=[],l=n.id?[...r,n.id]:r;if(!n.items)return s;for(let u of n.items)if(typeof u=="string")s.push({canvas:{id:u,type:"Canvas"},path:l});else if(u.type==="SpecificResource"){let d=u.source;(d==null?void 0:d.type)==="Canvas"&&s.push({canvas:d,path:l})}else u.type==="Range"&&s.push(...Ax(t,u,l));return s}function B2(t,e,r,n={}){let s=r.map(O=>t.get(O,{skipSelfReturn:!1})),l=t.get(e),u=s.map(O=>O.id),d=Ax(t,l),h={isContiguous:!0,startIndex:-1,endIndex:-1,gaps:[],invalidRanges:[],invalidCanvases:[],reason:null};if(d.length===0)return n.detail?[!0,h]:[!0,null];let v=d.map(({canvas:O})=>u.indexOf(O.id)),g=!0,w=-1,b=new Map,R=(O,L)=>{b.has(O)||b.set(O,[]);let A=b.get(O);A.includes(L)||A.push(L)};for(let O=0;O<v.length;O++){let L=v[O],A=d[O],F=A.path[A.path.length-1];if(L===-1){g=!1,F&&R(F,"Canvas not found"),h.invalidCanvases.push(A.canvas.id);continue}O>0&&w!==-1?L<=w?(g=!1,F&&R(F,"Canvas out of order")):(L-w>1&&(n.allowGaps||(g=!1),n.detail&&h.gaps.push({startIndex:w,endIndex:L,canvasIds:u.slice(w+1,L)})),w=L):w=L}if(n.allowSubset||(d.length!==u.length?g=!1:u.every(L=>d.some(A=>A.canvas.id===L))||(g=!1)),!n.detail)return[g,null];let P=Array.from(b.keys());P.length>0&&(h.invalidRanges=P.map(O=>({id:O,reasons:b.get(O)||[]})));let C={...h,isContiguous:g},j=v.filter(O=>O!==-1);return j.length>0&&(C.startIndex=j[0],C.endIndex=j[j.length-1]),[g,C]}const _r=function(t){return function(){let e={type:t,getType:()=>t,toString:()=>t};return(r,n)=>({...e,...r!==void 0&&{payload:r},...n!==void 0&&{meta:n}})}},$x="@iiif/IMPORT_ENTITIES",Nx="@iiif/MODIFY_ENTITY_FIELD",zx="@iiif/REORDER_ENTITY_FIELD",Fx="@iiif/MOVE_ENTITY",og="@iiif/MOVE_ENTITIES",Dx="@iiif/ADD_REFERENCE",lg="@iiif/UPDATE_REFERENCE",Bx="@iiif/REMOVE_REFERENCE",Ux="@iiif/ADD_METADATA",Hx="@iiif/REMOVE_METADATA",ag="@iiif/UPDATE_METADATA",Wx="@iiif/REORDER_METADATA",Vx=_r($x)(),U2=_r(Nx)(),H2=_r(zx)(),W2=_r(Fx)(),V2=_r(og)(),Q2=_r(Dx)(),q2=_r(Bx)(),G2=_r(lg)(),K2=_r(Ux)(),Y2=_r(ag)(),X2=_r(Hx)(),Z2=_r(Wx)(),Sh={importEntities:Vx,modifyEntityField:U2,reorderEntityField:H2,addReference:Q2,removeReference:q2,updateReference:G2,addMetadata:K2,removeMetadata:X2,updateMetadata:Y2,reorderMetadata:Z2,moveEntity:W2,moveEntities:V2},Qx="@iiif/ADD_MAPPING",qx="@iiif/ADD_MAPPINGS",J2=_r(Qx)(),eR=_r(qx)(),ug="RESOURCE_ERROR",Gx="RESOURCE_LOADING",cg="RESOURCE_READY",Kx="@iiif/REQUEST_RESOURCE",Yx="@iiif/REQUEST_ERROR",Xx="@iiif/REQUEST_MISMATCH",Zx="@iiif/REQUEST_COMPLETE",tR="@iiif/REQUEST_OFFLINE_RESOURCE",rR=_r(Kx)(),dg=_r(Yx)(),nR=_r(Xx)(),iR=_r(Zx)(),qg="@iiif/BATCH",sR="@iiif/BATCH_IMPORT",fg=_r(qg)(),Jx="@iiif/SET_META_VALUE",e1="@iiif/SET_META_VALUE_DYNAMIC",t1="@iiif/UNSET_META_VALUE",oR=_r(Jx)(),lR=_r(e1)(),aR=_r(t1)(),Wy={setMetaValue:oR,setMetaValueDynamic:lR,unsetMetaValue:aR},uR=(t,e)=>{let{entities:r,resource:n,mapping:s}=JT(e);if(n.id===void 0)return[dg({id:t,message:"ID is not defined in resource."})];let l=[Vx({entities:r}),eR({mapping:s})];return n.id!==t&&(l.push(J2({id:t,type:n.type})),l.push(nR({requestId:t,actualId:n.id}))),l.push(iR({id:t})),l},Vy=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function cR(t,e){return!!(t===e||Vy(t)&&Vy(e))}function Qy(t,e){if(!Array.isArray(t)||!Array.isArray(e))return t===e;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!cR(t[r],e[r]))return!1;return!0}function mm(t,e,r){let n=t.iiif.requests[e],s=t.iiif.mapping[e];if(!s||!t.iiif.entities[s][n.resourceUri])return;let l=t.iiif.entities[s][n.resourceUri];if(l&&l[nn]){let u=l[nn].find(d=>d[jo]===l.id);return Vg(l,u)}return l}function dR(t){return t&&typeof t.then=="function"}function qy(t,e,{waitTimeout:r=30}={}){return(n,s,l)=>{let u=t.getStore(),d=u.getState(),h=d.iiif.requests[n];if(h){if(h.loadingState===cg){let g=mm(d,n);if(g)return g}switch(h.loadingState){case ug:break;case Gx:return(async()=>{let g,w=!1;try{let b=await Promise.race([new Promise((R,P)=>{w||(g=u.subscribe(()=>{let C=u.getState();if(C.iiif.requests[n].loadingState===ug){P();return}if(C.iiif.requests[n].loadingState===cg){let j=mm(C,n);j?R(j):P()}}))}),new Promise((R,P)=>setTimeout(()=>{w=!0,P()},r*60*1e3))]);if(g&&g(),b)return b}catch{g&&g()}})()}}t.dispatch(rR({id:n}));let v=g=>{if(!g)return;!g.id&&!g["@id"]&&(g["@type"]&&(g["@id"]=n),g.id=n);let w=uR(n,g);return t.dispatch(fg({actions:w})),mm(u.getState(),n)};try{let g=e(n,s);return dR(g)?(async()=>{try{let w=await g;return l&&(w=l(w)),v(w)}catch(w){throw t.dispatch(dg({id:n,message:w.toString()})),w}})():v(l?l(g):g)}catch(g){throw t.dispatch(dg({id:n,message:g.toString()})),g}}}function r1(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}const gm={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},fR=(t,e)=>(r,n,s)=>(s.dispatch=l=>(r(u=>t(u,l),!1,l),l),s.dispatchFromDevtools=!0,{dispatch:(...l)=>s.dispatch(...l),...e}),hR=fR,hg=new Map,th=t=>{let e=hg.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([r,n])=>[r,n.getState()])):{}},pR=(t,e,r)=>{if(t===void 0)return{type:"untracked",connection:e.connect(r)};let n=hg.get(r.name);if(n)return{type:"tracked",store:t,...n};let s={connection:e.connect(r),stores:{}};return hg.set(r.name,s),{type:"tracked",store:t,...s}},mR=(t,e={})=>(r,n,s)=>{let{enabled:l,anonymousActionType:u,store:d,...h}=e,v;try{v=(l??(gm?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!v)return(gm?"production":void 0)!=="production"&&l&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(r,n,s);let{connection:g,...w}=pR(d,v,h),b=!0;s.setState=(C,j,O)=>{let L=r(C,j);if(!b)return L;let A=O===void 0?{type:u||"anonymous"}:typeof O=="string"?{type:O}:O;return d===void 0?(g==null||g.send(A,n()),L):(g==null||g.send({...A,type:`${d}/${A.type}`},{...th(h.name),[d]:s.getState()}),L)};let R=(...C)=>{let j=b;b=!1,r(...C),b=j},P=t(s.setState,n,s);if(w.type==="untracked"?g==null||g.init(P):(w.stores[w.store]=s,g==null||g.init(Object.fromEntries(Object.entries(w.stores).map(([C,j])=>[C,C===w.store?P:j.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let C=!1,j=s.dispatch;s.dispatch=(...O)=>{(gm?"production":void 0)!=="production"&&O[0].type==="__setState"&&!C&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),C=!0),j(...O)}}return g.subscribe(C=>{var j;switch(C.type){case"ACTION":if(typeof C.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return vm(C.payload,O=>{if(O.type==="__setState"){if(d===void 0){R(O.state);return}Object.keys(O.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);let L=O.state[d];if(L==null)return;JSON.stringify(s.getState())!==JSON.stringify(L)&&R(L);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(O)});case"DISPATCH":switch(C.payload.type){case"RESET":return R(P),d===void 0?g==null?void 0:g.init(s.getState()):g==null?void 0:g.init(th(h.name));case"COMMIT":if(d===void 0){g==null||g.init(s.getState());return}return g==null?void 0:g.init(th(h.name));case"ROLLBACK":return vm(C.state,O=>{if(d===void 0){R(O),g==null||g.init(s.getState());return}R(O[d]),g==null||g.init(th(h.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return vm(C.state,O=>{if(d===void 0){R(O);return}JSON.stringify(s.getState())!==JSON.stringify(O[d])&&R(O[d])});case"IMPORT_STATE":{let{nextLiftedState:O}=C.payload,L=(j=O.computedStates.slice(-1)[0])==null?void 0:j.state;if(!L)return;R(d===void 0?L:L[d]),g==null||g.send(null,O);return}case"PAUSE_RECORDING":return b=!b}return}}),P},gR=mR,vm=(t,e)=>{let r;try{r=JSON.parse(t)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}r!==void 0&&e(r)},vR=t=>(e,r,n)=>{let s=n.subscribe;return n.subscribe=(u,d,h)=>{let v=u;if(d){let g=(h==null?void 0:h.equalityFn)||Object.is,w=u(n.getState());v=b=>{let R=u(b);if(!g(w,R)){let P=w;d(w=R,P)}},h!=null&&h.fireImmediately&&d(w,w)}return s(v)},t(e,r,n)},yR=vR,wR=(t={},e)=>{switch(e.type){case Qx:return{...t,[e.payload.id]:e.payload.type};case qx:return{...t,...e.payload.mapping};default:return t}};function ld(t,e,r,n){return!(!t[r]||!t[r][e]||!t[r][e][n]||!Array.isArray(t[r][e][n]))}function xR(t,e){let r={},n=[];for(let[s,l]of Object.entries(t||{})){n.push(s);let u=(e||{})[s];if(!u||u.length===0){r[s]=l;continue}r[s]=u}for(let[s,l]of Object.entries(e||{}))n.indexOf(s)===-1&&(r[s]=l);return r}function rt(t){return t.payload||{}}function SR(t,e,r){if(!t[e]||!Array.isArray(t[e]))return null;let n=r.index===void 0?t[e].findIndex(s=>{var l;return s?((l=Wg(s))==null?void 0:l.id)===r.id:!1}):r.index;return n===-1?null:{entity:t[e][n],index:n}}function Gy(t,e){var r;if(!(!(e!=null&&e.id)||!(e!=null&&e.type)))return(r=t[e.type])==null?void 0:r[e.id]}function ym(t,e){return t===void 0?e:t}const n1=(t=r1(),e)=>{var n;let r=(s,l)=>({...t,[rt(e).type]:{...t[rt(e).type],[rt(e).id]:{...s,...l}}});switch(e.type){case Nx:{if(!t[rt(e).type]||!t[rt(e).type][rt(e).id])return t;let s=t[rt(e).type][rt(e).id];return typeof s=="string"?t:r(s,{[rt(e).key]:rt(e).value})}case zx:{if(!ld(t,rt(e).id,rt(e).type,rt(e).key))return t;let s=t[rt(e).type][rt(e).id];if(typeof s=="string")return t;let l=Array.from(s[rt(e).key]),[u]=l.splice(rt(e).startIndex,1);return l.splice(rt(e).endIndex,0,u),r(s,{[rt(e).key]:l})}case og:{let s=rt(e).subjects,l=rt(e).from,u=rt(e).to||l,d=Gy(t,l),h=(u==null?void 0:u.key)||l.key;if(!ld(t,l.id,l.type,l.key)||!ld(t,u.id,u.type,u.key))return t;let v=[],g=[];if(s.type==="slice"){let L=s.startIndex,A=s.length;v=Array.from(d[l.key]),g=v.splice(L,A)}else{let L=Array.from(d[l.key]);for(let A of s.items){let F=SR(d,l.key,A);F&&(g.push(F.entity),L[F.index]=null),v=L.filter(z=>z!==null)}}let w={...d,[l.key]:v},b={...t,[l.type]:{...t[l.type],[l.id]:w}},R=Gy(b,u);if(!R)return t;let P=(u==null?void 0:u.index)===void 0?R[h].length:u.index,C=Array.from(R[u.key]);C.splice(P,0,...g);let j={...R,[h]:C};return{...b,[u.type]:{...b[u.type],[u.id]:j}}}case Fx:return n1(t,{type:og,payload:{subjects:{type:"list",items:[rt(e).subject]},from:rt(e).from,to:rt(e).to}});case $x:{let s=Object.keys(rt(e).entities),l={...t};for(let u of s){let d=rt(e).entities[u],h={...t[u]||{}},v=!1,g=Object.keys(d||{})||[];if(d&&g){for(let w of g)v=!0,h[w]=t[u][w]?xR(t[u][w],d[w]):d[w];v&&(l[u]=h)}}return l}case Dx:{if(!ld(t,rt(e).id,rt(e).type,rt(e).key))return t;let s=t[rt(e).type][rt(e).id],l=Array.from(s[rt(e).key]);return l.splice(ym(rt(e).index,l.length+1),0,rt(e).reference),r(s,{[rt(e).key]:l})}case lg:case Bx:{if(!ld(t,rt(e).id,rt(e).type,rt(e).key))return t;let s=t[rt(e).type][rt(e).id],l=Array.from(s[rt(e).key]),u=ym(rt(e).index,l.findIndex(d=>d&&d.id===rt(e).reference.id));return u===-1||((n=l[u])==null?void 0:n.id)!==rt(e).reference.id?t:(e.type===lg?l.splice(u,1,rt(e).reference):l.splice(u,1),r(s,{[rt(e).key]:l}))}case Ux:{let s=t[rt(e).type][rt(e).id];if(!s)return t;let l=Array.from(s.metadata||[]),u=rt(e);return l.splice(ym(e.payload.beforeIndex,l.length+1),0,{label:u.label,value:u.label}),r(s,{metadata:l})}case Wx:{let s=t[rt(e).type][rt(e).id];if(typeof s=="string"||!s)return t;let l=Array.from(s.metadata||[]),[u]=l.splice(rt(e).startIndex,1);return l.splice(rt(e).endIndex,0,u),r(s,{metadata:l})}case ag:case Hx:{let s=t[rt(e).type][rt(e).id],l=Array.from(s.metadata||[]),u=rt(e).atIndex;return u===void 0||u===-1||!l[u]?t:(e.type===ag?l.splice(u,1,{label:rt(e).label,value:rt(e).value}):l.splice(u,1),r(s,{metadata:l}))}default:return t}},bR=(t={},e)=>{switch(e.type){case Kx:case tR:return{...t,[e.payload.id]:{requestUri:e.payload.id,loadingState:Gx,uriMismatch:!1,resourceUri:e.payload.id}};case Xx:return{...t,[e.payload.requestId]:{...t[e.payload.requestId]||{},uriMismatch:!0,resourceUri:e.payload.actualId},[e.payload.actualId]:{requestUri:e.payload.requestId,loadingState:t[e.payload.requestId].loadingState,uriMismatch:!0,resourceUri:e.payload.actualId}};case Yx:return{...t,[e.payload.id]:{...t[e.payload.id]||{},loadingState:ug,error:e.payload.message}};case Zx:return{...t,[e.payload.id]:{...t[e.payload.id]||{},loadingState:cg,error:void 0}}}return t},ER=(t={},e)=>{let{id:r,updateValue:n,value:s,meta:l,key:u}=e&&e.payload||{};switch(e.type){case Jx:return{...t,[r]:{...t[r]||{},[l]:{...t[r]&&t[r][l]||{},[u]:s}}};case e1:return{...t,[r]:{...t[r]||{},[l]:{...t[r]&&t[r][l]||{},[u]:t[r]&&t[r][l]?n(t[r][l][u]):n(void 0)}}};case t1:return t[r]&&t[r][l]&&t[r][l][u]?{...t,[r]:{...t[r]||{},[l]:{...t[r]&&t[r][l]||{},[u]:void 0}}}:t;default:return t}};function i1(t={}){let e=Object.keys(t);return function(r={},n){let s=!1,l={};for(let u=0;u<e.length;u++){let d=e[u];l[d]=t[d](r[d],n),s||(s=l[d]!==r[d])}return s?l:r}}function PR(t){return(e,r)=>r&&r.type===qg?r.payload.actions.reduce(t,e):r&&r.type===sR?{...e,iiif:{...e.iiif,...r.payload.state}}:t(e,r)}const CR=i1({mapping:wR,entities:n1,requests:bR,meta:ER});function kR(){return{iiif:{entities:r1(),meta:{},mapping:{},requests:{}}}}function TR(t={}){let{enableDevtools:e=!1,iiifStoreName:r="iiif",defaultState:n=kR(),customReducers:s={}}=t,l=PR(i1({[r]:CR,...s})),u=!!(typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__);return Mw(yR((u?gR:(h,v)=>h)(hR(l,n),{enabled:e})))}function ei(t,e,r,n=!0){e[Xu]=e[Xu]||[],e[Xu].push(t);let s=new Map;Object.defineProperty(e,t,{enumerable:n,get(){if(e[Ma][t]===void 0)return;let l=e[Ma][t];if(!l)return l;let u=r.get(e[Ma][t],{parent:this.id?{id:this.id,type:this.type}:void 0});return s.has(u)||(s.clear(),s.set(u,Ia(u,r))),s.get(u)},set(l){e[Ma][t]!==l&&(this[Ra]?r.modifyEntityField({id:this.id,type:this.type},t,s1(l)):this[Ma][t]=l)}})}const Ma=Symbol.for("_refs_"),Ra=Symbol.for("_reactive_"),Xu=Symbol.for("_defined_"),Ky=Symbol.for("_parent_");function RR(t,e=!1,r){let n={id:"",type:"unknown",[Xu]:[],[Ma]:{},[Ky]:null,[Ra]:null,is(s){return typeof s=="string"?this.id===s:s.id?s.id===this.id:!1},reactive(){if(!this[Ra])return this[Ra]=this.subscribe(()=>this.refresh(),!0),()=>{this.unreactive()}},refresh(){if(this.id){let s=this.unwrap();for(let l of Object.keys(s||{}))this[Xu].includes(l)?this[Ma][l]=s[l]:this[l]=s[l]}},unreactive(){this[Ra]&&(this[Ra](),this[Ra]=null)},unwrap(){if(!this.id)throw Error("Invalid object");let s=this[Ky];return t.get(this.id,{parent:s?{id:s,type:"unknown"}:void 0})},toPresentation3(){return t.toPresentation3(this.unwrap())},toPresentation2(){return t.toPresentation2(this.unwrap())},valueOf(){return this.unwrap()},toJSON(){let s=this;return{...s,items:s.items,annotations:s.annotations,structures:s.structures,seeAlso:s.seeAlso,service:s.service,services:s.services,rendering:s.rendering,partOf:s.partOf,start:s.start,supplementary:s.supplementary,homepage:s.homepage,thumbnail:s.thumbnail,placeholderCanvas:s.placeholderCanvas,accompanyingCanvas:s.accompanyingCanvas,provider:s.provider}},subscribe(s,l=!0){return t.subscribe(()=>this.id?t.get(this.id):null,s,l)}};return ei("items",n,t),ei("annotations",n,t),ei("structures",n,t),ei("seeAlso",n,t),ei("rendering",n,t),ei("partOf",n,t),ei("start",n,t,!1),ei("supplementary",n,t),ei("homepage",n,t),ei("thumbnail",n,t),ei("placeholderCanvas",n,t,!1),ei("accompanyingCanvas",n,t,!1),ei("provider",n,t),ei("body",n,t),ei("logo",n,t),n}function _R(t){return!!t[Xu]}function s1(t){return Array.isArray(t)?t.map(e=>s1(e)):!t||!t.type?t:{id:t.id,type:t.type}}function Ia(t,e,r=!1,n){if(Array.isArray(t))return t.map(d=>Ia(d,e,r));if(!t||!t.type||!t.id)return t;let s=RR(e,r),l=Object.create(s),u=Object.assign(l,t);return r&&u.reactive(),u}function Yy(t){switch(t){case"Image":case"Video":case"Sound":case"Dataset":case"Text":case"Composite":case"List":case"Independents":case"Audience":return"ContentResource";case"ImageService1":case"ImageService2":case"ImageService3":return"Service"}return t}var pg=class{constructor(e,r){In(this,"options",void 0),In(this,"store",void 0),In(this,"emitter",void 0),In(this,"isBatching",!1),In(this,"batchQueue",[]),In(this,"remoteFetcher",void 0),In(this,"staticFetcher",void 0),In(this,"defaultFetcher",n=>fetch(n).then(s=>{if(s.status===200)return s.json();{let l=Error(`${s.status} ${s.statusText}`);throw l.name="HTTPError",l}})),this.options=Object.assign({reducers:{},customFetcher:this.defaultFetcher,enableDevtools:!0},e||{}),this.store=r||TR({customReducers:this.options.reducers,defaultState:this.options.defaultState,enableDevtools:this.options.enableDevtools}),this.emitter=Iw(),this.remoteFetcher=qy(this,this.options.customFetcher),this.staticFetcher=qy(this,(n,s)=>s)}batch(e){this.isBatching=!0;try{e(this),this.isBatching=!1,this.dispatch(fg({actions:this.batchQueue}))}catch(r){throw this.batchQueue=[],this.isBatching=!1,r}this.batchQueue=[]}async asyncBatch(e){this.isBatching=!0;try{await e(this),this.isBatching=!1,this.dispatch(fg({actions:this.batchQueue}))}catch(r){throw this.batchQueue=[],this.isBatching=!1,r}this.batchQueue=[]}modifyEntityField(e,r,n){this.dispatch(Sh.modifyEntityField({id:e.id,type:e.type,key:r,value:n}))}dispatch(e){if(this.isBatching)this.batchQueue.push(e);else{if(e.type===qg){for(let s of e.payload.actions)this.emitter.emit(s.type,{action:s,state:this.store.getState()});this.store.dispatch(e);let n=this.getState();for(let s of e.payload.actions)this.emitter.emit(`after:${s.type}`,{action:s,state:n});return}this.emitter.emit(e.type,{action:e,state:this.store.getState()}),this.store.dispatch(e);let r=this.store.getState();this.emitter.emit(`after:${e.type}`,{action:e,state:r});return}}on(e,r){return this.emitter.on(e,r),()=>{this.emitter.off(e,r)}}serialize(e,r){return t2(this.getState().iiif,e,r)}toPresentation2(e){return this.serialize(e,o2)}toPresentation3(e){return this.serialize(e,l2)}hydrate(e,r,n={}){return this.get(e,r,{...n,skipSelfReturn:!1})}get(e,r,n={}){typeof r!="string"&&(n=r||{},r=void 0);let{skipSelfReturn:s=!0}=n||{},l=n.parent?typeof n.parent=="string"?n.parent:n.parent.id:void 0;if(Array.isArray(e))return e.map(w=>this.get(w,n));let u=this.getState();if(Al(e)&&!n.preserveSpecificResources&&(e=e.source),typeof e=="string"){let w=Yy(r||u.iiif.mapping[e]);if(!w)return s?null:{id:e,type:"unknown"};e={id:e,type:w}}if(e&&e.partOf&&!l&&!n.skipPartOfCheck){let w=Array.isArray(e.partOf)?e.partOf[0]:e.partOf;w&&(typeof w=="string"&&(l=w),typeof w.id=="string"&&(l=w.id))}let d=Yy(r||(e==null?void 0:e.type)),h=e==null?void 0:e.id,v=u.iiif.entities[d];if(!v){let w=u.iiif.requests[h];return w&&w.resourceUri!==h?this.get(w.resourceUri,n):s?null:e}let g=v[e.id];if(g&&g[nn]){let w=g[nn].find(b=>l?b[jo]===l:b[jo]===g.id);return Vg(g,w)}return v[e.id]||(s?null:e)}select(e){return e(this.getState())}getStore(){return this.store}getState(){return this.store.getState()}deep(e,r){if(e===void 0)return this.get(r,{skipSelfReturn:!1});if(typeof e=="function")try{let s=e(this.get(r,{skipSelfReturn:!1})),l=u=>this.deep(u,s);return l.size=Array.isArray(s)?s.length:1,l}catch{let s=l=>this.deep(l,void 0);return s.size=0,s}let n=s=>this.deep(s,e);return n.size=Array.isArray(e)?e.length:1,n}loadManifest(e,r,n){let s=typeof e=="string"?e:e.id;return this.load(s,r,n)}loadCollection(e,r,n){let s=typeof e=="string"?e:e.id;return this.load(s,r,n)}load(e,r,n){let s=typeof e=="string"?e:e.id;return r?Promise.resolve(this.staticFetcher(s,r,n)):Promise.resolve(this.remoteFetcher(s,{},n))}loadSync(e,r,n){let s=typeof e=="string"?e:e.id;return this.staticFetcher(s,r,n)}loadManifestSync(e,r,n){let s=typeof e=="string"?e:e.id;return this.loadSync(s,r,n)}loadCollectionSync(e,r,n){let s=typeof e=="string"?e:e.id;return this.loadSync(s,r,n)}areInputsEqual(e,r){return Qy(e,r)}subscribe(e,r,n){return n===void 0&&(r===void 0||r===!1||r===!0)&&(n=r,r=e,e=s=>s),this.store.subscribe(e,s=>r(s,this),{equalityFn:Qy,fireImmediately:!n})}async ensureLoaded(e){let r=typeof e=="string"?e:e.id;this.requestStatus(r)||await this.load(r)}requestStatus(e){return this.select(r=>r.iiif.requests[e])}getPaginationState(e){let r=typeof e=="string"?e:e.id;if(!r)return null;let n=this.getResourceMeta(r,"@vault/pagination");if(n!=null&&n.state)return n.state;let s=this.get(e);if(s.first){let l={currentPage:null,currentPageIndex:null,isFetching:!1,isFullyLoaded:!1,next:s.first,page:1,pages:[],previous:null,totalItems:s.total,currentLength:0};return this.setMetaValue([r,"@vault/pagination","state"],l),l}return null}async loadNextPage(e,r){var R;let n=typeof e=="string"?e:e.id;if(!n)return[null,null];let s=this.getPaginationState(e);if(!s||s.isFullyLoaded||!s.next)return[null,null];if(s.isFetching)return[s,null];let l=typeof s.next=="string"?s.next:s.next.id,u=s.currentPage,d={...s,isFetching:!0};this.setMetaValue([n,"@vault/pagination","state"],d);let h;try{h=await this.loadCollection(l,r,P=>{let{id:C,"@id":j,...O}=P||{};return j?{"@id":l,...O}:{id:l,...O}})}catch(P){let C={...s,isFetching:!1,error:P};return this.setMetaValue([n,"@vault/pagination","state"],C),[C,null]}if(!h){let P={...s,isFetching:!1,error:Error("Collection not found")};return this.setMetaValue([n,"@vault/pagination","state"],P),[P,null]}let v=this.get(n),g=[...v.items||[],...h.items||[]].map(P=>({id:P.id,type:P.type}));this.modifyEntityField({id:n,type:"Collection"},"items",g);let w=this.getPaginationState(e);if(!w)throw Error("Pagination state not found");let b={...w,isFetching:!1,error:null,currentPage:h.id,next:((R=h.next)==null?void 0:R.id)||null,currentPageIndex:w.pages.length,currentLength:g.length,pages:[...w.pages,{id:h.id,type:"Collection",startIndex:v.items.length,pageLength:h.items.length,order:typeof w.currentPageIndex=="number"?w.currentPageIndex+1:0}],isFullyLoaded:!h.next,previous:u,page:w.pages.length+1};return this.setMetaValue([n,"@vault/pagination","state"],b),[b,h]}getResourceMeta(e,r){let n=this.getState().iiif.meta[e];if(n)return r?n[r]:n}getObject(e,r,n={}){let{reactive:s,...l}=n;return Ia(this.get(e,r,l),this,s)}async loadObject(e,r){return Ia(await this.load(e,r),this)}async loadManifestObject(e,r){return Ia(await this.loadManifest(e,r),this)}async loadCollectionObject(e,r){return Ia(await this.loadCollection(e,r),this)}wrapObject(e){return Ia(this.get(e,{skipSelfReturn:!1}),this)}isWrapped(e){return _R(e)}setMetaValue([e,r,n],s){this.dispatch(typeof s=="function"?Wy.setMetaValueDynamic({id:e,meta:r,key:n,updateValue:s}):Wy.setMetaValue({id:e,meta:r,key:n,value:s}))}};function jR(){return typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}}function o1(t){let e=jR();try{let n=e.IIIF_VAULT;if(n)return n}catch{}let r=new pg(t);try{e.IIIF_VAULT=r}catch{}return r}function l1(t,e){let{selector:r,source:n}=An(e);if(n.id!==t.id)return[null,n];let s={spatial:{x:0,y:0,width:Number(t.width),height:Number(t.height)}};return[r?r.type==="TemporalSelector"?{type:"TemporalBoxSelector",temporal:r.temporal,spatial:s.spatial}:r:null,n]}var OR={makeChoice:()=>{}},wm={type:"unknown"},sn=t=>({type:"unknown",reason:t,annotations:{pages:[]}}),LR=(t,e)=>({type:"empty",width:t,height:e,annotations:{pages:[]},image:null,images:[]}),MR=["model/gltf-binary"];function IR(t,e){let r=e.items[0],n=r.resource;return n.format?MR.indexOf(n.format)===-1?sn(`3D format: ${n.format} is unsupported`):{type:"3d-model",model:n,annotationId:r.annotationId,annotation:r.annotation}:sn("Unknown format")}function a1(t,e,r){var s;let n=[];for(let l of e.items){let u=l.resource&&l.resource.type==="SpecificResource"?l.resource.source:l.resource;if(!u.id)return sn("No resource Identifier");let d;if(u.service){let C=Bg(u);C[0]&&(d=r(C[0],t))}let h={type:"BoxSelector",spatial:{x:0,y:0,width:Number(t.width),height:Number(t.height)}},[v,g]=l1(t,l.target),w=((s=t.id)==null?void 0:s.split("?")[0])||"";if(!(g.id===t.id||decodeURIComponent(g.id||"")===(t.id||"")||g.id===w||decodeURIComponent(g.id||"")===w))continue;l.resource.width&&l.resource.height&&(l.resource.width,l.resource.height);let b=l.resource.type==="SpecificResource"?An(l.resource):null;if(l.selector){let C=An({type:"SpecificResource",source:l.resource,selector:l.selector});C&&(b=C)}let R=b&&b.selector&&(b.selector.type==="BoxSelector"||b.selector.type==="TemporalBoxSelector")?{type:"BoxSelector",spatial:{x:b.selector.spatial.x,y:b.selector.spatial.y,width:b.selector.spatial.width,height:b.selector.spatial.height}}:void 0;d&&!d.id&&(d.id=d["@id"]);let P={id:u.id,type:"Image",annotationId:l.annotationId,annotation:l.annotation,width:Number(v||R?u.width:t.width),height:Number(v||R?u.height:t.height),service:d,sizes:d&&d.sizes?d.sizes:u.width&&u.height?[{width:u.width,height:u.height}]:[],target:v&&v.type!=="PointSelector"?v:h,selector:R||{type:"BoxSelector",spatial:{x:0,y:0,width:Number(t.width),height:Number(t.height)}}};n.push(P)}return{type:"images",image:n[0],images:n,choice:e.choice}}function u1(t,e={},r){let n=t.language||r||"none";switch(t.type){case"TextualBody":{typeof t.value<"u"&&(e[n]=[t.value]);break}case"List":case"Composite":case"Choice":t.items&&t.items.forEach(s=>u1(s,e,n))}return e}function c1(t,e){let r=[];return e.items.forEach(n=>{if(n.resource){let[s]=l1(t,n.target);r.push({type:"Text",annotationId:n.annotationId,annotation:n.annotation,text:u1(n.resource),target:s})}}),{type:"textual-content",items:r}}var AR=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/|shorts\/)|(?:(?:watch)?\?vi?=|&vi?=))([^#&?]*).*/;function d1(t,e,r){var R;let n=e.items.filter(P=>P.type==="video"),s=n[0],l=!1;if(t.duration||(l=!0),n.length>1||!s)return sn("Only one video source supported");let u=(R=n[0])==null?void 0:R.resource,d=!!(u.service||[]).find(P=>(P.profile||"").includes("youtube.com"));if(!d&&l)return sn("Video does not have duration");if(!u)return sn("Unknown video");if((!u.format||u.format==="text/html")&&!d)return sn("Video does not have format");let h=[],v=r.get(t.annotations||[]);for(let P of v){let C=r.get(P.items||[]);for(let j of C)if((j.motivation?Array.isArray(j.motivation||"")?j.motivation:[j.motivation]:[]).includes("supplementing")){let O=r.get(j.body||[]);for(let L of O){let A=L;if(A.type==="Choice")for(let F of A.items){let z=r.get(F);z.format==="text/vtt"&&h.push({id:z.id,type:"Text",format:"text/vtt",label:z.label,language:z.language})}else A.format==="text/vtt"&&h.push({id:A.id,type:"Text",format:"text/vtt",label:A.label,language:A.language})}}}let g={annotationId:s.annotationId,annotation:s.annotation,duration:t.duration,url:u.id,type:"Video",target:{type:"TemporalSelector",temporal:{startTime:0,endTime:t.duration}},format:u.format,selector:{type:"TemporalSelector",temporal:{startTime:0,endTime:t.duration}}},w=An(s.target);w.selector&&w.selector.type==="TemporalBoxSelector"&&(g.target=w.selector);let{selector:b}=bd(s.selector);if(b===null){let P=g.target.temporal.startTime,C=(g.target.temporal.endTime||t.duration)-P;g.selector={type:"TemporalSelector",temporal:{startTime:0,endTime:C}}}else b.type==="TemporalSelector"&&(g.selector=b);if(d){g.type="VideoYouTube";let P=u.id.match(AR);if(!P[1])return sn("Video is not known youtube video");g.youTubeId=P[1]}return{type:"media",media:g,annotations:{pages:[]},captions:h}}function $R(t,e,r,n){var v,g,w,b,R,P,C,j,O,L;let s={type:"complex-timeline",items:[],keyframes:[],duration:t.duration||0},l={type:"complex-choice",items:[]};function u(A){A.choice&&(A.choice.type==="complex-choice"?l.items.push(...A.choice.items):l.items.push(A.choice))}for(let A of e.items){if(A.type==="image"){let F=a1(t,{choice:null,items:[A]},r);if(F.type==="images"){u(F),s.items.push(F.image);let z={id:F.image.annotationId,type:"enter",resourceType:"image",time:((g=(v=F.image.target)==null?void 0:v.temporal)==null?void 0:g.startTime)||0};s.keyframes.push(z);let B={id:F.image.annotationId,type:"exit",resourceType:"image",time:((b=(w=F.image.target)==null?void 0:w.temporal)==null?void 0:b.endTime)||t.duration||0};s.keyframes.push(B)}}if(A.type==="textualbody"){let F=c1(t,{items:[A]});if(F.type==="textual-content"){u(F);let z=F.items[0];s.items.push(z);let B=z.target,$={id:z.annotationId,type:"enter",resourceType:"text",time:((R=B.temporal)==null?void 0:R.startTime)||0};s.keyframes.push($);let K={id:z.annotationId,type:"exit",resourceType:"text",time:((P=B.temporal)==null?void 0:P.endTime)||t.duration||0};s.keyframes.push(K)}}if(A.type==="video"){let F=d1(t,{items:[A]},n);if(F.type==="media"){u(F);let z=F.media;s.items.push(z);let B={id:z.annotationId,type:"enter",resourceType:"video",time:((j=(C=z.target)==null?void 0:C.temporal)==null?void 0:j.startTime)||0};s.keyframes.push(B);let $={id:z.annotationId,type:"exit",resourceType:"video",time:((L=(O=z.target)==null?void 0:O.temporal)==null?void 0:L.endTime)||t.duration||0};s.keyframes.push($)}}}s.keyframes.sort((A,F)=>A.time-F.time);let d=[],h=[];for(let A of s.keyframes){if(A.resourceType==="image"||A.resourceType==="text"){h.push(A);continue}if(A.type==="enter"){d.length===0&&(A.isPrime=!0),d.push(A),h.push(A);continue}if(A.type==="exit"&&(h.push(A),d=d.filter(F=>F.id!==A.id),d.length!==0)){let F=d[0],z={id:F.id,type:"change",isPrime:!0,resourceType:F.resourceType,time:A.time};h.push(z)}}return s.keyframes=h,l.items.length&&(s.choice=l),s}function NR(t,e){let r=e.items,n=r[0];if(r.length===0||!n)return sn("No audio");if(!t.duration)return sn("No duration on canvas");if(r.length>1)return sn("Only one audio source supported");let s=n.resource;return s?"format"in s?{type:"media",media:{annotationId:n.annotationId,annotation:n.annotation,duration:t.duration,url:s.id,type:"Sound",target:{type:"TemporalSelector",temporal:{startTime:0,endTime:t.duration}},format:s.format,selector:{type:"TemporalSelector",temporal:{startTime:0,endTime:t.duration}}},annotations:{pages:[]}}:sn("Audio does not have format"):sn("Unknown audio")}var rh={},f1={get(t){return t},setMetaValue([t,e,r],n){let s=f1.getResourceMeta(t,e),l=s?s[r]:void 0,u=typeof n=="function"?n(l):n;rh[t]={...rh[t]||{},[e]:{...(rh[t]||{})[e]||{},[r]:u}}},getResourceMeta:(t,e)=>{let r=rh[t];if(r)return e?r[e]:r},async load(t){let e=typeof t=="string"?t:t.id;return fetch(e).then(r=>r.json())},requestStatus(t){}};function Gg({canvas:t,paintables:e,supports:r,loadImageService:n,vault:s=f1}){if(!t)return wm;if(e.types.length===0)return r.indexOf("empty")!==-1?LR(t.width,t.height):wm;if(e.types.length!==1)if(e.types.length===2&&e.types.indexOf("text")!==-1)e.types=e.types.filter(u=>u!=="text");else return r.indexOf("complex-timeline")===-1?sn("Complex timeline not supported"):$R(t,e,n,s);let l=e.types[0];return l==="image"?r.indexOf("images")===-1?sn("Image not supported"):a1(t,e,n):l==="Model"||l==="model"?r.indexOf("3d-model")===-1?sn("3D not supported"):IR(t,e):l==="textualbody"?r.indexOf("textual-content")===-1?sn("Textual content not supported"):c1(t,e):l==="sound"||l==="audio"?r.indexOf("media")===-1?sn("Media not supported"):NR(t,e):l==="video"?r.indexOf("media")===-1?sn("Media not supported"):d1(t,e,s):wm}const Od=(t,e,r)=>{const n=t.length,s=r||ot(n);for(let l=0;l<n;l++)s[l]=l%5===0?t[l+1]<e[3]&&t[l+3]>e[1]&&t[l+2]<e[4]&&t[l+4]>e[2]?1:0:t[l];return s};function ot(t,e,r){return new Float32Array(t,e,r)}const zR=(t,e,r)=>{const n=t[1]<=e[3]&&t[3]>=e[1]&&t[2]<=e[4]&&t[4]>=e[2],s=r||ot(5);return n?(s[0]=1,s[1]=Math.max(t[1],e[1]),s[2]=Math.max(t[2],e[2]),s[3]=Math.min(t[3],e[3]),s[4]=Math.min(t[4],e[4]),s):(s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s)},FR=t=>t.length/5,To=(t,e,r)=>{const n=r||ot(9);return n[0]=t[0]*e[0]+t[1]*e[3]+t[2]*e[6],n[1]=t[0]*e[1]+t[1]*e[4]+t[2]*e[7],n[2]=t[0]*e[2]+t[1]*e[5]+t[2]*e[8],n[3]=t[3]*e[0]+t[4]*e[3]+t[5]*e[6],n[4]=t[3]*e[1]+t[4]*e[4]+t[5]*e[7],n[5]=t[3]*e[2]+t[4]*e[5]+t[5]*e[8],n[6]=t[6]*e[0]+t[7]*e[3]+t[8]*e[6],n[7]=t[6]*e[1]+t[7]*e[4]+t[8]*e[7],n[8]=t[6]*e[2]+t[7]*e[5]+t[8]*e[8],n};class zt{constructor(e){this.index=0,this.length=e,this.points=ot(this.length)}static grid(e=1,r=1){return new zt(5*e*r)}static point(e,r){const n=ot(5);return n[0]=1,n[1]=e,n[2]=r,n[3]=e,n[4]=r,n}static positionPair(e){const r=ot(5);return r[0]=1,r[1]=e.x1,r[2]=e.y1,r[3]=e.x2,r[4]=e.y2,r}static projection(e){return zt.singleBox(e.width,e.height,e.x,e.y)}static singleBox(e,r,n=0,s=0){const l=ot(5);return l[0]=1,l[1]=n,l[2]=s,l[3]=e+n,l[4]=r+s,l}row(e){return e(this)}addPoints(e,r,n,s){return this.points[this.index]=1,this.points[1+this.index]=e,this.points[2+this.index]=r,this.points[3+this.index]=n,this.points[4+this.index]=s,this.index+=5,this}addBox(e,r,n,s){return this.addPoints(e,r,e+n,r+s),this}build(){return this.points}}const zs=(t,e)=>{const r=t.length;for(let n=0;n<r;n++)t[n]=n%5===0?e[6]*t[n+1]+e[7]*t[n+2]+e[8]*t[n]:n%5%2===1?e[0]*t[n]+e[1]*t[n+1]+e[2]:e[3]*t[n-1]+e[4]*t[n]+e[5];return t},zl=t=>{const e=ot(9);return e[0]=t,e[4]=t,e[8]=1,e},ti=(t,e)=>{const r=ot(9);return r[0]=1,r[2]=t,r[4]=1,r[5]=e,r[8]=1,r},Ld=(t,e,r)=>To(ti((1-t)*e,(1-t)*r),zl(t)),Ro=(t,e,r)=>{const n=t.length,s=r&&r.length>=n?r.slice(0,n):ot(n);for(let l=0;l<n;l++)s[l]=l%5===0?e[6]*t[l+1]+e[7]*t[l+2]+e[8]*t[l]:l%5%2===1?e[0]*t[l]+e[1]*t[l+1]+e[2]:e[3]*t[l-1]+e[4]*t[l]+e[5];return s},ad=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,DR=typeof AbortController=="function",Ih=DR?AbortController:class{constructor(){this.signal=new h1}abort(e=new Error("This operation was aborted")){this.signal.reason=this.signal.reason||e,this.signal.aborted=!0,this.signal.dispatchEvent({type:"abort",target:this.signal})}},BR=typeof AbortSignal=="function",UR=typeof Ih.AbortSignal=="function",h1=BR?AbortSignal:UR?Ih.AbortController:class{constructor(){this.reason=void 0,this.aborted=!1,this._listeners=[]}dispatchEvent(e){e.type==="abort"&&(this.aborted=!0,this.onabort(e),this._listeners.forEach(r=>r(e),this))}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},Kg=new Set,xm=(t,e)=>{const r=`LRU_CACHE_OPTION_${t}`;Zh(r)&&Yg(r,`${t} option`,`options.${e}`,Ba)},Sm=(t,e)=>{const r=`LRU_CACHE_METHOD_${t}`;if(Zh(r)){const{prototype:n}=Ba,{get:s}=Object.getOwnPropertyDescriptor(n,t);Yg(r,`${t} method`,`cache.${e}()`,s)}},HR=(t,e)=>{const r=`LRU_CACHE_PROPERTY_${t}`;if(Zh(r)){const{prototype:n}=Ba,{get:s}=Object.getOwnPropertyDescriptor(n,t);Yg(r,`${t} property`,`cache.${e}`,s)}},p1=(...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},Zh=t=>!Kg.has(t),Yg=(t,e,r,n)=>{Kg.add(t);const s=`The ${e} is deprecated. Please use ${r} instead.`;p1(s,"DeprecationWarning",t,n)},Rl=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),m1=t=>Rl(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?bh:null:null;class bh extends Array{constructor(e){super(e),this.fill(0)}}class WR{constructor(e){if(e===0)return[];const r=m1(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class Ba{constructor(e={}){const{max:r=0,ttl:n,ttlResolution:s=1,ttlAutopurge:l,updateAgeOnGet:u,updateAgeOnHas:d,allowStale:h,dispose:v,disposeAfter:g,noDisposeOnSet:w,noUpdateTTL:b,maxSize:R=0,maxEntrySize:P=0,sizeCalculation:C,fetchMethod:j,fetchContext:O,noDeleteOnFetchRejection:L,noDeleteOnStaleGet:A,allowStaleOnFetchRejection:F,allowStaleOnFetchAbort:z,ignoreFetchAbort:B}=e,{length:$,maxAge:K,stale:fe}=e instanceof Ba?{}:e;if(r!==0&&!Rl(r))throw new TypeError("max option must be a nonnegative integer");const J=r?m1(r):Array;if(!J)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=R,this.maxEntrySize=P||this.maxSize,this.sizeCalculation=C||$,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=j||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=O,!this.fetchMethod&&O!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new J(r),this.prev=new J(r),this.head=0,this.tail=0,this.free=new WR(r),this.initialFill=1,this.size=0,typeof v=="function"&&(this.dispose=v),typeof g=="function"?(this.disposeAfter=g,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!w,this.noUpdateTTL=!!b,this.noDeleteOnFetchRejection=!!L,this.allowStaleOnFetchRejection=!!F,this.allowStaleOnFetchAbort=!!z,this.ignoreFetchAbort=!!B,this.maxEntrySize!==0){if(this.maxSize!==0&&!Rl(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!Rl(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!h||!!fe,this.noDeleteOnStaleGet=!!A,this.updateAgeOnGet=!!u,this.updateAgeOnHas=!!d,this.ttlResolution=Rl(s)||s===0?s:1,this.ttlAutopurge=!!l,this.ttl=n||K||0,this.ttl){if(!Rl(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){const H="LRU_CACHE_UNBOUNDED";Zh(H)&&(Kg.add(H),p1("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",H,Ba))}fe&&xm("stale","allowStale"),K&&xm("maxAge","ttl"),$&&xm("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new bh(this.max),this.starts=new bh(this.max),this.setItemTTL=(n,s,l=ad.now())=>{if(this.starts[n]=s!==0?l:0,this.ttls[n]=s,s!==0&&this.ttlAutopurge){const u=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},s+1);u.unref&&u.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?ad.now():0},this.statusTTL=(n,s)=>{n&&(n.ttl=this.ttls[s],n.start=this.starts[s],n.now=e||r(),n.remainingTTL=n.now+n.ttl-n.start)};let e=0;const r=()=>{const n=ad.now();if(this.ttlResolution>0){e=n;const s=setTimeout(()=>e=0,this.ttlResolution);s.unref&&s.unref()}return n};this.getRemainingTTL=n=>{const s=this.keyMap.get(n);return s===void 0?0:this.ttls[s]===0||this.starts[s]===0?1/0:this.starts[s]+this.ttls[s]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}statusTTL(e,r){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new bh(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,s)=>{if(this.isBackgroundFetch(r))return 0;if(!Rl(n))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(n=s(r,e),!Rl(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return n},this.addItemSize=(e,r,n)=>{if(this.sizes[e]=r,this.maxSize){const s=this.maxSize-this.sizes[e];for(;this.calculatedSize>s;)this.evict(!0)}this.calculatedSize+=this.sizes[e],n&&(n.entrySize=r,n.totalCalculatedSize=this.calculatedSize)}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,s){if(n||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return e!==void 0&&this.keyMap.get(this.keyList[e])===e}*entries(){for(const e of this.indexes())this.valList[e]!==void 0&&this.keyList[e]!==void 0&&!this.isBackgroundFetch(this.valList[e])&&(yield[this.keyList[e],this.valList[e]])}*rentries(){for(const e of this.rindexes())this.valList[e]!==void 0&&this.keyList[e]!==void 0&&!this.isBackgroundFetch(this.valList[e])&&(yield[this.keyList[e],this.valList[e]])}*keys(){for(const e of this.indexes())this.keyList[e]!==void 0&&!this.isBackgroundFetch(this.valList[e])&&(yield this.keyList[e])}*rkeys(){for(const e of this.rindexes())this.keyList[e]!==void 0&&!this.isBackgroundFetch(this.valList[e])&&(yield this.keyList[e])}*values(){for(const e of this.indexes())this.valList[e]!==void 0&&!this.isBackgroundFetch(this.valList[e])&&(yield this.valList[e])}*rvalues(){for(const e of this.rindexes())this.valList[e]!==void 0&&!this.isBackgroundFetch(this.valList[e])&&(yield this.valList[e])}[Symbol.iterator](){return this.entries()}find(e,r){for(const n of this.indexes()){const s=this.valList[n],l=this.isBackgroundFetch(s)?s.__staleWhileFetching:s;if(l!==void 0&&e(l,this.keyList[n],this))return this.get(this.keyList[n],r)}}forEach(e,r=this){for(const n of this.indexes()){const s=this.valList[n],l=this.isBackgroundFetch(s)?s.__staleWhileFetching:s;l!==void 0&&e.call(r,l,this.keyList[n],this)}}rforEach(e,r=this){for(const n of this.rindexes()){const s=this.valList[n],l=this.isBackgroundFetch(s)?s.__staleWhileFetching:s;l!==void 0&&e.call(r,l,this.keyList[n],this)}}get prune(){return Sm("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(const r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){const e=[];for(const r of this.indexes({allowStale:!0})){const n=this.keyList[r],s=this.valList[r],l=this.isBackgroundFetch(s)?s.__staleWhileFetching:s;if(l===void 0)continue;const u={value:l};if(this.ttls){u.ttl=this.ttls[r];const d=ad.now()-this.starts[r];u.start=Math.floor(Date.now()-d)}this.sizes&&(u.size=this.sizes[r]),e.unshift([n,u])}return e}load(e){this.clear();for(const[r,n]of e){if(n.start){const s=Date.now()-n.start;n.start=ad.now()-s}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:s,noDisposeOnSet:l=this.noDisposeOnSet,size:u=0,sizeCalculation:d=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,status:v}={}){if(u=this.requireSize(e,r,u,d),this.maxEntrySize&&u>this.maxEntrySize)return v&&(v.set="miss",v.maxEntrySizeExceeded=!0),this.delete(e),this;let g=this.size===0?void 0:this.keyMap.get(e);if(g===void 0)g=this.newIndex(),this.keyList[g]=e,this.valList[g]=r,this.keyMap.set(e,g),this.next[this.tail]=g,this.prev[g]=this.tail,this.tail=g,this.size++,this.addItemSize(g,u,v),v&&(v.set="add"),h=!1;else{this.moveToTail(g);const w=this.valList[g];if(r!==w){if(this.isBackgroundFetch(w)?w.__abortController.abort(new Error("replaced")):l||(this.dispose(w,e,"set"),this.disposeAfter&&this.disposed.push([w,e,"set"])),this.removeItemSize(g),this.valList[g]=r,this.addItemSize(g,u,v),v){v.set="replace";const b=w&&this.isBackgroundFetch(w)?w.__staleWhileFetching:w;b!==void 0&&(v.oldValue=b)}}else v&&(v.set="update")}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),h||this.setItemTTL(g,n,s),this.statusTTL(v,g),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){const e=this.valList[this.head];return this.evict(!0),e}}evict(e){const r=this.head,n=this.keyList[r],s=this.valList[r];return this.isBackgroundFetch(s)?s.__abortController.abort(new Error("evicted")):(this.dispose(s,n,"evict"),this.disposeAfter&&this.disposed.push([s,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas,status:n}={}){const s=this.keyMap.get(e);if(s!==void 0)if(this.isStale(s))n&&(n.has="stale",this.statusTTL(n,s));else return r&&this.updateItemAge(s),n&&(n.has="hit"),this.statusTTL(n,s),!0;else n&&(n.has="miss");return!1}peek(e,{allowStale:r=this.allowStale}={}){const n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){const s=this.valList[n];return this.isBackgroundFetch(s)?s.__staleWhileFetching:s}}backgroundFetch(e,r,n,s){const l=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(l))return l;const u=new Ih;n.signal&&n.signal.addEventListener("abort",()=>u.abort(n.signal.reason));const d={signal:u.signal,options:n,context:s},h=(R,P=!1)=>{const{aborted:C}=u.signal,j=n.ignoreFetchAbort&&R!==void 0;return n.status&&(C&&!P?(n.status.fetchAborted=!0,n.status.fetchError=u.signal.reason,j&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),C&&!j&&!P?g(u.signal.reason):(this.valList[r]===b&&(R===void 0?b.__staleWhileFetching?this.valList[r]=b.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,R,d.options))),R)},v=R=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=R),g(R)),g=R=>{const{aborted:P}=u.signal,C=P&&n.allowStaleOnFetchAbort,j=C||n.allowStaleOnFetchRejection,O=j||n.noDeleteOnFetchRejection;if(this.valList[r]===b&&(!O||b.__staleWhileFetching===void 0?this.delete(e):C||(this.valList[r]=b.__staleWhileFetching)),j)return n.status&&b.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),b.__staleWhileFetching;if(b.__returned===b)throw R},w=(R,P)=>{this.fetchMethod(e,l,d).then(C=>R(C),P),u.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(R(),n.allowStaleOnFetchAbort&&(R=C=>h(C,!0)))})};n.status&&(n.status.fetchDispatched=!0);const b=new Promise(w).then(h,v);return b.__abortController=u,b.__staleWhileFetching=l,b.__returned=null,r===void 0?(this.set(e,b,{...d.options,status:void 0}),r=this.keyMap.get(e)):this.valList[r]=b,b}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:l=this.ttl,noDisposeOnSet:u=this.noDisposeOnSet,size:d=0,sizeCalculation:h=this.sizeCalculation,noUpdateTTL:v=this.noUpdateTTL,noDeleteOnFetchRejection:g=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:w=this.allowStaleOnFetchRejection,ignoreFetchAbort:b=this.ignoreFetchAbort,allowStaleOnFetchAbort:R=this.allowStaleOnFetchAbort,fetchContext:P=this.fetchContext,forceRefresh:C=!1,status:j,signal:O}={}){if(!this.fetchMethod)return j&&(j.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:s,status:j});const L={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:s,ttl:l,noDisposeOnSet:u,size:d,sizeCalculation:h,noUpdateTTL:v,noDeleteOnFetchRejection:g,allowStaleOnFetchRejection:w,allowStaleOnFetchAbort:R,ignoreFetchAbort:b,status:j,signal:O};let A=this.keyMap.get(e);if(A===void 0){j&&(j.fetch="miss");const F=this.backgroundFetch(e,A,L,P);return F.__returned=F}else{const F=this.valList[A];if(this.isBackgroundFetch(F)){const fe=r&&F.__staleWhileFetching!==void 0;return j&&(j.fetch="inflight",fe&&(j.returnedStale=!0)),fe?F.__staleWhileFetching:F.__returned=F}const z=this.isStale(A);if(!C&&!z)return j&&(j.fetch="hit"),this.moveToTail(A),n&&this.updateItemAge(A),this.statusTTL(j,A),F;const B=this.backgroundFetch(e,A,L,P),$=B.__staleWhileFetching!==void 0,K=$&&r;return j&&(j.fetch=$&&z?"stale":"refresh",K&&z&&(j.returnedStale=!0)),K?B.__staleWhileFetching:B.__returned=B}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:l}={}){const u=this.keyMap.get(e);if(u!==void 0){const d=this.valList[u],h=this.isBackgroundFetch(d);return this.statusTTL(l,u),this.isStale(u)?(l&&(l.get="stale"),h?(l&&(l.returnedStale=r&&d.__staleWhileFetching!==void 0),r?d.__staleWhileFetching:void 0):(s||this.delete(e),l&&(l.returnedStale=r),r?d:void 0)):(l&&(l.get="hit"),h?d.__staleWhileFetching:(this.moveToTail(u),n&&this.updateItemAge(u),d))}else l&&(l.get="miss")}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return Sm("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){const n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);const s=this.valList[n];this.isBackgroundFetch(s)?s.__abortController.abort(new Error("deleted")):(this.dispose(s,e,"delete"),this.disposeAfter&&this.disposed.push([s,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(const e of this.rindexes({allowStale:!0})){const r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort(new Error("deleted"));else{const n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return Sm("reset","clear"),this.clear}get length(){return HR("length","size"),this.size}static get AbortController(){return Ih}static get AbortSignal(){return h1}}var bm,Xy;function VR(){if(Xy)return bm;Xy=1;var t=!1,e,r,n,s,l,u,d,h,v,g,w,b,R,P,C;function j(){if(!t){t=!0;var L=navigator.userAgent,A=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(L),F=/(Mac OS X)|(Windows)|(Linux)/.exec(L);if(b=/\b(iPhone|iP[ao]d)/.exec(L),R=/\b(iP[ao]d)/.exec(L),g=/Android/i.exec(L),P=/FBAN\/\w+;/i.exec(L),C=/Mobile/i.exec(L),w=!!/Win64/.exec(L),A){e=A[1]?parseFloat(A[1]):A[5]?parseFloat(A[5]):NaN,e&&document&&document.documentMode&&(e=document.documentMode);var z=/(?:Trident\/(\d+.\d+))/.exec(L);u=z?parseFloat(z[1])+4:e,r=A[2]?parseFloat(A[2]):NaN,n=A[3]?parseFloat(A[3]):NaN,s=A[4]?parseFloat(A[4]):NaN,s?(A=/(?:Chrome\/(\d+\.\d+))/.exec(L),l=A&&A[1]?parseFloat(A[1]):NaN):l=NaN}else e=r=n=l=s=NaN;if(F){if(F[1]){var B=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(L);d=B?parseFloat(B[1].replace("_",".")):!0}else d=!1;h=!!F[2],v=!!F[3]}else d=h=v=!1}}var O={ie:function(){return j()||e},ieCompatibilityMode:function(){return j()||u>e},ie64:function(){return O.ie()&&w},firefox:function(){return j()||r},opera:function(){return j()||n},webkit:function(){return j()||s},safari:function(){return O.webkit()},chrome:function(){return j()||l},windows:function(){return j()||h},osx:function(){return j()||d},linux:function(){return j()||v},iphone:function(){return j()||b},mobile:function(){return j()||b||R||g||C},nativeApp:function(){return j()||P},android:function(){return j()||g},ipad:function(){return j()||R}};return bm=O,bm}var Em,Zy;function QR(){if(Zy)return Em;Zy=1;var t=!!(typeof window<"u"&&window.document&&window.document.createElement),e={canUseDOM:t,canUseWorkers:typeof Worker<"u",canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};return Em=e,Em}var Pm,Jy;function qR(){if(Jy)return Pm;Jy=1;var t=QR(),e;t.canUseDOM&&(e=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function r(n,s){if(!t.canUseDOM||s&&!("addEventListener"in document))return!1;var l="on"+n,u=l in document;if(!u){var d=document.createElement("div");d.setAttribute(l,"return;"),u=typeof d[l]=="function"}return!u&&e&&n==="wheel"&&(u=document.implementation.hasFeature("Events.wheel","3.0")),u}return Pm=r,Pm}var Cm,e0;function GR(){if(e0)return Cm;e0=1;var t=VR(),e=qR(),r=10,n=40,s=800;function l(u){var d=0,h=0,v=0,g=0;return"detail"in u&&(h=u.detail),"wheelDelta"in u&&(h=-u.wheelDelta/120),"wheelDeltaY"in u&&(h=-u.wheelDeltaY/120),"wheelDeltaX"in u&&(d=-u.wheelDeltaX/120),"axis"in u&&u.axis===u.HORIZONTAL_AXIS&&(d=h,h=0),v=d*r,g=h*r,"deltaY"in u&&(g=u.deltaY),"deltaX"in u&&(v=u.deltaX),(v||g)&&u.deltaMode&&(u.deltaMode==1?(v*=n,g*=n):(v*=s,g*=s)),v&&!d&&(d=v<1?-1:1),g&&!h&&(h=g<1?-1:1),{spinX:d,spinY:h,pixelX:v,pixelY:g}}return l.getEventType=function(){return t.firefox()?"DOMMouseScroll":e("wheel")?"wheel":"mousewheel"},Cm=l,Cm}var km,t0;function KR(){return t0||(t0=1,km=GR()),km}var YR=KR();const XR=Ua(YR);function r0(t,e){let r;return(...n)=>{window.clearTimeout(r),r=window.setTimeout(()=>t(...n),e)}}function g1({debounce:t,scroll:e,polyfill:r,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[l,u]=_.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),d=_.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l,orientationHandler:null}),h=t?typeof t=="number"?t:t.scroll:null,v=t?typeof t=="number"?t:t.resize:null,g=_.useRef(!1);_.useEffect(()=>(g.current=!0,()=>void(g.current=!1)));const[w,b,R]=_.useMemo(()=>{const O=()=>{if(!d.current.element)return;const{left:L,top:A,width:F,height:z,bottom:B,right:$,x:K,y:fe}=d.current.element.getBoundingClientRect(),J={left:L,top:A,width:F,height:z,bottom:B,right:$,x:K,y:fe};d.current.element instanceof HTMLElement&&n&&(J.height=d.current.element.offsetHeight,J.width=d.current.element.offsetWidth),Object.freeze(J),g.current&&!t_(d.current.lastBounds,J)&&u(d.current.lastBounds=J)};return[O,v?r0(O,v):O,h?r0(O,h):O]},[u,n,h,v]);function P(){d.current.scrollContainers&&(d.current.scrollContainers.forEach(O=>O.removeEventListener("scroll",R,!0)),d.current.scrollContainers=null),d.current.resizeObserver&&(d.current.resizeObserver.disconnect(),d.current.resizeObserver=null),d.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",d.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",d.current.orientationHandler))}function C(){d.current.element&&(d.current.resizeObserver=new s(R),d.current.resizeObserver.observe(d.current.element),e&&d.current.scrollContainers&&d.current.scrollContainers.forEach(O=>O.addEventListener("scroll",R,{capture:!0,passive:!0})),d.current.orientationHandler=()=>{R()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",d.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",d.current.orientationHandler))}const j=O=>{!O||O===d.current.element||(P(),d.current.element=O,d.current.scrollContainers=v1(O),C())};return JR(R,!!e),ZR(b),_.useEffect(()=>{P(),C()},[e,R,b]),_.useEffect(()=>P,[]),[j,l,w]}function ZR(t){_.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function JR(t,e){_.useEffect(()=>{if(e){const r=t;return window.addEventListener("scroll",r,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",r,!0)}},[t,e])}function v1(t){const e=[];if(!t||t===document.body)return e;const{overflow:r,overflowX:n,overflowY:s}=window.getComputedStyle(t);return[r,n,s].some(l=>l==="auto"||l==="scroll")&&e.push(t),[...e,...v1(t.parentElement)]}const e_=["x","y","top","bottom","left","right","width","height"],t_=(t,e)=>e_.every(r=>t[r]===e[r]);var Tm={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm,n0;function r_(){return n0||(n0=1,Rm=function(e){var r={},n=Ha(),s=G0(),l=Object.assign;function u(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,p=1;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,h=Symbol.for("react.element"),v=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),P=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),z=Symbol.iterator;function B(a){return a===null||typeof a!="object"?null:(a=z&&a[z]||a["@@iterator"],typeof a=="function"?a:null)}function $(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case g:return"Fragment";case v:return"Portal";case b:return"Profiler";case w:return"StrictMode";case j:return"Suspense";case O:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case P:return(a.displayName||"Context")+".Consumer";case R:return(a._context.displayName||"Context")+".Provider";case C:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case L:return c=a.displayName||null,c!==null?c:$(a.type)||"Memo";case A:c=a._payload,a=a._init;try{return $(a(c))}catch{}}return null}function K(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $(c);case 8:return c===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function fe(a){var c=a,p=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(p=c.return),a=c.return;while(a)}return c.tag===3?p:null}function J(a){if(fe(a)!==a)throw Error(u(188))}function H(a){var c=a.alternate;if(!c){if(c=fe(a),c===null)throw Error(u(188));return c!==a?null:a}for(var p=a,y=c;;){var S=p.return;if(S===null)break;var T=S.alternate;if(T===null){if(y=S.return,y!==null){p=y;continue}break}if(S.child===T.child){for(T=S.child;T;){if(T===p)return J(S),a;if(T===y)return J(S),c;T=T.sibling}throw Error(u(188))}if(p.return!==y.return)p=S,y=T;else{for(var I=!1,G=S.child;G;){if(G===p){I=!0,p=S,y=T;break}if(G===y){I=!0,y=S,p=T;break}G=G.sibling}if(!I){for(G=T.child;G;){if(G===p){I=!0,p=T,y=S;break}if(G===y){I=!0,y=T,p=S;break}G=G.sibling}if(!I)throw Error(u(189))}}if(p.alternate!==y)throw Error(u(190))}if(p.tag!==3)throw Error(u(188));return p.stateNode.current===p?a:c}function Y(a){return a=H(a),a!==null?xe(a):null}function xe(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=xe(a);if(c!==null)return c;a=a.sibling}return null}function te(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){if(a.tag!==4){var c=te(a);if(c!==null)return c}a=a.sibling}return null}var Te=Array.isArray,de=e.getPublicInstance,je=e.getRootHostContext,ee=e.getChildHostContext,Q=e.prepareForCommit,ue=e.resetAfterCommit,U=e.createInstance,oe=e.appendInitialChild,_e=e.finalizeInitialChildren,Me=e.prepareUpdate,Ne=e.shouldSetTextContent,Ke=e.createTextInstance,Qe=e.scheduleTimeout,nt=e.cancelTimeout,ft=e.noTimeout,Ct=e.isPrimaryRenderer,Ye=e.supportsMutation,Ce=e.supportsPersistence,Re=e.supportsHydration,bt=e.getInstanceFromNode,jr=e.preparePortalMount,pr=e.getCurrentEventPriority,Or=e.detachDeletedInstance,Sr=e.supportsMicrotasks,hs=e.scheduleMicrotask,Tn=e.supportsTestSelectors,ri=e.findFiberRoot,_i=e.getBoundingRect,ps=e.getTextContent,on=e.isHiddenSubtree,ve=e.matchAccessibilityRole,ne=e.setFocusIfFocusable,Se=e.setupIntersectionObserver,ye=e.appendChild,lt=e.appendChildToContainer,dt=e.commitTextUpdate,wt=e.commitMount,he=e.commitUpdate,me=e.insertBefore,De=e.insertInContainerBefore,ze=e.removeChild,$e=e.removeChildFromContainer,pt=e.resetTextContent,Ut=e.hideInstance,Mt=e.hideTextInstance,It=e.unhideInstance,qt=e.unhideTextInstance,Ft=e.clearContainer,yr=e.cloneInstance,zn=e.createContainerChildSet,Fn=e.appendChildToContainerChildSet,ji=e.finalizeContainerChildren,ni=e.replaceContainerChildren,ii=e.cloneHiddenInstance,Vl=e.cloneHiddenTextInstance,Qs=e.canHydrateInstance,W=e.canHydrateTextInstance,X=e.canHydrateSuspenseInstance,ae=e.isSuspenseInstancePending,ge=e.isSuspenseInstanceFallback,Oe=e.getSuspenseInstanceFallbackErrorDetails,Ze=e.registerSuspenseInstanceRetry,st=e.getNextHydratableSibling,We=e.getFirstHydratableChild,qe=e.getFirstHydratableChildWithinContainer,Be=e.getFirstHydratableChildWithinSuspenseInstance,Ue=e.hydrateInstance,mt=e.hydrateTextInstance,Et=e.hydrateSuspenseInstance,Lr=e.getNextHydratableInstanceAfterSuspenseInstance,Wt=e.commitHydratedContainer,_t=e.commitHydratedSuspenseInstance,rr=e.clearSuspenseBoundary,Qi=e.clearSuspenseBoundaryFromContainer,qs=e.shouldDeleteUnhydratedTailInstances,gi=e.didNotMatchHydratedContainerTextInstance,At=e.didNotMatchHydratedTextInstance,Gs;function Dn(a){if(Gs===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);Gs=c&&c[1]||""}return`
`+Gs+a}var si=!1;function vi(a,c){if(!a||si)return"";si=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Pe){var y=Pe}Reflect.construct(a,[],c)}else{try{c.call()}catch(Pe){y=Pe}a.call(c.prototype)}else{try{throw Error()}catch(Pe){y=Pe}a()}}catch(Pe){if(Pe&&y&&typeof Pe.stack=="string"){for(var S=Pe.stack.split(`
`),T=y.stack.split(`
`),I=S.length-1,G=T.length-1;1<=I&&0<=G&&S[I]!==T[G];)G--;for(;1<=I&&0<=G;I--,G--)if(S[I]!==T[G]){if(I!==1||G!==1)do if(I--,G--,0>G||S[I]!==T[G]){var ce=`
`+S[I].replace(" at new "," at ");return a.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",a.displayName)),ce}while(1<=I&&0<=G);break}}}finally{si=!1,Error.prepareStackTrace=p}return(a=a?a.displayName||a.name:"")?Dn(a):""}var Io=Object.prototype.hasOwnProperty,Pt=[],$t=-1;function or(a){return{current:a}}function Dt(a){0>$t||(a.current=Pt[$t],Pt[$t]=null,$t--)}function tt(a,c){$t++,Pt[$t]=a.current,a.current=c}var gn={},Mr=or(gn),ln=or(!1),Oi=gn;function qi(a,c){var p=a.type.contextTypes;if(!p)return gn;var y=a.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var S={},T;for(T in p)S[T]=c[T];return y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=S),S}function Br(a){return a=a.childContextTypes,a!=null}function Ks(){Dt(ln),Dt(Mr)}function Vd(a,c,p){if(Mr.current!==gn)throw Error(u(168));tt(Mr,c),tt(ln,p)}function Qd(a,c,p){var y=a.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var S in y)if(!(S in c))throw Error(u(108,K(a)||"Unknown",S));return l({},p,y)}function Ao(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||gn,Oi=Mr.current,tt(Mr,a),tt(ln,ln.current),!0}function ac(a,c,p){var y=a.stateNode;if(!y)throw Error(u(169));p?(a=Qd(a,c,Oi),y.__reactInternalMemoizedMergedChildContext=a,Dt(ln),Dt(Mr),tt(Mr,a)):Dt(ln),tt(ln,p)}var Bn=Math.clz32?Math.clz32:uc,Ql=Math.log,yp=Math.LN2;function uc(a){return a>>>=0,a===0?32:31-(Ql(a)/yp|0)|0}var Nt=64,ql=4194304;function $o(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function No(a,c){var p=a.pendingLanes;if(p===0)return 0;var y=0,S=a.suspendedLanes,T=a.pingedLanes,I=p&268435455;if(I!==0){var G=I&~S;G!==0?y=$o(G):(T&=I,T!==0&&(y=$o(T)))}else I=p&~S,I!==0?y=$o(I):T!==0&&(y=$o(T));if(y===0)return 0;if(c!==0&&c!==y&&(c&S)===0&&(S=y&-y,T=c&-c,S>=T||S===16&&(T&4194240)!==0))return c;if((y&4)!==0&&(y|=p&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=y;0<c;)p=31-Bn(c),S=1<<p,y|=a[p],c&=~S;return y}function qd(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gd(a,c){for(var p=a.suspendedLanes,y=a.pingedLanes,S=a.expirationTimes,T=a.pendingLanes;0<T;){var I=31-Bn(T),G=1<<I,ce=S[I];ce===-1?((G&p)===0||(G&y)!==0)&&(S[I]=qd(G,c)):ce<=c&&(a.expiredLanes|=G),T&=~G}}function qa(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Ga(){var a=Nt;return Nt<<=1,(Nt&4194240)===0&&(Nt=64),a}function zo(a){for(var c=[],p=0;31>p;p++)c.push(a);return c}function oi(a,c,p){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-Bn(c),a[c]=p}function ms(a,c){var p=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var y=a.eventTimes;for(a=a.expirationTimes;0<p;){var S=31-Bn(p),T=1<<S;c[S]=0,y[S]=-1,a[S]=-1,p&=~T}}function Li(a,c){var p=a.entangledLanes|=c;for(a=a.entanglements;p;){var y=31-Bn(p),S=1<<y;S&c|a[y]&c&&(a[y]|=c),p&=~S}}var kt=0;function Fo(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Mi=s.unstable_scheduleCallback,Kd=s.unstable_cancelCallback,Yd=s.unstable_shouldYield,Gl=s.unstable_requestPaint,Ur=s.unstable_now,Ka=s.unstable_ImmediatePriority,Ya=s.unstable_UserBlockingPriority,Xa=s.unstable_NormalPriority,wp=s.unstable_IdlePriority,gs=null,Rn=null;function Do(a){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(gs,a,void 0,(a.current.flags&128)===128)}catch{}}function Za(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var yi=typeof Object.is=="function"?Object.is:Za,Gi=null,Bo=!1,Uo=!1;function Ja(a){Gi===null?Gi=[a]:Gi.push(a)}function Xd(a){Bo=!0,Ja(a)}function Xr(){if(!Uo&&Gi!==null){Uo=!0;var a=0,c=kt;try{var p=Gi;for(kt=1;a<p.length;a++){var y=p[a];do y=y(!0);while(y!==null)}Gi=null,Bo=!1}catch(S){throw Gi!==null&&(Gi=Gi.slice(a+1)),Mi(Ka,Xr),S}finally{kt=c,Uo=!1}}return null}var vs=[],Ki=0,Kl=null,Ys=0,vn=[],Un=0,Ir=null,_n=1,wi="";function xi(a,c){vs[Ki++]=Ys,vs[Ki++]=Kl,Kl=a,Ys=c}function Zd(a,c,p){vn[Un++]=_n,vn[Un++]=wi,vn[Un++]=Ir,Ir=a;var y=_n;a=wi;var S=32-Bn(y)-1;y&=~(1<<S),p+=1;var T=32-Bn(c)+S;if(30<T){var I=S-S%5;T=(y&(1<<I)-1).toString(32),y>>=I,S-=I,_n=1<<32-Bn(c)+S|p<<S|y,wi=T+a}else _n=1<<T|p<<S|y,wi=a}function Yl(a){a.return!==null&&(xi(a,1),Zd(a,1,0))}function Xl(a){for(;a===Kl;)Kl=vs[--Ki],vs[Ki]=null,Ys=vs[--Ki],vs[Ki]=null;for(;a===Ir;)Ir=vn[--Un],vn[Un]=null,wi=vn[--Un],vn[Un]=null,_n=vn[--Un],vn[Un]=null}var Zr=null,yn=null,nr=!1,Zl=!1,Si=null;function Jd(a,c){var p=Zn(5,null,null,0);p.elementType="DELETED",p.stateNode=c,p.return=a,c=a.deletions,c===null?(a.deletions=[p],a.flags|=16):c.push(p)}function eu(a,c){switch(a.tag){case 5:return c=Qs(c,a.type,a.pendingProps),c!==null?(a.stateNode=c,Zr=a,yn=We(c),!0):!1;case 6:return c=W(c,a.pendingProps),c!==null?(a.stateNode=c,Zr=a,yn=null,!0):!1;case 13:if(c=X(c),c!==null){var p=Ir!==null?{id:_n,overflow:wi}:null;return a.memoizedState={dehydrated:c,treeContext:p,retryLane:1073741824},p=Zn(18,null,null,0),p.stateNode=c,p.return=a,a.child=p,Zr=a,yn=null,!0}return!1;default:return!1}}function cc(a){return(a.mode&1)!==0&&(a.flags&128)===0}function dc(a){if(nr){var c=yn;if(c){var p=c;if(!eu(a,c)){if(cc(a))throw Error(u(418));c=st(p);var y=Zr;c&&eu(a,c)?Jd(y,p):(a.flags=a.flags&-4097|2,nr=!1,Zr=a)}}else{if(cc(a))throw Error(u(418));a.flags=a.flags&-4097|2,nr=!1,Zr=a}}}function ef(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Zr=a}function tu(a){if(!Re||a!==Zr)return!1;if(!nr)return ef(a),nr=!0,!1;if(a.tag!==3&&(a.tag!==5||qs(a.type)&&!Ne(a.type,a.memoizedProps))){var c=yn;if(c){if(cc(a))throw tf(),Error(u(418));for(;c;)Jd(a,c),c=st(c)}}if(ef(a),a.tag===13){if(!Re)throw Error(u(316));if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(u(317));yn=Lr(a)}else yn=Zr?st(a.stateNode):null;return!0}function tf(){for(var a=yn;a;)a=st(a)}function Xs(){Re&&(yn=Zr=null,Zl=nr=!1)}function fc(a){Si===null?Si=[a]:Si.push(a)}var xp=d.ReactCurrentBatchConfig;function ru(a,c){if(yi(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var p=Object.keys(a),y=Object.keys(c);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var S=p[y];if(!Io.call(c,S)||!yi(a[S],c[S]))return!1}return!0}function Sp(a){switch(a.tag){case 5:return Dn(a.type);case 16:return Dn("Lazy");case 13:return Dn("Suspense");case 19:return Dn("SuspenseList");case 0:case 2:case 15:return a=vi(a.type,!1),a;case 11:return a=vi(a.type.render,!1),a;case 1:return a=vi(a.type,!0),a;default:return""}}function Zs(a,c,p){if(a=p.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(u(309));var y=p.stateNode}if(!y)throw Error(u(147,a));var S=y,T=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===T?c.ref:(c=function(I){var G=S.refs;I===null?delete G[T]:G[T]=I},c._stringRef=T,c)}if(typeof a!="string")throw Error(u(284));if(!p._owner)throw Error(u(290,a))}return a}function nu(a,c){throw a=Object.prototype.toString.call(c),Error(u(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function rf(a){var c=a._init;return c(a._payload)}function nf(a){function c(se,Z){if(a){var pe=se.deletions;pe===null?(se.deletions=[Z],se.flags|=16):pe.push(Z)}}function p(se,Z){if(!a)return null;for(;Z!==null;)c(se,Z),Z=Z.sibling;return null}function y(se,Z){for(se=new Map;Z!==null;)Z.key!==null?se.set(Z.key,Z):se.set(Z.index,Z),Z=Z.sibling;return se}function S(se,Z){return se=As(se,Z),se.index=0,se.sibling=null,se}function T(se,Z,pe){return se.index=pe,a?(pe=se.alternate,pe!==null?(pe=pe.index,pe<Z?(se.flags|=2,Z):pe):(se.flags|=2,Z)):(se.flags|=1048576,Z)}function I(se){return a&&se.alternate===null&&(se.flags|=2),se}function G(se,Z,pe,Ae){return Z===null||Z.tag!==6?(Z=hl(pe,se.mode,Ae),Z.return=se,Z):(Z=S(Z,pe),Z.return=se,Z)}function ce(se,Z,pe,Ae){var it=pe.type;return it===g?He(se,Z,pe.props.children,Ae,pe.key):Z!==null&&(Z.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===A&&rf(it)===Z.type)?(Ae=S(Z,pe.props),Ae.ref=Zs(se,Z,pe),Ae.return=se,Ae):(Ae=Au(pe.type,pe.key,pe.props,null,se.mode,Ae),Ae.ref=Zs(se,Z,pe),Ae.return=se,Ae)}function Pe(se,Z,pe,Ae){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==pe.containerInfo||Z.stateNode.implementation!==pe.implementation?(Z=$u(pe,se.mode,Ae),Z.return=se,Z):(Z=S(Z,pe.children||[]),Z.return=se,Z)}function He(se,Z,pe,Ae,it){return Z===null||Z.tag!==7?(Z=tn(pe,se.mode,Ae,it),Z.return=se,Z):(Z=S(Z,pe),Z.return=se,Z)}function gt(se,Z,pe){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=hl(""+Z,se.mode,pe),Z.return=se,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case h:return pe=Au(Z.type,Z.key,Z.props,null,se.mode,pe),pe.ref=Zs(se,null,Z),pe.return=se,pe;case v:return Z=$u(Z,se.mode,pe),Z.return=se,Z;case A:var Ae=Z._init;return gt(se,Ae(Z._payload),pe)}if(Te(Z)||B(Z))return Z=tn(Z,se.mode,pe,null),Z.return=se,Z;nu(se,Z)}return null}function Ie(se,Z,pe,Ae){var it=Z!==null?Z.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number")return it!==null?null:G(se,Z,""+pe,Ae);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case h:return pe.key===it?ce(se,Z,pe,Ae):null;case v:return pe.key===it?Pe(se,Z,pe,Ae):null;case A:return it=pe._init,Ie(se,Z,it(pe._payload),Ae)}if(Te(pe)||B(pe))return it!==null?null:He(se,Z,pe,Ae,null);nu(se,pe)}return null}function tr(se,Z,pe,Ae,it){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return se=se.get(pe)||null,G(Z,se,""+Ae,it);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case h:return se=se.get(Ae.key===null?pe:Ae.key)||null,ce(Z,se,Ae,it);case v:return se=se.get(Ae.key===null?pe:Ae.key)||null,Pe(Z,se,Ae,it);case A:var xt=Ae._init;return tr(se,Z,pe,xt(Ae._payload),it)}if(Te(Ae)||B(Ae))return se=se.get(pe)||null,He(Z,se,Ae,it,null);nu(Z,Ae)}return null}function Qt(se,Z,pe,Ae){for(var it=null,xt=null,vt=Z,jt=Z=0,Fr=null;vt!==null&&jt<pe.length;jt++){vt.index>jt?(Fr=vt,vt=null):Fr=vt.sibling;var Rt=Ie(se,vt,pe[jt],Ae);if(Rt===null){vt===null&&(vt=Fr);break}a&&vt&&Rt.alternate===null&&c(se,vt),Z=T(Rt,Z,jt),xt===null?it=Rt:xt.sibling=Rt,xt=Rt,vt=Fr}if(jt===pe.length)return p(se,vt),nr&&xi(se,jt),it;if(vt===null){for(;jt<pe.length;jt++)vt=gt(se,pe[jt],Ae),vt!==null&&(Z=T(vt,Z,jt),xt===null?it=vt:xt.sibling=vt,xt=vt);return nr&&xi(se,jt),it}for(vt=y(se,vt);jt<pe.length;jt++)Fr=tr(vt,se,jt,pe[jt],Ae),Fr!==null&&(a&&Fr.alternate!==null&&vt.delete(Fr.key===null?jt:Fr.key),Z=T(Fr,Z,jt),xt===null?it=Fr:xt.sibling=Fr,xt=Fr);return a&&vt.forEach(function(hn){return c(se,hn)}),nr&&xi(se,jt),it}function Pn(se,Z,pe,Ae){var it=B(pe);if(typeof it!="function")throw Error(u(150));if(pe=it.call(pe),pe==null)throw Error(u(151));for(var xt=it=null,vt=Z,jt=Z=0,Fr=null,Rt=pe.next();vt!==null&&!Rt.done;jt++,Rt=pe.next()){vt.index>jt?(Fr=vt,vt=null):Fr=vt.sibling;var hn=Ie(se,vt,Rt.value,Ae);if(hn===null){vt===null&&(vt=Fr);break}a&&vt&&hn.alternate===null&&c(se,vt),Z=T(hn,Z,jt),xt===null?it=hn:xt.sibling=hn,xt=hn,vt=Fr}if(Rt.done)return p(se,vt),nr&&xi(se,jt),it;if(vt===null){for(;!Rt.done;jt++,Rt=pe.next())Rt=gt(se,Rt.value,Ae),Rt!==null&&(Z=T(Rt,Z,jt),xt===null?it=Rt:xt.sibling=Rt,xt=Rt);return nr&&xi(se,jt),it}for(vt=y(se,vt);!Rt.done;jt++,Rt=pe.next())Rt=tr(vt,se,jt,Rt.value,Ae),Rt!==null&&(a&&Rt.alternate!==null&&vt.delete(Rt.key===null?jt:Rt.key),Z=T(Rt,Z,jt),xt===null?it=Rt:xt.sibling=Rt,xt=Rt);return a&&vt.forEach(function(kp){return c(se,kp)}),nr&&xi(se,jt),it}function Ui(se,Z,pe,Ae){if(typeof pe=="object"&&pe!==null&&pe.type===g&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case h:e:{for(var it=pe.key,xt=Z;xt!==null;){if(xt.key===it){if(it=pe.type,it===g){if(xt.tag===7){p(se,xt.sibling),Z=S(xt,pe.props.children),Z.return=se,se=Z;break e}}else if(xt.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===A&&rf(it)===xt.type){p(se,xt.sibling),Z=S(xt,pe.props),Z.ref=Zs(se,xt,pe),Z.return=se,se=Z;break e}p(se,xt);break}else c(se,xt);xt=xt.sibling}pe.type===g?(Z=tn(pe.props.children,se.mode,Ae,pe.key),Z.return=se,se=Z):(Ae=Au(pe.type,pe.key,pe.props,null,se.mode,Ae),Ae.ref=Zs(se,Z,pe),Ae.return=se,se=Ae)}return I(se);case v:e:{for(xt=pe.key;Z!==null;){if(Z.key===xt)if(Z.tag===4&&Z.stateNode.containerInfo===pe.containerInfo&&Z.stateNode.implementation===pe.implementation){p(se,Z.sibling),Z=S(Z,pe.children||[]),Z.return=se,se=Z;break e}else{p(se,Z);break}else c(se,Z);Z=Z.sibling}Z=$u(pe,se.mode,Ae),Z.return=se,se=Z}return I(se);case A:return xt=pe._init,Ui(se,Z,xt(pe._payload),Ae)}if(Te(pe))return Qt(se,Z,pe,Ae);if(B(pe))return Pn(se,Z,pe,Ae);nu(se,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"?(pe=""+pe,Z!==null&&Z.tag===6?(p(se,Z.sibling),Z=S(Z,pe),Z.return=se,se=Z):(p(se,Z),Z=hl(pe,se.mode,Ae),Z.return=se,se=Z),I(se)):p(se,Z)}return Ui}var Js=nf(!0),sf=nf(!1),iu=or(null),su=null,Ho=null,hc=null;function pc(){hc=Ho=su=null}function of(a,c,p){Ct?(tt(iu,c._currentValue),c._currentValue=p):(tt(iu,c._currentValue2),c._currentValue2=p)}function Jl(a){var c=iu.current;Dt(iu),Ct?a._currentValue=c:a._currentValue2=c}function eo(a,c,p){for(;a!==null;){var y=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),a===p)break;a=a.return}}function Wo(a,c){su=a,hc=Ho=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&($r=!0),a.firstContext=null)}function Hn(a){var c=Ct?a._currentValue:a._currentValue2;if(hc!==a)if(a={context:a,memoizedValue:c,next:null},Ho===null){if(su===null)throw Error(u(308));Ho=a,su.dependencies={lanes:0,firstContext:a}}else Ho=Ho.next=a;return c}var ys=null;function ou(a){ys===null?ys=[a]:ys.push(a)}function mc(a,c,p,y){var S=c.interleaved;return S===null?(p.next=p,ou(c)):(p.next=S.next,S.next=p),c.interleaved=p,bi(a,y)}function bi(a,c){a.lanes|=c;var p=a.alternate;for(p!==null&&(p.lanes|=c),p=a,a=a.return;a!==null;)a.childLanes|=c,p=a.alternate,p!==null&&(p.childLanes|=c),p=a,a=a.return;return p.tag===3?p.stateNode:null}var Wn=!1;function gc(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lf(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Yi(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function Xi(a,c,p){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(yt&2)!==0){var S=y.pending;return S===null?c.next=c:(c.next=S.next,S.next=c),y.pending=c,bi(a,p)}return S=y.interleaved,S===null?(c.next=c,ou(y)):(c.next=S.next,S.next=c),y.interleaved=c,bi(a,p)}function ea(a,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194240)!==0)){var y=c.lanes;y&=a.pendingLanes,p|=y,c.lanes=p,Li(a,p)}}function Vo(a,c){var p=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var S=null,T=null;if(p=p.firstBaseUpdate,p!==null){do{var I={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};T===null?S=T=I:T=T.next=I,p=p.next}while(p!==null);T===null?S=T=c:T=T.next=c}else S=T=c;p={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:T,shared:y.shared,effects:y.effects},a.updateQueue=p;return}a=p.lastBaseUpdate,a===null?p.firstBaseUpdate=c:a.next=c,p.lastBaseUpdate=c}function ws(a,c,p,y){var S=a.updateQueue;Wn=!1;var T=S.firstBaseUpdate,I=S.lastBaseUpdate,G=S.shared.pending;if(G!==null){S.shared.pending=null;var ce=G,Pe=ce.next;ce.next=null,I===null?T=Pe:I.next=Pe,I=ce;var He=a.alternate;He!==null&&(He=He.updateQueue,G=He.lastBaseUpdate,G!==I&&(G===null?He.firstBaseUpdate=Pe:G.next=Pe,He.lastBaseUpdate=ce))}if(T!==null){var gt=S.baseState;I=0,He=Pe=ce=null,G=T;do{var Ie=G.lane,tr=G.eventTime;if((y&Ie)===Ie){He!==null&&(He=He.next={eventTime:tr,lane:0,tag:G.tag,payload:G.payload,callback:G.callback,next:null});e:{var Qt=a,Pn=G;switch(Ie=c,tr=p,Pn.tag){case 1:if(Qt=Pn.payload,typeof Qt=="function"){gt=Qt.call(tr,gt,Ie);break e}gt=Qt;break e;case 3:Qt.flags=Qt.flags&-65537|128;case 0:if(Qt=Pn.payload,Ie=typeof Qt=="function"?Qt.call(tr,gt,Ie):Qt,Ie==null)break e;gt=l({},gt,Ie);break e;case 2:Wn=!0}}G.callback!==null&&G.lane!==0&&(a.flags|=64,Ie=S.effects,Ie===null?S.effects=[G]:Ie.push(G))}else tr={eventTime:tr,lane:Ie,tag:G.tag,payload:G.payload,callback:G.callback,next:null},He===null?(Pe=He=tr,ce=gt):He=He.next=tr,I|=Ie;if(G=G.next,G===null){if(G=S.shared.pending,G===null)break;Ie=G,G=Ie.next,Ie.next=null,S.lastBaseUpdate=Ie,S.shared.pending=null}}while(!0);if(He===null&&(ce=gt),S.baseState=ce,S.firstBaseUpdate=Pe,S.lastBaseUpdate=He,c=S.shared.interleaved,c!==null){S=c;do I|=S.lane,S=S.next;while(S!==c)}else T===null&&(S.shared.lanes=0);rs|=I,a.lanes=I,a.memoizedState=gt}}function af(a,c,p){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var y=a[c],S=y.callback;if(S!==null){if(y.callback=null,y=p,typeof S!="function")throw Error(u(191,S));S.call(y)}}}var xs={},li=or(xs),Qo=or(xs),Ss=or(xs);function ai(a){if(a===xs)throw Error(u(174));return a}function lu(a,c){tt(Ss,c),tt(Qo,a),tt(li,xs),a=je(c),Dt(li),tt(li,a)}function to(){Dt(li),Dt(Qo),Dt(Ss)}function vc(a){var c=ai(Ss.current),p=ai(li.current);c=ee(p,a.type,c),p!==c&&(tt(Qo,a),tt(li,c))}function yc(a){Qo.current===a&&(Dt(li),Dt(Qo))}var dr=or(0);function au(a){for(var c=a;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||ae(p)||ge(p)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var wc=[];function xc(){for(var a=0;a<wc.length;a++){var c=wc[a];Ct?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}wc.length=0}var jn=d.ReactCurrentDispatcher,ro=d.ReactCurrentBatchConfig,bs=0,lr=null,br=null,Ar=null,qo=!1,ta=!1,ra=0,Go=0;function Hr(){throw Error(u(321))}function no(a,c){if(c===null)return!1;for(var p=0;p<c.length&&p<a.length;p++)if(!yi(a[p],c[p]))return!1;return!0}function na(a,c,p,y,S,T){if(bs=T,lr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,jn.current=a===null||a.memoizedState===null?jc:Oc,a=p(y,S),ta){T=0;do{if(ta=!1,ra=0,25<=T)throw Error(u(301));T+=1,Ar=br=null,c.updateQueue=null,jn.current=Lc,a=p(y,S)}while(ta)}if(jn.current=ao,c=br!==null&&br.next!==null,bs=0,Ar=br=lr=null,qo=!1,c)throw Error(u(300));return a}function uu(){var a=ra!==0;return ra=0,a}function Vn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ar===null?lr.memoizedState=Ar=a:Ar=Ar.next=a,Ar}function Jr(){if(br===null){var a=lr.alternate;a=a!==null?a.memoizedState:null}else a=br.next;var c=Ar===null?lr.memoizedState:Ar.next;if(c!==null)Ar=c,br=a;else{if(a===null)throw Error(u(310));br=a,a={memoizedState:br.memoizedState,baseState:br.baseState,baseQueue:br.baseQueue,queue:br.queue,next:null},Ar===null?lr.memoizedState=Ar=a:Ar=Ar.next=a}return Ar}function io(a,c){return typeof c=="function"?c(a):c}function cu(a){var c=Jr(),p=c.queue;if(p===null)throw Error(u(311));p.lastRenderedReducer=a;var y=br,S=y.baseQueue,T=p.pending;if(T!==null){if(S!==null){var I=S.next;S.next=T.next,T.next=I}y.baseQueue=S=T,p.pending=null}if(S!==null){T=S.next,y=y.baseState;var G=I=null,ce=null,Pe=T;do{var He=Pe.lane;if((bs&He)===He)ce!==null&&(ce=ce.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),y=Pe.hasEagerState?Pe.eagerState:a(y,Pe.action);else{var gt={lane:He,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};ce===null?(G=ce=gt,I=y):ce=ce.next=gt,lr.lanes|=He,rs|=He}Pe=Pe.next}while(Pe!==null&&Pe!==T);ce===null?I=y:ce.next=G,yi(y,c.memoizedState)||($r=!0),c.memoizedState=y,c.baseState=I,c.baseQueue=ce,p.lastRenderedState=y}if(a=p.interleaved,a!==null){S=a;do T=S.lane,lr.lanes|=T,rs|=T,S=S.next;while(S!==a)}else S===null&&(p.lanes=0);return[c.memoizedState,p.dispatch]}function Ko(a){var c=Jr(),p=c.queue;if(p===null)throw Error(u(311));p.lastRenderedReducer=a;var y=p.dispatch,S=p.pending,T=c.memoizedState;if(S!==null){p.pending=null;var I=S=S.next;do T=a(T,I.action),I=I.next;while(I!==S);yi(T,c.memoizedState)||($r=!0),c.memoizedState=T,c.baseQueue===null&&(c.baseState=T),p.lastRenderedState=T}return[T,y]}function Sc(){}function bc(a,c){var p=lr,y=Jr(),S=c(),T=!yi(y.memoizedState,S);if(T&&(y.memoizedState=S,$r=!0),y=y.queue,hu(Cc.bind(null,p,y,a),[a]),y.getSnapshot!==c||T||Ar!==null&&Ar.memoizedState.tag&1){if(p.flags|=2048,so(9,Pc.bind(null,p,y,S,c),void 0,null),Yt===null)throw Error(u(349));(bs&30)!==0||Ec(p,c,S)}return S}function Ec(a,c,p){a.flags|=16384,a={getSnapshot:c,value:p},c=lr.updateQueue,c===null?(c={lastEffect:null,stores:null},lr.updateQueue=c,c.stores=[a]):(p=c.stores,p===null?c.stores=[a]:p.push(a))}function Pc(a,c,p,y){c.value=p,c.getSnapshot=y,kc(c)&&Zi(a)}function Cc(a,c,p){return p(function(){kc(c)&&Zi(a)})}function kc(a){var c=a.getSnapshot;a=a.value;try{var p=c();return!yi(a,p)}catch{return!0}}function Zi(a){var c=bi(a,1);c!==null&&dn(c,a,1,-1)}function du(a){var c=Vn();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:a},c.queue=a,a=a.dispatch=bp.bind(null,lr,a),[c.memoizedState,a]}function so(a,c,p,y){return a={tag:a,create:c,destroy:p,deps:y,next:null},c=lr.updateQueue,c===null?(c={lastEffect:null,stores:null},lr.updateQueue=c,c.lastEffect=a.next=a):(p=c.lastEffect,p===null?c.lastEffect=a.next=a:(y=p.next,p.next=a,a.next=y,c.lastEffect=a)),a}function uf(){return Jr().memoizedState}function fu(a,c,p,y){var S=Vn();lr.flags|=a,S.memoizedState=so(1|c,p,void 0,y===void 0?null:y)}function Es(a,c,p,y){var S=Jr();y=y===void 0?null:y;var T=void 0;if(br!==null){var I=br.memoizedState;if(T=I.destroy,y!==null&&no(y,I.deps)){S.memoizedState=so(c,p,T,y);return}}lr.flags|=a,S.memoizedState=so(1|c,p,T,y)}function cf(a,c){return fu(8390656,8,a,c)}function hu(a,c){return Es(2048,8,a,c)}function Tc(a,c){return Es(4,2,a,c)}function Zt(a,c){return Es(4,4,a,c)}function pu(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function ia(a,c,p){return p=p!=null?p.concat([a]):null,Es(4,4,pu.bind(null,c,a),p)}function oo(){}function Rc(a,c){var p=Jr();c=c===void 0?null:c;var y=p.memoizedState;return y!==null&&c!==null&&no(c,y[1])?y[0]:(p.memoizedState=[a,c],a)}function mu(a,c){var p=Jr();c=c===void 0?null:c;var y=p.memoizedState;return y!==null&&c!==null&&no(c,y[1])?y[0]:(a=a(),p.memoizedState=[a,c],a)}function Yo(a,c,p){return(bs&21)===0?(a.baseState&&(a.baseState=!1,$r=!0),a.memoizedState=p):(yi(p,c)||(p=Ga(),lr.lanes|=p,rs|=p,a.baseState=!0),c)}function gu(a,c){var p=kt;kt=p!==0&&4>p?p:4,a(!0);var y=ro.transition;ro.transition={};try{a(!1),c()}finally{kt=p,ro.transition=y}}function lo(){return Jr().memoizedState}function df(a,c,p){var y=zr(a);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},ff(a))_c(c,p);else if(p=mc(a,c,p,y),p!==null){var S=ir();dn(p,a,y,S),sa(p,c,y)}}function bp(a,c,p){var y=zr(a),S={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(ff(a))_c(c,S);else{var T=a.alternate;if(a.lanes===0&&(T===null||T.lanes===0)&&(T=c.lastRenderedReducer,T!==null))try{var I=c.lastRenderedState,G=T(I,p);if(S.hasEagerState=!0,S.eagerState=G,yi(G,I)){var ce=c.interleaved;ce===null?(S.next=S,ou(c)):(S.next=ce.next,ce.next=S),c.interleaved=S;return}}catch{}finally{}p=mc(a,c,S,y),p!==null&&(S=ir(),dn(p,a,y,S),sa(p,c,y))}}function ff(a){var c=a.alternate;return a===lr||c!==null&&c===lr}function _c(a,c){ta=qo=!0;var p=a.pending;p===null?c.next=c:(c.next=p.next,p.next=c),a.pending=c}function sa(a,c,p){if((p&4194240)!==0){var y=c.lanes;y&=a.pendingLanes,p|=y,c.lanes=p,Li(a,p)}}var ao={readContext:Hn,useCallback:Hr,useContext:Hr,useEffect:Hr,useImperativeHandle:Hr,useInsertionEffect:Hr,useLayoutEffect:Hr,useMemo:Hr,useReducer:Hr,useRef:Hr,useState:Hr,useDebugValue:Hr,useDeferredValue:Hr,useTransition:Hr,useMutableSource:Hr,useSyncExternalStore:Hr,useId:Hr,unstable_isNewReconciler:!1},jc={readContext:Hn,useCallback:function(a,c){return Vn().memoizedState=[a,c===void 0?null:c],a},useContext:Hn,useEffect:cf,useImperativeHandle:function(a,c,p){return p=p!=null?p.concat([a]):null,fu(4194308,4,pu.bind(null,c,a),p)},useLayoutEffect:function(a,c){return fu(4194308,4,a,c)},useInsertionEffect:function(a,c){return fu(4,2,a,c)},useMemo:function(a,c){var p=Vn();return c=c===void 0?null:c,a=a(),p.memoizedState=[a,c],a},useReducer:function(a,c,p){var y=Vn();return c=p!==void 0?p(c):c,y.memoizedState=y.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},y.queue=a,a=a.dispatch=df.bind(null,lr,a),[y.memoizedState,a]},useRef:function(a){var c=Vn();return a={current:a},c.memoizedState=a},useState:du,useDebugValue:oo,useDeferredValue:function(a){return Vn().memoizedState=a},useTransition:function(){var a=du(!1),c=a[0];return a=gu.bind(null,a[1]),Vn().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,p){var y=lr,S=Vn();if(nr){if(p===void 0)throw Error(u(407));p=p()}else{if(p=c(),Yt===null)throw Error(u(349));(bs&30)!==0||Ec(y,c,p)}S.memoizedState=p;var T={value:p,getSnapshot:c};return S.queue=T,cf(Cc.bind(null,y,T,a),[a]),y.flags|=2048,so(9,Pc.bind(null,y,T,p,c),void 0,null),p},useId:function(){var a=Vn(),c=Yt.identifierPrefix;if(nr){var p=wi,y=_n;p=(y&~(1<<32-Bn(y)-1)).toString(32)+p,c=":"+c+"R"+p,p=ra++,0<p&&(c+="H"+p.toString(32)),c+=":"}else p=Go++,c=":"+c+"r"+p.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},Oc={readContext:Hn,useCallback:Rc,useContext:Hn,useEffect:hu,useImperativeHandle:ia,useInsertionEffect:Tc,useLayoutEffect:Zt,useMemo:mu,useReducer:cu,useRef:uf,useState:function(){return cu(io)},useDebugValue:oo,useDeferredValue:function(a){var c=Jr();return Yo(c,br.memoizedState,a)},useTransition:function(){var a=cu(io)[0],c=Jr().memoizedState;return[a,c]},useMutableSource:Sc,useSyncExternalStore:bc,useId:lo,unstable_isNewReconciler:!1},Lc={readContext:Hn,useCallback:Rc,useContext:Hn,useEffect:hu,useImperativeHandle:ia,useInsertionEffect:Tc,useLayoutEffect:Zt,useMemo:mu,useReducer:Ko,useRef:uf,useState:function(){return Ko(io)},useDebugValue:oo,useDeferredValue:function(a){var c=Jr();return br===null?c.memoizedState=a:Yo(c,br.memoizedState,a)},useTransition:function(){var a=Ko(io)[0],c=Jr().memoizedState;return[a,c]},useMutableSource:Sc,useSyncExternalStore:bc,useId:lo,unstable_isNewReconciler:!1};function Qn(a,c){if(a&&a.defaultProps){c=l({},c),a=a.defaultProps;for(var p in a)c[p]===void 0&&(c[p]=a[p]);return c}return c}function Mc(a,c,p,y){c=a.memoizedState,p=p(y,c),p=p==null?c:l({},c,p),a.memoizedState=p,a.lanes===0&&(a.updateQueue.baseState=p)}var oa={isMounted:function(a){return(a=a._reactInternals)?fe(a)===a:!1},enqueueSetState:function(a,c,p){a=a._reactInternals;var y=ir(),S=zr(a),T=Yi(y,S);T.payload=c,p!=null&&(T.callback=p),c=Xi(a,T,S),c!==null&&(dn(c,a,S,y),ea(c,a,S))},enqueueReplaceState:function(a,c,p){a=a._reactInternals;var y=ir(),S=zr(a),T=Yi(y,S);T.tag=1,T.payload=c,p!=null&&(T.callback=p),c=Xi(a,T,S),c!==null&&(dn(c,a,S,y),ea(c,a,S))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var p=ir(),y=zr(a),S=Yi(p,y);S.tag=2,c!=null&&(S.callback=c),c=Xi(a,S,y),c!==null&&(dn(c,a,y,p),ea(c,a,y))}};function hf(a,c,p,y,S,T,I){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,T,I):c.prototype&&c.prototype.isPureReactComponent?!ru(p,y)||!ru(S,T):!0}function pf(a,c,p){var y=!1,S=gn,T=c.contextType;return typeof T=="object"&&T!==null?T=Hn(T):(S=Br(c)?Oi:Mr.current,y=c.contextTypes,T=(y=y!=null)?qi(a,S):gn),c=new c(p,T),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=oa,a.stateNode=c,c._reactInternals=a,y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=S,a.__reactInternalMemoizedMaskedChildContext=T),c}function vu(a,c,p,y){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,y),c.state!==a&&oa.enqueueReplaceState(c,c.state,null)}function Ii(a,c,p,y){var S=a.stateNode;S.props=p,S.state=a.memoizedState,S.refs={},gc(a);var T=c.contextType;typeof T=="object"&&T!==null?S.context=Hn(T):(T=Br(c)?Oi:Mr.current,S.context=qi(a,T)),S.state=a.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(Mc(a,c,T,p),S.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(c=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),c!==S.state&&oa.enqueueReplaceState(S,S.state,null),ws(a,p,S,y),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308)}function uo(a,c){try{var p="",y=c;do p+=Sp(y),y=y.return;while(y);var S=p}catch(T){S=`
Error generating stack: `+T.message+`
`+T.stack}return{value:a,source:c,stack:S,digest:null}}function Ps(a,c,p){return{value:a,source:null,stack:p??null,digest:c??null}}function ui(a,c){try{console.error(c.value)}catch(p){setTimeout(function(){throw p})}}var la=typeof WeakMap=="function"?WeakMap:Map;function Ai(a,c,p){p=Yi(-1,p),p.tag=3,p.payload={element:null};var y=c.value;return p.callback=function(){gr||(gr=!0,Er=y),ui(a,c)},p}function yu(a,c,p){p=Yi(-1,p),p.tag=3;var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var S=c.value;p.payload=function(){return y(S)},p.callback=function(){ui(a,c)}}var T=a.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(p.callback=function(){ui(a,c),typeof y!="function"&&(Pi===null?Pi=new Set([this]):Pi.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})}),p}function mf(a,c,p){var y=a.pingCache;if(y===null){y=a.pingCache=new la;var S=new Set;y.set(c,S)}else S=y.get(c),S===void 0&&(S=new Set,y.set(c,S));S.has(p)||(S.add(p),a=Ef.bind(null,a,c,p),c.then(a,a))}function gf(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function Cs(a,c,p,y,S){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(c=Yi(-1,1),c.tag=2,Xi(p,c,1))),p.lanes|=1),a):(a.flags|=65536,a.lanes=S,a)}var aa=d.ReactCurrentOwner,$r=!1;function Wr(a,c,p,y){c.child=a===null?sf(c,null,p,y):Js(c,a.child,p,y)}function wu(a,c,p,y,S){p=p.render;var T=c.ref;return Wo(c,S),y=na(a,c,p,y,T,S),p=uu(),a!==null&&!$r?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~S,es(a,c,S)):(nr&&p&&Yl(c),c.flags|=1,Wr(a,c,y,S),c.child)}function co(a,c,p,y,S){if(a===null){var T=p.type;return typeof T=="function"&&!dl(T)&&T.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(c.tag=15,c.type=T,Ji(a,c,T,y,S)):(a=Au(p.type,null,y,c,c.mode,S),a.ref=c.ref,a.return=c,c.child=a)}if(T=a.child,(a.lanes&S)===0){var I=T.memoizedProps;if(p=p.compare,p=p!==null?p:ru,p(I,y)&&a.ref===c.ref)return es(a,c,S)}return c.flags|=1,a=As(T,y),a.ref=c.ref,a.return=c,c.child=a}function Ji(a,c,p,y,S){if(a!==null){var T=a.memoizedProps;if(ru(T,y)&&a.ref===c.ref)if($r=!1,c.pendingProps=y=T,(a.lanes&S)!==0)(a.flags&131072)!==0&&($r=!0);else return c.lanes=a.lanes,es(a,c,S)}return $i(a,c,p,y,S)}function Jt(a,c,p){var y=c.pendingProps,S=y.children,T=a!==null?a.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(Os,Nr),Nr|=p;else{if((p&1073741824)===0)return a=T!==null?T.baseLanes|p:p,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,tt(Os,Nr),Nr|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=T!==null?T.baseLanes:p,tt(Os,Nr),Nr|=y}else T!==null?(y=T.baseLanes|p,c.memoizedState=null):y=p,tt(Os,Nr),Nr|=y;return Wr(a,c,S,p),c.child}function Kt(a,c){var p=c.ref;(a===null&&p!==null||a!==null&&a.ref!==p)&&(c.flags|=512,c.flags|=2097152)}function $i(a,c,p,y,S){var T=Br(p)?Oi:Mr.current;return T=qi(c,T),Wo(c,S),p=na(a,c,p,y,T,S),y=uu(),a!==null&&!$r?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~S,es(a,c,S)):(nr&&y&&Yl(c),c.flags|=1,Wr(a,c,p,S),c.child)}function en(a,c,p,y,S){if(Br(p)){var T=!0;Ao(c)}else T=!1;if(Wo(c,S),c.stateNode===null)ua(a,c),pf(c,p,y),Ii(c,p,y,S),y=!0;else if(a===null){var I=c.stateNode,G=c.memoizedProps;I.props=G;var ce=I.context,Pe=p.contextType;typeof Pe=="object"&&Pe!==null?Pe=Hn(Pe):(Pe=Br(p)?Oi:Mr.current,Pe=qi(c,Pe));var He=p.getDerivedStateFromProps,gt=typeof He=="function"||typeof I.getSnapshotBeforeUpdate=="function";gt||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(G!==y||ce!==Pe)&&vu(c,I,y,Pe),Wn=!1;var Ie=c.memoizedState;I.state=Ie,ws(c,y,I,S),ce=c.memoizedState,G!==y||Ie!==ce||ln.current||Wn?(typeof He=="function"&&(Mc(c,p,He,y),ce=c.memoizedState),(G=Wn||hf(c,p,G,y,Ie,ce,Pe))?(gt||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(c.flags|=4194308)):(typeof I.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=ce),I.props=y,I.state=ce,I.context=Pe,y=G):(typeof I.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{I=c.stateNode,lf(a,c),G=c.memoizedProps,Pe=c.type===c.elementType?G:Qn(c.type,G),I.props=Pe,gt=c.pendingProps,Ie=I.context,ce=p.contextType,typeof ce=="object"&&ce!==null?ce=Hn(ce):(ce=Br(p)?Oi:Mr.current,ce=qi(c,ce));var tr=p.getDerivedStateFromProps;(He=typeof tr=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(G!==gt||Ie!==ce)&&vu(c,I,y,ce),Wn=!1,Ie=c.memoizedState,I.state=Ie,ws(c,y,I,S);var Qt=c.memoizedState;G!==gt||Ie!==Qt||ln.current||Wn?(typeof tr=="function"&&(Mc(c,p,tr,y),Qt=c.memoizedState),(Pe=Wn||hf(c,p,Pe,y,Ie,Qt,ce)||!1)?(He||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(y,Qt,ce),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(y,Qt,ce)),typeof I.componentDidUpdate=="function"&&(c.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof I.componentDidUpdate!="function"||G===a.memoizedProps&&Ie===a.memoizedState||(c.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||G===a.memoizedProps&&Ie===a.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Qt),I.props=y,I.state=Qt,I.context=ce,y=Pe):(typeof I.componentDidUpdate!="function"||G===a.memoizedProps&&Ie===a.memoizedState||(c.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||G===a.memoizedProps&&Ie===a.memoizedState||(c.flags|=1024),y=!1)}return an(a,c,p,y,T,S)}function an(a,c,p,y,S,T){Kt(a,c);var I=(c.flags&128)!==0;if(!y&&!I)return S&&ac(c,p,!1),es(a,c,T);y=c.stateNode,aa.current=c;var G=I&&typeof p.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,a!==null&&I?(c.child=Js(c,a.child,null,T),c.child=Js(c,null,G,T)):Wr(a,c,G,T),c.memoizedState=y.state,S&&ac(c,p,!0),c.child}function ks(a){var c=a.stateNode;c.pendingContext?Vd(a,c.pendingContext,c.pendingContext!==c.context):c.context&&Vd(a,c.context,!1),lu(a,c.containerInfo)}function fo(a,c,p,y,S){return Xs(),fc(S),c.flags|=256,Wr(a,c,p,y),c.child}var un={dehydrated:null,treeContext:null,retryLane:0};function Xo(a){return{baseLanes:a,cachePool:null,transitions:null}}function Ic(a,c,p){var y=c.pendingProps,S=dr.current,T=!1,I=(c.flags&128)!==0,G;if((G=I)||(G=a!==null&&a.memoizedState===null?!1:(S&2)!==0),G?(T=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(S|=1),tt(dr,S&1),a===null)return dc(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:ge(a)?c.lanes=8:c.lanes=1073741824,null):(I=y.children,a=y.fallback,T?(y=c.mode,T=c.child,I={mode:"hidden",children:I},(y&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=I):T=fl(I,y,0,null),a=tn(a,y,p,null),T.return=c,a.return=c,T.sibling=a,c.child=T,c.child.memoizedState=Xo(p),c.memoizedState=un,a):xu(c,I));if(S=a.memoizedState,S!==null&&(G=S.dehydrated,G!==null))return vf(a,c,I,y,G,S,p);if(T){T=y.fallback,I=c.mode,S=a.child,G=S.sibling;var ce={mode:"hidden",children:y.children};return(I&1)===0&&c.child!==S?(y=c.child,y.childLanes=0,y.pendingProps=ce,c.deletions=null):(y=As(S,ce),y.subtreeFlags=S.subtreeFlags&14680064),G!==null?T=As(G,T):(T=tn(T,I,p,null),T.flags|=2),T.return=c,y.return=c,y.sibling=T,c.child=y,y=T,T=c.child,I=a.child.memoizedState,I=I===null?Xo(p):{baseLanes:I.baseLanes|p,cachePool:null,transitions:I.transitions},T.memoizedState=I,T.childLanes=a.childLanes&~p,c.memoizedState=un,y}return T=a.child,a=T.sibling,y=As(T,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=p),y.return=c,y.sibling=null,a!==null&&(p=c.deletions,p===null?(c.deletions=[a],c.flags|=16):p.push(a)),c.child=y,c.memoizedState=null,y}function xu(a,c){return c=fl({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function ho(a,c,p,y){return y!==null&&fc(y),Js(c,a.child,null,p),a=xu(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function vf(a,c,p,y,S,T,I){if(p)return c.flags&256?(c.flags&=-257,y=Ps(Error(u(422))),ho(a,c,I,y)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(T=y.fallback,S=c.mode,y=fl({mode:"visible",children:y.children},S,0,null),T=tn(T,S,I,null),T.flags|=2,y.return=c,T.return=c,y.sibling=T,c.child=y,(c.mode&1)!==0&&Js(c,a.child,null,I),c.child.memoizedState=Xo(I),c.memoizedState=un,T);if((c.mode&1)===0)return ho(a,c,I,null);if(ge(S))return y=Oe(S).digest,T=Error(u(419)),y=Ps(T,y,void 0),ho(a,c,I,y);if(p=(I&a.childLanes)!==0,$r||p){if(y=Yt,y!==null){switch(I&-I){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(y.suspendedLanes|I))!==0?0:S,S!==0&&S!==T.retryLane&&(T.retryLane=S,bi(a,S),dn(y,a,S,-1))}return cl(),y=Ps(Error(u(421))),ho(a,c,I,y)}return ae(S)?(c.flags|=128,c.child=a.child,c=Cf.bind(null,a),Ze(S,c),null):(a=T.treeContext,Re&&(yn=Be(S),Zr=c,nr=!0,Si=null,Zl=!1,a!==null&&(vn[Un++]=_n,vn[Un++]=wi,vn[Un++]=Ir,_n=a.id,wi=a.overflow,Ir=c)),c=xu(c,y.children),c.flags|=4096,c)}function Ni(a,c,p){a.lanes|=c;var y=a.alternate;y!==null&&(y.lanes|=c),eo(a.return,c,p)}function Zo(a,c,p,y,S){var T=a.memoizedState;T===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:S}:(T.isBackwards=c,T.rendering=null,T.renderingStartTime=0,T.last=y,T.tail=p,T.tailMode=S)}function Su(a,c,p){var y=c.pendingProps,S=y.revealOrder,T=y.tail;if(Wr(a,c,y.children,p),y=dr.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Ni(a,p,c);else if(a.tag===19)Ni(a,p,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}if(tt(dr,y),(c.mode&1)===0)c.memoizedState=null;else switch(S){case"forwards":for(p=c.child,S=null;p!==null;)a=p.alternate,a!==null&&au(a)===null&&(S=p),p=p.sibling;p=S,p===null?(S=c.child,c.child=null):(S=p.sibling,p.sibling=null),Zo(c,!1,S,p,T);break;case"backwards":for(p=null,S=c.child,c.child=null;S!==null;){if(a=S.alternate,a!==null&&au(a)===null){c.child=S;break}a=S.sibling,S.sibling=p,p=S,S=a}Zo(c,!0,p,null,T);break;case"together":Zo(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function ua(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function es(a,c,p){if(a!==null&&(c.dependencies=a.dependencies),rs|=c.lanes,(p&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(u(153));if(c.child!==null){for(a=c.child,p=As(a,a.pendingProps),c.child=p,p.return=c;a.sibling!==null;)a=a.sibling,p=p.sibling=As(a,a.pendingProps),p.return=c;p.sibling=null}return c.child}function Ts(a,c,p){switch(c.tag){case 3:ks(c),Xs();break;case 5:vc(c);break;case 1:Br(c.type)&&Ao(c);break;case 4:lu(c,c.stateNode.containerInfo);break;case 10:of(c,c.type._context,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(tt(dr,dr.current&1),c.flags|=128,null):(p&c.child.childLanes)!==0?Ic(a,c,p):(tt(dr,dr.current&1),a=es(a,c,p),a!==null?a.sibling:null);tt(dr,dr.current&1);break;case 19:if(y=(p&c.childLanes)!==0,(a.flags&128)!==0){if(y)return Su(a,c,p);c.flags|=128}var S=c.memoizedState;if(S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),tt(dr,dr.current),y)break;return null;case 22:case 23:return c.lanes=0,Jt(a,c,p)}return es(a,c,p)}function wn(a){a.flags|=4}function po(a,c){if(a!==null&&a.child===c.child)return!0;if((c.flags&16)!==0)return!1;for(a=c.child;a!==null;){if((a.flags&12854)!==0||(a.subtreeFlags&12854)!==0)return!1;a=a.sibling}return!0}var Rs,_s,xn,Sn;if(Ye)Rs=function(a,c){for(var p=c.child;p!==null;){if(p.tag===5||p.tag===6)oe(a,p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},_s=function(){},xn=function(a,c,p,y,S){if(a=a.memoizedProps,a!==y){var T=c.stateNode,I=ai(li.current);p=Me(T,p,a,y,S,I),(c.updateQueue=p)&&wn(c)}},Sn=function(a,c,p,y){p!==y&&wn(c)};else if(Ce){Rs=function(a,c,p,y){for(var S=c.child;S!==null;){if(S.tag===5){var T=S.stateNode;p&&y&&(T=ii(T,S.type,S.memoizedProps,S)),oe(a,T)}else if(S.tag===6)T=S.stateNode,p&&y&&(T=Vl(T,S.memoizedProps,S)),oe(a,T);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)T=S.child,T!==null&&(T.return=S),Rs(a,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===c)break;for(;S.sibling===null;){if(S.return===null||S.return===c)return;S=S.return}S.sibling.return=S.return,S=S.sibling}};var js=function(a,c,p,y){for(var S=c.child;S!==null;){if(S.tag===5){var T=S.stateNode;p&&y&&(T=ii(T,S.type,S.memoizedProps,S)),Fn(a,T)}else if(S.tag===6)T=S.stateNode,p&&y&&(T=Vl(T,S.memoizedProps,S)),Fn(a,T);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)T=S.child,T!==null&&(T.return=S),js(a,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===c)break;for(;S.sibling===null;){if(S.return===null||S.return===c)return;S=S.return}S.sibling.return=S.return,S=S.sibling}};_s=function(a,c){var p=c.stateNode;if(!po(a,c)){a=p.containerInfo;var y=zn(a);js(y,c,!1,!1),p.pendingChildren=y,wn(c),ji(a,y)}},xn=function(a,c,p,y,S){var T=a.stateNode,I=a.memoizedProps;if((a=po(a,c))&&I===y)c.stateNode=T;else{var G=c.stateNode,ce=ai(li.current),Pe=null;I!==y&&(Pe=Me(G,p,I,y,S,ce)),a&&Pe===null?c.stateNode=T:(T=yr(T,Pe,p,I,y,c,a,G),_e(T,p,y,S,ce)&&wn(c),c.stateNode=T,a?wn(c):Rs(T,c,!1,!1))}},Sn=function(a,c,p,y){p!==y?(a=ai(Ss.current),p=ai(li.current),c.stateNode=Ke(y,a,p,c),wn(c)):c.stateNode=a.stateNode}}else _s=function(){},xn=function(){},Sn=function(){};function qn(a,c){if(!nr)switch(a.tailMode){case"hidden":c=a.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?a.tail=null:p.sibling=null;break;case"collapsed":p=a.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function ar(a){var c=a.alternate!==null&&a.alternate.child===a.child,p=0,y=0;if(c)for(var S=a.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags&14680064,y|=S.flags&14680064,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=y,a.childLanes=p,c}function mo(a,c,p){var y=c.pendingProps;switch(Xl(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ar(c),null;case 1:return Br(c.type)&&Ks(),ar(c),null;case 3:return p=c.stateNode,to(),Dt(ln),Dt(Mr),xc(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(a===null||a.child===null)&&(tu(c)?wn(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Si!==null&&(Mu(Si),Si=null))),_s(a,c),ar(c),null;case 5:yc(c),p=ai(Ss.current);var S=c.type;if(a!==null&&c.stateNode!=null)xn(a,c,S,y,p),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(u(166));return ar(c),null}if(a=ai(li.current),tu(c)){if(!Re)throw Error(u(175));a=Ue(c.stateNode,c.type,c.memoizedProps,p,a,c,!Zl),c.updateQueue=a,a!==null&&wn(c)}else{var T=U(S,y,p,a,c);Rs(T,c,!1,!1),c.stateNode=T,_e(T,S,y,p,a)&&wn(c)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return ar(c),null;case 6:if(a&&c.stateNode!=null)Sn(a,c,a.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(u(166));if(a=ai(Ss.current),p=ai(li.current),tu(c)){if(!Re)throw Error(u(176));if(a=c.stateNode,p=c.memoizedProps,(y=mt(a,p,c,!Zl))&&(S=Zr,S!==null))switch(S.tag){case 3:gi(S.stateNode.containerInfo,a,p,(S.mode&1)!==0);break;case 5:At(S.type,S.memoizedProps,S.stateNode,a,p,(S.mode&1)!==0)}y&&wn(c)}else c.stateNode=Ke(y,a,p,c)}return ar(c),null;case 13:if(Dt(dr),y=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(nr&&yn!==null&&(c.mode&1)!==0&&(c.flags&128)===0)tf(),Xs(),c.flags|=98560,S=!1;else if(S=tu(c),y!==null&&y.dehydrated!==null){if(a===null){if(!S)throw Error(u(318));if(!Re)throw Error(u(344));if(S=c.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(u(317));Et(S,c)}else Xs(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;ar(c),S=!1}else Si!==null&&(Mu(Si),Si=null),S=!0;if(!S)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=p,c):(p=y!==null,p!==(a!==null&&a.memoizedState!==null)&&p&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(dr.current&1)!==0?cr===0&&(cr=3):cl())),c.updateQueue!==null&&(c.flags|=4),ar(c),null);case 4:return to(),_s(a,c),a===null&&jr(c.stateNode.containerInfo),ar(c),null;case 10:return Jl(c.type._context),ar(c),null;case 17:return Br(c.type)&&Ks(),ar(c),null;case 19:if(Dt(dr),S=c.memoizedState,S===null)return ar(c),null;if(y=(c.flags&128)!==0,T=S.rendering,T===null)if(y)qn(S,!1);else{if(cr!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(T=au(a),T!==null){for(c.flags|=128,qn(S,!1),a=T.updateQueue,a!==null&&(c.updateQueue=a,c.flags|=4),c.subtreeFlags=0,a=p,p=c.child;p!==null;)y=p,S=a,y.flags&=14680066,T=y.alternate,T===null?(y.childLanes=0,y.lanes=S,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=T.childLanes,y.lanes=T.lanes,y.child=T.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=T.memoizedProps,y.memoizedState=T.memoizedState,y.updateQueue=T.updateQueue,y.type=T.type,S=T.dependencies,y.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext}),p=p.sibling;return tt(dr,dr.current&1|2),c.child}a=a.sibling}S.tail!==null&&Ur()>ga&&(c.flags|=128,y=!0,qn(S,!1),c.lanes=4194304)}else{if(!y)if(a=au(T),a!==null){if(c.flags|=128,y=!0,a=a.updateQueue,a!==null&&(c.updateQueue=a,c.flags|=4),qn(S,!0),S.tail===null&&S.tailMode==="hidden"&&!T.alternate&&!nr)return ar(c),null}else 2*Ur()-S.renderingStartTime>ga&&p!==1073741824&&(c.flags|=128,y=!0,qn(S,!1),c.lanes=4194304);S.isBackwards?(T.sibling=c.child,c.child=T):(a=S.last,a!==null?a.sibling=T:c.child=T,S.last=T)}return S.tail!==null?(c=S.tail,S.rendering=c,S.tail=c.sibling,S.renderingStartTime=Ur(),c.sibling=null,a=dr.current,tt(dr,y?a&1|2:a&1),c):(ar(c),null);case 22:case 23:return Iu(),p=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==p&&(c.flags|=8192),p&&(c.mode&1)!==0?(Nr&1073741824)!==0&&(ar(c),Ye&&c.subtreeFlags&6&&(c.flags|=8192)):ar(c),null;case 24:return null;case 25:return null}throw Error(u(156,c.tag))}function yf(a,c){switch(Xl(c),c.tag){case 1:return Br(c.type)&&Ks(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return to(),Dt(ln),Dt(Mr),xc(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return yc(c),null;case 13:if(Dt(dr),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(u(340));Xs()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return Dt(dr),null;case 4:return to(),null;case 10:return Jl(c.type._context),null;case 22:case 23:return Iu(),null;case 24:return null;default:return null}}var Jo=!1,Vr=!1,Gn=typeof WeakSet=="function"?WeakSet:Set,Le=null;function Vt(a,c){var p=a.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){sr(a,c,y)}else p.current=null}function Kn(a,c,p){try{p()}catch(y){sr(a,c,y)}}var Ac=!1;function wf(a,c){for(Q(a.containerInfo),Le=c;Le!==null;)if(a=Le,c=a.child,(a.subtreeFlags&1028)!==0&&c!==null)c.return=a,Le=c;else for(;Le!==null;){a=Le;try{var p=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,S=p.memoizedState,T=a.stateNode,I=T.getSnapshotBeforeUpdate(a.elementType===a.type?y:Qn(a.type,y),S);T.__reactInternalSnapshotBeforeUpdate=I}break;case 3:Ye&&Ft(a.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(u(163))}}catch(G){sr(a,a.return,G)}if(c=a.sibling,c!==null){c.return=a.return,Le=c;break}Le=a.return}return p=Ac,Ac=!1,p}function go(a,c,p){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var S=y=y.next;do{if((S.tag&a)===a){var T=S.destroy;S.destroy=void 0,T!==void 0&&Kn(c,p,T)}S=S.next}while(S!==y)}}function el(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&a)===a){var y=p.create;p.destroy=y()}p=p.next}while(p!==c)}}function bu(a){var c=a.ref;if(c!==null){var p=a.stateNode;switch(a.tag){case 5:a=de(p);break;default:a=p}typeof c=="function"?c(a):c.current=a}}function ca(a){var c=a.alternate;c!==null&&(a.alternate=null,ca(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&Or(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function $c(a){return a.tag===5||a.tag===3||a.tag===4}function vo(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||$c(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function da(a,c,p){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?De(p,a,c):lt(p,a);else if(y!==4&&(a=a.child,a!==null))for(da(a,c,p),a=a.sibling;a!==null;)da(a,c,p),a=a.sibling}function Nc(a,c,p){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?me(p,a,c):ye(p,a);else if(y!==4&&(a=a.child,a!==null))for(Nc(a,c,p),a=a.sibling;a!==null;)Nc(a,c,p),a=a.sibling}var wr=null,On=!1;function Ei(a,c,p){for(p=p.child;p!==null;)Eu(a,c,p),p=p.sibling}function Eu(a,c,p){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(gs,p)}catch{}switch(p.tag){case 5:Vr||Vt(p,c);case 6:if(Ye){var y=wr,S=On;wr=null,Ei(a,c,p),wr=y,On=S,wr!==null&&(On?$e(wr,p.stateNode):ze(wr,p.stateNode))}else Ei(a,c,p);break;case 18:Ye&&wr!==null&&(On?Qi(wr,p.stateNode):rr(wr,p.stateNode));break;case 4:Ye?(y=wr,S=On,wr=p.stateNode.containerInfo,On=!0,Ei(a,c,p),wr=y,On=S):(Ce&&(y=p.stateNode.containerInfo,S=zn(y),ni(y,S)),Ei(a,c,p));break;case 0:case 11:case 14:case 15:if(!Vr&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){S=y=y.next;do{var T=S,I=T.destroy;T=T.tag,I!==void 0&&((T&2)!==0||(T&4)!==0)&&Kn(p,c,I),S=S.next}while(S!==y)}Ei(a,c,p);break;case 1:if(!Vr&&(Vt(p,c),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(G){sr(p,c,G)}Ei(a,c,p);break;case 21:Ei(a,c,p);break;case 22:p.mode&1?(Vr=(y=Vr)||p.memoizedState!==null,Ei(a,c,p),Vr=y):Ei(a,c,p);break;default:Ei(a,c,p)}}function yo(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var p=a.stateNode;p===null&&(p=a.stateNode=new Gn),c.forEach(function(y){var S=Ep.bind(null,a,y);p.has(y)||(p.add(y),y.then(S,S))})}}function ci(a,c){var p=c.deletions;if(p!==null)for(var y=0;y<p.length;y++){var S=p[y];try{var T=a,I=c;if(Ye){var G=I;e:for(;G!==null;){switch(G.tag){case 5:wr=G.stateNode,On=!1;break e;case 3:wr=G.stateNode.containerInfo,On=!0;break e;case 4:wr=G.stateNode.containerInfo,On=!0;break e}G=G.return}if(wr===null)throw Error(u(160));Eu(T,I,S),wr=null,On=!1}else Eu(T,I,S);var ce=S.alternate;ce!==null&&(ce.return=null),S.return=null}catch(Pe){sr(S,c,Pe)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)fa(c,a),c=c.sibling}function fa(a,c){var p=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(ci(c,a),Yn(a),y&4){try{go(3,a,a.return),el(3,a)}catch(Ie){sr(a,a.return,Ie)}try{go(5,a,a.return)}catch(Ie){sr(a,a.return,Ie)}}break;case 1:ci(c,a),Yn(a),y&512&&p!==null&&Vt(p,p.return);break;case 5:if(ci(c,a),Yn(a),y&512&&p!==null&&Vt(p,p.return),Ye){if(a.flags&32){var S=a.stateNode;try{pt(S)}catch(Ie){sr(a,a.return,Ie)}}if(y&4&&(S=a.stateNode,S!=null)){var T=a.memoizedProps;if(p=p!==null?p.memoizedProps:T,y=a.type,c=a.updateQueue,a.updateQueue=null,c!==null)try{he(S,c,y,p,T,a)}catch(Ie){sr(a,a.return,Ie)}}}break;case 6:if(ci(c,a),Yn(a),y&4&&Ye){if(a.stateNode===null)throw Error(u(162));S=a.stateNode,T=a.memoizedProps,p=p!==null?p.memoizedProps:T;try{dt(S,p,T)}catch(Ie){sr(a,a.return,Ie)}}break;case 3:if(ci(c,a),Yn(a),y&4){if(Ye&&Re&&p!==null&&p.memoizedState.isDehydrated)try{Wt(c.containerInfo)}catch(Ie){sr(a,a.return,Ie)}if(Ce){S=c.containerInfo,T=c.pendingChildren;try{ni(S,T)}catch(Ie){sr(a,a.return,Ie)}}}break;case 4:if(ci(c,a),Yn(a),y&4&&Ce){T=a.stateNode,S=T.containerInfo,T=T.pendingChildren;try{ni(S,T)}catch(Ie){sr(a,a.return,Ie)}}break;case 13:ci(c,a),Yn(a),S=a.child,S.flags&8192&&(T=S.memoizedState!==null,S.stateNode.isHidden=T,!T||S.alternate!==null&&S.alternate.memoizedState!==null||(ol=Ur())),y&4&&yo(a);break;case 22:var I=p!==null&&p.memoizedState!==null;if(a.mode&1?(Vr=(p=Vr)||I,ci(c,a),Vr=p):ci(c,a),Yn(a),y&8192){if(p=a.memoizedState!==null,(a.stateNode.isHidden=p)&&!I&&(a.mode&1)!==0)for(Le=a,y=a.child;y!==null;){for(c=Le=y;Le!==null;){I=Le;var G=I.child;switch(I.tag){case 0:case 11:case 14:case 15:go(4,I,I.return);break;case 1:Vt(I,I.return);var ce=I.stateNode;if(typeof ce.componentWillUnmount=="function"){var Pe=I,He=I.return;try{var gt=Pe;ce.props=gt.memoizedProps,ce.state=gt.memoizedState,ce.componentWillUnmount()}catch(Ie){sr(Pe,He,Ie)}}break;case 5:Vt(I,I.return);break;case 22:if(I.memoizedState!==null){ku(c);continue}}G!==null?(G.return=I,Le=G):ku(c)}y=y.sibling}if(Ye){e:if(y=null,Ye)for(c=a;;){if(c.tag===5){if(y===null){y=c;try{S=c.stateNode,p?Ut(S):It(c.stateNode,c.memoizedProps)}catch(Ie){sr(a,a.return,Ie)}}}else if(c.tag===6){if(y===null)try{T=c.stateNode,p?Mt(T):qt(T,c.memoizedProps)}catch(Ie){sr(a,a.return,Ie)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;y===c&&(y=null),c=c.return}y===c&&(y=null),c.sibling.return=c.return,c=c.sibling}}}break;case 19:ci(c,a),Yn(a),y&4&&yo(a);break;case 21:break;default:ci(c,a),Yn(a)}}function Yn(a){var c=a.flags;if(c&2){try{if(Ye){e:{for(var p=a.return;p!==null;){if($c(p)){var y=p;break e}p=p.return}throw Error(u(160))}switch(y.tag){case 5:var S=y.stateNode;y.flags&32&&(pt(S),y.flags&=-33);var T=vo(a);Nc(a,T,S);break;case 3:case 4:var I=y.stateNode.containerInfo,G=vo(a);da(a,G,I);break;default:throw Error(u(161))}}}catch(ce){sr(a,a.return,ce)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function tl(a,c,p){Le=a,Pu(a)}function Pu(a,c,p){for(var y=(a.mode&1)!==0;Le!==null;){var S=Le,T=S.child;if(S.tag===22&&y){var I=S.memoizedState!==null||Jo;if(!I){var G=S.alternate,ce=G!==null&&G.memoizedState!==null||Vr;G=Jo;var Pe=Vr;if(Jo=I,(Vr=ce)&&!Pe)for(Le=S;Le!==null;)I=Le,ce=I.child,I.tag===22&&I.memoizedState!==null?Tu(S):ce!==null?(ce.return=I,Le=ce):Tu(S);for(;T!==null;)Le=T,Pu(T),T=T.sibling;Le=S,Jo=G,Vr=Pe}Cu(a)}else(S.subtreeFlags&8772)!==0&&T!==null?(T.return=S,Le=T):Cu(a)}}function Cu(a){for(;Le!==null;){var c=Le;if((c.flags&8772)!==0){var p=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Vr||el(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!Vr)if(p===null)y.componentDidMount();else{var S=c.elementType===c.type?p.memoizedProps:Qn(c.type,p.memoizedProps);y.componentDidUpdate(S,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var T=c.updateQueue;T!==null&&af(c,T,y);break;case 3:var I=c.updateQueue;if(I!==null){if(p=null,c.child!==null)switch(c.child.tag){case 5:p=de(c.child.stateNode);break;case 1:p=c.child.stateNode}af(c,I,p)}break;case 5:var G=c.stateNode;p===null&&c.flags&4&&wt(G,c.type,c.memoizedProps,c);break;case 6:break;case 4:break;case 12:break;case 13:if(Re&&c.memoizedState===null){var ce=c.alternate;if(ce!==null){var Pe=ce.memoizedState;if(Pe!==null){var He=Pe.dehydrated;He!==null&&_t(He)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(u(163))}Vr||c.flags&512&&bu(c)}catch(gt){sr(c,c.return,gt)}}if(c===a){Le=null;break}if(p=c.sibling,p!==null){p.return=c.return,Le=p;break}Le=c.return}}function ku(a){for(;Le!==null;){var c=Le;if(c===a){Le=null;break}var p=c.sibling;if(p!==null){p.return=c.return,Le=p;break}Le=c.return}}function Tu(a){for(;Le!==null;){var c=Le;try{switch(c.tag){case 0:case 11:case 15:var p=c.return;try{el(4,c)}catch(ce){sr(c,p,ce)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var S=c.return;try{y.componentDidMount()}catch(ce){sr(c,S,ce)}}var T=c.return;try{bu(c)}catch(ce){sr(c,T,ce)}break;case 5:var I=c.return;try{bu(c)}catch(ce){sr(c,I,ce)}}}catch(ce){sr(c,c.return,ce)}if(c===a){Le=null;break}var G=c.sibling;if(G!==null){G.return=c.return,Le=G;break}Le=c.return}}var ts=0,bn=1,zi=2,rl=3,ha=4;if(typeof Symbol=="function"&&Symbol.for){var Xn=Symbol.for;ts=Xn("selector.component"),bn=Xn("selector.has_pseudo_class"),zi=Xn("selector.role"),rl=Xn("selector.test_id"),ha=Xn("selector.text")}function Fi(a){var c=bt(a);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(u(364));return c}if(a=ri(a),a===null)throw Error(u(362));return a.stateNode.current}function pa(a,c){switch(c.$$typeof){case ts:if(a.type===c.value)return!0;break;case bn:e:{c=c.value,a=[a,0];for(var p=0;p<a.length;){var y=a[p++],S=a[p++],T=c[S];if(y.tag!==5||!on(y)){for(;T!=null&&pa(y,T);)S++,T=c[S];if(S===c.length){c=!0;break e}else for(y=y.child;y!==null;)a.push(y,S),y=y.sibling}}c=!1}return c;case zi:if(a.tag===5&&ve(a.stateNode,c.value))return!0;break;case ha:if((a.tag===5||a.tag===6)&&(a=ps(a),a!==null&&0<=a.indexOf(c.value)))return!0;break;case rl:if(a.tag===5&&(a=a.memoizedProps["data-testname"],typeof a=="string"&&a.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(u(365))}return!1}function Ru(a){switch(a.$$typeof){case ts:return"<"+($(a.value)||"Unknown")+">";case bn:return":has("+(Ru(a)||"")+")";case zi:return'[role="'+a.value+'"]';case ha:return'"'+a.value+'"';case rl:return'[data-testname="'+a.value+'"]';default:throw Error(u(365))}}function Di(a,c){var p=[];a=[a,0];for(var y=0;y<a.length;){var S=a[y++],T=a[y++],I=c[T];if(S.tag!==5||!on(S)){for(;I!=null&&pa(S,I);)T++,I=c[T];if(T===c.length)p.push(S);else for(S=S.child;S!==null;)a.push(S,T),S=S.sibling}}return p}function Bi(a,c){if(!Tn)throw Error(u(363));a=Fi(a),a=Di(a,c),c=[],a=Array.from(a);for(var p=0;p<a.length;){var y=a[p++];if(y.tag===5)on(y)||c.push(y.stateNode);else for(y=y.child;y!==null;)a.push(y),y=y.sibling}return c}var _u=Math.ceil,ma=d.ReactCurrentDispatcher,nl=d.ReactCurrentOwner,mr=d.ReactCurrentBatchConfig,yt=0,Yt=null,ur=null,xr=0,Nr=0,Os=or(0),cr=0,il=null,rs=0,er=0,sl=0,wo=null,cn=null,ol=0,ga=1/0,En=null;function Gt(){ga=Ur()+500}var gr=!1,Er=null,Pi=null,Ls=!1,di=null,ju=0,Pr=0,va=null,ll=-1,al=0;function ir(){return(yt&6)!==0?Ur():ll!==-1?ll:ll=Ur()}function zr(a){return(a.mode&1)===0?1:(yt&2)!==0&&xr!==0?xr&-xr:xp.transition!==null?(al===0&&(al=Ga()),al):(a=kt,a!==0?a:pr())}function dn(a,c,p,y){if(50<Pr)throw Pr=0,va=null,Error(u(185));oi(a,p,y),((yt&2)===0||a!==Yt)&&(a===Yt&&((yt&2)===0&&(er|=p),cr===4&&ns(a,xr)),fn(a,y),p===1&&yt===0&&(c.mode&1)===0&&(Gt(),Bo&&Xr()))}function fn(a,c){var p=a.callbackNode;Gd(a,c);var y=No(a,a===Yt?xr:0);if(y===0)p!==null&&Kd(p),a.callbackNode=null,a.callbackPriority=0;else if(c=y&-y,a.callbackPriority!==c){if(p!=null&&Kd(p),c===1)a.tag===0?Xd(zc.bind(null,a)):Ja(zc.bind(null,a)),Sr?hs(function(){(yt&6)===0&&Xr()}):Mi(Ka,Xr),p=null;else{switch(Fo(y)){case 1:p=Ka;break;case 4:p=Ya;break;case 16:p=Xa;break;case 536870912:p=wp;break;default:p=Xa}p=Vc(p,Ou.bind(null,a))}a.callbackPriority=c,a.callbackNode=p}}function Ou(a,c){if(ll=-1,al=0,(yt&6)!==0)throw Error(u(327));var p=a.callbackNode;if(is()&&a.callbackNode!==p)return null;var y=No(a,a===Yt?xr:0);if(y===0)return null;if((y&30)!==0||(y&a.expiredLanes)!==0||c)c=xo(a,y);else{c=y;var S=yt;yt|=2;var T=Dc();(Yt!==a||xr!==c)&&(En=null,Gt(),Ms(a,c));do try{Bc();break}catch(G){ul(a,G)}while(!0);pc(),ma.current=T,yt=S,ur!==null?c=0:(Yt=null,xr=0,c=cr)}if(c!==0){if(c===2&&(S=qa(a),S!==0&&(y=S,c=Lu(a,S))),c===1)throw p=il,Ms(a,0),ns(a,y),fn(a,Ur()),p;if(c===6)ns(a,y);else{if(S=a.current.alternate,(y&30)===0&&!xf(S)&&(c=xo(a,y),c===2&&(T=qa(a),T!==0&&(y=T,c=Lu(a,T))),c===1))throw p=il,Ms(a,0),ns(a,y),fn(a,Ur()),p;switch(a.finishedWork=S,a.finishedLanes=y,c){case 0:case 1:throw Error(u(345));case 2:Is(a,cn,En);break;case 3:if(ns(a,y),(y&130023424)===y&&(c=ol+500-Ur(),10<c)){if(No(a,0)!==0)break;if(S=a.suspendedLanes,(S&y)!==y){ir(),a.pingedLanes|=a.suspendedLanes&S;break}a.timeoutHandle=Qe(Is.bind(null,a,cn,En),c);break}Is(a,cn,En);break;case 4:if(ns(a,y),(y&4194240)===y)break;for(c=a.eventTimes,S=-1;0<y;){var I=31-Bn(y);T=1<<I,I=c[I],I>S&&(S=I),y&=~T}if(y=S,y=Ur()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*_u(y/1960))-y,10<y){a.timeoutHandle=Qe(Is.bind(null,a,cn,En),y);break}Is(a,cn,En);break;case 5:Is(a,cn,En);break;default:throw Error(u(329))}}}return fn(a,Ur()),a.callbackNode===p?Ou.bind(null,a):null}function Lu(a,c){var p=wo;return a.current.memoizedState.isDehydrated&&(Ms(a,c).flags|=256),a=xo(a,c),a!==2&&(c=cn,cn=p,c!==null&&Mu(c)),a}function Mu(a){cn===null?cn=a:cn.push.apply(cn,a)}function xf(a){for(var c=a;;){if(c.flags&16384){var p=c.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var S=p[y],T=S.getSnapshot;S=S.value;try{if(!yi(T(),S))return!1}catch{return!1}}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function ns(a,c){for(c&=~sl,c&=~er,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var p=31-Bn(c),y=1<<p;a[p]=-1,c&=~y}}function zc(a){if((yt&6)!==0)throw Error(u(327));is();var c=No(a,0);if((c&1)===0)return fn(a,Ur()),null;var p=xo(a,c);if(a.tag!==0&&p===2){var y=qa(a);y!==0&&(c=y,p=Lu(a,y))}if(p===1)throw p=il,Ms(a,0),ns(a,c),fn(a,Ur()),p;if(p===6)throw Error(u(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,Is(a,cn,En),fn(a,Ur()),null}function Fc(a){di!==null&&di.tag===0&&(yt&6)===0&&is();var c=yt;yt|=1;var p=mr.transition,y=kt;try{if(mr.transition=null,kt=1,a)return a()}finally{kt=y,mr.transition=p,yt=c,(yt&6)===0&&Xr()}}function Iu(){Nr=Os.current,Dt(Os)}function Ms(a,c){a.finishedWork=null,a.finishedLanes=0;var p=a.timeoutHandle;if(p!==ft&&(a.timeoutHandle=ft,nt(p)),ur!==null)for(p=ur.return;p!==null;){var y=p;switch(Xl(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Ks();break;case 3:to(),Dt(ln),Dt(Mr),xc();break;case 5:yc(y);break;case 4:to();break;case 13:Dt(dr);break;case 19:Dt(dr);break;case 10:Jl(y.type._context);break;case 22:case 23:Iu()}p=p.return}if(Yt=a,ur=a=As(a.current,null),xr=Nr=c,cr=0,il=null,sl=er=rs=0,cn=wo=null,ys!==null){for(c=0;c<ys.length;c++)if(p=ys[c],y=p.interleaved,y!==null){p.interleaved=null;var S=y.next,T=p.pending;if(T!==null){var I=T.next;T.next=S,y.next=I}p.pending=y}ys=null}return a}function ul(a,c){do{var p=ur;try{if(pc(),jn.current=ao,qo){for(var y=lr.memoizedState;y!==null;){var S=y.queue;S!==null&&(S.pending=null),y=y.next}qo=!1}if(bs=0,Ar=br=lr=null,ta=!1,ra=0,nl.current=null,p===null||p.return===null){cr=1,il=c,ur=null;break}e:{var T=a,I=p.return,G=p,ce=c;if(c=xr,G.flags|=32768,ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var Pe=ce,He=G,gt=He.tag;if((He.mode&1)===0&&(gt===0||gt===11||gt===15)){var Ie=He.alternate;Ie?(He.updateQueue=Ie.updateQueue,He.memoizedState=Ie.memoizedState,He.lanes=Ie.lanes):(He.updateQueue=null,He.memoizedState=null)}var tr=gf(I);if(tr!==null){tr.flags&=-257,Cs(tr,I,G,T,c),tr.mode&1&&mf(T,Pe,c),c=tr,ce=Pe;var Qt=c.updateQueue;if(Qt===null){var Pn=new Set;Pn.add(ce),c.updateQueue=Pn}else Qt.add(ce);break e}else{if((c&1)===0){mf(T,Pe,c),cl();break e}ce=Error(u(426))}}else if(nr&&G.mode&1){var Ui=gf(I);if(Ui!==null){(Ui.flags&65536)===0&&(Ui.flags|=256),Cs(Ui,I,G,T,c),fc(uo(ce,G));break e}}T=ce=uo(ce,G),cr!==4&&(cr=2),wo===null?wo=[T]:wo.push(T),T=I;do{switch(T.tag){case 3:T.flags|=65536,c&=-c,T.lanes|=c;var se=Ai(T,ce,c);Vo(T,se);break e;case 1:G=ce;var Z=T.type,pe=T.stateNode;if((T.flags&128)===0&&(typeof Z.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(Pi===null||!Pi.has(pe)))){T.flags|=65536,c&=-c,T.lanes|=c;var Ae=yu(T,G,c);Vo(T,Ae);break e}}T=T.return}while(T!==null)}Hc(p)}catch(it){c=it,ur===p&&p!==null&&(ur=p=p.return);continue}break}while(!0)}function Dc(){var a=ma.current;return ma.current=ao,a===null?ao:a}function cl(){(cr===0||cr===3||cr===2)&&(cr=4),Yt===null||(rs&268435455)===0&&(er&268435455)===0||ns(Yt,xr)}function xo(a,c){var p=yt;yt|=2;var y=Dc();(Yt!==a||xr!==c)&&(En=null,Ms(a,c));do try{Sf();break}catch(S){ul(a,S)}while(!0);if(pc(),yt=p,ma.current=y,ur!==null)throw Error(u(261));return Yt=null,xr=0,cr}function Sf(){for(;ur!==null;)Uc(ur)}function Bc(){for(;ur!==null&&!Yd();)Uc(ur)}function Uc(a){var c=kf(a.alternate,a,Nr);a.memoizedProps=a.pendingProps,c===null?Hc(a):ur=c,nl.current=null}function Hc(a){var c=a;do{var p=c.alternate;if(a=c.return,(c.flags&32768)===0){if(p=mo(p,c,Nr),p!==null){ur=p;return}}else{if(p=yf(p,c),p!==null){p.flags&=32767,ur=p;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{cr=6,ur=null;return}}if(c=c.sibling,c!==null){ur=c;return}ur=c=a}while(c!==null);cr===0&&(cr=5)}function Is(a,c,p){var y=kt,S=mr.transition;try{mr.transition=null,kt=1,bf(a,c,p,y)}finally{mr.transition=S,kt=y}return null}function bf(a,c,p,y){do is();while(di!==null);if((yt&6)!==0)throw Error(u(327));p=a.finishedWork;var S=a.finishedLanes;if(p===null)return null;if(a.finishedWork=null,a.finishedLanes=0,p===a.current)throw Error(u(177));a.callbackNode=null,a.callbackPriority=0;var T=p.lanes|p.childLanes;if(ms(a,T),a===Yt&&(ur=Yt=null,xr=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Ls||(Ls=!0,Vc(Xa,function(){return is(),null})),T=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||T){T=mr.transition,mr.transition=null;var I=kt;kt=1;var G=yt;yt|=4,nl.current=null,wf(a,p),fa(p,a),ue(a.containerInfo),a.current=p,tl(p),Gl(),yt=G,kt=I,mr.transition=T}else a.current=p;if(Ls&&(Ls=!1,di=a,ju=S),T=a.pendingLanes,T===0&&(Pi=null),Do(p.stateNode),fn(a,Ur()),c!==null)for(y=a.onRecoverableError,p=0;p<c.length;p++)S=c[p],y(S.value,{componentStack:S.stack,digest:S.digest});if(gr)throw gr=!1,a=Er,Er=null,a;return(ju&1)!==0&&a.tag!==0&&is(),T=a.pendingLanes,(T&1)!==0?a===va?Pr++:(Pr=0,va=a):Pr=0,Xr(),null}function is(){if(di!==null){var a=Fo(ju),c=mr.transition,p=kt;try{if(mr.transition=null,kt=16>a?16:a,di===null)var y=!1;else{if(a=di,di=null,ju=0,(yt&6)!==0)throw Error(u(331));var S=yt;for(yt|=4,Le=a.current;Le!==null;){var T=Le,I=T.child;if((Le.flags&16)!==0){var G=T.deletions;if(G!==null){for(var ce=0;ce<G.length;ce++){var Pe=G[ce];for(Le=Pe;Le!==null;){var He=Le;switch(He.tag){case 0:case 11:case 15:go(8,He,T)}var gt=He.child;if(gt!==null)gt.return=He,Le=gt;else for(;Le!==null;){He=Le;var Ie=He.sibling,tr=He.return;if(ca(He),He===Pe){Le=null;break}if(Ie!==null){Ie.return=tr,Le=Ie;break}Le=tr}}}var Qt=T.alternate;if(Qt!==null){var Pn=Qt.child;if(Pn!==null){Qt.child=null;do{var Ui=Pn.sibling;Pn.sibling=null,Pn=Ui}while(Pn!==null)}}Le=T}}if((T.subtreeFlags&2064)!==0&&I!==null)I.return=T,Le=I;else e:for(;Le!==null;){if(T=Le,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:go(9,T,T.return)}var se=T.sibling;if(se!==null){se.return=T.return,Le=se;break e}Le=T.return}}var Z=a.current;for(Le=Z;Le!==null;){I=Le;var pe=I.child;if((I.subtreeFlags&2064)!==0&&pe!==null)pe.return=I,Le=pe;else e:for(I=Z;Le!==null;){if(G=Le,(G.flags&2048)!==0)try{switch(G.tag){case 0:case 11:case 15:el(9,G)}}catch(it){sr(G,G.return,it)}if(G===I){Le=null;break e}var Ae=G.sibling;if(Ae!==null){Ae.return=G.return,Le=Ae;break e}Le=G.return}}if(yt=S,Xr(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(gs,a)}catch{}y=!0}return y}finally{kt=p,mr.transition=c}}return!1}function Wc(a,c,p){c=uo(p,c),c=Ai(a,c,1),a=Xi(a,c,1),c=ir(),a!==null&&(oi(a,1,c),fn(a,c))}function sr(a,c,p){if(a.tag===3)Wc(a,a,p);else for(;c!==null;){if(c.tag===3){Wc(c,a,p);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Pi===null||!Pi.has(y))){a=uo(p,a),a=yu(c,a,1),c=Xi(c,a,1),a=ir(),c!==null&&(oi(c,1,a),fn(c,a));break}}c=c.return}}function Ef(a,c,p){var y=a.pingCache;y!==null&&y.delete(c),c=ir(),a.pingedLanes|=a.suspendedLanes&p,Yt===a&&(xr&p)===p&&(cr===4||cr===3&&(xr&130023424)===xr&&500>Ur()-ol?Ms(a,0):sl|=p),fn(a,c)}function Pf(a,c){c===0&&((a.mode&1)===0?c=1:(c=ql,ql<<=1,(ql&130023424)===0&&(ql=4194304)));var p=ir();a=bi(a,c),a!==null&&(oi(a,c,p),fn(a,p))}function Cf(a){var c=a.memoizedState,p=0;c!==null&&(p=c.retryLane),Pf(a,p)}function Ep(a,c){var p=0;switch(a.tag){case 13:var y=a.stateNode,S=a.memoizedState;S!==null&&(p=S.retryLane);break;case 19:y=a.stateNode;break;default:throw Error(u(314))}y!==null&&y.delete(c),Pf(a,p)}var kf;kf=function(a,c,p){if(a!==null)if(a.memoizedProps!==c.pendingProps||ln.current)$r=!0;else{if((a.lanes&p)===0&&(c.flags&128)===0)return $r=!1,Ts(a,c,p);$r=(a.flags&131072)!==0}else $r=!1,nr&&(c.flags&1048576)!==0&&Zd(c,Ys,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;ua(a,c),a=c.pendingProps;var S=qi(c,Mr.current);Wo(c,p),S=na(null,c,y,a,S,p);var T=uu();return c.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Br(y)?(T=!0,Ao(c)):T=!1,c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,gc(c),S.updater=oa,c.stateNode=S,S._reactInternals=c,Ii(c,y,a,p),c=an(null,c,y,!0,T,p)):(c.tag=0,nr&&T&&Yl(c),Wr(null,c,S,p),c=c.child),c;case 16:y=c.elementType;e:{switch(ua(a,c),a=c.pendingProps,S=y._init,y=S(y._payload),c.type=y,S=c.tag=Pp(y),a=Qn(y,a),S){case 0:c=$i(null,c,y,a,p);break e;case 1:c=en(null,c,y,a,p);break e;case 11:c=wu(null,c,y,a,p);break e;case 14:c=co(null,c,y,Qn(y.type,a),p);break e}throw Error(u(306,y,""))}return c;case 0:return y=c.type,S=c.pendingProps,S=c.elementType===y?S:Qn(y,S),$i(a,c,y,S,p);case 1:return y=c.type,S=c.pendingProps,S=c.elementType===y?S:Qn(y,S),en(a,c,y,S,p);case 3:e:{if(ks(c),a===null)throw Error(u(387));y=c.pendingProps,T=c.memoizedState,S=T.element,lf(a,c),ws(c,y,null,p);var I=c.memoizedState;if(y=I.element,Re&&T.isDehydrated)if(T={element:y,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},c.updateQueue.baseState=T,c.memoizedState=T,c.flags&256){S=uo(Error(u(423)),c),c=fo(a,c,y,p,S);break e}else if(y!==S){S=uo(Error(u(424)),c),c=fo(a,c,y,p,S);break e}else for(Re&&(yn=qe(c.stateNode.containerInfo),Zr=c,nr=!0,Si=null,Zl=!1),p=sf(c,null,y,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Xs(),y===S){c=es(a,c,p);break e}Wr(a,c,y,p)}c=c.child}return c;case 5:return vc(c),a===null&&dc(c),y=c.type,S=c.pendingProps,T=a!==null?a.memoizedProps:null,I=S.children,Ne(y,S)?I=null:T!==null&&Ne(y,T)&&(c.flags|=32),Kt(a,c),Wr(a,c,I,p),c.child;case 6:return a===null&&dc(c),null;case 13:return Ic(a,c,p);case 4:return lu(c,c.stateNode.containerInfo),y=c.pendingProps,a===null?c.child=Js(c,null,y,p):Wr(a,c,y,p),c.child;case 11:return y=c.type,S=c.pendingProps,S=c.elementType===y?S:Qn(y,S),wu(a,c,y,S,p);case 7:return Wr(a,c,c.pendingProps,p),c.child;case 8:return Wr(a,c,c.pendingProps.children,p),c.child;case 12:return Wr(a,c,c.pendingProps.children,p),c.child;case 10:e:{if(y=c.type._context,S=c.pendingProps,T=c.memoizedProps,I=S.value,of(c,y,I),T!==null)if(yi(T.value,I)){if(T.children===S.children&&!ln.current){c=es(a,c,p);break e}}else for(T=c.child,T!==null&&(T.return=c);T!==null;){var G=T.dependencies;if(G!==null){I=T.child;for(var ce=G.firstContext;ce!==null;){if(ce.context===y){if(T.tag===1){ce=Yi(-1,p&-p),ce.tag=2;var Pe=T.updateQueue;if(Pe!==null){Pe=Pe.shared;var He=Pe.pending;He===null?ce.next=ce:(ce.next=He.next,He.next=ce),Pe.pending=ce}}T.lanes|=p,ce=T.alternate,ce!==null&&(ce.lanes|=p),eo(T.return,p,c),G.lanes|=p;break}ce=ce.next}}else if(T.tag===10)I=T.type===c.type?null:T.child;else if(T.tag===18){if(I=T.return,I===null)throw Error(u(341));I.lanes|=p,G=I.alternate,G!==null&&(G.lanes|=p),eo(I,p,c),I=T.sibling}else I=T.child;if(I!==null)I.return=T;else for(I=T;I!==null;){if(I===c){I=null;break}if(T=I.sibling,T!==null){T.return=I.return,I=T;break}I=I.return}T=I}Wr(a,c,S.children,p),c=c.child}return c;case 9:return S=c.type,y=c.pendingProps.children,Wo(c,p),S=Hn(S),y=y(S),c.flags|=1,Wr(a,c,y,p),c.child;case 14:return y=c.type,S=Qn(y,c.pendingProps),S=Qn(y.type,S),co(a,c,y,S,p);case 15:return Ji(a,c,c.type,c.pendingProps,p);case 17:return y=c.type,S=c.pendingProps,S=c.elementType===y?S:Qn(y,S),ua(a,c),c.tag=1,Br(y)?(a=!0,Ao(c)):a=!1,Wo(c,p),pf(c,y,S),Ii(c,y,S,p),an(null,c,y,!0,a,p);case 19:return Su(a,c,p);case 22:return Jt(a,c,p)}throw Error(u(156,c.tag))};function Vc(a,c){return Mi(a,c)}function Tf(a,c,p,y){this.tag=a,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(a,c,p,y){return new Tf(a,c,p,y)}function dl(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Pp(a){if(typeof a=="function")return dl(a)?1:0;if(a!=null){if(a=a.$$typeof,a===C)return 11;if(a===L)return 14}return 2}function As(a,c){var p=a.alternate;return p===null?(p=Zn(a.tag,c,a.key,a.mode),p.elementType=a.elementType,p.type=a.type,p.stateNode=a.stateNode,p.alternate=a,a.alternate=p):(p.pendingProps=c,p.type=a.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=a.flags&14680064,p.childLanes=a.childLanes,p.lanes=a.lanes,p.child=a.child,p.memoizedProps=a.memoizedProps,p.memoizedState=a.memoizedState,p.updateQueue=a.updateQueue,c=a.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=a.sibling,p.index=a.index,p.ref=a.ref,p}function Au(a,c,p,y,S,T){var I=2;if(y=a,typeof a=="function")dl(a)&&(I=1);else if(typeof a=="string")I=5;else e:switch(a){case g:return tn(p.children,S,T,c);case w:I=8,S|=8;break;case b:return a=Zn(12,p,c,S|2),a.elementType=b,a.lanes=T,a;case j:return a=Zn(13,p,c,S),a.elementType=j,a.lanes=T,a;case O:return a=Zn(19,p,c,S),a.elementType=O,a.lanes=T,a;case F:return fl(p,S,T,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case R:I=10;break e;case P:I=9;break e;case C:I=11;break e;case L:I=14;break e;case A:I=16,y=null;break e}throw Error(u(130,a==null?a:typeof a,""))}return c=Zn(I,p,c,S),c.elementType=a,c.type=y,c.lanes=T,c}function tn(a,c,p,y){return a=Zn(7,a,y,c),a.lanes=p,a}function fl(a,c,p,y){return a=Zn(22,a,y,c),a.elementType=F,a.lanes=p,a.stateNode={isHidden:!1},a}function hl(a,c,p){return a=Zn(6,a,null,c),a.lanes=p,a}function $u(a,c,p){return c=Zn(4,a.children!==null?a.children:[],a.key,c),c.lanes=p,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function Rf(a,c,p,y,S){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ft,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zo(0),this.expirationTimes=zo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zo(0),this.identifierPrefix=y,this.onRecoverableError=S,Re&&(this.mutableSourceEagerHydrationData=null)}function Qc(a,c,p,y,S,T,I,G,ce){return a=new Rf(a,c,p,G,ce),c===1?(c=1,T===!0&&(c|=8)):c=0,T=Zn(3,null,null,c),a.current=T,T.stateNode=a,T.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},gc(T),a}function Nu(a){if(!a)return gn;a=a._reactInternals;e:{if(fe(a)!==a||a.tag!==1)throw Error(u(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Br(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(u(171))}if(a.tag===1){var p=a.type;if(Br(p))return Qd(a,p,c)}return c}function So(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(u(188)):(a=Object.keys(a).join(","),Error(u(268,a)));return a=Y(c),a===null?null:a.stateNode}function zu(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var p=a.retryLane;a.retryLane=p!==0&&p<c?p:c}}function pl(a,c){zu(a,c),(a=a.alternate)&&zu(a,c)}function Cp(a){return a=Y(a),a===null?null:a.stateNode}function _f(){return null}return r.attemptContinuousHydration=function(a){if(a.tag===13){var c=bi(a,134217728);if(c!==null){var p=ir();dn(c,a,134217728,p)}pl(a,134217728)}},r.attemptDiscreteHydration=function(a){if(a.tag===13){var c=bi(a,1);if(c!==null){var p=ir();dn(c,a,1,p)}pl(a,1)}},r.attemptHydrationAtCurrentPriority=function(a){if(a.tag===13){var c=zr(a),p=bi(a,c);if(p!==null){var y=ir();dn(p,a,c,y)}pl(a,c)}},r.attemptSynchronousHydration=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var p=$o(c.pendingLanes);p!==0&&(Li(c,p|1),fn(c,Ur()),(yt&6)===0&&(Gt(),Xr()))}break;case 13:Fc(function(){var y=bi(a,1);if(y!==null){var S=ir();dn(y,a,1,S)}}),pl(a,1)}},r.batchedUpdates=function(a,c){var p=yt;yt|=1;try{return a(c)}finally{yt=p,yt===0&&(Gt(),Bo&&Xr())}},r.createComponentSelector=function(a){return{$$typeof:ts,value:a}},r.createContainer=function(a,c,p,y,S,T,I){return Qc(a,c,!1,null,p,y,S,T,I)},r.createHasPseudoClassSelector=function(a){return{$$typeof:bn,value:a}},r.createHydrationContainer=function(a,c,p,y,S,T,I,G,ce){return a=Qc(p,y,!0,a,S,T,I,G,ce),a.context=Nu(null),p=a.current,y=ir(),S=zr(p),T=Yi(y,S),T.callback=c??null,Xi(p,T,S),a.current.lanes=S,oi(a,S,y),fn(a,y),a},r.createPortal=function(a,c,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:v,key:y==null?null:""+y,children:a,containerInfo:c,implementation:p}},r.createRoleSelector=function(a){return{$$typeof:zi,value:a}},r.createTestNameSelector=function(a){return{$$typeof:rl,value:a}},r.createTextSelector=function(a){return{$$typeof:ha,value:a}},r.deferredUpdates=function(a){var c=kt,p=mr.transition;try{return mr.transition=null,kt=16,a()}finally{kt=c,mr.transition=p}},r.discreteUpdates=function(a,c,p,y,S){var T=kt,I=mr.transition;try{return mr.transition=null,kt=1,a(c,p,y,S)}finally{kt=T,mr.transition=I,yt===0&&Gt()}},r.findAllNodes=Bi,r.findBoundingRects=function(a,c){if(!Tn)throw Error(u(363));c=Bi(a,c),a=[];for(var p=0;p<c.length;p++)a.push(_i(c[p]));for(c=a.length-1;0<c;c--){p=a[c];for(var y=p.x,S=y+p.width,T=p.y,I=T+p.height,G=c-1;0<=G;G--)if(c!==G){var ce=a[G],Pe=ce.x,He=Pe+ce.width,gt=ce.y,Ie=gt+ce.height;if(y>=Pe&&T>=gt&&S<=He&&I<=Ie){a.splice(c,1);break}else if(y!==Pe||p.width!==ce.width||Ie<T||gt>I){if(!(T!==gt||p.height!==ce.height||He<y||Pe>S)){Pe>y&&(ce.width+=Pe-y,ce.x=y),He<S&&(ce.width=S-Pe),a.splice(c,1);break}}else{gt>T&&(ce.height+=gt-T,ce.y=T),Ie<I&&(ce.height=I-gt),a.splice(c,1);break}}}return a},r.findHostInstance=So,r.findHostInstanceWithNoPortals=function(a){return a=H(a),a=a!==null?te(a):null,a===null?null:a.stateNode},r.findHostInstanceWithWarning=function(a){return So(a)},r.flushControlled=function(a){var c=yt;yt|=1;var p=mr.transition,y=kt;try{mr.transition=null,kt=1,a()}finally{kt=y,mr.transition=p,yt=c,yt===0&&(Gt(),Xr())}},r.flushPassiveEffects=is,r.flushSync=Fc,r.focusWithin=function(a,c){if(!Tn)throw Error(u(363));for(a=Fi(a),c=Di(a,c),c=Array.from(c),a=0;a<c.length;){var p=c[a++];if(!on(p)){if(p.tag===5&&ne(p.stateNode))return!0;for(p=p.child;p!==null;)c.push(p),p=p.sibling}}return!1},r.getCurrentUpdatePriority=function(){return kt},r.getFindAllNodesFailureDescription=function(a,c){if(!Tn)throw Error(u(363));var p=0,y=[];a=[Fi(a),0];for(var S=0;S<a.length;){var T=a[S++],I=a[S++],G=c[I];if((T.tag!==5||!on(T))&&(pa(T,G)&&(y.push(Ru(G)),I++,I>p&&(p=I)),I<c.length))for(T=T.child;T!==null;)a.push(T,I),T=T.sibling}if(p<c.length){for(a=[];p<c.length;p++)a.push(Ru(c[p]));return`findAllNodes was able to match part of the selector:
  `+(y.join(" > ")+`

No matching component was found for:
  `)+a.join(" > ")}return null},r.getPublicRootInstance=function(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return de(a.child.stateNode);default:return a.child.stateNode}},r.injectIntoDevTools=function(a){if(a={bundleType:a.bundleType,version:a.version,rendererPackageName:a.rendererPackageName,rendererConfig:a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:d.ReactCurrentDispatcher,findHostInstanceByFiber:Cp,findFiberByHostInstance:a.findFiberByHostInstance||_f,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")a=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)a=!0;else{try{gs=c.inject(a),Rn=c}catch{}a=!!c.checkDCE}}return a},r.isAlreadyRendering=function(){return!1},r.observeVisibleRects=function(a,c,p,y){if(!Tn)throw Error(u(363));a=Bi(a,c);var S=Se(a,p,y).disconnect;return{disconnect:function(){S()}}},r.registerMutableSourceForHydration=function(a,c){var p=c._getVersion;p=p(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,p]:a.mutableSourceEagerHydrationData.push(c,p)},r.runWithPriority=function(a,c){var p=kt;try{return kt=a,c()}finally{kt=p}},r.shouldError=function(){return null},r.shouldSuspend=function(){return!1},r.updateContainer=function(a,c,p,y){var S=c.current,T=ir(),I=zr(S);return p=Nu(p),c.context===null?c.context=p:c.pendingContext=p,c=Yi(T,I),c.payload={element:a},y=y===void 0?null:y,y!==null&&(c.callback=y),a=Xi(S,c,I),a!==null&&(dn(a,S,I,T),ea(a,S,I)),I},r}),Rm}var i0;function n_(){return i0||(i0=1,Tm.exports=r_()),Tm.exports}var i_=n_();const s_=Ua(i_);var o_=Object.defineProperty,l_=(t,e,r)=>e in t?o_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nh=(t,e,r)=>(l_(t,typeof e!="symbol"?e+"":e,r),r);function Aa(t){return t.endsWith("info.json")?t:t.endsWith("/")?`${t}info.json`:`${t}/info.json`}var a_="http://library.stanford.edu/iiif/image-api/compliance.html#level0",y1="http://library.stanford.edu/iiif/image-api/compliance.html#level1",w1="http://library.stanford.edu/iiif/image-api/compliance.html#level2",u_="http://library.stanford.edu/iiif/image-api/conformance.html#level0",x1="http://library.stanford.edu/iiif/image-api/conformance.html#level1",S1="http://library.stanford.edu/iiif/image-api/conformance.html#level2",c_="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",b1="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",E1="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",d_="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",P1="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",C1="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",f_="http://iiif.io/api/image/1/level0.json",h_="http://iiif.io/api/image/1/profiles/level0.json",k1="http://iiif.io/api/image/1/level1.json",T1="http://iiif.io/api/image/1/profiles/level1.json",R1="http://iiif.io/api/image/1/level2.json",_1="http://iiif.io/api/image/1/profiles/level2.json",p_="http://iiif.io/api/image/2/level0.json",m_="http://iiif.io/api/image/2/profiles/level0.json",j1="http://iiif.io/api/image/2/level1.json",O1="http://iiif.io/api/image/2/profiles/level1.json",L1="http://iiif.io/api/image/2/level2.json",M1="http://iiif.io/api/image/2/profiles/level2.json",g_="level0",I1="level1",A1="level2",v_="http://iiif.io/api/image/2/level0",$1="http://iiif.io/api/image/2/level1",N1="http://iiif.io/api/image/2/level2",y_="https://iiif.io/api/image/1.1/compliance/#level0",z1="https://iiif.io/api/image/1.1/compliance/#level1",F1="https://iiif.io/api/image/1.1/compliance/#level2",D1=[N1,w1,S1,E1,C1,R1,_1,L1,M1,A1,F1],B1=[...D1,$1,y1,x1,b1,P1,k1,T1,j1,O1,I1,z1],w_=[v_,$1,N1,a_,y1,w1,u_,x1,S1,c_,b1,E1,d_,P1,C1,f_,h_,k1,T1,R1,_1,p_,m_,j1,O1,L1,M1,g_,I1,A1,y_,z1,F1],x_={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["sizeByWhListed"]},S_={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPx","regionSquare","sizeByWhListed","sizeByH","sizeByW","sizeByWh"]},b_={extraFormats:["jpg","png"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPct","regionByPx","regionSquare","rotationBy90s","sizeByWhListed","sizeByConfinedWh","sizeByH","sizeByPct","sizeByW","sizeByWh"]};function E_(t){return D1.indexOf(t)!==-1?b_:B1.indexOf(t)!==-1?S_:x_}function P_(t){let e=t?Array.isArray(t.profile)?t.profile:[t.profile]:[],r={extraQualities:[],extraFormats:[],extraFeatures:[]};for(let n of e)if(typeof n=="string"&&(n=E_(n)),!!n){if(n.formats)for(let s of n.formats)r.extraFormats.indexOf(s)===-1&&r.extraFormats.push(s);if(n.qualities)for(let s of n.qualities)r.extraQualities.indexOf(s)===-1&&r.extraQualities.push(s);if(n.supports)for(let s of n.supports)r.extraFeatures.indexOf(s)===-1&&r.extraFeatures.push(s);if(n.maxHeight&&(r.maxHeight=n.maxHeight),n.maxWidth&&(r.maxWidth=n.maxWidth),n.maxArea&&(r.maxArea=n.maxArea),n.extraFormats)for(let s of n.extraFormats)r.extraFormats.indexOf(s)===-1&&r.extraFormats.push(s);if(n.extraQualities)for(let s of n.extraQualities)r.extraQualities.indexOf(s)===-1&&r.extraQualities.push(s);if(n.extraFeatures)for(let s of n.extraFeatures)r.extraFeatures.indexOf(s)===-1&&r.extraFeatures.push(s);n.maxHeight&&(r.maxHeight=n.maxHeight),n.maxWidth&&(r.maxWidth=n.maxWidth),n.maxArea&&(r.maxArea=n.maxArea)}if(t.extraFormats)for(let n of t.extraFormats)r.extraFormats.indexOf(n)===-1&&r.extraFormats.push(n);if(t.extraFeatures)for(let n of t.extraFeatures)r.extraFeatures.indexOf(n)===-1&&r.extraFeatures.push(n);if(t.extraQualities)for(let n of t.extraQualities)r.extraQualities.indexOf(n)===-1&&r.extraQualities.push(n);return r}function C_(t){try{if(t==="full")return{full:!0};if(t==="square")return{square:!0};let e=t.startsWith("pct:"),r=t.substr(e?4:0).split(",").map(n=>parseFloat(n));return{x:r[0],y:r[1],w:r[2],h:r[3],percent:e}}catch{throw new Error("Expected 'full', 'square' or 'x,y,w,h'. Found "+t)}}function k_(t){let e={upscaled:!1,max:!1,confined:!1};if(t[0]==="^"&&(e.upscaled=!0,t=t.slice(1)),t==="max"||t==="full")return e.max=!0,e.serialiseAsFull=t==="full",e;if(t[0]==="!"&&(e.confined=!0,t=t.slice(1)),t[0]==="p")return e.percentScale=parseFloat(t.slice(4)),e;let r=t.split(",").map(n=>n.trim());return r.length&&typeof r[0]<"u"&&(r[0]!==""&&(e.width=parseInt(r[0],10)),typeof r[1]<"u"&&r[1]!==""?(e.height=parseInt(r[1],10),e.version=2):e.version=3),e}function T_(t){let e={angle:0};if(t[0]==="!"&&(e.mirror=!0,t=t.substr(1)),e.angle=parseFloat(t)%360,Number.isNaN(e.angle))throw new Error(`Invalid rotation ${t}`);return e}function R_(t,e=""){let r=t.match(/^(([a-zA-Z]+):\/\/([^/]+))?((.*)+)/);if(!r)throw new Error(`Invalid or unknown input ${t}`);let n=r[2],s=r[3],l=r[4];if(l[0]==="/"&&(l=l.substring(1)),e.length>0){if(e[0]==="/"&&(e=e.substring(1)),e!==l.substring(0,e.length))throw new Error(`Path does not start with prefix (path: ${l}, prefix: ${e})`);l=l.substring(e.length)}return{scheme:n,server:s,path:l,prefix:e}}function __(t,e=""){let{path:r,scheme:n,server:s,prefix:l}=R_(t,e),u=(r||"").split("/").reverse(),[d,h,v,g,...w]=u,b=w.reverse().filter(Boolean).join("/");if(u.length===1||d==="")return{type:"base",scheme:n,server:s,prefix:l,identifier:b};if(d==="info.json"){let[,...P]=u;return{type:"info",scheme:n,server:s,prefix:l,identifier:P.reverse().filter(Boolean).join("/")}}let R=(d||"").split(".");if(typeof R[1]>"u"||typeof R[0]>"u"||typeof g>"u"||typeof v>"u"||typeof h>"u")throw new Error("Invalid image request");return{type:"image",scheme:n,server:s,prefix:l,identifier:b,originalPath:r,region:C_(g),size:k_(v),rotation:T_(h),quality:R[0],format:R[1]}}function j_(t){let e=__(Aa(t.id));if(e.type!=="info")throw new Error("Invalid service URL");let r=P_(t);return{identifier:e.identifier,originalPath:"",server:e.server,prefix:e.prefix,scheme:e.scheme,type:"image",quality:r.extraQualities.indexOf("default")===-1?r.extraQualities[0]:"default",region:{full:!0},size:{max:!0,upscaled:!1,confined:!1},format:"jpg",rotation:{angle:0}}}function O_(t,e,r){let n=r.length,s=[];for(let l=0;l<n;l++){let u=r[l];if(u){let d=u.width;s.push(t/d)}}return s}function L_(t,e,r){let n=r.length,s=[];for(let l=0;l<n;l++){let u=r[l];u&&s.push({width:Math.floor(t/u),height:Math.floor(e/u)})}return s}function kr(t){if(t["@id"])return t["@id"];if(t.id)return t.id}function Jh(t){if(!t||!t.profile||!kr(t))return!1;let e=Array.isArray(t.profile)?t.profile:[t.profile];for(let r of e)if(typeof r=="string"&&w_.indexOf(r)!==-1)return!0;return!1}function M_(t){if(!Jh(t))return!1;let e=Array.isArray(t.profile)?t.profile:[t.profile];for(let r of e)if(typeof r=="string"){if(B1.indexOf(r)!==-1)return!0}else{let n=[...r.supports||[],...r.extraFeatures||[]];if(n.indexOf("regionByPx")!==-1&&(n.indexOf("sizeByW")!==-1||n.indexOf("sizeByWh")!==-1))return!0}return!1}function Eh(t,e){if(e&&e.profile){let r=e.profile;if(r){let n=Array.isArray(r)?r:[r];return n.includes(`level${t}`)||n.includes(`http://iiif.io/api/image/2/level${t}.json`)||n.includes(`http://iiif.io/api/image/1/level${t}.json`)||n.includes(`http://iiif.io/api/image/1/profiles/level${t}.json`)}}return!1}function mg(t){return Jh(t)?Eh(0,t)?0:Eh(1,t)?1:Eh(2,t)?2:null:null}function U1(t){return(t["@context"]?Array.isArray(t["@context"])?t["@context"]:[t["@context"]]:[]).indexOf("http://iiif.io/api/image/3/context.json")!==-1}function I_(t){if(!M_(t))return[];let e=[],r=Array.isArray(t.profile)?t.profile:[t.profile],n=r.length;for(let s=0;s<n;s++){let l=r[s];if(l&&typeof l!="string"&&(l.maxHeight||l.maxWidth))return[{id:kr(t),type:"variable",minWidth:0,minHeight:0,maxHeight:l.maxHeight||l.maxWidth,maxWidth:l.maxWidth||l.maxHeight,level:mg(t),version:t["@context"]==="http://iiif.io/api/image/3/context.json"?3:2}]}if(t.tiles){let s=t.tiles.length;for(let l=0;l<s;l++){let u=t.tiles[l];u&&(u.height||u.width)&&e.push({id:kr(t),type:"variable",minHeight:0,minWidth:0,maxHeight:u.height||u.width,maxWidth:u.width,level:mg(t),version:U1(t)?3:2})}}return e}function s0(t){let e=/^.*\/(full)\/(((\d+),(\d+)?)|max)\/(\d+)\/default\.(jpg|png|jpeg)$/,r=t.match(e);if(r&&r[4]&&r[5]){let n=r[1],s=parseInt(r[4],10),l=parseInt(r[5],10),u=r[7];if((n==="max"||n==="full")&&s&&l&&u)return{type:"fixed",id:t,height:l,width:s}}return{type:"unknown",id:t}}function A_(t){if(t["@type"])return t["@type"];if(t.type)return t.type}function $_(t){if(typeof t=="string")return s0(t);let e=A_(t);if(e!=="Image"&&e!=="sc:Image")return null;let r=t,n=kr(r);return n?n&&r.width&&r.height?{id:n,type:"fixed",width:r.width,height:r.height,unsafe:!0}:s0(n):null}function N_(t){return Jh(t)?(t&&t.sizes?t.sizes:[]).map(e=>({id:kr(t),type:"fixed-service",height:e.height,width:e.width,level:mg(t),version:U1(t)?3:2})):[]}function o0(t){let e=[],r=t.length;for(let n=0;n<r;n++){let s=t[n];if(!s)continue;let l=N_(s);l.length&&e.push(...l);let u=I_(s);u.length&&e.push(...u)}return e}function H1(t){let e=t.service?Array.isArray(t.service)?t.service:[t.service]:[],r=e.length,n=[];for(let s=0;s<r;s++)Jh(e[s])&&n.push(e[s]);return n}function z_(t,e=!0,r){let n=[],s=$_(t);if(s===null)return n;let l=t;if(n.push(s),e&&l&&l.width&&l.height){let u=[],d=H1(l);for(let h of d){let v={id:kr(h),width:l.width,height:l.height};if(r.canLoadSync(v)){let g=r.loadServiceSync(v);g&&(g.height||(g.height=l.height),g.width||(g.width=l.width),u.push(...o0([g])))}}if(u.length)return n.push(...u),n}return l.service&&n.push(...o0(l.service)),n}function F_({x:t=0,y:e=0,w:r,h:n,full:s,square:l,percent:u}){return"full"}function D_({max:t,percentScale:e,upscaled:r,confined:n,width:s,height:l,serialiseAsFull:u,version:d}){let h=[];return r&&h.push("^"),t?(h.push(u?"full":"max"),h.join("")):(n&&h.push("!"),e&&h.push(`pct:${e}`),s&&h.push(`${s}`),h.push(","),l&&d===3&&h.push(`${l}`),h.join(""))}function B_(t){return`${t.mirror?"!":""}${(t.angle||0)%360}`}function U_(t,e){let r=t.prefix.startsWith("/")?t.prefix.substr(1):t.prefix,n=`${t.scheme}://${t.server}/${r?`${r}/`:""}${t.identifier}`,{size:s}=t,{region:l,rotation:u,format:d,quality:h}=t;return[n,F_(l),D_(s),B_(u),`${h}.${d}`].filter(Boolean).join("/")}function _m(t,e,r){let n=j_({"@context":t.version===3?"http://iiif.io/api/image/3/context.json":"http://iiif.io/api/image/2/context.json",id:Aa(kr(t)),profile:t.level===null||typeof t.level>"u"?"level0":`level${t.level}`,type:t.version===3?"ImageService3":"ImageService2"});return n.size.max=!1,n.size.width=e,n.size.height=r,{id:U_(n),type:"fixed",width:e,height:r||t.height/(t.width||1)*e,unsafe:t.width>e}}function Qu(t){let e=t.replace(/(https?:\/\/)?(www.)?/i,"");return e.indexOf("/")!==-1?e.split("/")[0]:e}function H_(t,e,r){let n=t.width?t.width:t.maxWidth;return r.height<=t.maxHeight&&r.width<=t.maxWidth&&r.height>=t.minHeight&&r.width>=t.minWidth&&(!e||Math.abs(r.width-n)<Math.abs(e.width-n))}function W_(t,e){let r=[],n=Object.assign({unsafeImageService:!1,atAnyCost:!0,fallback:!0,minHeight:64,minWidth:64,maxHeight:1/0,maxWidth:1/0,returnAllOptions:!1,preferFixedSize:!1,allowUnsafe:!1,explain:!1,height:0,width:0},t),s=(g,w=0)=>n.explain?r.push(new Array(w).fill(0).map(b=>"    ").join("")+g().trim()):void 0,l=[],u=[],d=null;s(()=>`Using configuration: ${JSON.stringify(n,null,2)}`);let h=(g,w)=>{if(s(()=>"Swapping choice",3),H_(n,w,g)){if(n.preferFixedSize&&g.unsafe){s(()=>`We found an image that was marked as unsafe, but it was the best size. (${g.id})`,4),u.push(g);return}n.returnAllOptions&&w&&u.push(w),s(()=>`We found a new image that was the best size. (${g.id})`,4),d=g}else n.returnAllOptions&&u.push(g)};s(()=>`The input shows we have ${e.length} list(s) of candidates to choose from.`);let v=e.length;for(let g=0;g<v;g++){let w=e[g]();s(()=>`Candidate group ${g}: ${JSON.stringify(w,null,2)}`,1);let b=w.length;s(()=>`Checking candidate list number ${g} and found ${b} potential ways of creating image(s)`,1);for(let R=0;R<b;R++){let P=w[R];if(s(()=>`-> Checking candidate ${R}`,1),P.type==="unknown"&&n.atAnyCost&&(s(()=>`We've found an unknown image type, adding this to the "last resort" list`,2),l.push(P)),P.type==="fixed"&&(P.unsafe?(s(()=>`We've found an unsafe fixed image type, adding this to the "last resort" list`,2),l.push(P)):(s(()=>"We've found a fixed size image, checking if it matches the request",2),h(P,d))),P.type==="fixed-service")if(n.unsafeImageService){s(()=>"Checking for an image from the tile source, without calculating the right height and width (unsafeImageService)",2);let C=_m(P,n.width,n.height);h(C,d)}else{s(()=>"Checking for an image from the tile source 3",2);let C=_m(P,P.width,P.height);h(C,d)}if(P.type==="variable"&&P.maxWidth){let C=_m({id:P.id,width:P.maxWidth,height:P.maxWidth,level:P.level,version:P.version},P.maxWidth);h(C,d)}}if(d&&!n.returnAllOptions){if(d.unsafe||n.allowUnsafe)continue;s(()=>`We found a match in choice list number ${g}, no searching any more`);break}}return n.atAnyCost&&u.length===0?(s(()=>d?`We found an image! ${d.id} of type ${d.type}`:'We found no images, but "atAnyCost" is set, so returning that'),{best:d||l[0]||null,fallback:l.slice(1),log:r}):n.returnAllOptions?(s(()=>"Returning all options that we have found"),{best:(n.atAnyCost?d||u[0]||l[0]:d||u[0])||null,fallback:[...u,...l],log:r}):(s(()=>"Returning the best image that we found, and a fallback"),{best:d||u[0]||null,fallback:d?u:u.slice(1),log:r})}function V_(t,e,r){let n=t>e?t:e,s=r.length,l=[];for(let u=0;u<s;u++){let d=r[u];if(!d||d.scaleFactors.length===0)continue;let h=d.scaleFactors[0];if(!h)continue;let v=n/h,g=[h];for(;v>=d.width;)h=h*2,g.push(h),v=v/2;l.push({...d,scaleFactors:g})}return l}function Q_(t,e){if(t.length!==e.length)return!1;if(t.length===0&&e.length===0)return!0;let r=t.length,n=!0;for(let l=0;l<r;l++){let u=t[l],d=e[l];if(u.width!==d.width||u.height!==d.height){n=!1;break}}if(n)return!0;let s=0;for(let l=0;l<r;l++)for(let u=0;u<r;u++)if(t[l].width===e[u].width&&t[l].height===e[u].height){s++;break}return s===r}function l0(t){return Eh(0,t)}var q_=class{constructor(e={}){nh(this,"config",{verificationsRequired:1,approximateServices:!1,enableFetching:!0,disableThrottling:!1}),nh(this,"fetchingCount",0),nh(this,"imageServices",{}),nh(this,"knownImageServers",{}),this.config=Object.assign(this.config,e)}setConfig(e){Object.assign(this.config,e)}sample(e,r,n=!0){let s=Qu(kr(e)),l=Aa(kr(e)),u=this.knownImageServers[s];return this.imageServices[l]=Object.assign(e,{real:!0}),!u&&e.tiles&&!l0(e)?(this.knownImageServers[s]={verifications:0,malformed:!1,root:s,preLoaded:n,sampledId:kr(e),verified:!1,server:null,result:{context:e["@context"]||[],sampledProfile:e.profile,resourceServiceRatio:r&&e.height?r.height/e.height:1,sampledSizes:e.sizes||[],sizeRatios:O_(e.width,e.height,e.sizes||[]),sampledTiles:e.tiles||[]}},!0):this.verify(e)}preLoad(e,r=!0){this.knownImageServers[e.root]=e,r&&(this.knownImageServers[e.root].malformed=!1,this.knownImageServers[e.root].verifications=this.config.verificationsRequired)}predict(e,r=!1,n=!1){let s=e==null?void 0:e.source,l=Qu(kr(e)),u=this.knownImageServers[l],d=Aa(kr(e));return this.imageServices[d]?this.imageServices[d]||null:!this.config.approximateServices||!u||!u.result||!(s!=null&&s.height||e.height)||!(s!=null&&s.width||e.width)||!n&&(u.malformed||u.verifications<this.config.verificationsRequired)||l0(e.source)?null:(this.imageServices[d]||(this.imageServices[d]={"@context":u.result.context,"@id":kr(e),id:kr(e),protocol:"http://iiif.io/api/image",tiles:(s==null?void 0:s.tiles)||V_(e.width,e.height,u.result.sampledTiles),sizes:(s==null?void 0:s.sizes)||L_(Math.round(e.width/u.result.resourceServiceRatio),Math.round(e.height/u.result.resourceServiceRatio),u.result.sizeRatios),profile:(s==null?void 0:s.profile)||u.result.sampledProfile,height:(s==null?void 0:s.height)||e.height,width:(s==null?void 0:s.width)||e.width,real:!1}),this.imageServices[d]||null)}async getThumbnailFromResource(e,r,n=!0,s=[]){let l=e?await this.getImageCandidates(e,n):[];return W_(r,[()=>s,()=>l])}async getImageCandidates(e,r=!0){let n=e;if(r&&n&&n.height&&n.width){let s=H1(n);for(let l of s){let u={id:kr(l),width:l.width?l.width:n.width,height:l.height?l.height:n.height,source:l};await this.loadService(u)}}return z_(e,r,this)}async verify(e){let r=this.predict(e,!1,!0),n=await this.fetchService(kr(e));if(!r)return!1;let s=r.height===n.height&&r.width===n.width&&r["@context"]===n["@context"]&&Q_(r.sizes||[],n.sizes||[]);if(s){let l=Qu(kr(e)),u=this.knownImageServers[l];u&&(u.verifications+=1,u.verifications>=this.config.verificationsRequired&&(u.verified=!0))}return s}canLoadSync(e){let r=typeof e=="string"?e:kr(e),n=Aa(r);if(this.imageServices[n])return!0;let s=this.knownImageServers[Qu(r)];return!!(s&&!s.malformed&&s.verifications>=this.config.verificationsRequired)}async markAsMalformed(e){return this.knownImageServers[Qu(kr(e))].malformed=!0,this.loadService(e,!0)}async fetchService(e,r=!1){let n=Aa(e),s=this.imageServices[n];if(s&&(!r||s.real))return s;if(!this.config.enableFetching)throw new Error("Fetching is not enabled");let l=await this.fetch(n).then(u=>u.json());return!l.id&&l["@id"]&&(l.id=l["@id"]),l.id!==e&&(l.id=e,l["@id"]&&(l["@id"]=e)),this.imageServices[n]=Object.assign(l,{real:!0}),this.imageServices[n]}async fetch(e,r){return fetch(e,r)}async loadService(e,r=!1){if(!this.config.disableThrottling){let l=!0;for(;l;)if(this.fetchingCount>=this.config.verificationsRequired)await new Promise(u=>setTimeout(u,500));else{l=!1;break}}let n=this.knownImageServers[Qu(kr(e))];if(n&&!n.malformed&&!r){await n.result;let l=this.loadServiceSync(e);if(l)return l}this.fetchingCount++;let s=await this.fetchService(kr(e),r);return this.fetchingCount--,s.real&&this.sample(s,e),s}loadServiceSync(e){let r=Aa(kr(e));return this.imageServices[r]?this.imageServices[r]:this.config.approximateServices?this.predict(e):null}};new q_;var G_=Object.defineProperty,K_=(t,e,r)=>e in t?G_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,N=(t,e,r)=>(K_(t,typeof e!="symbol"?e+"":e,r),r),ep=["onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut","onScroll","onWheel","onClick","onDragStart","onDragEnd","onDragEnter","onDragExit","onDrag","onDragOver","onContextMenu"];function Y_(){return ep.reduce((t,e)=>(t[e]=[],t),{})}var tc=ep.reduce((t,e)=>(t[e.slice(2).toLowerCase()]=e,t[e]=e,t),{}),X_="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",tp=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t));for(;t--;)e+=X_[r[t]&63];return e},Ws=class{constructor(){N(this,"__id"),N(this,"__revision",0),N(this,"__host"),N(this,"__onCreate"),N(this,"__parent"),N(this,"__owner",{value:void 0}),N(this,"__state",{}),N(this,"eventHandlers"),N(this,"scale",1),N(this,"layers",[]),N(this,"time",[]),N(this,"_crop"),N(this,"cropData"),N(this,"id"),N(this,"addEventListener",(e,r,n)=>{let s=tc[e];if(!this.eventHandlers[s])throw new Error(`Unknown event ${s}`);this.eventHandlers[s].indexOf(r)===-1&&this.eventHandlers[s].push(r)}),N(this,"removeEventListener",(e,r)=>{let n=tc[e];if(!this.eventHandlers[n]){console.warn(`Unknown event ${n}`);return}this.eventHandlers[n].indexOf(r)!==-1&&(this.eventHandlers[n]=this.eventHandlers[n].filter(s=>s!==r))}),this.id=this.__id=tp(),this.eventHandlers=Y_()}get crop(){return this._crop}set crop(e){this._crop=e}getObjectsAt(e){return[]}getAllPointsAt(e,r,n){return[]}getScheduledUpdates(e,r){return[]}dispatchEvent(e,r){let n=this.eventHandlers[e],s=n?n.length:0,l=!1;if(s)for(let u=0;u<s;u++)try{n[u](r),l=!0}catch(d){console.error(e,d)}return l}get x(){return this.points[1]}get y(){return this.points[2]}get width(){return this.points[3]-this.points[1]}get height(){return this.points[4]-this.points[2]}translate(e,r){zs(this.points,ti(e,r))}atScale(e){zs(this.points,Ld(e,this.x,this.y)),this.scale*=e}transform(e){zs(this.points,e)}applyProps(e){this.__revision++}appendChild(e){}removeChild(e){}insertBefore(e,r){}hideInstance(){}},Fl=class gg extends Ws{constructor(e){if(super(),N(this,"type","spacial-content"),N(this,"id"),N(this,"uri"),N(this,"display"),N(this,"points"),N(this,"priority"),N(this,"style",{opacity:1}),!e)this.id="",this.uri="",this.display={x:0,y:0,scale:1,width:0,height:0,points:ot(5)},this.points=ot(5);else{let r=e.scale||1;this.id=e.id||e.uri,this.uri=e.uri,this.points=zt.singleBox(e.width,e.height,e.x,e.y),this.display={x:0,y:0,scale:r,width:e.width/r,height:e.height/r,points:zt.singleBox(e.width/r,e.height/r),rotation:e==null?void 0:e.rotation}}}applyProps(e){let r=e.display?e.display.width:e.target.width,n=e.target.width/r;if(this.id=e.id||e.uri,this.uri=e.uri,this.points.set(zt.singleBox(e.target.width,e.target.height,e.target.x,e.target.y)),e.style&&typeof e.style.opacity<"u"&&(this.style.opacity=e.style.opacity),e.crop){this.cropData=e.crop;let s=zt.singleBox(e.crop.width,e.crop.height,e.crop.x,e.crop.y);zs(s,ti(-e.crop.x,-e.crop.y)),this.crop?this.crop.set(s):this.crop=ot(s)}e.display?(this.display.scale=n,this.display.width=e.display.width,this.display.height=e.display.height,this.display.rotation=e.display.rotation,this.display.points=zt.singleBox(e.display.width,e.display.height)):(this.display.scale=n,this.display.width=e.target.width/n,this.display.height=e.target.height/n,this.display.points=zt.singleBox(e.target.width/n,e.target.height/n))}getAllPointsAt(e,r,n){return[[this,this.crop||this.points,r]]}static fromSvg(e,r,n,s){return gg.fromImage("data:image/svg+xml;base64,"+btoa(e),r,n,s)}static fromImage(e,r,n,s){let l=new gg;return l.applyProps({uri:e,id:s,display:n,target:r}),l}getImageUrl(){return this.uri}},vg=class extends Ws{constructor(e){if(super(),N(this,"type","spacial-content"),N(this,"id"),N(this,"uri"),N(this,"display"),N(this,"points"),N(this,"getTexture"),this.getTexture=()=>({source:void 0,hash:-1}),!e)this.id="",this.uri="",this.display={x:0,y:0,scale:1,width:0,height:0,points:ot(5)},this.points=ot(5);else{let r=e.scale||1;this.id=e.id||e.uri,this.uri=e.uri,this.points=zt.singleBox(e.width,e.height),this.display={x:0,y:0,scale:r,width:e.width/r,height:e.height/r,points:r!==1?zt.singleBox(e.width/r,e.height/r):this.points}}}applyProps(e){let r=e.display?e.display.width:e.target.width,n=e.target.width/r;this.id=e.id,this.points.set(zt.singleBox(e.target.width,e.target.height)),this.display.scale=n,this.display.width=e.target.width/n,this.display.height=e.target.height/n,this.getTexture=e.getTexture,this.display.points=n!==1?zt.singleBox(e.target.width/n,e.target.height/n):this.points}getAllPointsAt(e,r,n){return[[this,this.points,r]]}};function Z_(t,e,r=1){let n=e.length;if(n===0)throw new Error("No resources passed in.");let s=0,l=1/0;for(let u=0;u<n&&!(!e[u]||!e[u].display);u++){let d=yg(e[u].display.scale,t/(r||1));d<l&&(l=d,s=u)}return s}function yg(t,e){return Math.abs(t-e)}function Ah(t,e){let r=yg(t.x,e.x),n=yg(t.y,e.y);return Math.sqrt(Math.pow(r,2)+Math.pow(n,2))}function J_(t){let e=t.length;return t.indexOf("/info.json")===e-10?t.slice(0,-10):t}function ih(t,e,r){return Math.min(Math.max(t,e),r)}var Md=class W1 extends Ws{constructor(e){super(),N(this,"id"),N(this,"type","spacial-content"),N(this,"display"),N(this,"tileWidth"),N(this,"style",{opacity:1}),N(this,"points"),N(this,"service"),N(this,"format","jpg"),N(this,"crop2"),N(this,"version3"),N(this,"tileUrl"),this.tileUrl=J_(e.url),this.id=e.id||`${this.tileUrl}--${e.scaleFactor}`,this.points=e.displayPoints?e.displayPoints:Ro(e.points,zl(e.scaleFactor)),this.tileWidth=e.tileWidth,this.version3=e.version3,this.display={x:0,y:0,width:e.width/e.scaleFactor,height:e.height/e.scaleFactor,points:e.points,scale:e.scaleFactor},e.format&&(this.format=e.format)}applyProps(e){if(e.style&&typeof e.style.opacity<"u"&&(this.style.opacity=e.style.opacity),e.service!==this.service&&(this.service=e.service),e.format?this.format=e.format:this.format="jpg",typeof e.version3<"u"&&(this.version3=e.version3),e.crop){this.cropData=e.crop;let r=ot([...this.points]),n=r.length/5,s=e.crop.x||0,l=e.crop.y||0,u=e.crop.x+e.crop.width,d=e.crop.y+e.crop.height;for(let h=0;h<n;h++){let v=h*5;r[v+1]<u&&r[v+3]>s&&r[v+2]<d&&r[v+4]>l?(r[v+1]=ih(r[v+1],s,u),r[v+3]=ih(r[v+3],s,u),r[v+2]=ih(r[v+2],l,d),r[v+4]=ih(r[v+4],l,d)):r[v]=0}zs(r,ti(-e.crop.x,-e.crop.y)),this.crop?this.crop.set(r):this.crop=r}}static fromTile(e,r,n,s,l,u,d,h){n.height=n.height?n.height:n.width;let v=d?Math.floor(r.width/s):Math.ceil(r.width/s),g=d?Math.floor(r.height/s):Math.ceil(r.height/s),w=Math.ceil(v/n.width),b=Math.ceil(g/n.height),R=zt.grid(w,b),P=zt.grid(w,b),C=l?l["@context"]?Array.isArray(l["@context"])?l["@context"]:[l["@context"]]:[]:[],j=typeof h<"u"?h:C.indexOf("http://iiif.io/api/image/3/context.json")!==-1;for(let L=0;L<b;L++)for(let A=0;A<w;A++){let F=A*n.width,z=L*n.height;P.addPoints(F*s,z*s,A===w-1?r.width:(F+n.width)*s,L===b-1?r.height:(z+n.height)*s),R.addPoints(F,z,A===w-1?v:F+n.width,L===b-1?g:z+n.height)}let O=new W1({url:e,scaleFactor:s,points:R.build(),displayPoints:P.build(),width:r.width,height:r.height,tileWidth:n.width,format:u,version3:j});return O.applyProps({service:l}),O}getImageUrl(e){let r=this.points.slice(e*5,e*5+5),n=r[3]-r[1],s=r[4]-r[2],l=Math.ceil(n/this.display.scale),u=Math.ceil(s/this.display.scale),d=`${l>this.tileWidth?this.tileWidth:l},`;return this.version3&&(d+=`${u>this.tileWidth?this.tileWidth:u}`),`${this.tileUrl}/${r[1]},${r[2]},${n},${s}/${d}/0/default.${this.format||"jpg"}`}getAllPointsAt(e,r,n){let s=Od(this.crop||this.points,e);return[[this,s,r]]}transform(e){zs(this.points,e)}getScheduledUpdates(e,r){return[]}},ej=class extends Ws{constructor(){super(...arguments),N(this,"type","spacial-content")}getAllPointsAt(e,r,n){return[[this,this.points,r]]}},tj=class extends ej{constructor(e){super(),N(this,"id"),N(this,"display"),N(this,"points"),N(this,"images",[]),N(this,"allImages",[]),N(this,"scaleFactors",[]),N(this,"aggregateBuffer",ot(9)),N(this,"lazyLoader"),N(this,"isFullyLoaded",!1),N(this,"maxScaleFactor",0),N(this,"renderOptions"),N(this,"_scheduleSortByScales",!1),N(this,"_sortByScales",()=>{this._scheduleSortByScales=!1,this.allImages.sort((n,s)=>s.display.width-n.display.width),this.images=[];let r=.1;for(let n of this.allImages)if(!(n.display.width<this.renderOptions.minSize&&n.display.height<this.renderOptions.minSize&&!n.priority||n instanceof Fl&&(n.display.width>this.renderOptions.maxImageSize||n.display.height>this.renderOptions.maxImageSize)&&!n.priority)){if(Math.abs(n.display.scale-r)<.25||n.priority){let s=this.images.pop();s&&(s instanceof Fl||s.priority)?(n.priority&&this.images.push(n),this.images.push(s)):n&&this.images.push(n)}else n&&this.images.push(n);r=n.display.scale}this.images.length===0&&(this.images=[...this.allImages]),this.scaleFactors=this.images.map(n=>n.display.scale),this.maxScaleFactor=Math.max(...this.scaleFactors)}),N(this,"loadFullResource",async()=>{if(!this.isFullyLoaded&&this.lazyLoader){this.isFullyLoaded=!0;let r=await this.lazyLoader();this.addImages(r)}}),N(this,"fallback",[this.loadFullResource]),this.id=e.id,this.points=zt.singleBox(e.width,e.height),this.lazyLoader=e.loadFullImages,e.loadFullImages||(this.isFullyLoaded=!0),this.display={x:0,y:0,points:zt.singleBox(e.width,e.height),height:e.height,width:e.width,scale:1},this.renderOptions={renderSmallestFallback:!0,renderLayers:3,minSize:255,maxImageSize:2048,quality:1.5,...e.renderOptions||{}},this.addImages(e.images)}applyProps(e){typeof e.renderSmallestFallback<"u"&&e.renderSmallestFallback!==this.renderOptions.renderSmallestFallback&&(this.renderOptions.renderSmallestFallback=e.renderSmallestFallback),typeof e.renderLayers<"u"&&e.renderLayers!==this.renderOptions.renderLayers&&(this.renderOptions.renderLayers=e.renderLayers),typeof e.minSize<"u"&&e.minSize!==this.renderOptions.minSize&&(this.renderOptions.minSize=e.minSize),typeof e.maxImageSize<"u"&&e.maxImageSize!==this.renderOptions.maxImageSize&&(this.renderOptions.maxImageSize=e.maxImageSize),typeof e.quality<"u"&&e.quality!==this.renderOptions.quality&&(this.renderOptions.quality=e.quality)}appendChild(e){this.addImages([e])}removeChild(e){this.images.indexOf(e)!==-1&&(this.images=this.images.filter(r=>r!==e),this.sortByScales())}insertBefore(e,r){this.addImages([e])}hideInstance(){}addImages(e){for(let r of e)r.__parent=this,r.__owner=this.__owner;this.allImages.push(...e.filter(Boolean)),this.sortByScales()}sortByScales(){this._scheduleSortByScales=!0}getScheduledUpdates(e,r){return this._scheduleSortByScales?[this._sortByScales]:this.isFullyLoaded?[]:r>1/this.maxScaleFactor?this.fallback:[]}getAllPointsAt(e,r,n){if(this.images.length===0)return[];let s=Z_(1/(n||1)/(window.devicePixelRatio||1),this.images,this.renderOptions.quality),l=this.images.length,u=r?To(r,ti(this.x,this.y)):ti(this.x,this.y);if(s!==this.images.length-1&&this.images[s+1]){let d=[];for(let g=l-1;g>=s;g--)d.push(g);let h=d[0];this.renderOptions.renderLayers&&(d=d.slice(-Math.min(d.length,this.renderOptions.renderLayers))),this.renderOptions.renderSmallestFallback&&d.indexOf(h)===-1&&d.unshift(h);let v=[];for(let g=0;g<d.length;g++)v.push(...this.images[d[g]].getAllPointsAt(e,u,n));return v}return this.images[s].getAllPointsAt(e,u,n)}};function sh(t,e,r,n,s){let l=Math.PI/180*s,u=Math.cos(l),d=Math.sin(l),h=u*(r-t)+d*(n-e)+t,v=u*(n-e)-d*(r-t)+e;return[h,v]}var Xg=class V1 extends Ws{constructor(e,r){super(),N(this,"id"),N(this,"type","world-object"),N(this,"scale"),N(this,"layers"),N(this,"points"),N(this,"worldPoints"),N(this,"intersectionBuffer",ot(5)),N(this,"aggregateBuffer",ot(9)),N(this,"invertedBuffer",ot(9)),N(this,"rotation",0),N(this,"filteredPointsBuffer"),N(this,"_updatedList",[]),N(this,"geometry");let{x:n=0,y:s=0}=r||{};e?(this.id=e.id||"",this.scale=1,this.layers=e.layers,this.points=ot([1,n,s,n+e.width,s+e.height]),this.worldPoints=ot([1,n,s,n+e.width,s+e.height]),this.filteredPointsBuffer=ot(e.layers.length*5)):(this.id="",this.scale=1,this.layers=[],this.points=ot(5),this.worldPoints=ot(5),this.filteredPointsBuffer=ot(5))}static createWithProps(e){let r=new V1;return r.applyProps(e),r}applyProps(e){let r=e.x||0,n=e.y||0;this.id=e.id;let s=typeof e.scale<"u"?e.scale:this.scale;this.points[0]=1,this.points[1]=r,this.points[2]=n,this.points[3]=r+e.width,this.points[4]=n+e.height,this.rotation=e.rotation||0,this.worldPoints[3]=this.worldPoints[1]+e.width,this.worldPoints[4]=this.worldPoints[2]+e.height,e.scale&&e.scale!==1&&this.atScale(s),this.scale=s}appendChild(e){e.points[0]===0&&e.points.set(this.points),e.__owner.value=this,this.addLayers([e])}removeChild(e){this.layers=this.layers.filter(r=>r!==e),this.filteredPointsBuffer=ot(this.layers.length*5)}insertBefore(e,r){let n=this.layers.indexOf(r);if(n===-1||this.layers.indexOf(e)!==-1)return;let s=this.layers.slice(0,n),l=this.layers.slice(n);this.layers=[...s,e,...l]}hideInstance(){console.warn("hideInstance: not yet implemented")}getObjectsAt(e,r){if(this.rotation&&(e=this.applyRotation(e)),Od(this.points,e,this.filteredPointsBuffer)[0]===0)return[];let n=this.layers.length,s=[];for(let l=0;l<n;l++){let u=this.layers[l];if(r&&u.isShape){let d=Ro(u.points,ti(this.x,this.y));if(!u.intersects([e[1]-d[1],e[2]-d[2]]))continue}if(Od(Ro(u.points,ti(this.x,this.y)),e,this.filteredPointsBuffer)[0]!==0&&s.push(u),r){let d=u;s.push(...d.getObjectsAt(e,r))}}return s}applyRotation(e){if(this.rotation){let r={x:e[1],y:e[2]},n={x:e[1],y:e[4]},s={x:e[3],y:e[2]},l={x:e[3],y:e[4]},u=this.points[1]+(this.points[3]-this.points[1])/2,d=this.points[2]+(this.points[4]-this.points[2])/2,[h,v]=sh(u,d,r.x,r.y,this.rotation),[g,w]=sh(u,d,n.x,n.y,this.rotation),[b,R]=sh(u,d,s.x,s.y,this.rotation),[P,C]=sh(u,d,l.x,l.y,this.rotation),j=Math.min(h,g,b,P),O=Math.max(h,g,b,P),L=Math.min(v,w,R,C),A=Math.max(v,w,R,C);return ot([e[0],j,L,O,A])}return e}getAllPointsAt(e,r,n){let s=To(ti(this.x,this.y),zl(this.scale),this.aggregateBuffer);this.rotation&&(e=this.applyRotation(e));let l=zR(e,this.points,this.intersectionBuffer),u=this.layers.length,d=[],h=Ro(l,To(zl(1/this.scale),ti(-this.x,-this.y),this.invertedBuffer)),v=r?To(r,s,this.aggregateBuffer):s,g=n*this.scale;for(let w=0;w<u;w++)d.push(...this.layers[w].getAllPointsAt(h,v,g));return d}addLayers(e){let r=[];for(let n of e)this.layers.indexOf(n)===-1&&(r.push(n),n.points.length===5&&(n.points[1]<this.worldPoints[1]/this.scale||n.points[2]<this.worldPoints[2]/this.scale||n.points[3]>this.worldPoints[3]/this.scale||n.points[4]>this.worldPoints[4]/this.scale)&&(n.crop=n.crop||ot([1,Math.max(this.worldPoints[1]/this.scale,n.points[1]),Math.max(this.worldPoints[2]/this.scale,n.points[2]),Math.min(this.worldPoints[3]/this.scale,n.points[3]),Math.min(this.worldPoints[4]/this.scale,n.points[4])])));this.layers=this.layers.concat(r),this.filteredPointsBuffer=ot(this.layers.length*5)}getScheduledUpdates(e,r){let n=this.layers.length;this._updatedList=[];let s=r*this.scale;for(let l=0;l<n;l++){let u=this.layers[l].getScheduledUpdates(e,s);u&&this._updatedList.push(...u)}return this._updatedList}},rp=class Q1 extends Ws{constructor(e=0,r=0,n=100,s="left-to-right"){super(),N(this,"id","world"),N(this,"_width"),N(this,"_height"),N(this,"aspectRatio"),N(this,"viewingDirection"),N(this,"aggregateBuffer",ot(9)),N(this,"isDirty",!1),N(this,"zones",[]),N(this,"filteredPointsBuffer"),N(this,"selectedZone"),N(this,"triggerQueue",[]),N(this,"activatedEvents",[]),N(this,"_updatedList",[]),N(this,"translationBuffer",ot(9)),N(this,"needsRecalculate",!0),N(this,"emptyPaintables",[]),N(this,"renderOrder",[]),N(this,"points"),N(this,"objects",[]),N(this,"subscriptions",[]),N(this,"_propagateEventTargets",[]),N(this,"_alreadyFlushed",[]),this._width=e,this._height=r,this.aspectRatio=Number.isNaN(e/r)?1:e/r,this.viewingDirection=s,this.points=ot(n*5),this.filteredPointsBuffer=ot(n*5)}get x(){return 0}get y(){return 0}get width(){return this._width}get height(){return this._height}static withProps(e){let r=new Q1;return r.applyProps(e),r}applyProps(e){typeof e.width<"u"&&typeof e.height<"u"&&(e.width!==this._width||e.height!==this._height)&&this.resize(e.width,e.height),e.viewingDirection!==this.viewingDirection&&(this.viewingDirection=e.viewingDirection,this.triggerRepaint())}propagateTouchEvent(e,r,n){let s=[];for(let l of n)if(l.x&&l.y){let u=zt.singleBox(1,1,l.x,l.y);s.push(this.getObjectsAt(u,!0).reverse())}return s.map(l=>this.propagateEvent(e,r,l,{bubbles:!0,cancelable:!0}))}propagatePointerEvent(e,r,n,s,l={}){let u=zt.singleBox(1,1,n,s),d=this.getObjectsAt(u,!0).reverse();return this.propagateEvent(e,r,d,l)}propagateEvent(e,r,n,{bubbles:s=!1,cancelable:l=!1}={}){r.atlasTarget=this,this._propagateEventTargets.length=1,this._propagateEventTargets[0]=this;let u=!1;r.stopPropagation=()=>{u=!0};let d=n.length;for(let g=d-1;g>=0;g--){this._propagateEventTargets.unshift(n[g][0]);let w=n[g][1].length;if(w)for(let b=0;b<w;b++)this._propagateEventTargets.unshift(n[g][1][b])}let h=this._propagateEventTargets.length,v=!1;for(let g=0;g<h&&(r.atlasTarget=this._propagateEventTargets[g],r.atlasWorld=this,v=this._propagateEventTargets[g].dispatchEvent(e,r)||v,!u);g++);return v&&this.triggerRepaint(),this._propagateEventTargets}appendChild(e){let r=this.appendWorldObject(e);this.renderOrder.push(r/5)}removeChild(e){let r=this.objects.indexOf(e);if(r===-1){for(let n of this.objects)if(n&&n.id===e.id){this.removeChild(n);return}return}this.objects[r]=null,this.renderOrder=this.renderOrder.filter(n=>n!==r),this.points[r*5]=0,this.triggerRepaint(),this.needsRecalculate=!0}insertBefore(e,r){let n=this.objects.indexOf(r);if(n===-1)return;let s=this.appendWorldObject(e);this.renderOrder.splice(n-1,0,s/5)}hideInstance(){}asWorldObject(){return null}addZone(e){this.zones.push(e)}selectZone(e){if(typeof e=="string"){let r=this.zones.length;for(let n=0;n<r;n++)if(this.zones[n].id===e){this.selectedZone=n,this.trigger("zone-changed");return}}else this.zones[e]&&(this.selectedZone=e,this.trigger("zone-changed"))}deselectZone(){this.selectedZone=void 0}getActiveZone(){if(this.selectedZone)return this.zones[this.selectedZone]}hasActiveZone(){return typeof this.selectedZone<"u"}checkResizeInternalBuffer(){if(FR(this.points)===this.objects.length){let e=this.points,r=ot(this.points.length*2);r.set(e,0),this.points=r}}appendWorldObject(e){this.checkResizeInternalBuffer();let r=this.objects.length*5,n=e.points;return e.points=this.points.subarray(this.objects.length*5,this.objects.length*5+5),e.points[1]=n[1],e.points[2]=n[2],e.points[3]=n[3],e.points[4]=n[4],this.objects.push(e),this.filteredPointsBuffer=ot(this.objects.length*5),this.needsRecalculate=!0,this.triggerRepaint(),r}recalculateWorldSize(){let e=!1;if(this.needsRecalculate){let r=new Int32Array(this.objects.length),n=new Int32Array(this.objects.length),s=this.renderOrder.length;for(let d=0;d<s;d++){let h=this.renderOrder[d];this.objects[h]&&(r[d]=this.points[h*5+3],n[d]=this.points[h*5+4])}let l=Math.max(...r);l!==this._width&&(this._width=l,e=!0);let u=Math.max(...n);u!==this._height&&(this._height=u,e=!0),e&&this.trigger("recalculate-world-size",{width:l,height:u}),this.needsRecalculate=!1}return e}addObjectAt(e,r){r.width&&!r.height?r.height=r.width/e.width*e.height:r.height&&!r.width&&(r.width=r.height/e.height*e.width),(!r||!r.width||!r.height)&&(r.width=e.width,r.height=e.height);let{width:n,x:s,y:l}=r,u=n/e.width;this.checkResizeInternalBuffer(),this.points.set(zt.singleBox(e.width,e.height,0,0),this.objects.length*5);let d=new Xg(e);return d.points=this.points.subarray(this.objects.length*5,this.objects.length*5+5),this.objects.push(d),this.scaleWorldObject(this.objects.length-1,u),this.translateWorldObject(this.objects.length-1,s,l),this.filteredPointsBuffer=ot(this.points.length*2),this.triggerRepaint(),this.needsRecalculate=!0,d}scaleWorldObject(e,r){zs(this.points.subarray(e*5,e*5+5),Ld(r,this.points[e*5+1],this.points[e*5+2]));let n=this.objects[e];n&&(n.atScale(r),this.triggerRepaint())}translateWorldObject(e,r,n){zs(this.points.subarray(e*5,e*5+5),ti(r,n));let s=this.objects[e];s&&(s.translate(r,n),this.triggerRepaint())}resize(e,r){return this._width=e,this._height=r,this.aspectRatio=e/r,this.triggerRepaint(),this}getObjects(){return this.objects}getPoints(){return this.points}getPointsFromViewer(e,r){let n=zt.singleBox(e.width,e.height,e.x,e.y);return this.getPointsAt(n,r,e.scale)}addLayoutSubscriber(e){return this.subscriptions.push(e),()=>{this.subscriptions.splice(this.subscriptions.indexOf(e),1)}}getScheduledUpdates(e,r){let n=Od(this.points,e,this.filteredPointsBuffer),s=this.objects.length;this._updatedList=[];for(let l=0;l<s;l++)if(n[l*5]!==0){if(!this.objects[l])continue;this._updatedList.push(...this.objects[l].getScheduledUpdates(e,r))}return this._updatedList}getObjectsAt(e,r=!1){let n=this.getActiveZone(),s=Od(this.points,e,this.filteredPointsBuffer),l=this.renderOrder.length,u=[];for(let d=0;d<l;d++){let h=this.renderOrder[d];if(s[h*5]!==0){let v=this.objects[h];if(!v||n&&n.objects.indexOf(v)===-1)continue;if(v.type!=="world-object"){u.push([v,[v]]);continue}r?u.push([v,v.getObjectsAt(e,r)]):u.push([v,this.emptyPaintables])}}return u}getPointsAt(e,r,n=1){let s=this.getObjectsAt(e),l=To(zl(n),ti(-e[1],-e[2]),this.translationBuffer),u=r?To(r,l,this.aggregateBuffer):l,d=s.length,h=[];for(let v=0;v<d;v++)s[v]&&h.push(...s[v][0].getAllPointsAt(e,u,n));return h}flushSubscriptions(){if(this.triggerQueue.length){this._alreadyFlushed=[];let e=this.triggerQueue.length;for(let r=0;r<e;r++){if(this._alreadyFlushed.indexOf(this.triggerQueue[r][0])!==-1)continue;typeof this.triggerQueue[r][1]>"u"&&this._alreadyFlushed.push(this.triggerQueue[r][0]);let n=this.subscriptions.length;for(let s=0;s<n;s++)this.subscriptions[s].apply(null,this.triggerQueue[r])}this.triggerQueue=[]}}trigger(e,r){this.triggerQueue.push([e,r])}triggerEventActivation(){this.trigger("event-activation")}triggerRepaint(){this.trigger("repaint")}gotoRegion(e){this.trigger("goto-region",e)}goHome(e=!1){this.trigger("go-home",{immediate:e})}zoomTo(e,r,n){this.trigger("zoom-to",{point:r,factor:e,stream:n})}zoomIn(e){this.trigger("zoom-to",{point:e,factor:.5})}zoomOut(e){this.trigger("zoom-to",{point:e,factor:2})}constraintBounds(e){this.trigger("constrain-bounds",{immediate:e})}},oh=/([0-9]+(px|em)\s+)+(solid)\s+(.*)/g,lh={},rj=["backgroundColor","opacity","boxShadow","borderColor","borderWidth","borderStyle","outlineColor","outlineWidth","outlineOffset","outlineStyle"],Ed=class extends Ws{constructor(){super(),N(this,"id"),N(this,"type","spacial-content"),N(this,"points"),N(this,"hoverEvents",!1),N(this,"activeEvents",!1),N(this,"display",{x:0,y:0,scale:1,width:-1,height:-1,points:ot(5)}),N(this,"_parsed",{border:{id:null,match:[]},outline:{id:null,match:[]}}),N(this,"hovering"),N(this,"pressing"),N(this,"props",{}),N(this,"addHover",()=>{this.hovering=!0,this.__revision++}),N(this,"removeHover",()=>{this.hovering=!1,this.pressing=!1,this.__revision++}),N(this,"addPress",()=>{this.pressing=!0,this.__revision++}),N(this,"removePress",()=>{this.pressing=!1,this.__revision++}),this.id=tp(12),this.points=ot(5)}getAllPointsAt(e,r){return[[this,this.points,r]]}applyProps(e={}){let r=!1;if(e.interactive!==this.props.interactive&&(r=!0,this.props.interactive=e.interactive),e.style){let n=e.border||e.style.border;if(n!==this._parsed.border.id)if(!n)this._parsed.border.id=null,this._parsed.border.match=[];else{let s=lh[n]||oh.exec(n)||oh.exec(n);s&&(this._parsed.border.id=n,this._parsed.border.match=lh[n]=s)}if(this._parsed.border.id&&(e.style.borderWidth=this._parsed.border.match[1],e.style.borderStyle="solid",e.style.borderColor=this._parsed.border.match[4]),e.style.outline!==this._parsed.outline.id)if(!e.style.outline)this._parsed.outline.id=null,this._parsed.outline.match=[];else{let s=lh[e.style.outline]||oh.exec(e.style.outline)||oh.exec(e.style.outline);s&&(this._parsed.outline.id=e.style.outline,this._parsed.outline.match=lh[e.style.outline]=s)}this._parsed.outline.id&&(e.style.outlineWidth=this._parsed.outline.match[1],e.style.outlineStyle="solid",e.style.outlineColor=this._parsed.outline.match[4]),this.props.style=e.style,e.backgroundColor&&!this.props.style.backgroundColor&&(this.props.style.backgroundColor=e.backgroundColor,r=!0),e.style.background&&!this.props.style.backgroundColor&&(this.props.style.backgroundColor=e.style.background,r=!0);for(let s of rj)if(this.props.style[s]!==e.style[s]){r=!0;break}e.style[":hover"]!==this.props.hoverStyles&&(this.props.hoverStyles=e.style[":hover"],this.hoverEvents||(this.hoverEvents=!0,this.addEventListener("pointerenter",this.addHover),this.addEventListener("pointerleave",this.removeHover)),r=!0),e.style[":active"]!==this.props.pressStyles&&(this.props.pressStyles=e.style[":active"],this.activeEvents||(this.activeEvents=!0,this.addEventListener("mousedown",this.addPress),this.addEventListener("mouseup",this.removePress)),r=!0)}e.href!==this.props.href&&(this.props.href=e.href,r=!0),e.hrefTarget!==this.props.hrefTarget&&(this.props.hrefTarget=e.hrefTarget,r=!0),e.title!==this.props.title&&(this.props.title=e.title,r=!0),e.className!==this.props.className&&(this.props.className=e.className,e.className&&!this.hoverEvents&&(this.hoverEvents=!0,this.addEventListener("pointerenter",this.addHover),this.addEventListener("pointerleave",this.removeHover)),e.className&&!this.activeEvents&&(this.activeEvents=!0,this.addEventListener("mousedown",this.addPress),this.addEventListener("mouseup",this.removePress)),r=!0),e.relativeSize!==this.props.relativeSize&&(this.props.relativeSize=e.relativeSize,r=!0),e.relativeStyle!==this.props.relativeStyle&&(this.props.relativeStyle=e.relativeStyle,r=!0),e.html!==this.props.html&&(this.props.html=e.html,r=!0),e.target&&(e.target.width!==this.display.width||e.target.height!==this.display.height||e.target.x!==this.points[1]||e.target.y!==this.points[2])&&(r=!0,this.points=zt.singleBox(e.target.width,e.target.height,e.target.x,e.target.y),this.display.points=zt.singleBox(e.target.width,e.target.height,e.target.x,e.target.y),this.display.width=e.target.width,this.display.height=e.target.height),r&&this.__revision++}},Ph=class extends Ws{constructor(){super(),N(this,"type","spacial-content"),N(this,"id"),N(this,"points"),N(this,"color","#000"),N(this,"backgroundColor"),N(this,"hovering"),N(this,"pressing"),N(this,"text",""),N(this,"display",{x:0,y:0,scale:1,width:100,height:100,points:ot(5)}),N(this,"className"),N(this,"html"),N(this,"interactive",!1),N(this,"props",{font:"18px Arial, sans-serif",lineHeight:1,textAlign:"left",verticalAlign:"top",paddingX:0,paddingY:0,fitParent:!1,lineBreak:"auto",strokeText:!1,sizeToFill:!1,maxFontSizeToFill:void 0,allowNewLine:!0,justifyLines:!1,renderHDPI:!1,textDecoration:"none",interactive:!1,relativeSize:!1}),this.id="",this.points=ot(5)}getAllPointsAt(e,r){return[[this,this.points,r]]}applyProps({id:e,target:r,text:n,color:s,backgroundColor:l,fontSize:u=18,interactive:d,fontFamily:h="Arial, sans-serif",...v}){v.font=`${u}px ${h}`,this.interactive=d||!1,typeof n<"u"&&(this.text=n||""),s&&(this.color=s),l&&(this.backgroundColor=l),e&&(this.id=e),r&&(this.points=zt.singleBox(r.width,r.height,r.x,r.y),this.display.points=this.points,this.display.width=r.width,this.display.height=r.height),this.props={...this.props,...v},this.__revision++}},ud=Math.pow,nj=Math.cos,ij=Math.PI,jl={easeInOutQuad:function(t){return t<.5?2*t*t:1-ud(-2*t+2,2)/2},easeOutQuart:function(t){return 1-ud(1-t,4)},easeInOutSine:function(t){return-(nj(ij*t)-1)/2},easeOutExpo:function(t){return t===1?1:1-ud(2,-10*t)},easeInOutExpo:function(t){return t===0?0:t===1?1:t<.5?ud(2,20*t-10)/2:(2-ud(2,-20*t+10))/2}},sj=class{constructor(e){N(this,"runtime"),N(this,"pendingTransition"),N(this,"lastZoomTo",null),N(this,"isConstraining",!1),N(this,"lastGoToRegion",null),this.runtime=e,this.pendingTransition={from:ot(5),to:ot(5),elapsed_time:0,done:!0,total_time:0,timingFunction:jl.easeInOutQuad,constrain:!1}}hasPending(){return!this.pendingTransition.done}getPendingTransition(){return this.pendingTransition}getPendingFrom(){return this.pendingTransition.from}customTransition(e){e(this.pendingTransition)}stopTransition(){this.pendingTransition.from=ot(this.runtime.target),this.pendingTransition.to=ot(this.runtime.target),this.pendingTransition.done=!0,this.pendingTransition.elapsed_time=0,this.pendingTransition.total_time=0}runTransition(e,r){var n,s;if(!this.pendingTransition.done){let l=this.pendingTransition,u=l.total_time===0?0:(l.elapsed_time+r)/l.total_time,d=l.total_time===0?1:u===0?0:l.timingFunction(u);e[1]=l.from[1]+(l.to[1]-l.from[1])*d,e[2]=l.from[2]+(l.to[2]-l.from[2])*d,e[3]=l.from[3]+(l.to[3]-l.from[3])*d,e[4]=l.from[4]+(l.to[4]-l.from[4])*d,this.pendingTransition.elapsed_time+=r,this.pendingTransition.elapsed_time>=this.pendingTransition.total_time&&(this.pendingTransition.done=!0,(s=(n=this.pendingTransition).callback)==null||s.call(n),this.pendingTransition.constrain&&this.constrainBounds({transition:{duration:this.pendingTransition.total_time===0?0:500,easing:jl.easeOutExpo}}))}}resumeTransition(){this.lastZoomTo&&this.zoomTo(this.lastZoomTo.factor,this.lastZoomTo.options),this.isConstraining&&this.constrainBounds(),this.lastGoToRegion&&this.goToRegion(this.lastGoToRegion.target,this.lastGoToRegion.options)}zoomTo(e,r={}){let{origin:n,stream:s=!1,transition:l}=r;this.lastZoomTo={factor:e,options:r};let u=this.runtime.getZoomedPosition(e,{origin:n}),d=Math.abs(1-e);this.applyTransition(u,l,{duration:2e3*d,easing:jl.easeOutExpo,constrain:!0,callback:()=>{this.lastZoomTo=null}},{stream:!1})}constrainBounds({transition:e,panPadding:r=0}={}){this.isConstraining=!0;let[n,s]=this.runtime.constrainBounds(this.runtime.target,{panPadding:r});n&&(this.applyTransition(s,e,{duration:500,easing:jl.easeOutQuart,constrain:!1,callback:()=>{this.isConstraining=!1}}),this.runtime.updateNextFrame())}applyTransition(e,r,n,{stream:s}={}){this.pendingTransition.from=ot(this.runtime.target),this.pendingTransition.to=e,s||(this.pendingTransition.elapsed_time=0),this.pendingTransition.done=!1,this.pendingTransition.total_time=typeof(r==null?void 0:r.duration)<"u"?r.duration:typeof(n==null?void 0:n.duration)<"u"?n.duration:1e3,this.pendingTransition.constrain=typeof(r==null?void 0:r.constrain)<"u"?r.constrain:typeof(n==null?void 0:n.constrain)<"u"?n.constrain:!1,this.pendingTransition.timingFunction=(r==null?void 0:r.easing)||(n==null?void 0:n.easing)||jl.easeInOutSine}goToRegion(e,{transition:r}={}){this.lastGoToRegion={target:e,options:{transition:r}};let n=this.runtime.clampRegion(e);this.applyTransition(zt.singleBox(n.width,n.height,n.x,n.y),r,{duration:1e3,easing:jl.easeOutExpo,constrain:!0,callback:()=>{this.lastGoToRegion=null}}),this.runtime.updateNextFrame()}},np=class{constructor(e,r,n,s=[],l){N(this,"id",tp()),N(this,"ready",!1),N(this,"renderer"),N(this,"world"),N(this,"target"),N(this,"homePosition"),N(this,"manualHomePosition"),N(this,"manualFocalPosition"),N(this,"focalPosition"),N(this,"transitionManager"),N(this,"aggregate"),N(this,"transformBuffer",ot(500)),N(this,"lastTarget",ot(5)),N(this,"zoomBuffer",ot(5)),N(this,"logNextRender",!1),N(this,"pendingUpdate",!0),N(this,"isCommitting",!1),N(this,"firstRender",!0),N(this,"lastTime"),N(this,"stopId"),N(this,"mode","explore"),N(this,"controllers",[]),N(this,"controllersRunning",!1),N(this,"controllerStopFunctions",[]),N(this,"maxScaleFactor",1),N(this,"_viewerToWorld",{x:0,y:0}),N(this,"_lastGoodScale",1),N(this,"hooks",{useFrame:[],useBeforeFrame:[],useAfterPaint:[],useAfterFrame:[]}),N(this,"fpsLimit"),N(this,"options"),N(this,"hookOptions",{filters:{grayscale:0,contrast:0,brightness:0,saturate:0,sepia:0,invert:0,hueRotate:0,blur:0}}),N(this,"_viewport",{x:0,y:0,width:0,height:0}),N(this,"setViewport",u=>{let d=Math.round(typeof u.x>"u"?this.target[1]:u.x),h=Math.round(typeof u.y>"u"?this.target[2]:u.y);u.width?this.target[3]=d+u.width:this.target[3]=this.target[3]-this.target[1]+d,u.height?this.target[4]=h+u.height:this.target[4]=this.target[4]-this.target[2]+h,Math.abs(this.target[1]-d)>.01&&(this.target[1]=d),Math.abs(this.target[2]-h)>.01&&(this.target[2]=h),this.pendingUpdate=!0}),N(this,"render",u=>{let d=u-this.lastTime;if(this.isCommitting||this.fpsLimit&&d<1e3/this.fpsLimit){this.stopId=window.requestAnimationFrame(this.render);return}this.lastTime=u,this.world.flushSubscriptions(),this.stopId=window.requestAnimationFrame(this.render),this.hook("useFrame",d);let h=this.pendingUpdate,v=this.renderer.pendingUpdate();if(this.transitionManager.hasPending()&&(this.transitionManager.runTransition(this.target,d),this.pendingUpdate=!0,this.updateControllerPosition()),!this.firstRender&&!h&&!v&&this.target[0]===this.lastTarget[0]&&this.target[1]===this.lastTarget[1]&&this.target[2]===this.lastTarget[2]&&this.target[3]===this.lastTarget[3]&&this.target[4]===this.lastTarget[4])return;this.hook("useBeforeFrame",d),this.renderer.beforeFrame(this.world,d,this.target,this.hookOptions);let g=this.getScaleFactor(),w=this.renderer.getPointsAt(this.world,this.target,this.aggregate,g),b=w.length;for(let C=0;C<b;C++){let j=w[C][0],O=w[C][1],L=w[C][2],A=L?Ro(O,L,this.transformBuffer):O;this.renderer.prepareLayer(j,j.__parent&&L?Ro(j.__parent.crop||j.__parent.points,L):A);let F=A.length/5;for(let z=0;z<F;z++){let B=z*5;A[B]!==0&&(this.renderer.paint(j,z,A[B+1],A[B+2],A[B+3]-A[B+1],A[B+4]-A[B+2]),this.hook("useAfterPaint",j))}this.renderer.finishLayer(j,O)}this.renderer.afterFrame(this.world,d,this.target,this.hookOptions),this.hook("useAfterFrame",d),this.lastTarget[0]=this.target[0],this.lastTarget[1]=this.target[1],this.lastTarget[2]=this.target[2],this.lastTarget[3]=this.target[3],this.lastTarget[4]=this.target[4],this.firstRender=!1,this.pendingUpdate=!1,this.logNextRender=!1,this.renderer.isReady()&&(this.ready=!0,this.world.trigger("ready")),this.world.flushSubscriptions();let R=this.world.getScheduledUpdates(this.target,g),P=R.length;if(P>0)for(let C=0;C<P;C++){let j=R[P-C-1]();j?j.then(()=>{this.pendingUpdate=!0}):this.pendingUpdate=!0}}),this.renderer=e,this.world=r,this.options={maxOverZoom:1,maxUnderZoom:1,visibilityRatio:1.5,...l||{}},this.target=zt.projection(n),this.manualHomePosition=!1,this.pendingUpdate=!0,this.homePosition=zt.projection(this.world),this.manualFocalPosition=!1,this.focalPosition=this.target,this.updateFocalPosition(),this.transitionManager=new sj(this),this.aggregate=zl(1),this.world.addLayoutSubscriber(u=>{u==="repaint"&&(this.pendingUpdate=!0),u==="recalculate-world-size"&&(this.manualHomePosition||(this.setHomePosition(),this.goHome()),this.updateFocalPosition())}),this.lastTime=performance.now(),this.controllers=s,this.render(this.lastTime),this.startControllers()}get x(){return this.target[1]}set x(e){this.target[1]=e}get y(){return this.target[2]}set y(e){this.target[2]=e}get x2(){return this.target[3]}set x2(e){this.target[3]=e}get y2(){return this.target[4]}set y2(e){this.target[4]=e}get width(){return this.target[3]-this.target[1]}set width(e){this.target[3]=this.target[1]+e}get height(){return this.target[4]-this.target[2]}set height(e){this.target[4]=this.target[2]=e}setHomePosition(e){this.homePosition.set(zt.projection(e||this.world)),this.pendingUpdate=!0}startControllers(){if(!this.controllersRunning){for(let e of this.controllers)this.controllerStopFunctions.push(e.start(this));this.controllersRunning=!0}}stopControllers(){if(this.controllersRunning){for(let e of this.controllerStopFunctions)e();this.controllersRunning=!1,this.controllerStopFunctions=[]}}updateControllerPosition(){for(let e of this.controllers)e.updatePosition(this.x,this.y,this.width,this.height)}triggerResize(){this.renderer.triggerResize&&this.renderer.triggerResize(),this.pendingUpdate=!0}addController(e){this.controllers.push(e),this.controllersRunning&&e.start(this),this.pendingUpdate=!0}cover(){return this.goHome({cover:!0})}getRendererScreenPosition(){return this.renderer.getRendererScreenPosition()}updateRendererScreenPosition(){this.pendingUpdate=!0,this.renderer.resize()}setOptions(e){this.options={...this.options,...e}}goHome(e={}){if(this.world.width<=0||this.world.height<=0)return;let r=this.getScaleFactor(),n=e.position?{x:e.position[1],y:e.position[2],width:e.position[3]-e.position[1],height:e.position[4]-e.position[2]}:{x:this.homePosition[1],y:this.homePosition[2],width:this.homePosition[3]-this.homePosition[1],height:this.homePosition[4]-this.homePosition[2]},s=this.width*r,l=this.height*r,u=n.width/s,d=n.height/l,h=s/l;if(e.cover?u>d:u<d){let v=h*n.height,g=(v-n.width)/2;this.target[1]=Math.round(-g+n.x),this.target[2]=Math.round(n.y),this.target[3]=Math.round(v-g+n.x),this.target[4]=Math.round(n.height+n.y)}else{let v=n.width/h,g=(v-n.height)/2;this.target[1]=Math.round(n.x),this.target[2]=Math.round(n.y-g),this.target[3]=Math.round(n.x+n.width),this.target[4]=Math.round(n.y+v-g)}this.constrainBounds(this.target),this.updateControllerPosition()}resize(e,r,n,s){this.transitionManager.hasPending()&&this.transitionManager.stopTransition(),this.updateFocalPosition(e-r,n-s);let l=r/e,u=s/n;this.target[3]=this.target[1]+(this.target[3]-this.target[1])*l,this.target[4]=this.target[2]+(this.target[4]-this.target[2])*u,this.goHome({position:this.focalPosition}),this.renderer.resize(r,s),this.pendingUpdate=!0,this.transitionManager.resumeTransition()}updateFocalPosition(e,r){if(!this.manualFocalPosition){let n=this.width,s=this.height,l=Math.min(n,s),u=0,d=0,h=this.x+u,v=this.y+d;if(n<s){let g=this.height-this.width;this.focalPosition=zt.projection({x:h,y:v+g/2,width:l-u*2,height:l-d*2}),this.pendingUpdate=!0}else{let g=this.width-this.height;this.focalPosition=zt.projection({x:h+g/2,y:v,width:l-u*2,height:l-d*2}),this.pendingUpdate=!0}}}getViewport(){return this._viewport.x=this.target[1],this._viewport.y=this.target[2],this._viewport.width=this.target[3]-this.target[1],this._viewport.height=this.target[4]-this.target[2],this._viewport}constrainBounds(e,{panPadding:r=0,ref:n=!1}={}){let{minX:s,maxX:l,minY:u,maxY:d}=this.getBounds({target:e,padding:r}),h=!1,v=n?e:ot(e),g=Math.round(e[3]-e[1]),w=Math.round(e[4]-e[2]);return s>e[1]&&(h=!0,v[1]=s,v[3]=s+g),u>e[2]&&(h=!0,v[2]=u,v[4]=u+w),l<e[1]&&(h=!0,v[1]=l,v[3]=l+g),d<e[2]&&(h=!0,v[2]=d,v[4]=d+w),[h,v]}getBounds(e){let r=e.target||this.target,n=e.padding,s=this.options.visibilityRatio,l=Math.abs(1-s);if(this.world.hasActiveZone()){let L=this.world.getActiveZone();if(L){let A=r[3]-r[1]<L.points[3]-L.points[1],F=r[4]-r[2]<L.points[4]-L.points[2];return{minX:A?L.points[1]-n:L.points[1]+(L.points[3]-L.points[1])/2-(r[3]-r[1])/2,maxX:F?L.points[2]-n:L.points[2]+(L.points[4]-L.points[2])/2-(r[4]-r[2])/2,minY:A?L.points[3]+n:L.points[1]+(L.points[3]-L.points[1])/2-(r[3]-r[1])/2,maxY:F?L.points[4]+n:L.points[2]+(L.points[4]-L.points[2])/2-(r[4]-r[2])/2}}}let u=r[3]-r[1],d=this.world.width,h=-u*l,v=d-u-h,g=r[4]-r[2],w=this.world.height,b=-g*l,R=w-g-b,P=Math.round(Math.max(h,v)),C=Math.round(Math.min(h,v)),j=Math.round(Math.max(b,R)),O=Math.round(Math.min(b,R));return{minX:C,maxX:P,minY:O,maxY:j}}getScaleFactor(e=!1){let r=this.renderer.getScale(this.target[3]-this.target[1],this.target[4]-this.target[2],e);return r===0?this._lastGoodScale:(this._lastGoodScale=r,r)}getZoomedPosition(e,{origin:r,fromPos:n}){var j;let s=n?{width:n[3]-n[1],height:n[4]-n[2]}:void 0,l=s?this.renderer.getScale(s.width,s.height):this.getScaleFactor(),u=s?s.width:this.width,d=s?s.height:this.height,h=(j=this.getRendererScreenPosition())==null?void 0:j.width,v=this.world.width,g=h?h/v:1,w=this.options.maxUnderZoom,b=Math.max(g||1,this.options.maxOverZoom),R=1/e,P=l*R;if(R<1){let O=u*l,L=d*l,A=this.world.width/O,F=this.world.height/L;if(A>F){let z=this.world.width*P,B=~~(u*l)*w;z<B&&(e=this.world.width*l/(u*l*w))}else{let z=this.world.height*P,B=~~(d*l)*w;z<B&&(e=this.world.height*l/(d*l*w))}}else P>b&&(e=l/b);let C=Ro(this.target,Ld(e,r?r.x:this.target[1]+(this.target[3]-this.target[1])/2,r?r.y:this.target[2]+(this.target[4]-this.target[2])/2),this.zoomBuffer);return this.constrainBounds(C,{ref:!0,panPadding:100}),C}clampRegion({x:e,y:r,width:n,height:s,padding:l=0}){let u=this.width,d=this.height,h=n/u<s/d,v=e-l,g=r-l,w=n+l*2,b=s+l*2;if(h){let P=b/d*u;return{x:v-(P-w)/2,y:g,width:P,height:b}}let R=w/u*d;return{x:v,y:g-(R-b)/2,width:w,height:R}}viewerToWorld(e,r){let n=this.getScaleFactor();return this._viewerToWorld.x=this.target[1]+e/n,this._viewerToWorld.y=this.target[2]+r/n,this._viewerToWorld}worldToViewer(e,r,n,s){let l=zt.singleBox(n,s,e,r);return zs(l,To(zl(this.getScaleFactor()),ti(-this.target[1],-this.target[2]))),{x:l[1],y:l[2],width:l[3]-l[1],height:l[4]-l[2],strand:l}}setScale(e,r){zs(this.target,Ld(e,r?r.x:this.target[1]+(this.target[3]-this.target[1])/2,r?r.y:this.target[2]+(this.target[4]-this.target[2])/2)),this.pendingUpdate=!0}syncTo(e){let r=this.target;return this.target=e.target,this.pendingUpdate=!0,()=>{this.target=r}}stop(){return typeof this.stopId<"u"&&(window.cancelAnimationFrame(this.stopId),this.stopId=void 0),()=>{this.render(performance.now())}}reset(){this.renderer.reset()}selectZone(e){this.world.selectZone(e),this.pendingUpdate=!0}deselectZone(){this.world.deselectZone(),this.pendingUpdate=!0}hook(e,r){let n=this.hooks[e].length;if(n!==0)for(let s=0;s<n;s++)this.hooks[e][s](r)}registerHook(e,r){return this.hooks[e].push(r),()=>{this.hooks[e]=this.hooks[e].filter(n=>n!==r)}}updateNextFrame(){this.pendingUpdate=!0}},ah=/([0-9]+(px|em)\s+)+(solid)\s+(.*)/g,uh={},oj=["backgroundColor","opacity","boxShadow","borderColor","borderWidth","borderStyle","outlineColor","outlineWidth","outlineOffset","outlineStyle"],q1=class extends Ws{constructor(){super(),N(this,"id"),N(this,"type","spacial-content"),N(this,"isShape",!0),N(this,"points"),N(this,"hoverEvents",!1),N(this,"activeEvents",!1),N(this,"display",{x:0,y:0,scale:1,width:-1,height:-1,points:ot(5)}),N(this,"boundingBox",null),N(this,"_parsed",{border:{id:null,match:[]},outline:{id:null,match:[]}}),N(this,"hovering"),N(this,"pressing"),N(this,"props",{}),N(this,"shape",{type:"none"}),N(this,"addHover",()=>{this.hovering=!0,this.__revision++}),N(this,"removeHover",()=>{this.hovering=!1,this.pressing=!1,this.__revision++}),N(this,"addPress",()=>{this.pressing=!0,this.__revision++}),N(this,"removePress",()=>{this.pressing=!1,this.__revision++}),this.id=tp(12),this.points=ot(5),this.shape={type:"none"}}updateBoundingBox(){if(this.shape.type==="none")return;let e=this.shape.points;if(this.shape.points.length>2){let r=Math.min(...e.map(u=>u[0])),n=Math.min(...e.map(u=>u[1])),s=Math.max(0,...e.map(u=>u[0])),l=Math.max(0,...e.map(u=>u[1]));this.boundingBox={x:r,y:n,width:s-r,height:l-n};return}this.boundingBox=null}intersects(e){if(!e||this.shape.type==="none")return!1;let[r,n]=e,s=this.shape.points,l=this.boundingBox;if(l||(this.updateBoundingBox(),l=this.boundingBox),!l||r<l.x||r>l.x+l.width||n<l.y||n>l.height+l.y)return!1;let u=!1;for(let d=0,h=s.length-1;d<s.length;h=d++)s[d][1]>n!=s[h][1]>n&&r<(s[h][0]-s[d][0])*(n-s[d][1])/(s[h][1]-s[d][1])+s[d][0]&&(u=!u);return u}getAllPointsAt(e,r){return e[3]-e[1]===1&&e[4]-e[2]===1?this.intersects([e[1],e[2]])?[[this,this.points,r]]:[]:[[this,this.points,r]]}applyProps(e={}){let r=!1;if(e.points)if(this.shape.type!=="polygon"||this.shape.points.length!==e.points.length)this.shape={type:"polygon",points:e.points,open:e.open},this.updateBoundingBox();else{let n=!1,s=e.points.length;for(let l=0;l<s;l++)if(e.points[l][0]!==this.shape.points[l][0]||e.points[l][1]!==this.shape.points[l][1]){n=!0;break}n&&(this.shape={type:"polygon",points:e.points,open:e.open},this.updateBoundingBox())}if(e.interactive!==this.props.interactive&&(r=!0,this.props.interactive=e.interactive),(e.open||e.open===!1)&&(r=!0,this.shape.open=e.open),e.style){let n=e.border||e.style.border;if(n!==this._parsed.border.id)if(!n)this._parsed.border.id=null,this._parsed.border.match=[];else{let s=uh[n]||ah.exec(n)||ah.exec(n);s&&(this._parsed.border.id=n,this._parsed.border.match=uh[n]=s)}if(this._parsed.border.id&&(e.style.borderWidth=this._parsed.border.match[1],e.style.borderStyle="solid",e.style.borderColor=this._parsed.border.match[4]),e.style.outline!==this._parsed.outline.id)if(!e.style.outline)this._parsed.outline.id=null,this._parsed.outline.match=[];else{let s=uh[e.style.outline]||ah.exec(e.style.outline)||ah.exec(e.style.outline);s&&(this._parsed.outline.id=e.style.outline,this._parsed.outline.match=uh[e.style.outline]=s)}this._parsed.outline.id&&(e.style.outlineWidth=this._parsed.outline.match[1],e.style.outlineStyle="solid",e.style.outlineColor=this._parsed.outline.match[4]),this.props.style=e.style,e.backgroundColor&&!this.props.style.backgroundColor&&(this.props.style.backgroundColor=e.backgroundColor,r=!0),e.style.background&&!this.props.style.backgroundColor&&(this.props.style.backgroundColor=e.style.background,r=!0);for(let s of oj)if(this.props.style[s]!==e.style[s]){r=!0;break}e.style[":hover"]!==this.props.hoverStyles&&(this.props.hoverStyles=e.style[":hover"],this.hoverEvents||(this.hoverEvents=!0,this.addEventListener("pointerenter",this.addHover),this.addEventListener("pointerleave",this.removeHover)),r=!0),e.style[":active"]!==this.props.pressStyles&&(this.props.pressStyles=e.style[":active"],this.activeEvents||(this.activeEvents=!0,this.addEventListener("mousedown",this.addPress),this.addEventListener("mouseup",this.removePress)),r=!0)}e.href!==this.props.href&&(this.props.href=e.href,r=!0),e.hrefTarget!==this.props.hrefTarget&&(this.props.hrefTarget=e.hrefTarget,r=!0),e.title!==this.props.title&&(this.props.title=e.title,r=!0),e.className!==this.props.className&&(this.props.className=e.className,e.className&&!this.hoverEvents&&(this.hoverEvents=!0,this.addEventListener("pointerenter",this.addHover),this.addEventListener("pointerleave",this.removeHover)),e.className&&!this.activeEvents&&(this.activeEvents=!0,this.addEventListener("mousedown",this.addPress),this.addEventListener("mouseup",this.removePress)),r=!0),e.relativeSize!==this.props.relativeSize&&(this.props.relativeSize=e.relativeSize,r=!0),e.relativeStyle!==this.props.relativeStyle&&(this.props.relativeStyle=e.relativeStyle,r=!0),e.html!==this.props.html&&(this.props.html=e.html,r=!0),e.target&&(e.target.width!==this.display.width||e.target.height!==this.display.height||e.target.x!==this.points[1]||e.target.y!==this.points[2])&&(r=!0,this.points=zt.singleBox(e.target.width,e.target.height,e.target.x,e.target.y),this.display.points=zt.singleBox(e.target.width,e.target.height,e.target.x,e.target.y),this.display.width=e.target.width,this.display.height=e.target.height),r&&this.__revision++}},a0=/(-?[0-9]+(px|em)\s+|0\s+)(-?[0-9]+(px|em)\s+|0\s+)(-?[0-9]+(px|em)\s+|0\s+)?(-?[0-9]+(px|em)\s+|0\s+)?(.*)/g,u0={},lj=typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes("firefox"),ch={},aj=class{constructor(t,e){N(this,"canvas"),N(this,"ctx"),N(this,"options"),N(this,"imagesPending",0),N(this,"imagesLoaded",0),N(this,"imageIdsLoaded",[]),N(this,"frameIsRendering",!1),N(this,"pendingDrawCall",!1),N(this,"firstMeaningfulPaint",!1),N(this,"parallelTasks",8),N(this,"frameTasks",0),N(this,"loadingQueueOrdered",!0),N(this,"loadingQueue",[]),N(this,"currentTask",Promise.resolve()),N(this,"tasksRunning",0),N(this,"stats"),N(this,"averageJobTime",64),N(this,"lastKnownScale",1),N(this,"visible",[]),N(this,"previousVisible",[]),N(this,"rendererPosition"),N(this,"dpi"),N(this,"drawCalls",[]),N(this,"lastPaintedObject"),N(this,"hostCache"),N(this,"invalidated",[]),N(this,"_worker",()=>{if(this.loadingQueue.length){let r=this.loadingQueue.pop();r&&(this.tasksRunning++,this.frameTasks++,this.currentTask=r.task().then(()=>{this.tasksRunning--}).catch(()=>{this.tasksRunning--}))}}),N(this,"_scheduled",0),N(this,"_doWork",()=>{this.loadingQueue.length===0&&this.tasksRunning===0&&this._scheduled&&(clearInterval(this._scheduled),this._scheduled=0);let r=this.parallelTasks||1;!this.firstMeaningfulPaint&&this.loadingQueue.length&&(r=this.loadingQueue.length);for(let n=0;n<=r;n++)this._worker()}),this.canvas=t,this.rendererPosition=t.getBoundingClientRect(),this.ctx=t.getContext("2d",{alpha:!0}),this.ctx.imageSmoothingEnabled=!0,this.options=e||{},this.canvas.style.transition="opacity .3s",this.dpi=(e==null?void 0:e.dpi)||1,this.hostCache=e!=null&&e.lruCache?new Ba({maxSize:1024*512*512,dispose:(r,n,s)=>{this.invalidated.push(n),r.width=0,r.height=0},sizeCalculation:(r,n)=>r.width*r.height}):{store:{},get(r){return this.store[r]},set(r,n){this.store[r]=n}}}getCanvasDims(){return{width:this.canvas.width/this.dpi,height:this.canvas.height/this.dpi}}resize(){this.rendererPosition=this.canvas.getBoundingClientRect()}isReady(){return this.firstMeaningfulPaint}afterFrame(t){if(this.clearTransform(),this.lastPaintedObject=void 0,this.frameIsRendering=!1,this.imagesPending=Math.max(0,this.imagesPending-this.imagesLoaded),this.imagesLoaded=0,this.loadingQueueOrdered||(this.loadingQueue=this.loadingQueue.sort((e,r)=>e.network&&e.scale===r.scale?r.distance-e.distance:e.scale<r.scale?-1:1),this.loadingQueueOrdered=!0),this.previousVisible=this.visible,this.pendingDrawCall=!!this.drawCalls.length,this.pendingDrawCall)for(let e=0;e<this.drawCalls.length;e++){let r=this.drawCalls.shift();r&&r()}this.doOffscreenWork(),this.options.debug&&this.stats&&this.stats.end()}doOffscreenWork(){this.frameTasks=0,this.loadingQueue.length&&(this._worker(),this.loadingQueue.length&&(this._scheduled||(this._scheduled=setInterval(this._doWork,0))))}getScale(t,e,r){if(Number.isNaN(t)||Number.isNaN(e))return this.lastKnownScale;let n=this.getCanvasDims(),s=n.width/t,l=n.height/e,u=(s<l?l:s)*(r&&this.dpi||1);return Number.isNaN(u)||(this.lastKnownScale=u),this.lastKnownScale}beforeFrame(t,e,r,n){this.options.debug&&this.stats&&this.stats.begin(),this.frameIsRendering=!0,this.visible=[],this.options.beforeFrame&&this.options.beforeFrame(e);let s=this.getCanvasDims();if(this.ctx.globalAlpha=1,this.ctx.fillStyle=this.canvas.dataset.background??"rgb(0, 0, 0)",this.ctx.fillRect(0,0,s.width,s.height),n.enableFilters&&(n.filters.brightness||n.filters.contrast||n.filters.grayscale||n.filters.invert||n.filters.sepia||n.filters.saturate||n.filters.hueRotate||n.filters.blur)){let l="";n.filters.brightness&&(l+=`brightness(${~~(100+n.filters.brightness*100)}%) `),n.filters.contrast&&(l+=`contrast(${~~(100+n.filters.contrast*100)}%) `),n.filters.grayscale&&(l+=`grayscale(${~~(n.filters.grayscale*100)}%) `),n.filters.invert&&(l+=`invert(${~~(n.filters.invert*100)}%) `),n.filters.sepia&&(l+=`sepia(${~~(n.filters.sepia*100)}%) `),n.filters.saturate&&(l+=`saturate(${~~(100+n.filters.saturate*100)}%) `),n.filters.hueRotate&&(l+=`hue-rotate(${n.filters.hueRotate}deg) `),n.filters.blur&&(l+=`blur(${n.filters.blur}px) `),this.ctx.filter=l}else this.ctx.filter="none"}applyTransform(t,e,r,n,s){let l=t.__owner.value;if(l&&l.rotation){this.ctx.save();let u=e+n/2,d=r+s/2;this.ctx.translate(u,d),this.ctx.rotate(l.rotation*Math.PI/180),this.ctx.translate(-u,-d),this.lastPaintedObject=l}}clearTransform(){this.lastPaintedObject&&(this.lastPaintedObject.rotation&&this.ctx.restore(),this.lastPaintedObject=void 0)}paint(t,e,r,n,s,l){let u=this.ctx.globalAlpha;if(t instanceof Fl||t instanceof Md){if(t.display.rotation){this.ctx.save();let v=r+s/2,g=n+l/2;t.crop&&(v-=t.crop[e*5+1],g-=t.crop[e*5+2]),this.ctx.translate(v,g),this.ctx.rotate(t.display.rotation*Math.PI/180),this.ctx.translate(-v,-g)}if(this.visible.push(t),typeof t.style&&t.style.opacity!=="undefined"){if(!t.style.opacity)return;this.ctx.globalAlpha=t.style.opacity}try{let v=t.__host.canvas,g=this.getCanvasDims();if((v.indices.indexOf(e)===-1||this.invalidated.indexOf(v.canvases[e])!==-1)&&this.schedulePaintToCanvas(v,t,e,Ah({x:r+s/2,y:n+s/2},{x:g.width/2,y:g.height/2})),!this.firstMeaningfulPaint)return;let w=this.hostCache.get(v.canvases[e]);if(w)if(t.crop&&t.cropData){if(t.crop[e*5]){let b=[t.crop[e*5+1]/t.display.scale-t.display.points[e*5+1],t.crop[e*5+2]/t.display.scale-t.display.points[e*5+2],1+(t.crop[e*5+3]-t.crop[e*5+1])/t.display.scale,1+(t.crop[e*5+4]-t.crop[e*5+2])/t.display.scale];b[0]+=t.cropData.x/t.display.scale,b[1]+=t.cropData.y/t.display.scale;let R=t.x*this.lastKnownScale,P=t.y*this.lastKnownScale,C=[r+R,n+P,s,l];C[0]+=R,C[1]+=P,this.ctx.drawImage(w,b[0],b[1],b[2],b[3],C[0],C[1],C[2]+1,C[3]+1)}}else lj?this.ctx.drawImage(w,0,0,t.display.points[e*5+3]-t.display.points[e*5+1],t.display.points[e*5+4]-t.display.points[e*5+2],r,n,s+1,l+1):this.ctx.drawImage(w,0,0,t.display.points[e*5+3]-t.display.points[e*5+1],t.display.points[e*5+4]-t.display.points[e*5+2],r,n,s+Number.MIN_VALUE+.5,l+Number.MIN_VALUE+.5)}catch{}t.display.rotation&&this.ctx.restore()}let d=t instanceof Ed&&this.options.box,h=t instanceof q1&&this.options.polygon;if((d||h)&&!t.props.className&&!t.props.html&&!t.props.href){if(this.visible.push(t),t.props.style){let v=Object.assign({},t.props.style||{},t.hovering?t.props.hoverStyles:{},t.pressing?t.props.pressStyles:{}),g=t.props.relativeStyle?1:s/t.width;typeof v.opacity<"u"&&(this.ctx.globalAlpha=v.opacity);let w=0;typeof v.borderWidth<"u"&&(w=parseInt(v.borderWidth,10)*g);let b=0;typeof v.outlineWidth<"u"&&(b=parseInt(v.outlineWidth,10)*g);let R=0;if(typeof v.outlineOffset<"u"&&(R=parseInt(v.outlineOffset,10)*g),v.borderColor&&(this.ctx.strokeStyle=v.borderColor),v.boxShadow){let P=v.boxShadow.split(/,(?![^(]*\))/);for(let C of P){let j=u0[C]||a0.exec(C)||a0.exec(C);u0[C]=j,j&&(this.ctx.save(),this.ctx.shadowOffsetX=parseInt(j[1])*this.dpi*g,this.ctx.shadowOffsetY=parseInt(j[3])*this.dpi*g,this.ctx.shadowBlur=parseInt(j[5])*this.dpi*g,this.ctx.shadowColor=j[9],this.ctx.fillStyle="rgba(0,0,0,1)",this.ctx.fillRect(r+w,n+w,s,l),this.ctx.restore())}}if(this.ctx.fillStyle=v.backgroundColor||"transparent",this.ctx.lineWidth=w,h){let P=t.shape,C=P.points||[],j=C.length;this.ctx.beginPath();for(let O=0;O<j;O++)this.ctx.lineTo(r+C[O][0]*this.lastKnownScale,n+C[O][1]*this.lastKnownScale);P.open||this.ctx.closePath(),w&&this.ctx.stroke(),P.open||this.ctx.fill()}else w&&this.ctx.strokeRect(r+w/2,n+w/2,s+w,l+w),this.ctx.fillRect(r+w,n+w,s,l);b&&(v.outlineColor&&(this.ctx.strokeStyle=v.outlineColor),this.ctx.lineWidth=b,this.ctx.strokeRect(r-b/2-R,n-b/2-R,s+w*2+b+R*2,l+w*2+b+R*2))}this.ctx.globalAlpha=u}}loadImage(t,e,r,n=!1){if(ch[t]&&ch[t].naturalWidth>0){e(ch[t]);return}try{let s=!1;n||setTimeout(()=>{s||this.loadImage(t,e,r,!0)},3e3);let l=document.createElement("img");l.decoding="auto",l.onload=function(){s=!0,e(l),ch[t]=l,l.onload=null},this.options.crossOrigin&&(l.crossOrigin="anonymous"),l.src=t,l.complete&&l.onload({}),l.width}catch(s){console.log("image error",s),r(s)}}schedulePaintToCanvas(t,e,r,n){this.imagesPending++,t.indices.push(r);let s=`${e.id}--${e.display.scale}-${r}`,l=this.invalidated.indexOf(s);l!==-1&&this.invalidated.splice(l,1),t.canvases[r]=s,e.__host.canvas.loading=!0,this.loadingQueueOrdered=!1,this.loadingQueue.push({id:s,scale:e.display.scale,network:!0,distance:n,task:()=>new Promise(u=>{if(this.visible.indexOf(e)===-1){this.imagesPending--,t.indices.splice(t.indices.indexOf(r),1),u();return}let d=e.getImageUrl(r);this.loadImage(d,h=>{this.loadingQueue.push({id:s,scale:e.display.scale,distance:n,task:()=>new Promise(v=>{this.imageIdsLoaded.includes(s)||(this.imagesLoaded++,this.imageIdsLoaded.push(s)),t.loaded.push(r),t.loaded.length===t.indices.length&&(t.loading=!1);let g=e.display.points.slice(r*5,r*5+5),w=document.createElement("canvas"),b=w.getContext("2d");w.width=g[3]-g[1],w.height=g[4]-g[2],this.hostCache.set(t.canvases[r],w),this.drawCalls.push(()=>{b.drawImage(h,0,0,g[3]-g[1],g[4]-g[2]),v()})})}),u()},h=>{this.imagesPending--,t.indices.splice(t.indices.indexOf(r),1),u()})})})}afterPaintLayer(t,e){}prepareLayer(t,e){t.__owner.value&&(t.cropData?(this.lastKnownScale*(1/t.display.scale),this.applyTransform(t,e[1],e[2],e[3]-e[1],e[4]-e[2])):this.applyTransform(t,e[1],e[2],e[3]-e[1],e[4]-e[2])),(!t.__host||!t.__host.canvas)&&(t instanceof Fl||t instanceof Md)&&this.createImageHost(t)}finishLayer(){this.lastPaintedObject&&this.clearTransform()}createImageHost(t){t.__host=t.__host?t.__host:{},t.__host.canvas={canvas:void 0,canvases:[],indices:[],loaded:[],loading:!1}}getPointsAt(t,e,r,n){return t.getPointsAt(e,r,n)}getViewportBounds(t,e,r){let n=t.getActiveZone();if(n){let s=e[3]-e[1]<n.points[3]-n.points[1],l=e[4]-e[2]<n.points[4]-n.points[2];return{x1:s?n.points[1]-r:n.points[1]+(n.points[3]-n.points[1])/2-(e[3]-e[1])/2,y1:l?n.points[2]-r:n.points[2]+(n.points[4]-n.points[2])/2-(e[4]-e[2])/2,x2:s?n.points[3]+r:n.points[1]+(n.points[3]-n.points[1])/2-(e[3]-e[1])/2,y2:l?n.points[4]+r:n.points[2]+(n.points[4]-n.points[2])/2-(e[4]-e[2])/2}}return null}pendingUpdate(){let t=!this.pendingDrawCall&&this.drawCalls.length===0&&this.imagesPending===0&&this.loadingQueue.length===0&&this.tasksRunning===0;return!t&&this.visible.length===0&&setTimeout(()=>{this.canvas.style.opacity="1",this.firstMeaningfulPaint=!0},500),!this.firstMeaningfulPaint&&t&&this.visible.length?(this.canvas.style.opacity="1",this.firstMeaningfulPaint=t,!0):this.options.debug?!0:!t}getRendererScreenPosition(){return this.rendererPosition}reset(){this.loadingQueue=[],this.drawCalls=[]}},G1=class{constructor(e){N(this,"renderers",[]),N(this,"length");for(let r of e)r&&this.renderers.push(r);this.length=this.renderers.length}afterFrame(e,r,n,s){for(let l=0;l<this.length;l++)this.renderers[l].afterFrame(e,r,n,s)}afterPaintLayer(e,r){for(let n=0;n<this.length;n++)this.renderers[n].afterPaintLayer(e,r)}beforeFrame(e,r,n,s){for(let l=0;l<this.length;l++)this.renderers[l].beforeFrame(e,r,n,s)}triggerResize(){for(let e=0;e<this.length;e++){let r=this.renderers[e];r.triggerResize&&r.triggerResize()}}getPointsAt(e,r,n,s){return this.renderers[0].getPointsAt(e,r,n,s)}getScale(e,r){return this.renderers[0].getScale(e,r)}getViewportBounds(e,r,n){return this.renderers[0].getViewportBounds(e,r,n)}getRendererScreenPosition(){return this.renderers[0].getRendererScreenPosition()}isReady(){for(let e=0;e<this.length;e++)if(!this.renderers[e].isReady())return!1;return!0}paint(e,r,n,s,l,u){for(let d=0;d<this.length;d++)this.renderers[d].paint(e,r,n,s,l,u)}pendingUpdate(){for(let e=0;e<this.length;e++)if(this.renderers[e].pendingUpdate())return!0;return!1}prepareLayer(e,r){for(let n=0;n<this.length;n++)this.renderers[n].prepareLayer(e,r)}finishLayer(e,r){for(let n=0;n<this.length;n++)this.renderers[n].finishLayer(e,r)}resize(e,r){for(let n=0;n<this.length;n++)this.renderers[n].resize(e,r)}reset(){for(let e=0;e<this.length;e++)this.renderers[e].reset()}},uj=class{constructor(t){N(this,"canvas"),N(this,"context"),N(this,"heightRatio",1),N(this,"widthRatio",1),N(this,"target",new Float32Array(5)),N(this,"initialWidth"),N(this,"initialHeight"),N(this,"bounds"),N(this,"aggregate"),N(this,"delta",0),N(this,"renderNextFrame",!0),this.canvas=t,this.initialWidth=t.width,this.initialHeight=t.height,this.context=t.getContext("2d"),this.context.globalAlpha=.5,this.aggregate=zl(1)}isReady(){return!0}resize(){this.initialWidth=this.canvas.width,this.initialHeight=this.canvas.height,this.renderNextFrame=!0}afterFrame(t,e,r){if(this.renderNextFrame){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);let n=this.initialWidth/t.width,s=this.initialHeight/t.height,l=this.widthRatio>this.heightRatio?n:s;if(this.target=r,this.bounds){let u=t.getPointsAt(this.bounds,this.aggregate,l);for(let[d,h]of u)if(d instanceof Fl&&d.__host.canvas){let v=h.length/5;for(let g=0;g<v;g++)d.__host.canvas.canvases[g]&&(h[g+1]*l,h[g+2]*l,(h[g+3]-h[g+1])*l,(h[g+4]-h[g+2])*l)}}t.getPoints().forEach((u,d,h)=>{if(d%5===0&&u){let v={x1:h[d+1]*l,y1:h[d+2]*l,x2:h[d+3]*l,y2:h[d+4]*l,width:(h[d+3]-h[d+1])*l,height:(h[d+4]-h[d+2])*l};this.context.strokeStyle="red",this.context.strokeRect(v.x1,v.y1,v.width,v.height)}}),r&&(this.context.strokeStyle="red",this.context.lineWidth=window.devicePixelRatio||1,this.context.strokeRect(r[1]*l,r[2]*l,(r[3]-r[1])*l,(r[4]-r[2])*l))}}getActiveZone(t){return null}getPointsAt(t,e,r,n){return t.getPointsAt(e,r,n)}getScale(t,e){return 1}beforeFrame(t,e){this.bounds=zt.singleBox(t.width,t.height)}drawImage(){}afterPaintLayer(t,e){}paint(t,e,r,n,s,l){this.renderNextFrame=!0}prepareLayer(t){}pendingUpdate(){return!1}hasActiveZone(){return!1}getViewportBounds(t,e,r){return null}getRendererScreenPosition(){return this.canvas.getBoundingClientRect()}finishLayer(){}reset(){}};function cj(t){return{x:t[1],y:t[2],width:t[3]-t[1],height:t[4]-t[2]}}var c0="pan",d0="scroll",dj="gesture",fj={zoomOutFactor:.8,zoomInFactor:1.25,maxZoomFactor:1,minZoomFactor:.05,zoomDuration:300,zoomWheelConstant:20,zoomClamp:.6,panBounceStiffness:120,panBounceDamping:15,panTimeConstant:240,panPower:.1,nudgeDistance:100,panPadding:0,devicePixelRatio:1,enableWheel:!0,enableClickToZoom:!0,ignoreSingleFingerTouch:!1,enablePanOnWait:!1,requireMetaKeyForWheelZoom:!1,panOnWaitDelay:40,onPanInSketchMode:()=>{},parentElement:null},K1=(t={})=>({start:function(e){let{zoomWheelConstant:r,enableWheel:n,enableClickToZoom:s,ignoreSingleFingerTouch:l,enablePanOnWait:u,panOnWaitDelay:d,parentElement:h,requireMetaKeyForWheelZoom:v}={...fj,...t},g={pointerStart:{x:0,y:0},isPressing:!1,mousemoveBuffer:ot(5)};e.world.activatedEvents.push("onMouseUp","onMouseDown","onMouseMove","onTouchStart","onTouchEnd","onTouchMove","onContextMenu");function w(){C=0,O="",A(),A(void 0,"notice"),j=0}function b(){e.world.constraintBounds(),w()}function R(J){if(J.which>1){g.isPressing=!1;return}e.mode==="explore"&&(J.preventDefault(),g.pointerStart.x=J.atlas.x,g.pointerStart.y=J.atlas.y,e.transitionManager.stopTransition(),g.isPressing=!0)}function P(){w(),g.isPressing&&(e.mode==="explore"&&e.world.constraintBounds(),g.isPressing=!1)}let C=0,j=0,O="";function L(J){if(e.mode==="explore"){if(J.atlasTouches.length===1&&(j=performance.now(),l==!1&&J.preventDefault(),g.pointerStart.x=J.atlasTouches[0].x,g.pointerStart.y=J.atlasTouches[0].y),J.atlasTouches.length===2){O=dj,J.preventDefault();let H=J.atlasTouches[0].x,Y=J.atlasTouches[1].x;g.pointerStart.x=(H+Y)/2;let xe=J.atlasTouches[0].y,te=J.atlasTouches[1].y;g.pointerStart.y=(xe+te)/2,C=Ah({x:J.touches[0].clientX,y:J.touches[0].clientY},{x:J.touches[1].clientX,y:J.touches[1].clientY})}e.transitionManager.stopTransition(),g.isPressing=!0}}function A(J,H="intent"){h&&(h.dataset[H]=J)}function F(J){let H=null,Y=null,xe=0;if(g.isPressing&&J.touches.length===2){let te=J.touches[0].clientX,Te=J.touches[1].clientX;H=(te+Te)/2;let de=J.touches[0].clientY,je=J.touches[1].clientY;Y=(de+je)/2,xe=Ah({x:J.touches[0].clientX,y:J.touches[0].clientY},{x:J.touches[1].clientX,y:J.touches[1].clientY})}if(A(O),g.isPressing&&J.touches.length===1){if(u&&(performance.now()-j<d&&O==""&&(O=d0),O==""&&(O=c0)),A(O),O==""&&l==!0||O==d0){A("require-two-finger","notice");return}let te=J.touches[0];H=te.clientX,Y=te.clientY}if(H!==null&&Y!==null){let te=e.getRendererScreenPosition();if(te){let{x:Te,y:de}=e.viewerToWorld(H-te.x,Y-te.y),je=xe&&C?xe/C:1;e.transitionManager.customTransition(ee=>{ee.from=ot(e.target),ee.to=Ro(ee.from,To(ti(g.pointerStart.x-Te,g.pointerStart.y-de),Ld(1/je,Te,de)),g.mousemoveBuffer),ee.elapsed_time=0,ee.total_time=0,ee.timingFunction=jl.easeInOutExpo,ee.done=!1})}C=xe}O==c0&&J.preventDefault()}function z(J){if(g.isPressing){let H=e.getRendererScreenPosition();if(H){let{x:Y,y:xe}=e.viewerToWorld(J.clientX-H.x,J.clientY-H.y);e.transitionManager.customTransition(te=>{te.from=ot(e.target),te.to=Ro(te.from,ti(g.pointerStart.x-Y,g.pointerStart.y-xe),g.mousemoveBuffer),te.elapsed_time=0,te.total_time=0,te.timingFunction=jl.easeInOutExpo,te.done=!1})}}}function B(J){e.mode==="explore"&&e.world.zoomIn(J.atlas)}function $(J){let H=1+XR(J).spinY/r;e.world.zoomTo(H,J.atlas,!0)}function K(J){return v&&J.metaKey==!1?(A("meta-required","notice"),J.stopPropagation(),!1):!0}e.world.addEventListener("mouseup",b),e.world.addEventListener("touchend",b),e.world.addEventListener("touchstart",L),e.world.addEventListener("mousedown",R),window.addEventListener("touchend",P),window.addEventListener("mouseup",P),window.addEventListener("mousemove",z),h&&h.addEventListener("touchmove",F),s&&(e.world.activatedEvents.push("onClick"),e.world.addEventListener("click",B)),n&&(e.world.activatedEvents.push("onWheel"),v&&(h==null||h.addEventListener("wheel",K,{passive:!0,capture:!0})),e.world.addEventListener("wheel",$));let fe=e.world.addLayoutSubscriber((J,H)=>{if(J==="zone-changed"&&e.transitionManager.constrainBounds({transition:{duration:0}}),J==="zoom-to"&&H&&e.transitionManager.zoomTo(H.factor,{origin:H.point,stream:H.stream}),J==="go-home"){let Y=H.immediate?{duration:0}:void 0;e.transitionManager.goToRegion(cj(e.homePosition),{transition:Y})}if(J==="goto-region"&&H){let Y=H.immediate?{duration:0}:{};e.transitionManager.goToRegion(H,{transition:Y})}J==="constrain-bounds"&&e.transitionManager.constrainBounds({transition:H!=null&&H.immediate?{duration:0}:void 0})});return()=>{e.world.removeEventListener("mouseup",b),e.world.removeEventListener("touchend",b),e.world.removeEventListener("touchstart",L),e.world.removeEventListener("mousedown",R),window.removeEventListener("touchend",P),window.removeEventListener("mouseup",P),e.world.removeEventListener("mousemove",z),h&&(h.removeEventListener("touchmove",z),h.removeEventListener("wheel",K,{passive:!0,capture:!0})),s&&e.world.removeEventListener("click",B),n&&e.world.removeEventListener("wheel",$),fe()}},updatePosition(){}}),zd=ct.createContext("explore");zd.displayName="Mode";var hj=()=>_.useContext(zd),ip=ct.createContext(null);ip.displayName="Atlas";var sp=ct.createContext(null);sp.displayName="Bounds";var $h,pj=typeof performance=="object"&&typeof performance.now=="function";if(pj){let t=performance;$h=()=>t.now()}else{let t=Date,e=t.now();$h=()=>t.now()-e}var mj=16;function f0(t,e){t&&t.appendChild&&e&&t.appendChild(e)}function Y1(t,e){t&&t.removeChild&&e&&t.removeChild(e)}function gj(t,e){return Y1(t.world,e)}function vj(t,e,r){return X1(t.world,e,r)}function X1(t,e,r){t&&t instanceof np&&(t=t.world),t&&t.insertBefore&&t.insertBefore(e,r)}function Z1(t,e,r){if(r&&(t.applyProps&&t.applyProps(r),t instanceof Ws))for(let n of ep){let s=n.slice(2).toLowerCase();r[n]!==e[n]&&(e[n]&&t.removeEventListener(s,e[n]),t.addEventListener(s,r[n]))}}function J1(t,e){let r=Object.keys(e),n=!1;for(let s of r)if(ep.indexOf(s)!==-1){let l=tc[s];if(l){if(t.activatedEvents.indexOf(l)!==-1)continue;n=!0,t.activatedEvents.push(l)}}n&&t.triggerEventActivation()}var Nh=new Map,h0={};function yj(t,{args:e=[],...r},n,s,l){if(!(n instanceof np)&&l){let h=v=>v.return?h(v.return):v.stateNode&&v.stateNode.containerInfo;n=h(l)}let u,d=n.world;switch(t){case"world":u=rp.withProps({width:r.width,height:r.height,viewingDirection:"left-to-right"}),u.activatedEvents=d.activatedEvents,u.eventHandlers=d.eventHandlers,u.subscriptions=d.subscriptions,u.triggerEventActivation(),d=u;break;case"box":u=new Ed;break;case"shape":u=new q1;break;case"worldObject":case"world-object":u=new Xg;break;case"worldImage":case"world-image":u=new Fl;break;case"texture":u=new vg;break;case"compositeImage":case"composite-image":u=new tj({id:r.id,width:r.width,height:r.height,images:[],renderOptions:r.renderOptions});break;case"tiledImage":case"tiled-image":u=Md.fromTile(r.uri,r.display,r.tile,r.scaleFactor,void 0,r.format,r.useFloorCalc,r.version3);break;case"paragraph":u=new Ph,u.text=r.children;break;default:return}return J1(d,r),Z1(u,{},r),u}function wj(t,e){if(e instanceof rp)t.world=e;else if(e instanceof Xg)t.world.appendChild(e);else if(e)throw new Error("Invalid root")}var Pd=s_({unstable_now:$h,now:$h,createInstance:yj,removeChild:Y1,appendChild:f0,appendInitialChild:f0,insertBefore:X1,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,scheduleTimeout:typeof setTimeout<"u"?setTimeout:void 0,cancelTimeout:typeof clearTimeout<"u"?clearTimeout:void 0,setTimeout:typeof setTimeout<"u"?setTimeout:void 0,clearTimeout:typeof clearTimeout<"u"?clearTimeout:void 0,noTimeout:-1,appendChildToContainer:wj,removeChildFromContainer:gj,createTextInstance(){},insertInContainerBefore:vj,prepareUpdate(t,e,r,n,s){return J1(s.world,n),n},commitUpdate(t,e,r,n,s,l){t.applyProps&&e&&Z1(t,n,e)},finalizeInitialChildren(t){return t==null?void 0:t.__handlers},getChildHostContext(){return h0},getRootHostContext(){return h0},prepareForCommit(t){return t.isCommitting=!0,null},preparePortalMount(){},hideInstance(t){t&&t.points&&(t.points[0]=0)},unhideInstance(t,e){t&&t.points&&(t.points[0]=1)},getPublicInstance(t){return t},hideTextInstance(){throw new Error("Text is not allowed in the react-three-fibre tree. You may have extraneous whitespace between components.")},resetAfterCommit(t){t.isCommitting=!1,t.pendingUpdate=!0,t.world&&t.world.needsRecalculate&&(t.world.recalculateWorldSize(),t.world.triggerRepaint())},shouldSetTextContent(){return!1},clearContainer(){return!1},supportsHydration:!1,supportsPersistence:!1,detachDeletedInstance(t){},afterActiveInstanceBlur(){},beforeActiveInstanceBlur(){},getCurrentEventPriority(){return console.log("getCurrentEventPriority"),mj},getInstanceFromNode(t){throw console.log("getInstanceFromNode",t),new Error("Not implemented")},getInstanceFromScope(t){throw console.log("getInstanceFromScope",t),new Error("Not implemented")},prepareScopeUpdate(t,e){throw console.log("prepareScopeUpdate",t,e),new Error("Not implemented")},logRecoverableError(){},requestPostPaintCallback(){}});Pd.injectIntoDevTools({bundleType:0,version:_.version,rendererPackageName:"@atlas-viewer/atlas"});function Zg(t,e){let r=Nh.get(t);r&&Pd.updateContainer(null,r,null,()=>{Nh.delete(t),e&&e(t)})}var p0={render(t,e){let r=Nh.get(e);if(r)Pd.updateContainer(t,r,null);else{let n=Pd.createContainer(e,0,null,!1,null,"",()=>{},null);Pd.updateContainer(t,n,null),Nh.set(e,n)}},unmountComponentAtNode(t,e){Zg(t,e)}},Q0,q0,Cd=typeof window<"u"&&((Q0=window.document)!=null&&Q0.createElement||((q0=window.navigator)==null?void 0:q0.product)==="ReactNative")?_.useLayoutEffect:_.useEffect,xj=ct.memo(({children:t,setIsReady:e,onCreated:r,bounds:n,preset:s,mode:l="explore"})=>{let u=_.useCallback(function(d){let h=_.useRef(!1),v=()=>{e(!0)};return _.useEffect(()=>{if(s&&!h.current){s.runtime.goHome();let g=r&&r(s);return void(g&&g.then?g.then(v):v())}return()=>{}},[]),_.useEffect(()=>{h.current=!0},[]),d.children},[s]);return Cd(()=>{if(s){let d=s.runtime;l!==d.mode&&(d.mode=l),p0.render(k.jsx(ct.StrictMode,{children:k.jsx(u,{children:k.jsx(sp.Provider,{value:n,children:k.jsx(zd.Provider,{value:l,children:k.jsx(ip.Provider,{value:s,children:t})})})})}),d)}},[s,l,t]),Cd(()=>{if(s){let d=s.runtime;return()=>{p0.unmountComponentAtNode(d)}}return()=>{}},[s]),null}),Sj=class{constructor(e,r){N(this,"canvas"),N(this,"gl"),N(this,"program"),N(this,"fragmentShader"),N(this,"vertexShader"),N(this,"rectBuffer"),N(this,"fragmentShaderSource",`
    precision mediump float;

    uniform sampler2D u_image;
    varying vec2 v_texCoord;

    void main() {
        gl_FragColor = texture2D(u_image, v_texCoord);
    }
  `),N(this,"vertexShaderSource",`
    attribute vec2 a_position;
    uniform vec2 u_resolution;
    varying vec4 v_color;
    uniform sampler2D u_texture;

    attribute vec2 a_texCoord;
    varying vec2 v_texCoord;

    void main() {

        // convert the position from pixels to 0.0 to 1.0
        vec2 zeroToOne = a_position / u_resolution;

        // convert from 0->1 to 0->2
        vec2 zeroToTwo = zeroToOne * 2.0;

        // convert from 0->2 to -1->+1 (clip space)
        vec2 clipSpace = zeroToTwo - 1.0;

        gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
        
        v_texCoord = a_texCoord;
    }
  `),N(this,"attributes"),N(this,"uniforms"),N(this,"buffers"),N(this,"rendererPosition"),N(this,"dpi"),N(this,"lastResize",0),N(this,"lastKnownScale",1),this.canvas=e,this.rendererPosition=e.getBoundingClientRect(),this.gl=e.getContext("webgl2"),this.fragmentShader=this.createShader(this.gl.FRAGMENT_SHADER,this.fragmentShaderSource),this.vertexShader=this.createShader(this.gl.VERTEX_SHADER,this.vertexShaderSource),this.program=this.createProgram(this.vertexShader,this.fragmentShader),this.dpi=(r==null?void 0:r.dpi)||1,this.attributes={position:this.gl.getAttribLocation(this.program,"a_position"),texCoord:this.gl.getAttribLocation(this.program,"a_texCoord")},this.uniforms={resolution:this.gl.getUniformLocation(this.program,"u_resolution"),texture:this.gl.getUniformLocation(this.program,"u_texture")},this.buffers={position:this.createArrayBuffer(),texCoord:this.createArrayBuffer(new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]))},this.rectBuffer=new Float32Array(12),this.resize(),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.useProgram(this.program),this.gl.enableVertexAttribArray(this.attributes.position)}resize(){this.resizeCanvasToDisplaySize(),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.rendererPosition=this.canvas.getBoundingClientRect()}isReady(){return!0}beforeFrame(e,r,n){this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.vertexAttribPointer(this.attributes.position,2,this.gl.FLOAT,!1,0,0),this.gl.uniform2f(this.uniforms.resolution,this.gl.canvas.width,this.gl.canvas.height),this.lastResize>1e3&&(this.lastResize=0,this.resizeCanvasToDisplaySize()),this.lastResize+=r}prepareLayer(e){(!e.__host||!e.__host.webgl)&&((e instanceof Fl||e instanceof Md)&&this.createImageHost(e),e instanceof vg&&this.createTextureHost(e))}createTextureHost(e){e.__host=e.__host?e.__host:{};let r=this.gl,n=this.gl.createTexture();r.bindTexture(r.TEXTURE_2D,n),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);let s;if(e instanceof vg){let l=e.getTexture();l.source&&r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,l.source),s=l}r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),e.__host.webgl={height:e.height,width:e.width,texture:n,lastImage:s}}createImageHost(e){let r=[...new Array(e.points.length/5)];e.__host=e.__host?e.__host:{},e.__host.webgl={height:e.height,width:e.width,textures:r,loading:[],loaded:[],lastLevelRendered:-1,onLoad:(n,s)=>{let l=this.gl,u=this.gl.createTexture();l.bindTexture(l.TEXTURE_2D,u),l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!1),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,s),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.bindTexture(l.TEXTURE_2D,null),e.__host.webgl.textures[n]=u,e.__host.webgl.loaded.push(n)}}}paint(e,r,n,s,l,u){if(e.type==="spacial-content"&&e.__host&&e.__host.webgl){if(e.getTexture){let h=e==null?void 0:e.getTexture();if(h&&e.__host.webgl.lastImage!==h.hash&&h.source&&!e.__host.webgl.error)try{let v=this.gl.RGBA,g=this.gl.RGBA,w=this.gl.UNSIGNED_BYTE;this.gl.bindTexture(this.gl.TEXTURE_2D,e.__host.webgl.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,v,g,w,h.source),e.__host.webgl.lastImage=h.hash}catch(v){e.__host.webgl.error=v}}if(e.__host.webgl.loading&&e.__host.webgl.loading.indexOf(r)===-1&&e.getImageUrl){e.__host.webgl.loading.push(r);let h=document.createElement("img");h.decoding="async",h.crossOrigin="anonymous",h.src=e.getImageUrl(r),h.onload=()=>(h.onload=null,e.__host.webgl.onLoad(r,h))}let d=e.__host.webgl.texture?e.__host.webgl.texture:e.__host.webgl.textures[r];d&&(this.gl.enableVertexAttribArray(this.attributes.texCoord),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffers.texCoord),this.gl.enableVertexAttribArray(this.attributes.texCoord),this.gl.vertexAttribPointer(this.attributes.texCoord,2,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffers.position),this.gl.enableVertexAttribArray(this.attributes.position),this.gl.vertexAttribPointer(this.attributes.position,2,this.gl.FLOAT,!1,0,0),this.gl.bindTexture(this.gl.TEXTURE_2D,d),this.gl.uniform1i(this.uniforms.texture,0),this.setRectangle(n,s,l,u),this.gl.drawArrays(this.gl.TRIANGLES,0,6))}}afterPaintLayer(e,r){}pendingUpdate(){return!0}getPointsAt(e,r,n,s){return e.getPointsAt(r,n,s)}afterFrame(){}getScale(e,r,n){if(Number.isNaN(e)||Number.isNaN(r))return this.lastKnownScale;let s=this.getCanvasDims(),l=s.width/e,u=s.height/r,d=(l<u?u:l)*(n&&this.dpi||1);return Number.isNaN(d)||(this.lastKnownScale=d),this.lastKnownScale}getCanvasDims(){return{width:this.canvas.width/this.dpi,height:this.canvas.height/this.dpi}}getViewportBounds(e,r,n){return null}createShader(e,r){let n=this.gl.createShader(e);if(n){if(this.gl.shaderSource(n,r),this.gl.compileShader(n),this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS))return n;let s=this.gl.getShaderInfoLog(n);if(this.gl.deleteShader(n),s)throw new Error(s)}throw new Error("Invalid shader")}createProgram(e,r){let n=this.gl.createProgram();if(n){if(this.gl.attachShader(n,e),this.gl.attachShader(n,r),this.gl.linkProgram(n),this.gl.getProgramParameter(n,this.gl.LINK_STATUS))return n;let s=this.gl.getProgramInfoLog(n);if(this.gl.deleteProgram(n),s)throw new Error(s)}throw new Error("Invalid program")}resizeCanvasToDisplaySize(){let e=this.gl.canvas,r=e.clientWidth,n=e.clientHeight,s=e.width!==r||e.height!==n;return s&&(e.width=r,e.height=n),s}createArrayBuffer(e){let r=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),e&&this.gl.bufferData(this.gl.ARRAY_BUFFER,e,this.gl.STATIC_DRAW),!r)throw new Error("Cannot create buffer");return r}setRectangle(e,r,n,s){this.gl.bufferData(this.gl.ARRAY_BUFFER,this.getRectangle(e,r,n,s),this.gl.STATIC_DRAW)}getRectangle(e,r,n,s){let l=e,u=e+n,d=r,h=r+s;return this.rectBuffer.set([l,d,u,d,l,h,l,h,u,d,u,h]),this.rectBuffer}getRendererScreenPosition(){return this.rendererPosition}finishLayer(){}reset(){}};function wg(t,e){let r=e?t:JSON.stringify(t),n=5381,s=r.length;for(;s;)n=n*33^r.charCodeAt(--s);let l=(n>>>0).toString(16);return l.length%2?"0"+l:l}var eS=class{constructor(e){N(this,"$element"),N(this,"stylesheetClasses"),N(this,"activeStylesheetClasses"),N(this,"sheetsDidUpdate"),N(this,"sheetPrefix"),N(this,"stylesheetEntries"),this.sheetPrefix=(e==null?void 0:e.sheetPrefix)||"a-",this.$element=document.createElement("style"),this.stylesheetClasses=[],this.activeStylesheetClasses=[],this.sheetsDidUpdate=!1,this.stylesheetEntries={}}getElement(){return this.$element}addStylesheet(e){let r=e.replace(/\s\s+/g," ").replace(/: /g,":").replace(/; /g,";").trim(),n=this.sheetPrefix+wg(r,!0);return this.stylesheetClasses.indexOf(n)!==-1||(this.stylesheetClasses.push(n),this.activeStylesheetClasses.push(n),this.stylesheetEntries[n]=r,this.sheetsDidUpdate=!0),n}removeStylesheet(e){let r=this.sheetPrefix+wg(e,!0);this.stylesheetClasses.indexOf(r)&&(this.stylesheetClasses=this.stylesheetClasses.filter(n=>n!==r)),this.sheetsDidUpdate=!0}clearClasses(){this.activeStylesheetClasses=[]}didUpdateActive(){if(this.activeStylesheetClasses.length){for(let e of this.activeStylesheetClasses)if(this.stylesheetClasses.indexOf(e)===-1)return!0;for(let e of this.stylesheetClasses)if(this.activeStylesheetClasses.indexOf(e)===-1)return!0}return!1}updateSheet(){(this.sheetsDidUpdate||this.didUpdateActive())&&(this.$element.innerText=this.activeStylesheetClasses.map(e=>`.${e}{${this.stylesheetEntries[e]}}`).join(""),this.sheetsDidUpdate=!1,this.stylesheetClasses=[...this.activeStylesheetClasses])}},tS=class{constructor(e,r){N(this,"htmlContainer"),N(this,"visible",[]),N(this,"previousVisible",[]),N(this,"htmlIds",[]),N(this,"firstMeaningfulPaint",!1),N(this,"rendererPosition"),N(this,"stylesheet"),N(this,"options"),N(this,"paintTx",1),N(this,"zIndex",0),N(this,"classes"),this.htmlContainer=e,this.htmlContainer.innerHTML="",this.rendererPosition=this.htmlContainer.getBoundingClientRect(),this.options={triggerResize:()=>{},box:!1,text:!1,sheetPrefix:"",inlineStyles:!1,background:"",...r||{}},this.stylesheet=new eS({sheetPrefix:this.options.sheetPrefix}),this.options.inlineStyles||this.htmlContainer.appendChild(this.stylesheet.getElement()),this.options.background&&this.htmlContainer.classList.add(this.stylesheet.addStylesheet(`
        background: ${this.options.background};
      `)),this.classes={hostClassName:this.stylesheet.addStylesheet(`
        position: absolute;
        transform-origin: 0px 0px;
      `),interactive:this.stylesheet.addStylesheet("pointer-events: all"),nonInteractive:this.stylesheet.addStylesheet("pointer-events: none")},this.stylesheet.updateSheet()}createHtmlHost(e){if(this.htmlContainer&&(this.options.box||e.props.className||e.props.html||e.props.href)){let r=document.createElement(e.props.href?"a":"div");if(e.props.href){r.style.display="block",r.href=e.props.href;let n=e.props.hrefTarget||"_blank";r.target=n,n!=="_self"&&(r.rel="noopener noreferrer")}r.title=e.props.title||"",this.options.inlineStyles?(r.style.display="block",r.style.position="absolute",r.style.overflow="hidden",r.style.transformOrigin="0px 0px"):r.classList.add(this.classes.hostClassName),e.__host={element:r,revision:null,relative:!1},this.updateHtmlHost(e,e.width,e.height),e.__onCreate&&e.__onCreate()}}triggerResize(){this.options.triggerResize()}updateHtmlHost(e,r,n){if(e.__revision!==e.__host.revision){let s=e.__host.element,l=[this.classes.hostClassName];if(e.props.interactive?this.options.inlineStyles?s.style.pointerEvents="all":l.push(this.classes.interactive):this.options.inlineStyles?s.style.pointerEvents="none":l.push(this.classes.nonInteractive),e.props.href){s.style.display="block",s.href=e.props.href;let d=e.props.hrefTarget||"_blank";s.target=d,d!=="_self"?s.rel="noopener noreferrer":s.rel=""}else s.href&&s.removeAttribute("href");if(e.props.title&&(s.title=e.props.title||""),e.props.className&&(l.push(e.props.className),e.hovering&&l.push(`${e.props.className}--hover`),e.pressing&&l.push(`${e.props.className}--active`)),e.props.relativeStyle?(s.style.width=`${r||e.width}px`,s.style.height=`${n||e.height}px`):(s.style.width=`${e.width}px`,s.style.height=`${e.height}px`),e.props.style){Object.assign(s.style,e.props.style||{},e.hovering?e.props.hoverStyles||{}:{},e.pressing?e.props.pressStyles||{}:{});return}if(this.options.text&&e instanceof Ph){e.text&&(s.innerText=e.text),e.backgroundColor&&(s.style.backgroundColor=e.backgroundColor),e.color&&(s.style.color=e.color),e.props.font&&(s.style.font=e.props.font),e.props.textAlign&&(s.style.textAlign=e.props.textAlign),e.__host.revision=e.__revision;let d=l.join(" ");s.className=d,s.part=d}e instanceof Ed&&(this.options.box||e.props.className||e.props.html)&&(e.props.backgroundColor&&(s.style.backgroundColor=e.props.backgroundColor),e.props.border!==s.style.border&&(s.style.border=e.props.border));let u=l.join(" ");s.className=u,s.part=u}}afterFrame(e,r,n){this.stylesheet.updateSheet();for(let s of this.previousVisible)this.visible.indexOf(s)===-1&&this.htmlContainer&&s.__id&&this.htmlIds.indexOf(s.__id)!==-1&&this.htmlContainer.removeChild(s.__host.element);this.previousVisible=this.visible}afterPaintLayer(e,r){}beforeFrame(e,r,n){this.stylesheet.clearClasses(),this.paintTx++,this.zIndex=0,this.visible=[]}getPointsAt(e,r,n,s){return e.getPointsAt(r,n,s)}getScale(e,r){let n=this.rendererPosition.width/e,s=this.rendererPosition.height/r;return n<s?s:n}getViewportBounds(e,r,n){return null}isReady(){return!1}paint(e,r,n,s,l,u){if(this.zIndex++,(this.options.text&&e instanceof Ph||e instanceof Ed&&(this.options.box||e.props.className||e.props.html))&&e.__host.tx!==this.paintTx&&(this.visible.push(e),e.__host.tx=this.paintTx,this.htmlContainer)){this.updateHtmlHost(e,l,u);let d=l/e.width,h=e.__host.element;h.style.zIndex=`${this.zIndex}`,e.props.relativeStyle?h.style.transform=`translate(${Math.round(n)}px, ${Math.round(s)}px)`:h.style.transform=`translate(${Math.round(n)}px, ${Math.round(s)}px) scale(${d})`,this.previousVisible.indexOf(e)===-1&&this.htmlContainer.appendChild(h),this.htmlIds.indexOf(e.__id)===-1&&this.htmlIds.push(e.__id)}}pendingUpdate(){return!1}prepareLayer(e){e.__host||(e instanceof Ph||e instanceof Ed)&&this.createHtmlHost(e)}resize(e,r){typeof e<"u"&&typeof r<"u"&&(this.htmlContainer.style.width=`${e}px`,this.htmlContainer.style.height=`${r}px`),this.rendererPosition=this.htmlContainer.getBoundingClientRect()}getRendererScreenPosition(){return this.rendererPosition}finishLayer(){}reset(){}},rS=class Ch{constructor(e,r,n){N(this,"element"),N(this,"runtime"),N(this,"unsubscribe"),N(this,"activatedEvents",[]),N(this,"eventHandlers",[]),N(this,"bounds"),N(this,"listening"),N(this,"pointerMoveEvent"),N(this,"pointerEventState",{isClicking:!1,isDragging:!1,isPressed:!1,mousedOver:[],itemsBeingDragged:[],mouseDownStart:{x:0,y:0},lastTouches:[]}),N(this,"options"),N(this,"_realPointerMove",l=>{this.pointerMoveEvent=l}),N(this,"onWheelEvent",l=>{l.preventDefault(),this.onPointerEvent(l)}),N(this,"onContextMenu",l=>{l.preventDefault();let u="onContextMenu";if(this.runtime.world.activatedEvents.indexOf(u)!==-1){let{x:d,y:h}=this.runtime.viewerToWorld(l.clientX-this.bounds.left,l.clientY-this.bounds.top);this.assignToEvent(l,d,h),this.runtime.world.propagatePointerEvent(u,l,d,h)}}),N(this,"onTouchEvent",l=>{let u=tc[l.type],d=[],h=l.touches.length;for(let v=0;v<h;v++){let g=l.touches.item(v);if(!g)continue;let{x:w,y:b}=this.runtime.viewerToWorld(g.clientX-this.bounds.left,g.clientY-this.bounds.top),R={id:g.identifier,x:w,y:b};d.push(R)}d.length&&this.assignToEvent(l,d[0].x,d[0].y),u!=="onTouchEnd"?(this.pointerEventState.lastTouches=d,l.atlasTouches=d,this.runtime.world.propagateTouchEvent(u,l,d)):(l.atlasTouches=[],this.runtime.world.propagateTouchEvent(u,l,this.pointerEventState.lastTouches),this.pointerEventState.lastTouches=[])}),N(this,"onPointerEvent",l=>{if(l.button===2)return;let u=tc[l.type];if(u&&this.runtime.world.activatedEvents.indexOf(u)!==-1){let{x:d,y:h}=this.runtime.viewerToWorld(l.clientX-this.bounds.left,l.clientY-this.bounds.top);this.assignToEvent(l,d,h),this.runtime.world.propagatePointerEvent(u,l,d,h)}}),N(this,"onPointerDown",l=>{l.button!==2&&(this.pointerEventState.isPressed=!0,this.pointerEventState.isClicking=!0,this.pointerEventState.mouseDownStart.x=l.clientX,this.pointerEventState.mouseDownStart.y=l.clientY,setTimeout(()=>{this.runtime&&(this.pointerEventState.isClicking=!1)},250),setTimeout(()=>{if(this.runtime&&this.pointerEventState.isPressed&&!this.pointerEventState.isDragging){let u=this.runtime.viewerToWorld(this.pointerEventState.mouseDownStart.x-this.bounds.left,this.pointerEventState.mouseDownStart.y-this.bounds.top);this.pointerEventState.isDragging=!0,this.pointerEventState.itemsBeingDragged=this.runtime.world.propagatePointerEvent("onDragStart",l,u.x,u.y)}},800),this.onPointerEvent(l))}),N(this,"onPointerUp",l=>{if(l.button!==2){if(this.pointerEventState.isClicking){let{x:u,y:d}=this.runtime.viewerToWorld(l.clientX-this.bounds.left,l.clientY-this.bounds.top);this.assignToEvent(l,u,d),this.runtime.world.propagatePointerEvent("onClick",l,u,d)}if(this.pointerEventState.isDragging){for(let u of this.pointerEventState.itemsBeingDragged)u.dispatchEvent("onDragEnd",l);this.pointerEventState.isDragging=!1}this.pointerEventState.isClicking=!1,this.pointerEventState.isPressed=!1,this.pointerEventState.itemsBeingDragged=[],this.onPointerEvent(l)}}),N(this,"onPointerMove",l=>{this.pointerMoveEvent=void 0;let{x:u,y:d}=this.runtime.viewerToWorld(l.clientX-this.bounds.left,l.clientY-this.bounds.top);if(Number.isNaN(u)||Number.isNaN(d))return;this.assignToEvent(l,u,d),this.runtime.world.propagatePointerEvent("onPointerMove",l,u,d);let h=this.runtime.world.propagatePointerEvent("onMouseMove",l,u,d),v=[],g=[];for(let w of h)v.push(w.id),g.push(w),this.pointerEventState.mousedOver.indexOf(w)===-1&&(w.dispatchEvent("onMouseEnter",l),w.dispatchEvent("onPointerEnter",l),w.dispatchEvent("onMouseOver",l),w.dispatchEvent("onPointerOver",l));for(let w of this.pointerEventState.mousedOver)v.indexOf(w.id)===-1&&(w.dispatchEvent("onMouseLeave",l),w.dispatchEvent("onPointerLeave",l),w.dispatchEvent("onMouseOut",l),w.dispatchEvent("onPointerOut",l));if(this.pointerEventState.isDragging)for(let w of this.pointerEventState.itemsBeingDragged)w.dispatchEvent("onDrag",l);if(this.pointerEventState.isPressed&&!this.pointerEventState.isDragging&&Ah(this.pointerEventState.mouseDownStart,{x:l.clientX,y:l.clientY})>50){let w=this.runtime.viewerToWorld(this.pointerEventState.mouseDownStart.x-this.bounds.left,this.pointerEventState.mouseDownStart.y-this.bounds.top);this.pointerEventState.isDragging=!0,this.pointerEventState.itemsBeingDragged=this.runtime.world.propagatePointerEvent("onDragStart",{...l,atlas:{x:w.x,y:w.y}},w.x,w.y)}this.pointerEventState.mousedOver=g}),this.element=e,this.runtime=r,this.unsubscribe=r.world.addLayoutSubscriber(this.layoutSubscriber.bind(this)),this.bounds=e.getBoundingClientRect(),this.listening=!1,this.options={simulationRate:0,...n||{}};let s=0;r.registerHook("useFrame",l=>{s+=l,s>this.options.simulationRate&&this.pointerMoveEvent&&(s=0,r.updateNextFrame())}),r.registerHook("useBeforeFrame",()=>{this.pointerMoveEvent&&this.onPointerMove(this.pointerMoveEvent)}),this.activateEvents()}updateBounds(){this.bounds=this.element.getBoundingClientRect(),this.runtime.updateRendererScreenPosition()}layoutSubscriber(e){e==="event-activation"&&this.listening==!1&&this.activateEvents()}assignToEvent(e,r,n){Ch.eventPool.atlas.x=r,Ch.eventPool.atlas.y=n,e.atlas=Ch.eventPool.atlas}activateEvents(){this.listening=!0,this.element.addEventListener("pointermove",this._realPointerMove),this.element.addEventListener("pointerup",this.onPointerUp),this.element.addEventListener("pointerdown",this.onPointerDown),this.element.addEventListener("mousedown",this.onPointerEvent),this.element.addEventListener("mouseup",this.onPointerEvent),this.element.addEventListener("pointercancel",this.onPointerEvent),this.element.addEventListener("wheel",this.onWheelEvent),this.element.addEventListener("contextmenu",this.onContextMenu),this.element.addEventListener("touchstart",this.onTouchEvent),this.element.addEventListener("touchcancel",this.onTouchEvent),this.element.addEventListener("touchend",this.onTouchEvent),this.element.addEventListener("touchmove",this.onTouchEvent)}normalizeEventName(e){return e.startsWith("on")?e.slice(2).toLowerCase():e.toLowerCase()}stop(){this.listening=!1,this.element.removeEventListener("pointermove",this._realPointerMove),this.element.removeEventListener("pointerup",this.onPointerUp),this.element.removeEventListener("pointerdown",this.onPointerDown),this.element.removeEventListener("mousedown",this.onPointerEvent),this.element.removeEventListener("mouseup",this.onPointerEvent),this.element.removeEventListener("pointercancel",this.onPointerEvent),this.element.removeEventListener("wheel",this.onWheelEvent),this.element.removeEventListener("touchstart",this.onTouchEvent),this.element.removeEventListener("touchcancel",this.onTouchEvent),this.element.removeEventListener("touchend",this.onTouchEvent),this.element.removeEventListener("touchmove",this.onTouchEvent),this.unsubscribe();for(let[e,r]of this.eventHandlers)this.element.removeEventListener(this.normalizeEventName(e),r)}};N(rS,"eventPool",{atlas:{x:0,y:0}});var nS=rS;function iS({interactive:t=!0,viewport:e,forceRefresh:r,canvasElement:n,overlayElement:s,controllerConfig:l,unstable_webglRenderer:u,dpi:d,debug:h,canvasBox:v=!0,polygon:g=!0,navigatorElement:w,runtimeOptions:b}){if(!n)throw new Error("Invalid container");n.style.userSelect="none";let R=t?K1({minZoomFactor:.5,maxZoomFactor:3,enableClickToZoom:!1,parentElement:n,...l||{}}):void 0,P=new G1([u?new Sj(n,{dpi:d}):new aj(n,{dpi:d,debug:h,box:v,polygon:g}),s?new tS(s,{box:u||!v,text:!0,triggerResize:r}):void 0,w?new uj(w):void 0]),C=new np(P,new rp(1024,1024),e,R?[R]:[],b),j=new nS(n,C);return{name:"default-preset",em:j,runtime:C,renderer:P,controller:R,canvas:n,navigator:w,unmount(){Zg(C),C.stopControllers(),C.stop(),C.reset(),j&&j.stop()}}}var Pl=1+Number.MIN_VALUE,bj=class{constructor(e,r){N(this,"container"),N(this,"width"),N(this,"height"),N(this,"pending",!0),N(this,"options"),N(this,"stylesheet"),N(this,"zIndex",0),N(this,"lastKnownScale",1),N(this,"rendererPosition"),N(this,"currentlyVisible",[]),N(this,"previouslyVisible",[]),this.container=e,this.rendererPosition=e.getBoundingClientRect();let{width:n,height:s}=this.rendererPosition;this.width=n,this.height=s,this.options={addPart:!1,setDraggableFalse:!1,imageClass:"",widthStylesheet:!1,sheetPrefix:"position-",background:"#000",...r||{}},this.stylesheet=new eS({sheetPrefix:this.options.sheetPrefix}),this.container.classList.add(this.stylesheet.addStylesheet(`
        background: ${this.options.background};
      `)),this.options.widthStylesheet&&this.container.appendChild(this.stylesheet.getElement())}isReady(){return!0}resize(){this.rendererPosition=this.container.getBoundingClientRect(),this.width=this.rendererPosition.width,this.height=this.rendererPosition.height}getRendererScreenPosition(){return this.rendererPosition}afterFrame(e,r,n){this.stylesheet.updateSheet();for(let s of this.previouslyVisible)this.currentlyVisible.indexOf(s)===-1&&this.container.removeChild(s);for(let s of this.currentlyVisible)this.previouslyVisible.indexOf(s)===-1&&this.container.appendChild(s);this.previouslyVisible=this.currentlyVisible,this.currentlyVisible=[]}afterPaintLayer(e,r){}beforeFrame(e,r,n){this.stylesheet.clearClasses(),this.zIndex=0}getPointsAt(e,r,n,s){return e.getPointsAt(r,n,s)}getScale(e,r){if(Number.isNaN(e)||Number.isNaN(r))return this.lastKnownScale;let n=this.width/e,s=this.height/r,l=n<s?s:n;return Number.isNaN(l)||(this.lastKnownScale=l),this.lastKnownScale}getViewportBounds(e,r,n){return null}createImage(){let e=document.createElement("img");return this.options.imageClass?(e.className=this.options.imageClass,this.options.addPart&&e.setAttribute("part",this.options.imageClass)):(e.style.position="absolute",e.style.pointerEvents="none",e.style.userSelect="none"),this.options.setDraggableFalse&&e.setAttribute("draggable","false"),e}paint(e,r,n,s,l,u){if(this.pending=!1,this.zIndex++,e instanceof Fl){if(!e.__host){let h=this.createImage();h.src=e.uri,e.__host=h,this.container.appendChild(e.__host)}let d=e.__host;this.currentlyVisible.push(d),d.style.zIndex=`${this.zIndex}`,d.style.opacity=`${e.style.opacity}`,this.options.widthStylesheet?d.className=this.options.imageClass+" "+this.stylesheet.addStylesheet(`width:${(l+Pl).toFixed(2)}px;height:${(u+Pl).toFixed(2)}px;`):(d.style.width=`${l+Pl}px`,d.style.height=`${u+Pl}px`),d.style.transform=`translate(${n}px, ${s}px)`}if(e instanceof Md){if(e.__host||(e.__host={images:[]}),!e.__host.images[r]){let h=e.getImageUrl(r),v=this.createImage();v.src=h,e.__host.images[r]=v,this.container.appendChild(v)}let d=e.__host.images[r];d.style.zIndex=`${this.zIndex}`,d.style.opacity=`${e.style.opacity}`,this.currentlyVisible.push(d),this.options.widthStylesheet?d.className=this.options.imageClass+" "+this.stylesheet.addStylesheet(`width:${(l+Pl).toFixed(2)}px;height:${(u+Pl).toFixed(2)}px;`):(d.style.width=`${l+Pl}px`,d.style.height=`${u+Pl}px`),d.style.transform=`translate(${n}px, ${s}px)`}}pendingUpdate(){return this.pending}prepareLayer(e){}finishLayer(e){}reset(){}};function Ej({interactive:t,viewport:e,forceRefresh:r,containerElement:n,overlayElement:s,controllerConfig:l}){if(!n)throw new Error("Invalid container");n.style.userSelect="none";let u=t?K1({minZoomFactor:.5,maxZoomFactor:3,enableClickToZoom:!1,parentElement:n,...l||{}}):void 0,d=new bj(n,{addPart:!1,setDraggableFalse:!1,imageClass:"atlas-static-image"}),h=s?new G1([d,new tS(s,{box:!0,text:!0,triggerResize:r})]):d,v=new np(h,new rp(1024,1024),e,u?[u]:[]),g=new nS(n,v);return{name:"static-preset",em:g,runtime:v,renderer:h,controller:u,container:n,overlay:s,unmount(){Zg(v),v.stopControllers(),v.stop(),g&&g.stop()}}}var Pj={"default-preset":iS,"static-preset":Ej},Cj={};function kj(t,e){let r=_.useRef(),n=_.useRef(),s=_.useRef(),l=_.useRef(),u=_.useRef({width:e.width,height:e.height,didUpdate:!0}),[d="default-preset",h=Cj]=Array.isArray(t)?t||[]:[t],[v,g]=_.useState(null);_.useLayoutEffect(()=>{let b=n.current,R=l.current,P=r.current,C=s.current,j=(Pj[d]||iS)({containerElement:R,canvasElement:b,overlayElement:P,navigatorElement:C,viewport:u.current,dpi:window.devicePixelRatio||1,forceRefresh:e.forceRefresh,unstable_webglRenderer:e.unstable_webglRenderer,...h||{}});return g(j),()=>{j&&(j.unmount(),b&&(b.height=0,b.width=0),P&&(P.innerHTML=""),C&&(C.height=0,C.width=0))}},[d,h]);let w=_.useMemo(()=>({canvas:n,overlay:r,container:l,navigator:s}),[]);return[d,v,u,w]}function Tj(t){return _.useMemo(()=>wg(t),t)}var vd=ct.forwardRef((t,e)=>k.jsx("div",{...t,ref:e,part:t.className})),m0=["brightness","contrast","grayscale","hueRotate","invert","saturate","sepia","blur"],Rj=({htmlChildren:t,renderPreset:e,onCreated:r,mode:n="explore",resetWorldOnChange:s=!0,unstable_webglRenderer:l=!1,unstable_noReconciler:u=!1,hideInlineStyle:d=!1,controllerConfig:h,children:v,overlayStyle:g,containerStyle:w,enableNavigator:b,className:R,containerProps:P={},homePosition:C,homeOnResize:j,homeCover:O,background:L,runtimeOptions:A,debug:F,filters:z,...B})=>{let[$,K]=_.useState(n),[fe,J]=_.useState(!1),H=_.useRef(!1),Y=_.useMemo(()=>(typeof e=="string"&&(e=[e,{}]),F?e?[e[0],{debug:F,...e[1]||{}}]:["default-preset",{debug:F}]:e||"default-preset"),[e,F]),[xe,te,Te]=g1({scroll:!0}),de=_.useRef(),je=Ce=>{de.current=Ce,xe(Ce)},[ee,Q,ue,U]=kj(Y,{width:B.width,height:B.height,forceRefresh:Te,unstable_webglRenderer:l}),[oe,_e]=_.useState("");_.useEffect(()=>{K(n)},[n]),_.useEffect(()=>{Q&&Q.em&&Q.em.updateBounds()},[Q,te]),_.useEffect(()=>{Q==null||Q.runtime.setOptions(A||{})},[A]),_.useEffect(()=>{Q&&Q.runtime&&(Q.runtime.mode=$),fe&&Q&&(Q.ready=!0)},[Q,fe,$]),_.useEffect(()=>{Q&&(O||(Q.runtime.manualHomePosition=!!C,Q.runtime.setHomePosition(C)))},[Q,O,C]),_.useEffect(()=>{if(Q){let Ce=Q.runtime;Ce.resize(ue.current.width,B.width,ue.current.height,B.height),ue.current.width=B.width,ue.current.height=B.height,Ce.updateNextFrame(),ue.current.didUpdate=!0}},[Q,B.width,B.height]),_.useEffect(()=>{if(z&&Q){let Ce=Q.runtime,Re=!1;Ce.hookOptions.enableFilters=!0;for(let bt of m0)z[bt]?z[bt]!==Q.runtime.hookOptions.filters[bt]&&(Ce.hookOptions.filters[bt]=z[bt],Re=!0):Ce.hookOptions.filters[bt]&&(Ce.hookOptions.filters[bt]=0,Re=!0);Re&&Ce.updateNextFrame()}else if(Q){let Ce=Q.runtime;for(let Re of m0)Ce.hookOptions.filters[Re]=0;Ce.hookOptions.enableFilters=!1,Ce.updateNextFrame()}},[Q,z]),Cd(()=>{if(Q&&(Q.overlay&&(Q.overlay.style.width=`${te.width}px`,Q.overlay.style.height=`${te.height}px`),Q.container&&(Q.container.style.width=`${te.width}px`,Q.container.style.height=`${te.height}px`),O)){let Ce=Q.runtime.world.width,Re=Q.runtime.world.height,bt=Ce/Re,jr=ue.current.width,pr=ue.current.height,Or=jr/pr;if(bt>Or){Or=pr/jr,Q.runtime.manualHomePosition=!0;let Sr=(Ce-Re/Or)/2;O==="start"&&(Sr=0),O==="end"&&(Sr=Ce-Re/Or),Q.runtime.setHomePosition({x:Sr,y:0,width:Re/Or,height:Re})}else{let Sr=(Re-Ce/Or)/2;O==="start"&&(Sr=0),O==="end"&&(Sr=Re-Ce/Or),Q.runtime.manualHomePosition=!0,Q.runtime.setHomePosition({x:0,y:Sr,width:Ce,height:Ce/Or})}j&&Q.runtime.goHome({})}},[Q,te.height,te.width,O]),Cd(()=>{let Ce=()=>{if(Q){let Re=Q.runtime;ue.current.width!==B.width&&ue.current.height!==B.height&&(Re.resize(ue.current.width,B.width,ue.current.height,B.height),ue.current.width=B.width,ue.current.height=B.height,Re.updateNextFrame(),ue.current.didUpdate=!0)}};return window.addEventListener("resize",Ce),()=>window.removeEventListener("resize",Ce)},[Q,B.height,B.width]);let Me={width:120},Ne=()=>{if(Q&&Q.navigator){let Ce=Q.runtime.world.height,Re=Q.runtime.world.width,bt=window.devicePixelRatio||1,jr=Me.width,pr=Me.width/Re*Ce;Q.navigator.width=jr*bt,Q.navigator.height=pr*bt,Q.navigator.style.width=jr+"px",Q.navigator.style.height=pr+"px"}};Cd(()=>{if(Q){Ne();let Ce=Q.runtime;return Ce.world.addLayoutSubscriber(Re=>{Re==="recalculate-world-size"&&(Ne(),Ce.resize(ue.current.width,B.width,ue.current.height,B.height))})}return()=>{}},[Q,B.width,B.height]);let Ke=_.useCallback(function(Ce){let Re=()=>{J(!0)};return _.useEffect(()=>{if(Q){Q.runtime.goHome();let bt=r&&r(Q);return void(bt&&bt.then?bt.then(Re):Re())}else throw new Error("Invalid configuration - no runtime found")},[]),Ce.children},[Q]);_.useEffect(()=>{if(Q){let Ce=Q.runtime;if(s)return Ce.world.addLayoutSubscriber(Re=>{Re==="recalculate-world-size"&&Ce.goHome()})}return()=>{}},[Q,s]),_.useEffect(()=>Q?Q.runtime.registerHook("useBeforeFrame",()=>{var Ce;if(ue.current.didUpdate&&Q.canvas){let Re=window.devicePixelRatio||1,bt=ue.current.width,jr=ue.current.height;Q.canvas.width=bt*Re,Q.canvas.height=jr*Re,Q.canvas.style.width=bt+"px",Q.canvas.style.height=jr+"px",(Ce=Q.canvas.getContext("2d"))==null||Ce.scale(Re,Re),Q&&Q.em&&Q.em.updateBounds(),ue.current.didUpdate=!1}}):()=>{},[Q,s]),_.useEffect(()=>{let Ce=()=>{Q&&(K("sketch"),_e("mode-sketch")),window.removeEventListener("keyup",Ce)},Re=bt=>{var jr,pr,Or;if(bt.code==="Space"&&Q&&Q.runtime.mode==="sketch"){let Sr=(pr=(jr=bt.target)==null?void 0:jr.tagName)==null?void 0:pr.toLowerCase();if(Sr==="input"||Sr==="textarea"||(Or=bt.target)!=null&&Or.isContentEditable)return;bt.preventDefault(),K("explore"),_e("mode-explore"),window.addEventListener("keyup",Ce)}};return window.addEventListener("keydown",Re),()=>{window.removeEventListener("keydown",Re),window.removeEventListener("keyup",Ce)}},[Q]),H.current=!0;let{height:Qe,width:nt,...ft}=B,Ct=Tj([B.width,B.height]),Ye=!0;return Y&&Array.isArray(Y)&&Y.length>1&&Y[1].interactive===!1&&(Ye=!1),L=L??"#000",de.current&&(L=getComputedStyle(de.current).getPropertyValue("--atlas-background")||L),k.jsxs(vd,{ref:je,className:["atlas",d?"":`atlas-width-${Ct}`,oe,R,`atlas-${ee}`].filter(Boolean).join(" ").trim(),style:{...w,...d?{}:{width:B.width,height:B.height}},children:[ee==="static-preset"?k.jsx(vd,{className:"atlas-static-container",ref:U.container,tabIndex:0,...P}):k.jsx("canvas",{className:"atlas-canvas",part:"atlas-canvas",tabIndex:0,...ft,...P,ref:U.canvas,"data-background":L}),k.jsx(vd,{className:["atlas-overlay",Ye?"atlas-overlay--interactive":""].filter(Boolean).join(" ").trim(),style:{...g||{}},ref:U.overlay,children:u?k.jsx(Ke,{children:k.jsx(sp.Provider,{value:te,children:k.jsx(zd.Provider,{value:$,children:k.jsx(ip.Provider,{value:Q,children:v})})})}):k.jsx(xj,{bounds:te,preset:Q,mode:$,setIsReady:J,onCreated:r,children:v})}),b?k.jsx(vd,{className:"atlas-navigator",children:k.jsx("canvas",{className:"atlas-navigator-canvas",part:"atlas-navigator-canvas",ref:U.navigator})}):null,d?k.jsx("style",{children:`.atlas-width-${Ct} { width: ${B.width}px; height: ${B.height}px; }`}):k.jsx("style",{children:`
        .atlas { position: relative; display: flex; background: ${L}; z-index: var(--atlas-z-index, 10); -webkit-touch-callout: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }
        .atlas-width-${Ct} { width: ${B.width}px; height: ${B.height}px; }
        .atlas-canvas { flex: 1 1 0px; }
        .atlas-canvas:focus, .atlas-static-container:focus { outline: none }
        .atlas-canvas:focus-visible, .atlas-canvas-container:focus-visible { outline: var(--atlas-focus, 2px solid darkorange) }
        .atlas-static-preset { touch-action: inherit; }
        .atlas-static-container { position: relative; overflow: hidden; flex: 1 1 0px; }
        .atlas-overlay { position: absolute; top: 0; left: 0; none; overflow: hidden; }
        /** setting the pointer events to none means that Atlas will own the touch and mousewheel events **/
        .atlas-overlay--interactive { pointer-events: none; }
        .atlas-static-image { position: absolute; user-select: none; transform-origin: 0px 0px; }
        .atlas-navigator { position: absolute; top: var(--atlas-navigator-top, 10px); right: var(--atlas-navigator-bottom, 10px); left: var(--atlas-navigator-left); bottom: var(--atlas-navigator-bottom); opacity: .8 }
        .atlas-navigator-canvas { width: 100%; }
      `}),t]})};function _j(t){return Number(t)==t?`${t}px`:t}var jj=({resizeHash:t,aspectRatio:e,containerProps:r={},...n})=>{let[s,l,u]=g1(),{height:d,width:h,...v}=n;_.useEffect(()=>{u()},[h,d,t,u]);let g=_.useMemo(()=>e?{width:l.width,height:l.width*(1/e)}:l,[l,e]);return k.jsxs(vd,{ref:s,className:"atlas-container",...r,children:[g.width?k.jsx(Rj,{width:g.width||100,height:g.height||100,...v,children:n.children}):null,n.hideInlineStyle?null:k.jsx("style",{children:`
          .atlas-container { 
            display: var(--atlas-container-display, block);
            flex: var(--atlas-container-flex, none);
            width: var(--atlas-container-width, ${h?`${h}px`:"100%"});
            height: var(--atlas-container-height, ${_j(d||(e?g.height:512))})  
          }
      `}),n.htmlChildren]})},sS=()=>_.useContext(ip),op=()=>{let t=sS();return t?t.runtime:void 0},oS=(t,e=[])=>{let r=op();_.useEffect(()=>r?r.registerHook("useFrame",t):()=>{},e)},Oj=()=>{let t=sS();return t&&t.canvas?t.canvas:void 0};function Lj(){return _.useContext(sp)}async function Mj(t,e,r){if(_.version.startsWith("18.")){let n=await jh(()=>Promise.resolve().then(()=>qb),void 0),s=n.default?n.default.createRoot:n.createRoot;r.current||(r.current=s(t)),r.current.render(e)}else if(typeof ReactDOM<"u"){let{render:n,unmountComponentAtNode:s}=ReactDOM;n(e,t),r.current={unmount(){s(t)}}}else{let n=await jh(()=>Promise.resolve().then(()=>Y0),void 0),s=n.default?n.default.render:n.render,l=n.default?n.default.unmountComponentAtNode:n.unmountComponentAtNode;s(e,t),r.current={unmount(){l(t)}}}}var Fd=ct.forwardRef(({children:t,...e},r)=>{let n=_.useRef(),s=op(),l=_.useRef(0),u=_.useRef(),d=_.useRef();return oS(()=>{var h,v,g,w;if(e.relative){let b=n.current;if(b&&s){let R=s.getScaleFactor();l.current!==R&&(l.current=R,b.style.transformOrigin="0 0",b.style.transform=`scale(${1/l.current})`,b.style.width=`${l.current*100}%`,b.style.height=`${l.current*100}%`,n.current&&((v=(h=u.current)==null?void 0:h.__owner.value)!=null&&v.rotation)&&(b.style.transform=`scale(${1/l.current}) translate(50%, 50%) rotate(${((w=(g=u.current)==null?void 0:g.__owner.value)==null?void 0:w.rotation)||0}deg)  translate(-50%, -50%)`))}}},[e.relative]),_.useLayoutEffect(()=>{let h=u.current;r&&h&&(typeof r=="function"?r(h):r.current=h);async function v(){if(h&&h.__host){let g=e.relative?k.jsx("div",{ref:n,children:t}):t;await Mj(h.__host.element,g,d)}}h&&h.__host?v():h&&(h.__onCreate=v)},[r,t,u,e.relative]),_.useLayoutEffect(()=>()=>{d.current&&setTimeout(()=>{d.current.unmount()},0)},[]),k.jsx("box",{html:!0,...e,ref:u})});Fd.displayName="HTMLPortal";var g0=(t,e,r=[])=>{let n=op(),s=n?n.world:void 0;_.useEffect(()=>{if(n){let l=e,u=tc[t];n.world.activatedEvents.push(u);let d=u.slice(2).toLowerCase();return n.world.addEventListener(d,l),()=>{n.world.removeEventListener(d,l)}}return()=>{}},[s,t,...r])};function v0(t,e){if(t===0)return[0,1];if(e===0)return[1,0];let r=Math.abs(t)/Math.abs(e);return[r,1-r]}function Ij(){let t=_.useRef({ctrl:!1,shift:!1,alt:!1});return _.useLayoutEffect(()=>{function e(n){n.key==="Shift"&&(t.current.shift=!0),n.key==="Control"&&(t.current.ctrl=!0),n.key==="Alt"&&(t.current.alt=!0)}function r(n){n.key==="Shift"&&(t.current.shift=!1),n.key==="Control"&&(t.current.ctrl=!1),n.key==="Alt"&&(t.current.alt=!1)}return window.addEventListener("keydown",e),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",r)}},[]),t}var Aj=(t,e)=>{let r=hj(),n=op(),s=Lj(),l=_.useRef(),u=_.useRef(null),d=_.useRef(),[h,v]=_.useState(!1),g=_.useRef(!1),w=_.useRef({north:0,south:0,east:0,west:0}),b=Ij(),R=_.useCallback(L=>A=>{if(g.current=!0,v(!0),s&&n){let{top:F,left:z}=s,B=n.viewerToWorld(A.pageX-z,A.pageY-F);d.current={x:B.x,y:B.y},l.current=L}},[s,n]),P=_.useMemo(()=>t.width/t.height,[t.width,t.height]),C=_.useCallback(L=>{if(!Math.abs(L.north-L.south+(L.east-L.west)))return;let A=-L.west+L.east,F=-L.north+L.south,z=t.width+A,B=t.height+F;if(z/B>=P){let $=B*P,K=z-$,[fe,J]=v0(L.east,L.west);L.west=L.west+K*J,L.east=L.east-K*fe}else{let $=z/P,K=B-$,[fe,J]=v0(L.north,L.south);L.north=L.north+K*fe,L.south=L.south-K*J}},[t.width,t.height,P]);oS(()=>{d&&n&&n.updateNextFrame()}),_.useEffect(()=>{n&&n.updateNextFrame()},[n,h]);let j=_.useCallback(L=>{var fe;if(!n||!s||n.mode!=="sketch")return;let{top:A,left:F}=s,z=n.viewerToWorld(L.pageX-F,L.pageY-A),B=u.current,$=!t.maintainAspectRatio&&b.current.alt,K=!$&&b.current.shift&&((fe=l.current)==null?void 0:fe.indexOf("-"))!==-1;if((l.current==="translate"||l.current==="east"||l.current==="north-east"||l.current==="south-east")&&(w.current.east=z.x-(d.current?d.current.x:0),$&&(w.current.west=-w.current.east)),(l.current==="translate"||l.current==="west"||l.current==="north-west"||l.current==="south-west")&&(w.current.west=z.x-(d.current?d.current.x:0),$&&(w.current.east=-w.current.west)),(l.current==="translate"||l.current==="north"||l.current==="north-east"||l.current==="north-west")&&(w.current.north=z.y-(d.current?d.current.y:0),$&&(w.current.south=-w.current.north)),(l.current==="translate"||l.current==="south"||l.current==="south-west"||l.current==="south-east")&&(w.current.south=z.y-(d.current?d.current.y:0),$&&(w.current.north=-w.current.south)),(t.maintainAspectRatio||K)&&C(w.current),B){let J=w.current.west,H=w.current.north,Y=t.width+w.current.east,xe=t.height+w.current.south;B.points[1]=Math.min(J,Y),B.points[2]=Math.min(H,xe),B.points[3]=Math.max(J,Y),B.points[4]=Math.max(H,xe),n.updateNextFrame()}},[n,t.width,t.height,t.maintainAspectRatio,s]);g0("mousemove",j,[t.width,t.height,s]),g0("pointermove",j,[t.width,t.height,s]);let O=_.useRef();return _.useEffect(()=>{O.current=()=>{if(g.current){let L=w.current.west,A=w.current.north,F=t.width+w.current.east,z=t.height+w.current.south,B=Math.min(L,F),$=Math.min(A,z),K=Math.max(L,F),fe=Math.max(A,z),J={x:(t.x||0)+B,y:(t.y||0)+$,width:K-B||1,height:fe-$||1};t.maintainAspectRatio,e(J),l.current=void 0,d.current=void 0,w.current.east=0,w.current.west=0,w.current.north=0,w.current.south=0,g.current=!1,v(!1)}}},[e,t.height,t.width,t.x,t.y]),_.useEffect(()=>{let L=()=>{O.current&&O.current()};return window.addEventListener("pointerup",L),window.addEventListener("touchend",L),()=>{window.removeEventListener("pointerup",L),window.removeEventListener("touchend",L)}},[]),{portalRef:u,mode:r,mouseEvent:R,onPointerMoveCallback:j,isEditing:h}};function $j({handleSize:t,resizable:e,onSave:r,children:n,maintainAspectRatio:s,disableCardinalControls:l,...u}){let d=typeof t>"u"?s?10:8:t,{portalRef:h,mode:v,mouseEvent:g,isEditing:w}=Aj({x:u.x||0,y:u.y||0,width:u.width,height:u.height,maintainAspectRatio:s},r),b=_.useMemo(()=>g("translate"),[g]),R=_.useMemo(()=>g("east"),[g]),P=_.useMemo(()=>g("west"),[g]),C=_.useMemo(()=>g("south"),[g]),j=_.useMemo(()=>g("north"),[g]),O=_.useMemo(()=>g("south-east"),[g]),L=_.useMemo(()=>g("south-west"),[g]),A=_.useMemo(()=>g("north-east"),[g]),F=_.useMemo(()=>g("north-west"),[g]),z=v==="sketch",B={zIndex:999,boxShadow:"0px 2px 3px 0 rgba(0,0,0,0.2)",border:"1px solid rgba(155,155,155,.7)",borderRadius:s||l?"50%":2,position:"absolute",background:"#fff",pointerEvents:w?"none":z?"initial":"none"};return k.jsx(k.Fragment,{children:k.jsxs("world-object",{...u,children:[n,z&&e?k.jsx(Fd,{ref:h,target:{x:0,y:0,height:u.height,width:u.width},relative:!0,interactive:!1,children:z&&e?k.jsxs(k.Fragment,{children:[k.jsx("div",{onMouseDown:b,onTouchStart:b,style:{display:"block",width:"100%",height:"100%",position:"relative",border:"1px solid rgba(155,155,155, .7)",boxSizing:"border-box",pointerEvents:w?"none":z?"initial":"none"}}),s?null:k.jsxs(k.Fragment,{children:[k.jsx("div",{title:"east",onTouchStart:R,onMouseDown:R,style:{...B,cursor:"e-resize",height:d*2,width:d,right:0,top:"50%",opacity:l?0:1,transform:`translate(${d/2}px, -${d}px)`}}),k.jsx("div",{title:"west",onMouseDown:P,style:{...B,cursor:"w-resize",position:"absolute",height:d*2,width:d,left:0,top:"50%",opacity:l?0:1,transform:`translate(-${d/2}px, -${d}px)`}}),k.jsx("div",{title:"north",onMouseDown:j,style:{...B,cursor:"n-resize",position:"absolute",height:d,width:d*2,left:"50%",top:0,opacity:l?0:1,transform:`translate(-${d}px, -${d/2}px)`}}),k.jsx("div",{title:"south",onMouseDown:C,style:{...B,cursor:"s-resize",position:"absolute",height:d,width:d*2,left:"50%",bottom:0,opacity:l?0:1,transform:`translate(-${d}px, ${d/2}px)`}})]}),k.jsx("div",{title:"north-east",onMouseDown:A,style:{...B,cursor:"ne-resize",position:"absolute",height:d,width:d,right:0,top:0,transform:`translate(${d/2}px, -${d/2}px)`}}),k.jsx("div",{title:"south-east",onMouseDown:O,style:{...B,cursor:"se-resize",position:"absolute",height:d,width:d,bottom:0,right:0,transform:`translate(${d/2}px, ${d/2}px)`}}),k.jsx("div",{title:"south-west",onMouseDown:L,style:{...B,cursor:"sw-resize",position:"absolute",height:d,width:d,bottom:0,left:0,transform:`translate(-${d/2}px, ${d/2}px)`}}),k.jsx("div",{title:"north-west",onMouseDown:F,style:{...B,cursor:"nw-resize",position:"absolute",height:d,width:d,top:0,left:0,transform:`translate(-${d/2}px, -${d/2}px)`}})]}):null}):null]})})}function Nj({interactive:t,region:e,onClick:r,onSave:n,maintainAspectRatio:s,disableCardinalControls:l,isEditing:u,rotation:d,style:h={backgroundColor:"rgba(0,0,0,.5)"}}){let v=_.useCallback(g=>{n({id:e.id,x:e.x,y:e.y,height:e.height,width:e.width,...g})},[n,e.id,e.x,e.y,e.height,e.width]);return k.jsx($j,{x:e.x,y:e.y,rotation:d,width:e.width,height:e.height,resizable:u,onSave:v,maintainAspectRatio:s,disableCardinalControls:l,children:k.jsx("box",{interactive:t,onContextMenu:g=>{g.preventDefault(),console.log("menu!")},onClick:g=>{g.preventDefault(),g.stopPropagation(),r(e)},target:{x:0,y:0,width:e.width,height:e.height},style:h})})}function zj(t,e){return t?e?{...t,...e||{},":hover":t[":hover"]?Object.assign(t[":hover"]||{},e[":hover"]||{}):e[":hover"],":active":t[":active"]?Object.assign(t[":active"]||{},e[":active"]||{}):e[":hover"]}:t:e}const Fj=_.createContext(null),jm={didCatch:!1,error:null};class Dj extends _.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=jm}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var r,n,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:l,reason:"imperative-api"}),this.setState(jm)}}componentDidCatch(e,r){var n,s;(n=(s=this.props).onError)===null||n===void 0||n.call(s,e,r)}componentDidUpdate(e,r){const{didCatch:n}=this.state,{resetKeys:s}=this.props;if(n&&r.error!==null&&Bj(e.resetKeys,s)){var l,u;(l=(u=this.props).onReset)===null||l===void 0||l.call(u,{next:s,prev:e.resetKeys,reason:"keys"}),this.setState(jm)}}render(){const{children:e,fallbackRender:r,FallbackComponent:n,fallback:s}=this.props,{didCatch:l,error:u}=this.state;let d=e;if(l){const h={error:u,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")d=r(h);else if(n)d=_.createElement(n,h);else if(s!==void 0)d=s;else throw u}return _.createElement(Fj.Provider,{value:{didCatch:l,error:u,resetErrorBoundary:this.resetErrorBoundary}},d)}}function Bj(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.length!==e.length||t.some((r,n)=>!Object.is(r,e[n]))}const Uj={},y0=t=>{let e;const r=new Set,n=(g,w)=>{const b=typeof g=="function"?g(e):g;if(!Object.is(b,e)){const R=e;e=w??(typeof b!="object"||b===null)?b:Object.assign({},e,b),r.forEach(P=>P(e,R))}},s=()=>e,h={setState:n,getState:s,getInitialState:()=>v,subscribe:g=>(r.add(g),()=>r.delete(g)),destroy:()=>{(Uj?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},v=e=t(n,s,h);return h},Va=t=>t?y0(t):y0;var Om={exports:{}},Lm={},Mm={exports:{}},Im={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w0;function Hj(){if(w0)return Im;w0=1;var t=Ha();function e(w,b){return w===b&&(w!==0||1/w===1/b)||w!==w&&b!==b}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,s=t.useEffect,l=t.useLayoutEffect,u=t.useDebugValue;function d(w,b){var R=b(),P=n({inst:{value:R,getSnapshot:b}}),C=P[0].inst,j=P[1];return l(function(){C.value=R,C.getSnapshot=b,h(C)&&j({inst:C})},[w,R,b]),s(function(){return h(C)&&j({inst:C}),w(function(){h(C)&&j({inst:C})})},[w]),u(R),R}function h(w){var b=w.getSnapshot;w=w.value;try{var R=b();return!r(w,R)}catch{return!0}}function v(w,b){return b()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v:d;return Im.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:g,Im}var x0;function Wj(){return x0||(x0=1,Mm.exports=Hj()),Mm.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0;function Vj(){if(S0)return Lm;S0=1;var t=Ha(),e=Wj();function r(v,g){return v===g&&(v!==0||1/v===1/g)||v!==v&&g!==g}var n=typeof Object.is=="function"?Object.is:r,s=e.useSyncExternalStore,l=t.useRef,u=t.useEffect,d=t.useMemo,h=t.useDebugValue;return Lm.useSyncExternalStoreWithSelector=function(v,g,w,b,R){var P=l(null);if(P.current===null){var C={hasValue:!1,value:null};P.current=C}else C=P.current;P=d(function(){function O(B){if(!L){if(L=!0,A=B,B=b(B),R!==void 0&&C.hasValue){var $=C.value;if(R($,B))return F=$}return F=B}if($=F,n(A,B))return $;var K=b(B);return R!==void 0&&R($,K)?(A=B,$):(A=B,F=K)}var L=!1,A,F,z=w===void 0?null:w;return[function(){return O(g())},z===null?void 0:function(){return O(z())}]},[g,w,b,R]);var j=s(v,P[0],P[1]);return u(function(){C.hasValue=!0,C.value=j},[j]),h(j),j},Lm}var b0;function Qj(){return b0||(b0=1,Om.exports=Vj()),Om.exports}var qj=Qj();const Gj=Ua(qj),lS={},{useDebugValue:Kj}=ct,{useSyncExternalStoreWithSelector:Yj}=Gj;let E0=!1;const Xj=t=>t;function Ri(t,e=Xj,r){(lS?"production":void 0)!=="production"&&r&&!E0&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),E0=!0);const n=Yj(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return Kj(n),n}const P0=t=>{(lS?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Va(t):t,r=(n,s)=>Ri(e,n,s);return Object.assign(r,e),r},Zj=t=>t?P0(t):P0;function Dd(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(s){s(r)}),(n=t.get("*"))&&n.slice().map(function(s){s(e,r)})}}}var Jj={collection:void 0,manifest:void 0,range:void 0,canvas:void 0,annotation:void 0,annotationPage:void 0},Jg=ct.createContext(Jj),sc=()=>_.useContext(Jg);function lp({value:t,children:e}){let r=sc(),n=_.useMemo(()=>({...r,...t}),[t,r]);return k.jsx(Jg.Provider,{value:n,children:e})}var ap=ct.createContext({vault:null,setVaultInstance:t=>{}});function Bd({vault:t,vaultOptions:e,useGlobal:r,resources:n,children:s}){let[l,u]=_.useState(()=>t||(r?o1(e):e?new pg(e):new pg));return k.jsx(ap.Provider,{value:{vault:l,setVaultInstance:u},children:k.jsx(lp,{value:n||{},children:s})})}function Ud(t){let e=_.useContext(ap);return t||(e&&e.vault?e.vault:o1())}function eO(t,{noCache:e=!1}={}){let r=typeof t=="string"?t:t.id,n=Ud(),[s,l]=_.useState(r),[u,d]=_.useState(void 0),h=_.useMemo(()=>n.get(r,{skipSelfReturn:!0})||void 0,[r,n]),[v,g]=_.useState(h);return _.useEffect(()=>{(async()=>{try{let w=h&&!e?h:await n.load(r),b=w?w.id||w["@id"]:null;w&&s!==b&&l(b),g(w)}catch(w){d(w)}})()},[r,e]),{isLoaded:!!v,id:s,requestId:r,error:u,resource:v,cached:!!(v&&v===h)}}function tO(t,e){let{id:r,isLoaded:n,error:s,resource:l,requestId:u,cached:d}=eO(t,e);return{id:r,isLoaded:n,error:s,manifest:l,requestId:u,cached:d}}function ev({manifest:t,children:e}){return k.jsx(lp,{value:{manifest:t},children:e})}function Ds({canvas:t,children:e}){return k.jsx(lp,{value:{canvas:t},children:e})}var Kr=()=>{let{vault:t}=_.useContext(ap);if(t===null)throw new Error("Vault not found. Ensure you have your provider set up correctly.");return t};function Nn(t,e=[]){let r=Kr(),[n,s]=_.useState(()=>t(r.getState(),r));return _.useEffect(()=>r.subscribe(l=>t(l,r),l=>{s(l)},!1),e),n}var up=ct.createContext([]);function aS(){let t=_.useContext(up);return Nn(e=>t.map(r=>e.iiif.entities.Canvas[r]).filter(Boolean),[t])}function Vs(t={},e=[]){let{id:r,selector:n}=t,s=sc();Kr();let l=r||s.manifest,u=Nn(d=>l?d.iiif.entities.Manifest[l]:void 0,[l]);return _.useMemo(()=>{if(u)return n?n(u):u},[u,n,...e])}function rO({range:t,children:e}){return k.jsx(lp,{value:{range:t},children:e})}function uS(t,e){var n;let r=[];for(let s of e.items)if(s.type==="SpecificResource"&&((n=s.source)==null?void 0:n.type)==="Canvas"&&(s.source.id.indexOf("#")!==-1?r.push({id:s.source.id.split("#")[0],type:"Canvas"}):r.push(s.source)),s.type==="Range"&&r.push(...uS(t,t.get(s))),s.type==="SpecificResource"){let l=typeof s.source=="string"?s.source:s.source.id;r.push({id:l,type:"Canvas"})}return r}function nO(t,e,{disablePaging:r,skipNonPaged:n}={}){let s=e.behavior,l=s.includes("paged"),u=l?!1:s.includes("continuous"),d=l||u?!1:s.includes("individuals"),h=e.type==="Manifest"?e.items:uS(t,e);if(u)return[h,[h.map((P,C)=>C)]];if(d||!l||r)return[h,h.map((P,C)=>[C])];let v=[],g=[],w=()=>{g.length&&(v.push([...g]),g=[])},b=0,R=!1;for(let P=0;P<h.length;P++){let C=t.get(h[P]);if(C.behavior.includes("non-paged")){P===b&&b++,n||(w(),v.push([P]),w());continue}if(P===b||C.behavior.includes("facing-pages")){g.length&&(R=!0),w(),v.push([P]),w();continue}if(g.push(P),R){w(),R=!1;continue}g.length>1&&w()}return g.length&&w(),[h,v]}function iO(t={},e=[]){let{id:r,selector:n}=t,s=sc(),l=r||s.range,u=Nn(d=>l?d.iiif.entities.Range[l]:void 0,[l]);return _.useMemo(()=>{if(u)return n?n(u):u},[u,n,...e])}function sO({startCanvas:t,disablePaging:e}){var C;let r=Kr(),n=Vs(),s=iO(),[l,u]=_.useState(void 0),d=s||n;if(!d)throw new Error("Nothing selected");let[h,v]=_.useMemo(()=>nO(r,d,{disablePaging:e}),[r,d,e]),g=_.useRef(v);if(g.current!==v){let j=g.current[l][0],O=v.findIndex(L=>L.includes(j));g.current=v,u(O)}let w=_.useCallback(j=>{let O=v.findIndex(L=>L.includes(j));u(O===-1?0:O)},[h,v]),b=_.useCallback(j=>{let O=h.findIndex(L=>L.id===j);O!==-1?w(O):u(0)},[h,v]),R=_.useCallback(()=>{u(j=>j>=v.length-1?j:j+1)},[v]),P=_.useCallback(()=>{u(j=>j<=0?0:j-1)},[v]);return typeof l>"u"&&(t?b(t):u(0)),{visibleItems:((C=v[l])==null?void 0:C.map(j=>h[j].id))||[],cursor:l,items:h,sequence:v,hasPrevious:l>0,hasNext:l<v.length-1,setSequenceIndex:u,setCanvasIndex:w,setCanvasId:b,next:R,previous:P}}function as(t,e,r){let n=e.findIndex(u=>u.service.id===t);if(n===-1)return e;let s=[...e],l=r(s[n]);return l===s[n]?e:(s[n]=l,s)}var oO=()=>Va((t,e)=>({currentAuth:-1,authItems:[],login:()=>{let r=e().authItems[e().currentAuth];if(!r||r.isPending||r.isLoggedIn)return;if(r.type!=="active")throw new Error("Cannot login to non-active service");let n=r.service.service.find(s=>s.type==="AuthAccessTokenService2");if(!n)throw new Error("Token service not found");t(()=>({authItems:as(r.id,e().authItems,s=>({...s,isPending:!0}))})),C0(r.service).then(()=>{Am(n).then(s=>{let l=s.expiresIn,u=Date.now()+l*1e3;t(()=>({authItems:as(r.id,e().authItems,d=>({...d,isLoggedIn:!0,isPending:!1,session:{token:s.accessToken,expires:u}}))}))}).catch(s=>{t(()=>({authItems:as(r.id,e().authItems,l=>({...l,isLoggedIn:!1,isPending:!1,error:s.message}))}))})})},logout:()=>{let r=e().authItems[e().currentAuth];if(!r||r.isPending||!r.isLoggedIn)return;if(r.type!=="active")throw new Error("Cannot logout of non-active service");let n=r.service.service.find(l=>l.type==="AuthLogoutService2");if(!n)return;let s=`${n.id}?origin=${cS()}`;window.open(s),t(()=>({authItems:as(r.id,e().authItems,l=>({...l,isLoggedIn:!1,session:null,isPending:!1}))}))},nextAuth:()=>{let r=e().authItems.length,n=e().currentAuth+1;n>=r||t(()=>({currentAuth:n}))},previousAuth:()=>{let r=e().currentAuth-1;r<0||t(()=>({currentAuth:r}))},setAuth:r=>{r!==-1&&(r<0||r>=e().authItems.length)||t(()=>({currentAuth:r}))},addService:(r,n)=>{if(!r.service)return;let s=r.service.find(u=>u.type==="AuthAccessTokenService2"),l=r;if(e().authItems.find(u=>u.service.id===r.id)){t(()=>({authItems:as(r.id,e().authItems,u=>({...u,instances:u.instances+1}))}));return}if(t(()=>({currentAuth:l.profile==="active"?0:e().currentAuth,authItems:[{id:r.id,type:r.profile,service:r,probeId:n,canAuthenticate:!0,instances:1,isPending:!1,isLoggedIn:!1,session:null},...e().authItems]})),r.profile==="external"){if(!s)throw new Error("Token service not found");Am(s).then(u=>{t(()=>({authItems:as(r.id,e().authItems,d=>({...d,isLoggedIn:!0,isPending:!1,session:{token:u.accessToken,expires:u.expiresIn}}))}))}).catch(u=>{t(()=>({authItems:as(r.id,e().authItems,d=>({...d,isLoggedIn:!1,isPending:!1,canAuthenticate:!1,error:u.message}))}))})}if(r.profile==="kiosk"){if(!s)throw new Error("Token service not found");t(()=>({authItems:as(r.id,e().authItems,u=>({...u,isPending:!0}))})),C0(l).then(()=>{Am(s).then(u=>{t(()=>({authItems:as(r.id,e().authItems,d=>({...d,isLoggedIn:!0,isPending:!1,session:{token:u.accessToken,expires:u.expiresIn}}))}))}).catch(u=>{t(()=>({authItems:as(r.id,e().authItems,d=>({...d,isLoggedIn:!1,isPending:!1,error:u.message}))}))})})}r.profile},removeService:(r,n)=>{let s=e().currentAuth===e().authItems.findIndex(u=>u.service.id===r.id),l=e().currentAuth;if(s){let u=e().authItems.find(d=>d.service.id===r.id);u&&u.instances>1||(l=e().authItems.findIndex(d=>d.service.id!==r.id&&d.instances>0))}t(()=>({authItems:as(r.id,e().authItems,u=>({...u,instances:u.instances-1})),currentAuth:l}))}})),lO=(t,e)=>Va((r,n)=>({service:t,status:t?"unknown":"success",shouldRedirect:!1,redirectResource:null,shouldSubstitute:!1,substituteResource:null,error:null,errorHeading:null,errorNote:null,shouldDisplayResource:!1,token:e||null,async probe(){var u;if(!n().service)return;let s=(u=n().service)==null?void 0:u.id;if(!s){r({status:"error",error:"Service ID not found",errorHeading:{en:["Service ID not found"]}});return}r({status:"probing"});let l=n().token;try{let d=await fetch(s,{headers:l?{Authorization:`Bearer ${n().token}`,Accept:"application/json"}:{Accept:"application/json"}}).then(h=>h.json());if(d.status===200)r({status:"success",shouldDisplayResource:!0,error:null,errorHeading:null,errorNote:null,shouldSubstitute:!1,shouldRedirect:!1});else if(d.status<400&&d.status>=300){if(!d.location)throw new Error("Redirect location not found");r({status:"error",shouldDisplayResource:!1,shouldRedirect:!0,redirectResource:d.location||null})}else if(d.status===401)r({status:"error",shouldDisplayResource:!1,shouldRedirect:!1,shouldSubstitute:!!d.substitute,substituteResource:d.substitute||null,error:"Unauthorized",errorHeading:d.heading||{en:["Unauthorized"]},errorNote:d.note||null});else throw new Error("Unknown error")}catch(d){r({status:"error",error:d.message,errorHeading:{en:["Unknown error"]}})}},setToken(s){r({token:s})}}));function aO(t){let e=t.service||t.services||[],r={hasAuth:!1,services:{}};for(let n of e)if(n.type==="AuthProbeService2"){r.services.probe=n,r.hasAuth=!0;let s=n.service.filter(l=>l.type==="AuthAccessService2");s[0]&&(r.services.access=s[0])}return r}async function Am(t,{strict:e=!0}={}){return new Promise((r,n)=>{let s=Math.random().toString(36).substring(7),l=`${t.id}?messageId=${s}&origin=${window.location.origin}`,u=v=>{let g=v.data;if(g.messageId===s){if(e&&g.type!=="AuthAccessToken2"){d(),n("Invalid response, expected type=AuthAccessToken2");return}if(!g.accessToken){d(),n("Invalid response, expected accessToken");return}d(),r(g)}},d=()=>window.removeEventListener("message",u),h=document.createElement("iframe");h.src=l,h.style.display="none",document.body.appendChild(h),window.addEventListener("message",u)})}function cS(t){let e=window.location;return e.protocol+"//"+e.hostname+(e.port?":"+e.port:"")}async function C0(t){let e=`${t.id}?origin=${cS()}`,r=window.open(e);if(!r)throw new Error("Failed to open window");return new Promise((n,s)=>{let l=setInterval(()=>{r.closed&&(clearInterval(l),n())},500)})}function uO(t){var l;let e=_.useMemo(()=>aO(t),[t]),r=gO((l=e.services.access)==null?void 0:l.id),n=_.useMemo(()=>lO(e.services.probe,r),[e.services.probe]),s=Ri(n);return _.useEffect(()=>{s.status==="unknown"&&!r&&s.probe()},[e.services.probe,s.status]),_.useEffect(()=>{r&&(s.setToken(r),s.probe())},[r]),[t,s,e.hasAuth]}var Hd=_.createContext(null),cO=_.createContext(null);cO.displayName="CurrentAuth";var dO=_.createContext(null);dO.displayName="AuthActions";function fO({children:t}){let e=_.useMemo(()=>oO(),[]);return k.jsx(Hd.Provider,{value:e,children:t})}function hO(){return!!_.useContext(Hd)}function tv(){let t=_.useContext(Hd);if(!t)throw new Error("useAuthActions must be used within a AuthProvider");return t}function pO(){let t=tv();return Ri(t,e=>({login:e.login,logout:e.logout,nextAuth:e.nextAuth,previousAuth:e.previousAuth,setAuth:e.setAuth,addService:e.addService,removeService:e.removeService}))}function mO(t){let e=tv();return Ri(e,r=>r.authItems.find(n=>n.service.id===t))}function gO(t){let e=tv();return Ri(e,r=>{var n,s;return(s=(n=r.authItems.find(l=>l.id===t))==null?void 0:n.session)==null?void 0:s.token})}function vO(t){let e=pO(),r=mO(t.service.id);return _.useEffect(()=>(e==null||e.addService(t.service,t.probeId),()=>{e==null||e.removeService(t.service,t.probeId)}),[t.service]),r?(r.error||r.isLoggedIn,t.children):null}function $m(){return null}function yO(t){let[e,r,n]=uO(t.resource);t.fallbackComponent;let s=t.loadingComponent||$m,l=t.errorComponent||$m,u=r.service,d=null;if(!n||!u)return t.children(e);let h=u.service.filter(v=>v.type==="AuthAccessService2");r.status==="error"&&(d=k.jsx(l,{resource:t.resource,error:r.error||"",heading:r.errorHeading,note:r.errorNote,extra:t.extra})),(r.status==="unknown"||r.status==="probing")&&(d=k.jsx(s,{})),r.status==="success"&&(d=t.children(e));for(let v of h)d=k.jsx(vO,{service:v,probeId:u.id,children:d},v.id);return d}var wO=t=>t.id||t["@id"];function xO(t){return(Array.isArray(t.service)?t.service:[t.service]).find(e=>e.profile==="http://iiif.io/api/search/0/autocomplete"||e.profile==="http://iiif.io/api/search/1/autocomplete"||e.profile==="AutoCompleteService1")}var SO=t=>{let e;typeof t=="string"?e={"@context":"http://iiif.io/api/search/1/context.json",profile:"http://iiif.io/api/search/1/search","@id":t,id:t,service:[]}:e=t;let r=e?wO(e):void 0,n=null;return Va((s,l)=>({service:e,resources:[],lastQuery:{},loading:!1,error:!1,highlight:null,hasSearch:!!e,hasAutocomplete:e?!!xO(e):!1,errorMessage:"",search(u,d={}){if(!r)throw new Error("No search service found.");n&&!n.signal.aborted&&n.abort(),n=new AbortController;let h=new URLSearchParams;u.q&&h.set("q",u.q),u.motivation&&h.set("motivation",u.motivation),u.date&&h.set("date",u.date),u.user&&h.set("user",u.user),s({loading:!0}),fetch(`${r}?${h.toString()}`,{signal:n.signal,headers:{"Content-Type":"application/json",Accept:"application/json",...d.headers||{}}}).then(async v=>{if(!(n!=null&&n.signal.aborted))if(v.ok){let g=await v.json();s({resources:g.resources,error:!1,errorMessage:""})}else s({resources:[],error:!0,errorMessage:v.statusText})})},clearSearch(){s({resources:[],error:!1,errorMessage:""})},highlightResult(u){let d=l().resources.find(h=>h["@id"]===u);s({highlight:d})},nextResult(){let u=l().resources,d=l().highlight;if(!d){s({highlight:u[0]||null});return}let h=u.findIndex(v=>v["@id"]===d["@id"]);if(h===-1){s({highlight:u[0]||null});return}s({highlight:u[h+1]||u[0]||null})},previousResult(){let u=l().resources,d=l().highlight;if(!d){s({highlight:u[u.length-1]||null});return}let h=u.findIndex(v=>v["@id"]===d["@id"]);if(h===-1){s({highlight:u[u.length-1]||null});return}if(h===0){s({highlight:u[u.length-1]||null});return}s({highlight:u[h-1]||u[u.length-1]||null})}}))};function bO(){let t=Vs();return t?t.service.find(e=>e.profile==="SearchService1"||e.profile==="http://iiif.io/api/search/1/search"):void 0}var Wd=_.createContext(null);Wd.displayName="Search";function EO(t){let e=bO();return t.store?k.jsx(Wd.Provider,{value:t.store,children:t.children}):k.jsx(PO,{service:e,children:t.children})}function PO({service:t,children:e}){let r=_.useMemo(()=>SO(t),[t]);return k.jsx(Wd.Provider,{value:r,children:e})}var cd=()=>{},cp=_.createContext({setCurrentCanvasId:cd,setCurrentCanvasIndex:cd,nextCanvas:cd,previousCanvas:cd,items:[],sequence:[],setSequenceIndex:cd,currentSequenceIndex:0,hasNext:!1,hasPrevious:!1});function CO(t){let e=Vs(),{cursor:r,visibleItems:n,next:s,sequence:l,items:u,setCanvasIndex:d,setCanvasId:h,previous:v,setSequenceIndex:g,hasNext:w,hasPrevious:b}=sO({startCanvas:t.startCanvas,disablePaging:t.pagingEnabled===!1}),R=_.useMemo(()=>({sequence:l,items:u,setCurrentCanvasId:h,nextCanvas:s,previousCanvas:v,totalCanvases:u.length,setCurrentCanvasIndex:d,setSequenceIndex:g,currentSequenceIndex:r,hasNext:w,hasPrevious:b}),[l,u,h,s,v,u,d,g,r]);return e?n.length===0?null:k.jsx(cp.Provider,{value:R,children:k.jsx(up.Provider,{value:n,children:k.jsx(Ds,{canvas:n[0],children:t.children})})}):(console.warn("The manifest passed to the provider is not a valid IIIF manifest."),k.jsx("div",{children:"Sorry, something went wrong."}))}function kO(t){let e=Ud(t.vault),r=tO(t.manifest);if(!r)return console.warn("The manifest passed to the provider is not a valid IIIF manifest."),k.jsx("div",{children:"Sorry, something went wrong."});if(r.error)return k.jsx("div",{children:r.error.toString()});if(!r.isLoaded)return k.jsx("div",{children:"Loading..."});let n=k.jsx(CO,{...t,children:t.children});return k.jsx(Bd,{vault:e,children:k.jsx(ev,{manifest:r.id,children:k.jsx(fO,{children:k.jsx(EO,{children:t.rangeId?k.jsx(rO,{range:t.rangeId,children:n}):n})})})})}function TO(){return _.useContext(cp)}var RO=Dd(),dp=_.createContext({emitter:RO});dp.displayName="Events";function _O(){return ct.useContext(dp).emitter}var jO=ct.createContext({});function OO(){let t=_.useContext(jO),e=Object.keys(t),r={};for(let n of e)t[n].Provider&&(r[n]={value:_.useContext(t[n]),Provider:t[n].Provider});return r}function LO(t){let e=Object.keys(t),r=t.children;for(let n of e){if(n==="children")continue;let{value:s,Provider:l}=t[n];r=k.jsx(l,{value:s,children:r})}return r}function MO(){return{VaultContext:_.useContext(ap),ResourceContext:_.useContext(Jg),SimpleViewerReactContext:_.useContext(cp),VisibleCanvasReactContext:_.useContext(up),AuthRContext:_.useContext(Hd),SearchReactContext:_.useContext(Wd),ReactEventContext:_.useContext(dp)}}function IO(t){return k.jsx(Bd,{vault:t.bridge.VaultContext.vault||void 0,resources:t.bridge.ResourceContext,children:k.jsx(up.Provider,{value:t.bridge.VisibleCanvasReactContext,children:k.jsx(cp.Provider,{value:t.bridge.SimpleViewerReactContext,children:k.jsx(dp.Provider,{value:t.bridge.ReactEventContext,children:k.jsx(Hd.Provider,{value:t.bridge.AuthRContext,children:k.jsx(Wd.Provider,{value:t.bridge.SearchReactContext,children:t.custom?k.jsx(LO,{...t.custom,children:t.children}):t.children})})})})})})}function AO(){let t=Kr().getStore();return _.useMemo(()=>e=>t.dispatch(e),[t])}function k0(t){return typeof t!="string"&&t&&t.bindToVault}function $O(){let t=Kr(),e=_.useRef([]),r=AO(),n=_.useMemo(()=>`vault://annotation-page/${new Date().getTime()}/${Math.round(Math.random()*1e9).toString(16)}`,[]);_.useLayoutEffect(()=>{let d={id:n,type:"AnnotationPage",behavior:[],label:null,thumbnail:[],summary:null,requiredStatement:null,metadata:[],rights:null,provider:[],items:[],seeAlso:[],homepage:[],rendering:[],service:[]};r(Sh.importEntities({entities:{AnnotationPage:{[d.id]:d}}}))},[n]);let s=Nn(d=>n&&d.iiif.entities.AnnotationPage[n]||null,[n]),l=_.useCallback((d,h)=>{if(n){if(k0(d)){let w=d;w.__vault||w.bindToVault(t),d=typeof w.source=="string"?w.source:w.source.id,e.current[d]=w}else typeof d!="string"&&(d=d.id);let v=t.get({id:n,type:"AnnotationPage"}),g=t.get({id:d,type:"Annotation"});v&&g&&(v.items.find(w=>w.id===g.id)||r(Sh.addReference({id:n,type:"AnnotationPage",key:"items",reference:{id:d,type:"Annotation"},index:h})))}},[n]),u=_.useCallback(d=>{n&&(k0(d)?d=typeof d.source=="string"?d.source:d.source.id:typeof d!="string"&&(d=d.id),e.current[d]&&e.current[d].beforeRemove(),t.get({id:n,type:"AnnotationPage"})&&r(Sh.removeReference({id:n,type:"AnnotationPage",key:"items",reference:{id:d,type:"Annotation"}})))},[n]);return[s,{addAnnotation:l,removeAnnotation:u}]}var dS=_.createContext(null);function NO(){let t=_.useContext(dS);return[t.fullPage,{addAnnotation:t.addAnnotation,removeAnnotation:t.removeAnnotation}]}function zO({children:t}){let[e,{addAnnotation:r,removeAnnotation:n}]=$O();return k.jsx(dS.Provider,{value:_.useMemo(()=>({fullPage:e,addAnnotation:r,removeAnnotation:n}),[e]),children:t})}function FO({width:t,style:e,height:r,error:n,resetErrorBoundary:s}){return k.jsxs("div",{style:{width:t,height:r,minHeight:500,...e||{},background:"#f9f9f9"},children:[k.jsx("h3",{children:"Error occurred"}),k.jsx("p",{children:n.message}),k.jsx("button",{type:"button",onClick:s,children:"Reset"})]})}var fp=_.createContext(null);function fS(){return _.useContext(fp)}var hS=_.createContext(()=>{}),pS=_.createContext(()=>{});function Dl(t,e,r,n,s=[]){let l=_.useContext(t==="portal"?pS:hS);_.useEffect(()=>(t!=="none"&&l(e,r,n),()=>{l(e,null)}),[e,t,l,...s])}function Yr(t={},e=[]){let{id:r,selector:n}=t,s=sc(),l=r||s.canvas,u=Nn(d=>l?d.iiif.entities.Canvas[l]:void 0,[l]);return _.useMemo(()=>{if(u)return n?n(u):u},[u,n,...e])}var mS=_.createContext(()=>{});function DO(t){let e=Yr(),r=_.useContext(mS);_.useEffect(()=>e&&e.id?(r(e.id,t),()=>r(e.id,-1)):()=>{},[e,t])}function BO({children:t,errorFallback:e,outerContainerProps:r={},worldScale:n,...s}){let[l,u]=_.useState(),d=OO(),h=MO(),v=e||FO,[g,w]=_.useState({}),b=Object.entries(g),[R,P]=_.useState({}),C=Object.entries(R),[j,O]=_.useState({}),L=_.useMemo(()=>n||Math.max(...Object.values(j)),[j]),A=_.useMemo(()=>({maxOverZoom:L||1,...s.runtimeOptions||{}}),[L,s.runtimeOptions]),F=_.useCallback(($,K)=>{O(fe=>{if(K===-1){let{[$]:J,...H}=fe;return H}return{...fe,[$]:K}})},[]),z=_.useCallback(($,K,fe)=>{w(({[$]:J,...H})=>K?{...H,[$]:{element:K,props:fe}}:H)},[]),B=_.useCallback(($,K,fe)=>{P(({[$]:J,...H})=>K?{...H,[$]:{element:K,props:fe}}:H)},[]);return k.jsxs(Dj,{resetKeys:[],fallbackRender:$=>k.jsx(v,{...s,...$}),children:[k.jsx(jj,{...s,containerProps:{style:{position:"relative"},...s.containerProps||{}},htmlChildren:k.jsx(k.Fragment,{children:b.map(([$,{element:K,props:fe}])=>k.jsx(ct.Fragment,{children:k.jsx(K,{...fe||{}})},$))}),onCreated:$=>{u($),s.onCreated&&s.onCreated($)},runtimeOptions:A,children:k.jsx(fp.Provider,{value:l,children:k.jsx(mS.Provider,{value:F,children:k.jsx(hS.Provider,{value:z,children:k.jsx(pS.Provider,{value:B,children:k.jsx(IO,{bridge:h,custom:d,children:k.jsx(zd.Provider,{value:s.mode||"explore",children:k.jsx(zO,{children:t})})})})})})})}),k.jsx("div",{children:C.map(([$,{element:K,props:fe}])=>k.jsx(ct.Fragment,{children:k.jsx(K,{...fe||{}})},$))})]})}function gS(t,e){let r=Kr(),n=_.useMemo(()=>yk(r),[r]),s=Nn(()=>t&&t.id?r.getResourceMeta(t.id,"eventManager"):null,[t]);return _.useMemo(()=>t?n.getListenersAsProps(t,e):{},[s,t,r,e])}function zh(t,e){let r=Kr(),n=_.useMemo(()=>Lw(r),[r]);return Nn(()=>{if(!t)return null;let s=n.getAppliedStyles(t.id);return s?e?s[e]:s:void 0},[t,e])}function vS(t={},e=[]){let{id:r,selector:n}=t,s=sc(),l=Kr(),u=r||s.annotation,d=Nn(v=>u?v.iiif.entities.Annotation[u]:void 0,[u]),h=Nn(v=>d&&d.body?d.body.map(g=>g?g.type==="SpecificResource"?{...g,source:l.get(g)}:g?v.iiif.entities[g.type][g.id]:null:null).filter(Boolean):[],[d]);return _.useMemo(()=>{if(!d)return;let v={...d,body:h,target:An(d.target,{typeMap:l.getState().iiif.mapping})};return n?n(v):v},[d,n,h,...e])}var yS=({id:t,style:e,className:r,interactive:n})=>{let s=vS({id:t}),l=zh(s,"atlas"),u=zh(s,"html"),d=gS(s,["atlas"]),h=Yr(),v=_.useMemo(()=>zj(e,l),[e,l]);return h&&s&&s.target&&s.target.selector&&s.target.selector.type==="BoxSelector"&&s.target.source&&(s.target.source.id===h.id||s.target.source===h.id)?k.jsx(Nj,{id:s.id,isEditing:!0,region:s.target.selector.spatial,style:v,className:(u==null?void 0:u.className)||r,interactive:!!(u!=null&&u.href||n),href:(u==null?void 0:u.href)||null,title:(u==null?void 0:u.title)||null,hrefTarget:(u==null?void 0:u.target)||null,onClick:()=>{},...d}):null};function UO(t={},e=[]){let{id:r,selector:n}=t,s=sc(),l=r||s.annotationPage,u=Nn(d=>l?d.iiif.entities.AnnotationPage[l]:void 0,[l]);return _.useMemo(()=>{if(u)return n?n(u):u},[u,...e])}var xg=({className:t,page:e})=>{var l;let r=UO({id:e.id})||e,n=zh(r,"atlas"),s=zh(r,"html");return Nn(u=>r.id?u.iiif.entities.AnnotationPage[r.id]:null,[]),k.jsx(_.Fragment,{children:(l=r.items)==null?void 0:l.map(u=>k.jsx(yS,{id:u.id,style:n,className:(s==null?void 0:s.className)||t},u.id))})};function HO(t,e){var n;let r=(n=t==null?void 0:t.iiif)==null?void 0:n.meta[e];return r?r.annotationPageManager:null}function WO(t,e){return Nn(r=>{let n=[];if(!t)return n;let s=Object.keys(r.iiif.entities.AnnotationPage);for(let l of s)if(!e||e.indexOf(l)!==-1){let u=HO(r,l);u&&u.views&&u.views[t]&&n.push(l)}return n},[t,e])}function VO({canvas:t,manifest:e,all:r,canvases:n}){let s=[];if(e)for(let l of e.annotations)s.indexOf(l.id)===-1&&s.push(l.id);if(r){if(n&&n.length)for(let l of n)for(let u of l.annotations)s.indexOf(u.id)===-1&&s.push(u.id)}else if(t)for(let l of t.annotations)s.indexOf(l.id)===-1&&s.push(l.id);return s}function QO(t,e){var n;let r=(n=t==null?void 0:t.iiif)==null?void 0:n.meta[e];return r?r.annotationPageManager:null}function wS(t,e={}){let r=Kr(),n=Vs(),s=Yr(),l=aS(),u=_.useMemo(()=>VO({all:e.all,manifest:n,canvas:s,canvases:l}),[e.all,s,l,n]),d=WO(t,e.all?void 0:u),h=_.useCallback(g=>{t&&r.setMetaValue([g,"annotationPageManager","views"],w=>w&&!w[t]?w:{...w||{},[t]:!1})},[t,r]),v=_.useCallback((g,w={})=>{if(!t)return;let b=r.getState(),R=[];if(w!=null&&w.deselectOthers){let P=Object.keys(b.iiif.entities.AnnotationPage);for(let C of P){let j=QO(b,C);j&&j.views&&j.views[t]&&R.push(C)}}for(let P of R)h(P);r.setMetaValue([g,"annotationPageManager","views"],P=>P&&P[t]?P:{...P||{},[t]:!0})},[t,h,r]);return{availablePageIds:u,enabledPageIds:d,setPageEnabled:v,setPageDisabled:h}}function qO(t,e){return Nn((r,n)=>n.get(t.map(s=>({id:s,type:e}))),[t,e])}var xS=ct.createContext(Yk.store);xS.displayName="ImageServicesHelper";function rv(){return _.useContext(xS)}function GO(t){let e=rv();return Ri(e,({loaded:r})=>r[t])}function SS(){let t=rv();return Ri(t,({loadServiceSync:e})=>e)}function KO(){let t=rv();return Ri(t,({loaded:e})=>e)}var YO=Va((t,e)=>({loaded:{},setLoaded:(r,n="done")=>{t(s=>({loaded:{...s.loaded,[r]:n}}))}})),XO=Dd();XO.on("loaded",t=>{YO.getState().setLoaded(t.imageServiceId)});function ZO(){let t=SS(),e=KO();return[_.useCallback((r,{height:n,width:s})=>r&&t(r,{height:n,width:s},!0),[t]),e]}function JO(t={}){let e=vS(),r=Yr(t.canvasId?{id:t.canvasId}:void 0);return Nn((n,s)=>{if(!r)return[];if(e&&t.enableSingleAnnotation)return[e];let l=s.get(r.items),u=[];for(let d of l)u.push(...s.get(d.items));return u},[r])}function eL(t,e=[]){let r=Kr(),n=_.useMemo(()=>Fg(r),[]),s=JO({enableSingleAnnotation:t==null?void 0:t.enableSingleAnnotation}),[l,u]=_.useState((t==null?void 0:t.defaultChoices)||[]),d=_.useMemo(()=>n.getPaintables(s,l),[r,s,l,...e]),h={makeChoice:_.useCallback((v,{deselectOthers:g=!0,deselect:w=!1}={})=>{d.choice&&u(b=>{if(w){let P=b.filter(C=>C!==v);if(P.length===0){let C=d.items[0].resource.id;return C?[C]:[]}return P}if(g)return[v];let R=[...b];if(R.length===0&&d.items.length){let P=d.items[0].resource.id;P&&R.push(P)}return b.indexOf(v)!==-1?b:[...b,v]})},[d.choice])};return[d,h]}function tL(t){let e=Vs(),r=Yr(),n=Kr(),s=_O(),l=(t==null?void 0:t.emitter)||s,[u,d]=ZO(),{enabledPageIds:h}=wS((t==null?void 0:t.annotationPageManagerId)||(e==null?void 0:e.id)||(r==null?void 0:r.id),{all:!1}),v=qO(h,"AnnotationPage"),g=(t==null?void 0:t.strategies)||["empty","images","media","textual-content","complex-timeline"],[w,b]=eL(t,[d]);_.useEffect(()=>{let P=C=>{b.makeChoice(C.choiceId,{deselectOthers:C.deselectOthers,deselect:C.deselect})};return l.on("make-choice",P),()=>{l.off("make-choice",P)}},[]);let R=_.useMemo(()=>Gg({canvas:r,paintables:w,supports:g,loadImageService:u,vault:n}),[r,w,n,b.makeChoice]);return _.useEffect(()=>{let P=w.allChoices,C={canvasId:r==null?void 0:r.id,manifestId:e==null?void 0:e.id};P&&l.emit("choice-change",{choice:P,partOf:C})},[r==null?void 0:r.id,w.allChoices]),_.useMemo(()=>R.type==="unknown"?[R,OR]:[{...R,annotations:{pages:v}},b],[R,v])}var nv=_.createContext(null);nv.displayName="Strategy";function fs(){let t=_.useContext(nv);if(!t)throw new Error("useStrategy must be used within a StrategyProvider");return t}var iv=_.createContext(null);iv.displayName="Controls";function Qa(){let t=_.useContext(iv);if(!t)throw new Error("useStrategy must be used within a StrategyProvider");return t}function rL({strategies:t,registerActions:e,defaultChoices:r,onChoiceChange:n,mediaControlsDeps:s,renderMediaControls:l,renderViewerControls:u,viewControlsDeps:d,renderComplexTimelineControls:h,complexTimelineControlsDeps:v,throwOnUnknown:g,children:w}){let b=Yr(),R=Kr(),P=_.useMemo(()=>Lw(R),[R]),[C,j]=tL({strategies:t||["images"],defaultChoices:r==null?void 0:r.map(({id:F})=>F)}),O="choice"in C?C.choice:void 0;if(_.useEffect(()=>{e&&e(j)},[C.annotations]),_.useEffect(()=>{n&&n(O)},[O]),_.useEffect(()=>{if(r)for(let F of r)typeof F.opacity<"u"&&P.applyStyles({id:F.id},"atlas",{opacity:F.opacity})},[r]),C.type==="unknown"&&g)throw new Error(C.reason||"Unknown strategy");let L=_.useMemo(()=>({renderMediaControls:l,mediaControlsDeps:s||[],renderViewerControls:u,viewControlsDeps:d||[],renderComplexTimelineControls:h,complexTimelineControlsDeps:v||[]}),[s,l,u,d,h,v]),A=_.useMemo(()=>({strategy:C,actions:j,choices:"choice"in C?C.choice:[]}),[C,b]);return k.jsx(iv.Provider,{value:L,children:k.jsx(nv.Provider,{value:A,children:w})})}function nL({x:t=0,y:e=0,keepCanvasScale:r,children:n}){let{strategy:s}=fs(),l=Yr(),u=gS(l,["deep-zoom"]),d=_.useMemo(()=>r?1:Math.max(1,...s.type==="images"?s.images.map(v=>{var g;return(v.width||0)/((g=v.target)==null?void 0:g.spatial.width)}):[]),[r,s]);DO(d);let h=s.type==="images"?s.images.length:0;return l?k.jsx("world-object",{height:l.height,width:l.width,x:t,y:e,...u,children:n},`${l.id}/${s.type}/${h}`):null}function bS({style:t}){let e=Yr();return!e||!e.height||!e.width?null:k.jsx("box",{interactive:!1,target:{x:0,y:0,width:Number(e.width),height:Number(e.height)},style:t})}function iL({backgroundStyle:t,alwaysShowBackground:e}){let{strategy:r}=fs();return r.type!=="empty"&&!e?null:k.jsx(bS,{style:t})}function T0(t){return{isMuted:!1,playRequested:!1,isPlaying:!1,isFinished:!1,volume:100,duration:t}}function sL(t,e){switch(e.type){case"RESET":return e.state;case"FINISHED":return{...t,isFinished:!0,isPlaying:!1,playRequested:!1};case"PLAY_PAUSE":return{...t,isFinished:!1,isPlaying:!t.isPlaying};case"PLAY_REQUESTED":return{...t,isFinished:!1,playRequested:!0};case"PAUSE":return{...t,isPlaying:!1};case"PLAY":return{...t,isFinished:!1,playRequested:!1,isPlaying:!0};case"MUTE":return{...t,isMuted:!0};case"SET_VOLUME":return{...t,volume:e.volume,isMuted:e.volume===0};case"TOGGLE_MUTE":return{...t,isMuted:!t.isMuted};case"UNMUTE":return{...t,isMuted:!1}}return t}function ES(t){let e=Math.round(t);return`${Math.floor(e/60)}:${`${e%60}`.padStart(2,"0")}`}function sv(t){let[e,r]=_.useReducer(sL,T0(t.duration));_.useEffect(()=>{r({type:"RESET",state:T0(t.duration)})},[t.duration]);let n=_.useRef(null),s=_.useRef(null),l=_.useRef(null),u=_.useRef(!1),d=_.useCallback(()=>{s.current&&n.current&&(s.current.innerHTML=ES(n.current.currentTime),l.current&&(l.current.style.width=`${n.current.currentTime/t.duration*100}%`),u.current!==n.current.muted&&(u.current=n.current.muted,r(n.current.muted?{type:"MUTE"}:{type:"UNMUTE"})))},[t.duration]),h=_.useCallback(()=>{n.current&&(r({type:"PLAY_REQUESTED"}),n.current.play().then(()=>{r({type:"PLAY"})}),d())},[d]),v=_.useCallback(()=>{n.current&&(n.current.duration>0&&n.current.paused?h():g())},[d]),g=_.useCallback(()=>{n.current&&(n.current.pause(),r({type:"PAUSE"}),d())},[d]),w=_.useCallback(()=>{n.current&&(n.current.muted=!n.current.muted,r(n.current.muted?{type:"MUTE"}:{type:"UNMUTE"}))},[]),b=_.useCallback(()=>{n.current&&(n.current.muted=!0,r({type:"MUTE"}))},[]),R=_.useCallback(()=>{n.current&&(n.current.muted=!1,r({type:"UNMUTE"}))},[]),P=_.useCallback(O=>{n.current&&(n.current.muted=!1,n.current.volume=O/100,r({type:"SET_VOLUME",volume:O}))},[]),C=_.useCallback(O=>{n.current&&(n.current.currentTime=Math.max(0,Math.min(O*t.duration,t.duration)),d())},[]),j=_.useCallback(O=>{if(n.current){let L=typeof O=="function"?O(n.current.currentTime):O;n.current.currentTime=Math.max(0,Math.min(L,t.duration)),d()}},[]);return _.useEffect(()=>{let O=setInterval(()=>{d()},350);return()=>clearInterval(O)},[d,t.duration]),_.useEffect(()=>{let O=()=>{r({type:"FINISHED"})},L=n.current;return L==null||L.addEventListener("ended",O),()=>L==null?void 0:L.removeEventListener("ended",O)},[]),[{element:n,currentTime:s,progress:l},e,{play:h,pause:g,playPause:v,mute:b,unmute:R,toggleMute:w,setVolume:P,setDurationPercent:C,setTime:j}]}function R0({currentKeyFrameIndex:t,keyframes:e,targetTime:r,currentTime:n}){if(n<=r){let s=e.findIndex(d=>d.time>r);if(s===-1)return[t,[]];let l={},u=e.slice(t,s);for(let d of u)d.type==="enter"&&(l[d.id]=d),d.type==="exit"&&(l[d.id]?delete l[d.id]:l[d.id]=d);return[s,Object.values(l)]}return[t,[]]}function oL({complexTimeline:t,startTime:e=0}){let r=Dd(),n={},s={progress:null,currentTime:null},l=0,u=null,d=0,h=null;function v(){let j=C.getState().visibleElements,O=n,L=[],A=Object.keys(O);for(let F of A){let z=O[F],B=j[F];z&&B&&L.push(z)}return L}function g(){return Object.keys(n).map(j=>n[j])}function w(j){s.currentTime&&(s.currentTime.innerHTML=ES(j),s.progress&&(s.progress.style.width=`${j/t.duration*100}%`))}let b=()=>{let j=C.getState(),O=j.currentPrime;if(!O)return;let L=n,A=j.visibleElements,F=Object.keys(L);for(let z of F){let B=L[z],$=A[z];if(B&&z!==O.id&&$){let K=d-$.time*1e3;Math.abs(d-$.time*1e3-B.currentTime*1e3)>300&&(B.currentTime=K/1e3)}}},R=(j=0)=>{let O=j-l,L=C.getState();if(L.isPlaying){let A=L.currentPrime;if(A){let $=n[A.id];$&&($.paused?d+=O:d=(A.time+$.currentTime)*1e3)}else d+=O;let F=d/1e3;if(F>L.duration){C.getState().setTime(0),C.setState({isPlaying:!1}),P(),w(0);return}w(F);let[z,B]=R0({currentTime:F,currentKeyFrameIndex:L.nextKeyframeIndex,keyframes:L.complexTimeline.keyframes,targetTime:F});B.length&&L.applyKeyframes(z,B)}l=j,u=requestAnimationFrame(R)},P=()=>{u&&cancelAnimationFrame(u)},C=Va((j,O)=>({complexTimeline:t,elements:{},visibleElements:{},isBuffering:!1,bufferMap:{},isMuted:!1,playRequested:!1,isPlaying:!1,isFinished:!1,isReady:!1,volume:100,duration:t.duration,clockStartRequests:0,clockStartTime:0,primeTime:0,currentPrime:null,clockRunning:!1,nextKeyframeIndex:0,startClock:()=>{O().clockRunning||(R(),h=setInterval(b,500)),j({clockRunning:!0,clockStartRequests:O().clockStartRequests+1})},applyKeyframes(L,A){let F=O(),z={...F.visibleElements},B=F.currentPrime;for(let $ of A)$.type==="enter"&&(z[$.id]=$,r.emit("complex-timeline.enter",{id:$.id})),$.type==="exit"&&(z[$.id]=null,r.emit("complex-timeline.exit",{id:$.id})),$.isPrime&&(B=$);j({nextKeyframeIndex:L,visibleElements:z,currentPrime:B})},stopClock:()=>{let L=O().clockStartRequests;if(L!==0){if(L===1){P(),h&&clearInterval(h),j({clockRunning:!1,clockStartRequests:0});return}j({clockStartRequests:L-1})}},setElement:(L,A)=>{n[L]=A;let F=Object.keys(n),z=O().complexTimeline;z.items.filter(B=>B.type!=="Image"&&B.type!=="Text").every(B=>F.includes(B.annotationId))&&!O().isReady&&(r.emit("complex-timeline.ready",{complexTimeline:z}),j({isReady:!0}))},removeElement:L=>{delete n[L]},mute(){for(let L of g())L.muted=!0;j({isMuted:!0})},unmute(){for(let L of g())L.muted=!1;j({isMuted:!1})},play(){if(!O().isPlaying){for(let L of v())L.play();j({isPlaying:!0})}},pause(){if(O().isPlaying){for(let L of v())L.pause();j({isPlaying:!1})}},playPause(){let L=O();L.isPlaying?L.pause():L.play()},setDurationPercent(L){let A=O().duration*L;O().setTime(A)},setTime(L){let A=O(),F=d/1e3,z=typeof L=="function"?L(F):L,B=A.nextKeyframeIndex;if(F>z){j({visibleElements:{},currentPrime:null});let Y=Object.keys(A.visibleElements);for(let xe of Y)r.emit("complex-timeline.exit",{id:xe});F=0,B=0}let[$,K]=R0({currentTime:F,currentKeyFrameIndex:B,keyframes:A.complexTimeline.keyframes,targetTime:z});A.applyKeyframes($,K),d=z*1e3;let fe=C.getState().visibleElements,J=n,H=Object.keys(fe);for(let Y of H){let xe=fe[Y];if(xe){let te=J[Y];te&&(te.currentTime=(d-xe.time*1e3)/1e3)}}w(z)},setVolume(L){for(let A of g())A.volume=Math.min(1,Math.max(0,L/100));j({volume:L})},toggleMute(){let L=O();L.isMuted?(L.unmute(),j({isMuted:!1})):(L.mute(),j({isMuted:!0}))},clearProgressElement(){s.progress=null},setProgressElement(L){s.progress=L},setCurrentTimeElement(L){s.currentTime=L},clearCurrentTimeElement(){s.currentTime=null}}));return r.on("complex-timeline.enter",j=>{let O=C.getState(),L=j.id,A=n[L];A&&O.isPlaying&&A.play()}),r.on("complex-timeline.exit",j=>{C.getState();let O=j.id,L=n[O];L&&(L.currentTime=0,L.pause())}),C.getState().setTime(e),{store:C,emitter:r}}var PS=ct.createContext("en"),lL=ct.createContext({}),aL=ct.createContext(null);function CS(t){return k.jsx(PS.Provider,{value:t.language,children:t.children})}function uL(){return ct.useContext(aL)}function oc(){return ct.useContext(PS)}function cL(){return ct.useContext(lL)}function _0(t){return t.indexOf("-")!==-1?t.slice(0,t.indexOf("-")):t}function dL({as:t,language:e,children:r,viewingDirection:n,...s}){let l=oc();return _.useMemo(()=>_0(l)===_0(e),[l,e])?t?k.jsx(t,{...s,children:r}):k.jsx("span",{...s,children:r}):t?k.jsx(t,{...s,lang:e,dir:n,children:r}):k.jsx("span",{...s,lang:e,dir:n,children:r})}function fL(t,e,r){if(e.length===0)return;if(e.length===1)return e[0];if(e.indexOf(t)!==-1)return t;let n=t.indexOf("-")!==-1?t.slice(0,t.indexOf("-")):null;if(n&&e.indexOf(n)!==-1)return n;for(let s of r)if(e.indexOf(s)!==-1)return s;return e.indexOf("none")!==-1?"none":e.indexOf("@none")!==-1?"@none":e[0]}var hL=(t,e=[])=>{let r=oc();return _.useMemo(()=>{let n=t();return fL(r,n,[])},[r,...e])};function Nm(t,e,r,n){return e?r?r(t[e]||e,n||"none"):t[e]||e:""}function pL(t,e,r=`
`,n={}){let s=uL(),l=hL(()=>Object.keys(t||{}),[t]);return[_.useMemo(()=>{if(!t)return Nm(n,e,s)||"";if(typeof t=="string")return Nm(n,t,s);let u=l?t[l]:void 0;return u?typeof u=="string"?u:u.map(d=>Nm(n,d,s,l)).join(r):""},[l,e,t]),l]}function Lt({as:t,defaultText:e,enableDangerouslySetInnerHTML:r,children:n,separator:s,...l}){let u=cL(),[d,h]=pL(n,e,s,u);return h?k.jsx(dL,{...l,as:t,language:h,title:r?void 0:d,dangerouslySetInnerHTML:r?{__html:d}:void 0,children:r?void 0:d}):t?k.jsx(t,{...l,children:d}):k.jsx("span",{...l,title:r?void 0:d,dangerouslySetInnerHTML:r?{__html:d}:void 0,children:r?void 0:d})}var j0=t=>{var v,g,w,b,R;let e=t.format||"jpg",r=t.width/(((v=t.crop)==null?void 0:v.width)||t.tiles.width),n=t.tiles.imageService.sizes||[],s=t.enableThumbnail,l=t.enableSizes,u=_.useMemo(()=>{let P=t.tiles.imageService.id||t.tiles.imageService["@id"];return P!=null&&P.endsWith("/info.json")?P.slice(0,-10):P},[t.tiles.imageService.id,t.tiles.imageService["@id"]]),d=_.useMemo(()=>{let P=t.tiles.imageService.tiles||[];if(!P.length){let C=t.width,j=[1],O=1;for(;Math.pow(2,O)<C;)O=O*2,j.push(O);return(t.tiles.imageService.maxArea||t.tiles.imageService.maxWidth||t.tiles.imageService.maxHeight)&&wh(2,t.tiles.imageService)?[{width:256,height:256,scaleFactors:j}]:[]}return P},[t.tiles.imageService,t.width]),h=_.useMemo(()=>{let P=t.tiles.imageService;return(P?P["@context"]?Array.isArray(P["@context"])?P["@context"]:[P["@context"]]:[]:[]).indexOf("http://iiif.io/api/image/3/context.json")!==-1},[t.tiles.imageService.id,t.tiles.imageService]);return k.jsx("world-object",{rotation:t.rotation,scale:r,height:((g=t.crop)==null?void 0:g.height)||t.tiles.height,width:((w=t.crop)==null?void 0:w.width)||t.tiles.width,x:t.x,y:t.y,onClick:t.onClick,children:k.jsxs("composite-image",{id:t.tiles.imageService.id,width:((b=t.crop)==null?void 0:b.width)||t.tiles.width,height:((R=t.crop)==null?void 0:R.height)||t.tiles.height,crop:t.crop,renderOptions:t.renderOptions,children:[s&&t.tiles.thumbnail?k.jsx("world-image",{priority:!0,uri:t.tiles.thumbnail.id,target:{width:t.tiles.width,height:t.tiles.height},display:{width:t.tiles.thumbnail.width,height:t.tiles.thumbnail.height},crop:t.crop}):null,l&&n.map((P,C)=>k.jsx("world-image",{uri:`${u}/full/${P.width},${h?P.height:""}/0/default.${e}`,target:{width:t.tiles.width,height:t.tiles.height},display:{width:P.width,height:P.height},crop:t.crop},C)),d.map(P=>(P.scaleFactors||[]).map(C=>k.jsx("tiled-image",{uri:t.tiles.imageService.id,display:{width:t.tiles.width,height:t.tiles.height},format:e,tile:P,scaleFactor:C,crop:t.crop,version3:h},`${t.tiles.imageService.id}-tile-${C}`)))]},t.tiles.imageService.id)},t.tiles.imageService.id)};function mL({resource:t,heading:e,note:r,extra:n}){var s,l;return n?k.jsx(Fd,{target:{x:0,y:0,width:(s=n.target)==null?void 0:s.spatial.width,height:(l=n.target)==null?void 0:l.spatial.height},backgroundColor:"#333",relative:!0,children:k.jsx("div",{style:{display:"flex",alignContent:"center",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",background:"#444",color:"#BBB"},children:k.jsxs("div",{children:[k.jsx(Lt,{children:e||"Not authorised"}),r&&k.jsx("p",{children:k.jsx(Lt,{children:r})}),k.jsx("p",{children:t.id||t["@id"]||"unknown"})]})})}):null}function gL({image:t,thumbnail:e,crop:r,enableSizes:n,enableThumbnail:s,renderOptions:l}){var P,C;let u=hO(),d=hr(t.service),h=GO(d),v=SS(),g=h==null?void 0:h.service;v(t.service,t);let w=g&&(h==null?void 0:h.status)==="done",b=((g==null?void 0:g.preferredFormats)||[])[0],R=e&&e.type==="fixed"&&e.id&&!e.id.includes("/full/full/")&&!e.id.includes("/max/")?e:void 0;if(w===!1)return null;if(!u){let j=t.service,O=j.width||t.width||0,L=j.height||t.height||0;return k.jsx(j0,{enableThumbnail:s,renderOptions:l,tiles:{id:j.id||j["@id"]||"unknown",height:L,width:O,imageService:j,thumbnail:R},enableSizes:n,x:0,y:0,format:b,width:(P=t.target)==null?void 0:P.spatial.width,height:(C=t.target)==null?void 0:C.spatial.height,crop:r})}return k.jsx(yO,{resource:t.service,errorComponent:mL,extra:t,children:j=>{var A,F;let O=j.width||t.width||0,L=j.height||t.height||0;return k.jsx(j0,{enableThumbnail:s,renderOptions:l,tiles:{id:j.id||j["@id"]||"unknown",height:L,width:O,imageService:j,thumbnail:R},format:b,enableSizes:n,x:0,y:0,width:(A=t.target)==null?void 0:A.spatial.width,height:(F=t.target)==null?void 0:F.spatial.height,crop:r})}},t.id)}function ov({id:t,image:e,thumbnail:r,isStatic:n,x:s=0,y:l=0,children:u,selector:d,onClick:h,enableSizes:v}){let g=_.useMemo(()=>{if(!(!d||d.spatial.x===0&&d.spatial.y===0))return d.spatial},[d]);return k.jsx("world-object",{x:s+e.target.spatial.x,y:l+e.target.spatial.y,width:e.target.spatial.width,height:e.target.spatial.height,onClick:h,children:e.service?k.jsxs(_.Fragment,{children:[k.jsx(gL,{image:e,thumbnail:r,crop:g,enableSizes:v}),u]},"service"):k.jsxs(_.Fragment,{children:[k.jsx("world-image",{onClick:h,uri:e.id,target:{x:0,y:0,width:e.target.spatial.width,height:e.target.spatial.height},display:e.width&&e.height?{width:e.width,height:e.height}:void 0,crop:g}),u]},"no-service")},t+(e.service?"server":"no-service"))}var kS=_.createContext(null);kS.displayName="ComplexTimeline";function vL({children:t,store:e}){return k.jsx(kS.Provider,{value:e,children:t})}function TS({strategy:t,onClickPaintingAnnotation:e}){return k.jsx(k.Fragment,{children:t.items.map((r,n)=>{var s;return k.jsx(k.Fragment,{children:k.jsx(Fd,{onClick:e?l=>{l.stopPropagation(),e(r.annotationId,r,l)}:void 0,target:((s=r.target)==null?void 0:s.spatial)||void 0,children:k.jsx("div",{"data-textual-content":!0,children:k.jsx(Lt,{enableDangerouslySetInnerHTML:!0,children:r.text})})},n)})})})}function yL({strategy:t,children:e}){let{store:r}=_.useMemo(()=>oL({complexTimeline:t}),[t]),n=Ri(r,u=>u.isReady),s=Ri(r,u=>u.visibleElements);function l(u){return d=>{d&&r.getState().setElement(u,d)}}return _.useLayoutEffect(()=>{if(n){let{startClock:u,stopClock:d}=r.getState();return u(),()=>{d()}}},[t,n]),Dl("portal","custom-controls",vL,{store:r,children:e},[n]),k.jsxs(k.Fragment,{children:[t.items.map(u=>u.type!=="Image"||!s[u.annotationId]?null:k.jsx(ov,{image:u,id:u.annotationId},u.id)),t.items.map((u,d)=>u.type!=="Text"||!s[u.annotationId]?null:k.jsx(TS,{strategy:{type:"textual-content",items:[u]}},d)),t.items.map((u,d)=>u.type!=="Video"||!u.target.spatial?null:k.jsx(Fd,{target:u.target.spatial,children:k.jsx("video",{ref:l(u.annotationId),src:u.url,style:{height:"100%",width:"100%",opacity:s[u.annotationId]?1:0}})},d))]})}function wL(){let{strategy:t}=fs(),{renderComplexTimelineControls:e}=Qa();return t.type!=="complex-timeline"?null:k.jsx(yL,{strategy:t,children:e?e(t):null})}function xL({onClickPaintingAnnotation:t,children:e}){let{strategy:r}=fs(),{renderViewerControls:n,viewControlsDeps:s}=Qa(),l=fS(),u=Yr();return Dl(l&&r.type==="textual-content"&&n?"overlay":"none",`canvas-portal-controls-${u==null?void 0:u.id}`,fp.Provider,n?{value:l||null,children:n(r)}:{},[u,l,r,...s||[]]),r.type!=="textual-content"?null:k.jsxs(k.Fragment,{children:[k.jsx(TS,{strategy:r,onClickPaintingAnnotation:t}),e]})}var SL=(t,e=[])=>{let r=Kr();_.useEffect(()=>{t(r)},[r,...e])},bL=ct.createContext(new Ug);function EL(){return _.useContext(bL)}function hp(t,e,{canvasId:r,manifestId:n}={}){let s=Kr(),l=EL(),u=_.useMemo(()=>Zk(s,{imageServiceLoader:l}),[s,l]),[d,h]=_.useState(),v=Vs(n?{id:n}:void 0),g=Yr(r?{id:r}:void 0),w=g||v,b=_.useRef(!1);if(_.useEffect(()=>(b.current=!1,()=>{b.current=!0}),[]),!w)throw new Error("Must be called under a manifest or canvas context.");return SL(R=>{u.getBestThumbnailAtSize(w,t,e).then(P=>{P.best&&!b.current&&h(P.best)})},[w]),d}function PL({isStatic:t=!1,enableSizes:e=!1,onClickPaintingAnnotation:r,children:n}){let{strategy:s}=fs(),{renderViewerControls:l,viewControlsDeps:u}=Qa(),d=Yr(),h=fS(),v=hp({maxWidth:256,maxHeight:256});return Dl(h&&s.type==="images"&&l?"overlay":"none",`canvas-portal-controls-${d==null?void 0:d.id}`,fp.Provider,l?{value:h||null,children:l(s)}:{},[d,h,s,...u||[]]),s.type!=="images"?null:k.jsxs(k.Fragment,{children:[s.images.map((g,w)=>k.jsx(ov,{isStatic:t,image:g,id:g.id,thumbnail:w===0?v:void 0,selector:g.selector,enableSizes:e,onClick:r?b=>{r(g.annotationId,g,b)}:void 0},g.id+w)),n]})}function RS({model:t}){return k.jsxs(k.Fragment,{children:[k.jsx("style",{children:`
            .model-container {
              position: absolute;
              top: 0;
              bottom: 0;
              left: 0;
              right: 0;
              background: #000;
              z-index: 13;
              display: flex;
              justify-content: center;
              pointer-events: visible;
            }
          `}),k.jsx("div",{className:"model-container",children:k.jsx("model-viewer",{"interaction-prompt":"none",style:{width:"100%",height:"100%"},"camera-controls":"","ar-status":"not-presenting",src:t.id})})]})}function _S({model:t,name:e}){return Dl("overlay",`model-${e}`,RS,{model:t},[t]),null}function CL(){let{strategy:t}=fs();return t.type!=="3d-model"?null:k.jsx(_S,{model:t.model})}function kL({children:t}){let{strategy:e}=fs(),[r]=NO();return e.type!=="images"?null:k.jsxs(k.Fragment,{children:[r?k.jsx(xg,{page:r}):null,e.annotations&&e.annotations.pages?e.annotations.pages.map(n=>k.jsx(xg,{page:n},n.id)):null,t]})}var TL=_.createContext(null),RL=_.createContext(null),_L=_.createContext(null);function jS({actions:t,state:e,children:r,currentTime:n,progress:s,element:l}){return k.jsx(_L.Provider,{value:{currentTime:n,progress:s,element:l},children:k.jsx(RL.Provider,{value:t,children:k.jsx(TL.Provider,{value:e,children:r})})})}function OS(){let t=Vs(),e=Yr();return _.useMemo(()=>{if(!t||!e||!t.start)return null;let r=An(t.start);return!r||r.source.id!==e.id||!r||!r.selector||r.selector.type!=="TemporalSelector"?null:r.selector.temporal},[t,e])}function LS({media:t,startTime:e,children:r}){let[{element:n,currentTime:s,progress:l},u,d]=sv({duration:t.duration}),h=e?`${t.url}#t=${e}`:t.url;return k.jsxs(jS,{state:u,actions:d,currentTime:s,progress:l,element:n,children:[k.jsx("audio",{ref:n,src:h}),r]},t.url)}function MS({media:t,mediaControlsDeps:e,audioCopmonent:r=LS,children:n}){let s=OS();return Dl("portal","audio",r,{media:t,startTime:s?s.startTime:null,children:n},[t,s,...e||[]]),null}function lv({x:t=0,y:e=0}){let r=Yr(),n=hp({maxWidth:256,maxHeight:256});return!r||!n||n.type!=="fixed"?null:k.jsx("world-object",{height:r.height,width:r.width,x:t,y:e,children:k.jsx("world-image",{uri:n.id,target:{x:0,y:0,width:r.width,height:r.height},display:n.width&&n.height?{width:n.width,height:n.height}:void 0,crop:void 0})})}function jL({as:t}){let{strategy:e}=fs(),{renderMediaControls:r,mediaControlsDeps:n}=Qa();return e.type!=="media"||e.media.type!=="Sound"?null:k.jsx(k.Fragment,{children:k.jsxs(MS,{media:e.media,mediaControlsDeps:n,audioCopmonent:t,children:[k.jsx(lv,{}),r?r(e):null]},e.media.url)})}function OL(){let{strategy:t}=fs(),{renderViewerControls:e,viewControlsDeps:r}=Qa(),n=Yr(),s=n==null?void 0:n.accompanyingCanvas,l=n==null?void 0:n.placeholderCanvas;return k.jsxs(k.Fragment,{children:[t.type==="media"&&t.media.type==="Sound"&&s?k.jsx(Ds,{canvas:s.id,children:k.jsx(Fh,{renderViewerControls:e,viewControlsDeps:r})}):null,t.type==="media"&&t.media.type==="Sound"&&l&&!s?k.jsx(Ds,{canvas:l.id,children:k.jsx(Fh,{renderViewerControls:e,viewControlsDeps:r})}):null]})}function IS({element:t,media:e,startTime:r,playPause:n,poster:s}){let l="div",u=r?`${e.url}#t=${r}`:e.url;return k.jsxs(l,{className:"video-container",part:"video-container",onClick:n,children:[k.jsx("style",{children:`
            .video-container {
              position: absolute;
              top: 0;
              bottom: 0;
              left: 0;
              right: 0;
              background: #000;
              z-index: 13;
              display: flex;
              justify-content: center;
              pointer-events: visible;
            }
          `}),k.jsx("video",{poster:s,ref:t,src:u,style:{width:"100%",objectFit:"contain"}})]})}function AS({media:t,mediaControlsDeps:e,children:r,videoComponent:n=IS,captions:s}){let l=Yr(),u=OS(),d=l&&l.placeholderCanvas&&l.placeholderCanvas.id||void 0,h=hp({},!1,{canvasId:d}),[{element:v,currentTime:g,progress:w},b,R]=sv({duration:t.duration});return Dl("overlay","video-element",n,{element:v,media:t,playPause:R.playPause,poster:h==null?void 0:h.id,canvas:l,startTime:u?u.startTime:null,captions:s},[h]),Dl("portal","custom-controls",jS,{state:b,actions:R,currentTime:g,progress:w,element:v,children:r},[g,b,t,...e||[]]),null}function LL({as:t}){let{strategy:e}=fs(),{renderMediaControls:r,mediaControlsDeps:n}=Qa();return e.type!=="media"||e.media.type!=="Video"?null:k.jsxs(AS,{captions:e.captions,media:e.media,mediaControlsDeps:n,videoComponent:t,children:[k.jsx(lv,{}),r?r(e):null]},e.media.url)}function ML({element:t,media:e,playPause:r}){let n=_.useRef(null);return e.youTubeId?k.jsxs("div",{className:"video-container",part:"video-container",onClick:r,children:[k.jsx("style",{children:`
            .video-container {
              position: absolute;
              top: 0;
              bottom: 0;
              left: 0;
              right: 0;
              background: #000;
              z-index: 13;
              display: flex;
              justify-content: center;
              pointer-events: visible;
            }
            .video-yt {
              border: none;
              width: 100%;
              object-fit: contain;
            }
          `}),k.jsx("iframe",{className:"video-yt",ref:n,src:`https://www.youtube.com/embed/${e.youTubeId}?enablejsapi=1&origin=${window.location.host}`,referrerPolicy:"no-referrer",sandbox:"allow-scripts allow-same-origin allow-presentation"})]}):null}function IL({media:t,mediaControlsDeps:e,children:r}){let[{element:n,currentTime:s,progress:l},u,d]=sv({duration:t.duration});return Dl("overlay","video-element",ML,{element:n,media:t,playPause:d.playPause}),null}function AL(){let{strategy:t}=fs(),{renderMediaControls:e,mediaControlsDeps:r}=Qa();return t.type!=="media"||t.media.type!=="VideoYouTube"?null:k.jsxs(IL,{media:t.media,mediaControlsDeps:r,children:[k.jsx(lv,{}),e?e(t):null]})}function Fh({x:t,y:e,onChoiceChange:r,registerActions:n,defaultChoices:s,isStatic:l,renderViewerControls:u,renderMediaControls:d,renderComplexTimelineControls:h,complexTimelineControlsDeps:v,viewControlsDeps:g,mediaControlsDeps:w,strategies:b,throwOnUnknown:R,backgroundStyle:P,alwaysShowBackground:C,keepCanvasScale:j=!1,enableSizes:O=!1,enableYouTube:L=!0,onClickPaintingAnnotation:A,components:F={},children:z}){return k.jsxs(rL,{throwOnUnknown:R,onChoiceChange:r,registerActions:n,strategies:b,defaultChoices:s,mediaControlsDeps:w,renderMediaControls:d,renderViewerControls:u,renderComplexTimelineControls:h,complexTimelineControlsDeps:v,viewControlsDeps:g,children:[k.jsxs(nL,{keepCanvasScale:j,x:t,y:e,children:[k.jsx(iL,{alwaysShowBackground:C,backgroundStyle:P}),k.jsx(wL,{}),k.jsx(xL,{}),k.jsx(PL,{isStatic:l,enableSizes:O,onClickPaintingAnnotation:A}),k.jsx(kL,{}),k.jsx(CL,{}),k.jsx(jL,{as:F.Audio}),k.jsx(LL,{as:F.Video}),L?k.jsx(AL,{}):null,z]}),k.jsx(OL,{})]})}function $L(t){let e=Yr();return!e||!e.placeholderCanvas?null:k.jsx(Ds,{canvas:e.placeholderCanvas.id,children:k.jsx(Fh,{renderViewerControls:t.renderViewerControls})})}var NL=_.forwardRef(function(t,e){let r=Vs(),n=aS(),s=TO(),{ViewerControls:l,MediaControls:u,ComplexTimelineControls:d}=t.components||{};if(_.useImperativeHandle(e,()=>s,[s]),!r)return k.jsx("div",{});let h=0,v=r.viewingDirection==="top-to-bottom",g=r.viewingDirection==="bottom-to-top";r.viewingDirection;let w=r.viewingDirection==="right-to-left",b=r.behavior.includes("continuous")?0:t.spacing||0,R=g||w,P=_.useMemo(()=>R?[...n].reverse():n,[n,R]);return k.jsxs(k.Fragment,{children:[t.header,k.jsx(Rr.Viewer,{height:t.height,mode:t.mode,renderPreset:t.renderPreset,runtimeOptions:t.runtimeOptions,children:P.map((C,j)=>{let O=0,L=0;return v?(O=h,h+=C.width+b):(L=h,h+=C.height+b),k.jsx(Ds,{canvas:C.id,children:k.jsx(Rr.RenderCanvas,{strategies:["3d-model","media","images","empty","textual-content","complex-timeline"],renderViewerControls:j===0&&l?()=>k.jsx(l,{}):void 0,renderMediaControls:j===0&&u?()=>k.jsx(u,{}):void 0,renderComplexTimelineControls:j===0&&d?()=>k.jsx(d,{}):void 0,x:O,y:L,...t.canvasProps||{},children:t.annotations},C.id)},C.id)})},t.reuseAtlas?"":s.currentSequenceIndex),t.children]})}),Rr=_.forwardRef(function({children:t,height:e,annotations:r,canvasProps:n,spacing:s,header:l,components:u,mode:d,reuseAtlas:h,renderPreset:v,runtimeOptions:g,...w},b){let R=Ud();return k.jsx(Bd,{vault:R,children:k.jsx(kO,{...w,children:k.jsx(NL,{ref:b,height:e,components:u,spacing:s,canvasProps:n,annotations:r,header:l,mode:d,reuseAtlas:h,renderPreset:v,runtimeOptions:g,children:t})})})});Rr.RenderImage=ov;Rr.RenderCanvas=Fh;Rr.RenderAnnotationPage=xg;Rr.RenderAnnotation=yS;Rr.Viewer=BO;Rr.CanvasBackground=bS;Rr.Audio=MS;Rr.Video=AS;Rr.Model=_S;Rr.AudioHTML=LS;Rr.VideoHTML=IS;Rr.ModelHTML=RS;Rr.PlaceholderCanvas=$L;var zm={exports:{}},O0;function zL(){return O0||(O0=1,(()=>{var t={296:(s,l,u)=>{var d=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,g=/^0o[0-7]+$/i,w=parseInt,b=typeof u.g=="object"&&u.g&&u.g.Object===Object&&u.g,R=typeof self=="object"&&self&&self.Object===Object&&self,P=b||R||Function("return this")(),C=Object.prototype.toString,j=Math.max,O=Math.min,L=function(){return P.Date.now()};function A(z){var B=typeof z;return!!z&&(B=="object"||B=="function")}function F(z){if(typeof z=="number")return z;if((function(K){return typeof K=="symbol"||(function(fe){return!!fe&&typeof fe=="object"})(K)&&C.call(K)=="[object Symbol]"})(z))return NaN;if(A(z)){var B=typeof z.valueOf=="function"?z.valueOf():z;z=A(B)?B+"":B}if(typeof z!="string")return z===0?z:+z;z=z.replace(d,"");var $=v.test(z);return $||g.test(z)?w(z.slice(2),$?2:8):h.test(z)?NaN:+z}s.exports=function(z,B,$){var K,fe,J,H,Y,xe,te=0,Te=!1,de=!1,je=!0;if(typeof z!="function")throw new TypeError("Expected a function");function ee(_e){var Me=K,Ne=fe;return K=fe=void 0,te=_e,H=z.apply(Ne,Me)}function Q(_e){var Me=_e-xe;return xe===void 0||Me>=B||Me<0||de&&_e-te>=J}function ue(){var _e=L();if(Q(_e))return U(_e);Y=setTimeout(ue,(function(Me){var Ne=B-(Me-xe);return de?O(Ne,J-(Me-te)):Ne})(_e))}function U(_e){return Y=void 0,je&&K?ee(_e):(K=fe=void 0,H)}function oe(){var _e=L(),Me=Q(_e);if(K=arguments,fe=this,xe=_e,Me){if(Y===void 0)return(function(Ne){return te=Ne,Y=setTimeout(ue,B),Te?ee(Ne):H})(xe);if(de)return Y=setTimeout(ue,B),ee(xe)}return Y===void 0&&(Y=setTimeout(ue,B)),H}return B=F(B)||0,A($)&&(Te=!!$.leading,J=(de="maxWait"in $)?j(F($.maxWait)||0,B):J,je="trailing"in $?!!$.trailing:je),oe.cancel=function(){Y!==void 0&&clearTimeout(Y),te=0,K=xe=fe=Y=void 0},oe.flush=function(){return Y===void 0?H:U(L())},oe}},96:(s,l,u)=>{var d="Expected a function",h=NaN,v="[object Symbol]",g=/^\s+|\s+$/g,w=/^[-+]0x[0-9a-f]+$/i,b=/^0b[01]+$/i,R=/^0o[0-7]+$/i,P=parseInt,C=typeof u.g=="object"&&u.g&&u.g.Object===Object&&u.g,j=typeof self=="object"&&self&&self.Object===Object&&self,O=C||j||Function("return this")(),L=Object.prototype.toString,A=Math.max,F=Math.min,z=function(){return O.Date.now()};function B(K){var fe=typeof K;return!!K&&(fe=="object"||fe=="function")}function $(K){if(typeof K=="number")return K;if((function(H){return typeof H=="symbol"||(function(Y){return!!Y&&typeof Y=="object"})(H)&&L.call(H)==v})(K))return h;if(B(K)){var fe=typeof K.valueOf=="function"?K.valueOf():K;K=B(fe)?fe+"":fe}if(typeof K!="string")return K===0?K:+K;K=K.replace(g,"");var J=b.test(K);return J||R.test(K)?P(K.slice(2),J?2:8):w.test(K)?h:+K}s.exports=function(K,fe,J){var H=!0,Y=!0;if(typeof K!="function")throw new TypeError(d);return B(J)&&(H="leading"in J?!!J.leading:H,Y="trailing"in J?!!J.trailing:Y),(function(xe,te,Te){var de,je,ee,Q,ue,U,oe=0,_e=!1,Me=!1,Ne=!0;if(typeof xe!="function")throw new TypeError(d);function Ke(Ye){var Ce=de,Re=je;return de=je=void 0,oe=Ye,Q=xe.apply(Re,Ce)}function Qe(Ye){var Ce=Ye-U;return U===void 0||Ce>=te||Ce<0||Me&&Ye-oe>=ee}function nt(){var Ye=z();if(Qe(Ye))return ft(Ye);ue=setTimeout(nt,(function(Ce){var Re=te-(Ce-U);return Me?F(Re,ee-(Ce-oe)):Re})(Ye))}function ft(Ye){return ue=void 0,Ne&&de?Ke(Ye):(de=je=void 0,Q)}function Ct(){var Ye=z(),Ce=Qe(Ye);if(de=arguments,je=this,U=Ye,Ce){if(ue===void 0)return(function(Re){return oe=Re,ue=setTimeout(nt,te),_e?Ke(Re):Q})(U);if(Me)return ue=setTimeout(nt,te),Ke(U)}return ue===void 0&&(ue=setTimeout(nt,te)),Q}return te=$(te)||0,B(Te)&&(_e=!!Te.leading,ee=(Me="maxWait"in Te)?A($(Te.maxWait)||0,te):ee,Ne="trailing"in Te?!!Te.trailing:Ne),Ct.cancel=function(){ue!==void 0&&clearTimeout(ue),oe=0,de=U=je=ue=void 0},Ct.flush=function(){return ue===void 0?Q:ft(z())},Ct})(K,fe,{leading:H,maxWait:fe,trailing:Y})}},703:(s,l,u)=>{var d=u(414);function h(){}function v(){}v.resetWarningCache=h,s.exports=function(){function g(R,P,C,j,O,L){if(L!==d){var A=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw A.name="Invariant Violation",A}}function w(){return g}g.isRequired=g;var b={array:g,bigint:g,bool:g,func:g,number:g,object:g,string:g,symbol:g,any:g,arrayOf:w,element:g,elementType:g,instanceOf:w,node:g,objectOf:w,oneOf:w,oneOfType:w,shape:w,exact:w,checkPropTypes:v,resetWarningCache:h};return b.PropTypes=b,b}},697:(s,l,u)=>{s.exports=u(703)()},414:s=>{s.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},e={};function r(s){var l=e[s];if(l!==void 0)return l.exports;var u=e[s]={exports:{}};return t[s](u,u.exports,r),u.exports}r.n=s=>{var l=s&&s.__esModule?()=>s.default:()=>s;return r.d(l,{a:l}),l},r.d=(s,l)=>{for(var u in l)r.o(l,u)&&!r.o(s,u)&&Object.defineProperty(s,u,{enumerable:!0,get:l[u]})},r.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),r.o=(s,l)=>Object.prototype.hasOwnProperty.call(s,l),r.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var n={};(()=>{r.r(n),r.d(n,{LazyLoadComponent:()=>Ce,LazyLoadImage:()=>on,trackWindowScroll:()=>Q});const s=Ha();var l=r.n(s),u=r(697);function d(){return typeof window<"u"&&"IntersectionObserver"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype}function h(ve){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ne){return typeof ne}:function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},h(ve)}function v(ve,ne){var Se=Object.keys(ve);if(Object.getOwnPropertySymbols){var ye=Object.getOwnPropertySymbols(ve);ne&&(ye=ye.filter((function(lt){return Object.getOwnPropertyDescriptor(ve,lt).enumerable}))),Se.push.apply(Se,ye)}return Se}function g(ve,ne,Se){return(ne=b(ne))in ve?Object.defineProperty(ve,ne,{value:Se,enumerable:!0,configurable:!0,writable:!0}):ve[ne]=Se,ve}function w(ve,ne){for(var Se=0;Se<ne.length;Se++){var ye=ne[Se];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(ve,b(ye.key),ye)}}function b(ve){var ne=(function(Se,ye){if(h(Se)!=="object"||Se===null)return Se;var lt=Se[Symbol.toPrimitive];if(lt!==void 0){var dt=lt.call(Se,"string");if(h(dt)!=="object")return dt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Se)})(ve);return h(ne)==="symbol"?ne:String(ne)}function R(ve,ne){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Se,ye){return Se.__proto__=ye,Se},R(ve,ne)}function P(ve){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ne){return ne.__proto__||Object.getPrototypeOf(ne)},P(ve)}var C=function(ve){ve.forEach((function(ne){ne.isIntersecting&&ne.target.onVisible()}))},j={},O=(function(ve){(function(he,me){if(typeof me!="function"&&me!==null)throw new TypeError("Super expression must either be null or a function");he.prototype=Object.create(me&&me.prototype,{constructor:{value:he,writable:!0,configurable:!0}}),Object.defineProperty(he,"prototype",{writable:!1}),me&&R(he,me)})(wt,ve);var ne,Se,ye,lt,dt=(ye=wt,lt=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var he,me=P(ye);if(lt){var De=P(this).constructor;he=Reflect.construct(me,arguments,De)}else he=me.apply(this,arguments);return(function(ze,$e){if($e&&(h($e)==="object"||typeof $e=="function"))return $e;if($e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(pt){if(pt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pt})(ze)})(this,he)});function wt(he){var me;if((function(ze,$e){if(!(ze instanceof $e))throw new TypeError("Cannot call a class as a function")})(this,wt),(me=dt.call(this,he)).supportsObserver=!he.scrollPosition&&he.useIntersectionObserver&&d(),me.supportsObserver){var De=he.threshold;me.observer=(function(ze){return j[ze]=j[ze]||new IntersectionObserver(C,{rootMargin:ze+"px"}),j[ze]})(De)}return me}return ne=wt,Se=[{key:"componentDidMount",value:function(){this.placeholder&&this.observer&&(this.placeholder.onVisible=this.props.onVisible,this.observer.observe(this.placeholder)),this.supportsObserver||this.updateVisibility()}},{key:"componentWillUnmount",value:function(){this.observer&&this.placeholder&&this.observer.unobserve(this.placeholder)}},{key:"componentDidUpdate",value:function(){this.supportsObserver||this.updateVisibility()}},{key:"getPlaceholderBoundingBox",value:function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollPosition,me=this.placeholder.getBoundingClientRect(),De=this.placeholder.style,ze=parseInt(De.getPropertyValue("margin-left"),10)||0,$e=parseInt(De.getPropertyValue("margin-top"),10)||0;return{bottom:he.y+me.bottom+$e,left:he.x+me.left+ze,right:he.x+me.right+ze,top:he.y+me.top+$e}}},{key:"isPlaceholderInViewport",value:function(){if(typeof window>"u"||!this.placeholder)return!1;var he=this.props,me=he.scrollPosition,De=he.threshold,ze=this.getPlaceholderBoundingBox(me),$e=me.y+window.innerHeight,pt=me.x,Ut=me.x+window.innerWidth,Mt=me.y;return Mt-De<=ze.bottom&&$e+De>=ze.top&&pt-De<=ze.right&&Ut+De>=ze.left}},{key:"updateVisibility",value:function(){this.isPlaceholderInViewport()&&this.props.onVisible()}},{key:"render",value:function(){var he=this,me=this.props,De=me.className,ze=me.height,$e=me.placeholder,pt=me.style,Ut=me.width;if($e&&typeof $e.type!="function")return l().cloneElement($e,{ref:function(It){return he.placeholder=It}});var Mt=(function(It){for(var qt=1;qt<arguments.length;qt++){var Ft=arguments[qt]!=null?arguments[qt]:{};qt%2?v(Object(Ft),!0).forEach((function(yr){g(It,yr,Ft[yr])})):Object.getOwnPropertyDescriptors?Object.defineProperties(It,Object.getOwnPropertyDescriptors(Ft)):v(Object(Ft)).forEach((function(yr){Object.defineProperty(It,yr,Object.getOwnPropertyDescriptor(Ft,yr))}))}return It})({display:"inline-block"},pt);return Ut!==void 0&&(Mt.width=Ut),ze!==void 0&&(Mt.height=ze),l().createElement("span",{className:De,ref:function(It){return he.placeholder=It},style:Mt},$e)}}],Se&&w(ne.prototype,Se),Object.defineProperty(ne,"prototype",{writable:!1}),wt})(l().Component);O.propTypes={onVisible:u.PropTypes.func.isRequired,className:u.PropTypes.string,height:u.PropTypes.oneOfType([u.PropTypes.number,u.PropTypes.string]),placeholder:u.PropTypes.element,threshold:u.PropTypes.number,useIntersectionObserver:u.PropTypes.bool,scrollPosition:u.PropTypes.shape({x:u.PropTypes.number.isRequired,y:u.PropTypes.number.isRequired}),width:u.PropTypes.oneOfType([u.PropTypes.number,u.PropTypes.string])},O.defaultProps={className:"",placeholder:null,threshold:100,useIntersectionObserver:!0};const L=O;var A=r(296),F=r.n(A),z=r(96),B=r.n(z),$=function(ve){var ne=getComputedStyle(ve,null);return ne.getPropertyValue("overflow")+ne.getPropertyValue("overflow-y")+ne.getPropertyValue("overflow-x")};const K=function(ve){if(!(ve instanceof HTMLElement))return window;for(var ne=ve;ne&&ne instanceof HTMLElement;){if(/(scroll|auto)/.test($(ne)))return ne;ne=ne.parentNode}return window};function fe(ve){return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ne){return typeof ne}:function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},fe(ve)}var J=["delayMethod","delayTime"];function H(){return H=Object.assign?Object.assign.bind():function(ve){for(var ne=1;ne<arguments.length;ne++){var Se=arguments[ne];for(var ye in Se)Object.prototype.hasOwnProperty.call(Se,ye)&&(ve[ye]=Se[ye])}return ve},H.apply(this,arguments)}function Y(ve,ne){for(var Se=0;Se<ne.length;Se++){var ye=ne[Se];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(ve,(lt=(function(dt,wt){if(fe(dt)!=="object"||dt===null)return dt;var he=dt[Symbol.toPrimitive];if(he!==void 0){var me=he.call(dt,"string");if(fe(me)!=="object")return me;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(dt)})(ye.key),fe(lt)==="symbol"?lt:String(lt)),ye)}var lt}function xe(ve,ne){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Se,ye){return Se.__proto__=ye,Se},xe(ve,ne)}function te(ve,ne){if(ne&&(fe(ne)==="object"||typeof ne=="function"))return ne;if(ne!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Te(ve)}function Te(ve){if(ve===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ve}function de(ve){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ne){return ne.__proto__||Object.getPrototypeOf(ne)},de(ve)}var je=function(){return typeof window>"u"?0:window.scrollX||window.pageXOffset},ee=function(){return typeof window>"u"?0:window.scrollY||window.pageYOffset};const Q=function(ve){var ne=(function(Se){(function(De,ze){if(typeof ze!="function"&&ze!==null)throw new TypeError("Super expression must either be null or a function");De.prototype=Object.create(ze&&ze.prototype,{constructor:{value:De,writable:!0,configurable:!0}}),Object.defineProperty(De,"prototype",{writable:!1}),ze&&xe(De,ze)})(me,Se);var ye,lt,dt,wt,he=(dt=me,wt=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var De,ze=de(dt);if(wt){var $e=de(this).constructor;De=Reflect.construct(ze,arguments,$e)}else De=ze.apply(this,arguments);return te(this,De)});function me(De){var ze;if((function(pt,Ut){if(!(pt instanceof Ut))throw new TypeError("Cannot call a class as a function")})(this,me),(ze=he.call(this,De)).useIntersectionObserver=De.useIntersectionObserver&&d(),ze.useIntersectionObserver)return te(ze);var $e=ze.onChangeScroll.bind(Te(ze));return De.delayMethod==="debounce"?ze.delayedScroll=F()($e,De.delayTime):De.delayMethod==="throttle"&&(ze.delayedScroll=B()($e,De.delayTime)),ze.state={scrollPosition:{x:je(),y:ee()}},ze.baseComponentRef=l().createRef(),ze}return ye=me,(lt=[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"componentDidUpdate",value:function(){typeof window>"u"||this.useIntersectionObserver||K(this.baseComponentRef.current)!==this.scrollElement&&(this.removeListeners(),this.addListeners())}},{key:"addListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement=K(this.baseComponentRef.current),this.scrollElement.addEventListener("scroll",this.delayedScroll,{passive:!0}),window.addEventListener("resize",this.delayedScroll,{passive:!0}),this.scrollElement!==window&&window.addEventListener("scroll",this.delayedScroll,{passive:!0}))}},{key:"removeListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement.removeEventListener("scroll",this.delayedScroll),window.removeEventListener("resize",this.delayedScroll),this.scrollElement!==window&&window.removeEventListener("scroll",this.delayedScroll))}},{key:"onChangeScroll",value:function(){this.useIntersectionObserver||this.setState({scrollPosition:{x:je(),y:ee()}})}},{key:"render",value:function(){var De=this.props,ze=(De.delayMethod,De.delayTime,(function(pt,Ut){if(pt==null)return{};var Mt,It,qt=(function(yr,zn){if(yr==null)return{};var Fn,ji,ni={},ii=Object.keys(yr);for(ji=0;ji<ii.length;ji++)Fn=ii[ji],zn.indexOf(Fn)>=0||(ni[Fn]=yr[Fn]);return ni})(pt,Ut);if(Object.getOwnPropertySymbols){var Ft=Object.getOwnPropertySymbols(pt);for(It=0;It<Ft.length;It++)Mt=Ft[It],Ut.indexOf(Mt)>=0||Object.prototype.propertyIsEnumerable.call(pt,Mt)&&(qt[Mt]=pt[Mt])}return qt})(De,J)),$e=this.useIntersectionObserver?null:this.state.scrollPosition;return l().createElement(ve,H({forwardRef:this.baseComponentRef,scrollPosition:$e},ze))}}])&&Y(ye.prototype,lt),Object.defineProperty(ye,"prototype",{writable:!1}),me})(l().Component);return ne.propTypes={delayMethod:u.PropTypes.oneOf(["debounce","throttle"]),delayTime:u.PropTypes.number,useIntersectionObserver:u.PropTypes.bool},ne.defaultProps={delayMethod:"throttle",delayTime:300,useIntersectionObserver:!0},ne};function ue(ve){return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ne){return typeof ne}:function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},ue(ve)}function U(ve,ne){for(var Se=0;Se<ne.length;Se++){var ye=ne[Se];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(ve,(lt=(function(dt,wt){if(ue(dt)!=="object"||dt===null)return dt;var he=dt[Symbol.toPrimitive];if(he!==void 0){var me=he.call(dt,"string");if(ue(me)!=="object")return me;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(dt)})(ye.key),ue(lt)==="symbol"?lt:String(lt)),ye)}var lt}function oe(ve,ne){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Se,ye){return Se.__proto__=ye,Se},oe(ve,ne)}function _e(ve){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ne){return ne.__proto__||Object.getPrototypeOf(ne)},_e(ve)}var Me=(function(ve){(function(he,me){if(typeof me!="function"&&me!==null)throw new TypeError("Super expression must either be null or a function");he.prototype=Object.create(me&&me.prototype,{constructor:{value:he,writable:!0,configurable:!0}}),Object.defineProperty(he,"prototype",{writable:!1}),me&&oe(he,me)})(wt,ve);var ne,Se,ye,lt,dt=(ye=wt,lt=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var he,me=_e(ye);if(lt){var De=_e(this).constructor;he=Reflect.construct(me,arguments,De)}else he=me.apply(this,arguments);return(function(ze,$e){if($e&&(ue($e)==="object"||typeof $e=="function"))return $e;if($e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(pt){if(pt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pt})(ze)})(this,he)});function wt(he){return(function(me,De){if(!(me instanceof De))throw new TypeError("Cannot call a class as a function")})(this,wt),dt.call(this,he)}return ne=wt,(Se=[{key:"render",value:function(){return l().createElement(L,this.props)}}])&&U(ne.prototype,Se),Object.defineProperty(ne,"prototype",{writable:!1}),wt})(l().Component);const Ne=Q(Me);function Ke(ve){return Ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ne){return typeof ne}:function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},Ke(ve)}function Qe(ve,ne){for(var Se=0;Se<ne.length;Se++){var ye=ne[Se];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(ve,(lt=(function(dt,wt){if(Ke(dt)!=="object"||dt===null)return dt;var he=dt[Symbol.toPrimitive];if(he!==void 0){var me=he.call(dt,"string");if(Ke(me)!=="object")return me;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(dt)})(ye.key),Ke(lt)==="symbol"?lt:String(lt)),ye)}var lt}function nt(ve,ne){return nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Se,ye){return Se.__proto__=ye,Se},nt(ve,ne)}function ft(ve){if(ve===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ve}function Ct(ve){return Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ne){return ne.__proto__||Object.getPrototypeOf(ne)},Ct(ve)}var Ye=(function(ve){(function(he,me){if(typeof me!="function"&&me!==null)throw new TypeError("Super expression must either be null or a function");he.prototype=Object.create(me&&me.prototype,{constructor:{value:he,writable:!0,configurable:!0}}),Object.defineProperty(he,"prototype",{writable:!1}),me&&nt(he,me)})(wt,ve);var ne,Se,ye,lt,dt=(ye=wt,lt=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var he,me=Ct(ye);if(lt){var De=Ct(this).constructor;he=Reflect.construct(me,arguments,De)}else he=me.apply(this,arguments);return(function(ze,$e){if($e&&(Ke($e)==="object"||typeof $e=="function"))return $e;if($e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ft(ze)})(this,he)});function wt(he){var me;(function(Ut,Mt){if(!(Ut instanceof Mt))throw new TypeError("Cannot call a class as a function")})(this,wt),me=dt.call(this,he);var De=he.afterLoad,ze=he.beforeLoad,$e=he.scrollPosition,pt=he.visibleByDefault;return me.state={visible:pt},pt&&(ze(),De()),me.onVisible=me.onVisible.bind(ft(me)),me.isScrollTracked=!!($e&&Number.isFinite($e.x)&&$e.x>=0&&Number.isFinite($e.y)&&$e.y>=0),me}return ne=wt,(Se=[{key:"componentDidUpdate",value:function(he,me){me.visible!==this.state.visible&&this.props.afterLoad()}},{key:"onVisible",value:function(){this.props.beforeLoad(),this.setState({visible:!0})}},{key:"render",value:function(){if(this.state.visible)return this.props.children;var he=this.props,me=he.className,De=he.delayMethod,ze=he.delayTime,$e=he.height,pt=he.placeholder,Ut=he.scrollPosition,Mt=he.style,It=he.threshold,qt=he.useIntersectionObserver,Ft=he.width;return this.isScrollTracked||qt&&d()?l().createElement(L,{className:me,height:$e,onVisible:this.onVisible,placeholder:pt,scrollPosition:Ut,style:Mt,threshold:It,useIntersectionObserver:qt,width:Ft}):l().createElement(Ne,{className:me,delayMethod:De,delayTime:ze,height:$e,onVisible:this.onVisible,placeholder:pt,style:Mt,threshold:It,width:Ft})}}])&&Qe(ne.prototype,Se),Object.defineProperty(ne,"prototype",{writable:!1}),wt})(l().Component);Ye.propTypes={afterLoad:u.PropTypes.func,beforeLoad:u.PropTypes.func,useIntersectionObserver:u.PropTypes.bool,visibleByDefault:u.PropTypes.bool},Ye.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},useIntersectionObserver:!0,visibleByDefault:!1};const Ce=Ye;function Re(ve){return Re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ne){return typeof ne}:function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},Re(ve)}var bt=["afterLoad","beforeLoad","delayMethod","delayTime","effect","placeholder","placeholderSrc","scrollPosition","threshold","useIntersectionObserver","visibleByDefault","wrapperClassName","wrapperProps"];function jr(ve,ne){var Se=Object.keys(ve);if(Object.getOwnPropertySymbols){var ye=Object.getOwnPropertySymbols(ve);ne&&(ye=ye.filter((function(lt){return Object.getOwnPropertyDescriptor(ve,lt).enumerable}))),Se.push.apply(Se,ye)}return Se}function pr(ve){for(var ne=1;ne<arguments.length;ne++){var Se=arguments[ne]!=null?arguments[ne]:{};ne%2?jr(Object(Se),!0).forEach((function(ye){Or(ve,ye,Se[ye])})):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Se)):jr(Object(Se)).forEach((function(ye){Object.defineProperty(ve,ye,Object.getOwnPropertyDescriptor(Se,ye))}))}return ve}function Or(ve,ne,Se){return(ne=Tn(ne))in ve?Object.defineProperty(ve,ne,{value:Se,enumerable:!0,configurable:!0,writable:!0}):ve[ne]=Se,ve}function Sr(){return Sr=Object.assign?Object.assign.bind():function(ve){for(var ne=1;ne<arguments.length;ne++){var Se=arguments[ne];for(var ye in Se)Object.prototype.hasOwnProperty.call(Se,ye)&&(ve[ye]=Se[ye])}return ve},Sr.apply(this,arguments)}function hs(ve,ne){for(var Se=0;Se<ne.length;Se++){var ye=ne[Se];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(ve,Tn(ye.key),ye)}}function Tn(ve){var ne=(function(Se,ye){if(Re(Se)!=="object"||Se===null)return Se;var lt=Se[Symbol.toPrimitive];if(lt!==void 0){var dt=lt.call(Se,"string");if(Re(dt)!=="object")return dt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Se)})(ve);return Re(ne)==="symbol"?ne:String(ne)}function ri(ve,ne){return ri=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Se,ye){return Se.__proto__=ye,Se},ri(ve,ne)}function _i(ve){return _i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ne){return ne.__proto__||Object.getPrototypeOf(ne)},_i(ve)}var ps=(function(ve){(function(he,me){if(typeof me!="function"&&me!==null)throw new TypeError("Super expression must either be null or a function");he.prototype=Object.create(me&&me.prototype,{constructor:{value:he,writable:!0,configurable:!0}}),Object.defineProperty(he,"prototype",{writable:!1}),me&&ri(he,me)})(wt,ve);var ne,Se,ye,lt,dt=(ye=wt,lt=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var he,me=_i(ye);if(lt){var De=_i(this).constructor;he=Reflect.construct(me,arguments,De)}else he=me.apply(this,arguments);return(function(ze,$e){if($e&&(Re($e)==="object"||typeof $e=="function"))return $e;if($e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(pt){if(pt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pt})(ze)})(this,he)});function wt(he){var me;return(function(De,ze){if(!(De instanceof ze))throw new TypeError("Cannot call a class as a function")})(this,wt),(me=dt.call(this,he)).state={loaded:!1},me}return ne=wt,(Se=[{key:"onImageLoad",value:function(){var he=this;return this.state.loaded?null:function(me){he.props.onLoad(me),he.props.afterLoad(),he.setState({loaded:!0})}}},{key:"getImg",value:function(){var he=this.props,me=(he.afterLoad,he.beforeLoad,he.delayMethod,he.delayTime,he.effect,he.placeholder,he.placeholderSrc,he.scrollPosition,he.threshold,he.useIntersectionObserver,he.visibleByDefault,he.wrapperClassName,he.wrapperProps,(function(De,ze){if(De==null)return{};var $e,pt,Ut=(function(It,qt){if(It==null)return{};var Ft,yr,zn={},Fn=Object.keys(It);for(yr=0;yr<Fn.length;yr++)Ft=Fn[yr],qt.indexOf(Ft)>=0||(zn[Ft]=It[Ft]);return zn})(De,ze);if(Object.getOwnPropertySymbols){var Mt=Object.getOwnPropertySymbols(De);for(pt=0;pt<Mt.length;pt++)$e=Mt[pt],ze.indexOf($e)>=0||Object.prototype.propertyIsEnumerable.call(De,$e)&&(Ut[$e]=De[$e])}return Ut})(he,bt));return l().createElement("img",Sr({},me,{onLoad:this.onImageLoad()}))}},{key:"getLazyLoadImage",value:function(){var he=this.props,me=he.beforeLoad,De=he.className,ze=he.delayMethod,$e=he.delayTime,pt=he.height,Ut=he.placeholder,Mt=he.scrollPosition,It=he.style,qt=he.threshold,Ft=he.useIntersectionObserver,yr=he.visibleByDefault,zn=he.width;return l().createElement(Ce,{beforeLoad:me,className:De,delayMethod:ze,delayTime:$e,height:pt,placeholder:Ut,scrollPosition:Mt,style:It,threshold:qt,useIntersectionObserver:Ft,visibleByDefault:yr,width:zn},this.getImg())}},{key:"getWrappedLazyLoadImage",value:function(he){var me=this.props,De=me.effect,ze=me.height,$e=me.placeholderSrc,pt=me.width,Ut=me.wrapperClassName,Mt=me.wrapperProps,It=this.state.loaded,qt=It?" lazy-load-image-loaded":"",Ft=It||!$e?{}:{backgroundImage:"url(".concat($e,")"),backgroundSize:"100% 100%"};return l().createElement("span",Sr({className:Ut+" lazy-load-image-background "+De+qt,style:pr(pr({},Ft),{},{color:"transparent",display:"inline-block",height:ze,width:pt})},Mt),he)}},{key:"render",value:function(){var he=this.props,me=he.effect,De=he.placeholderSrc,ze=he.visibleByDefault,$e=he.wrapperClassName,pt=he.wrapperProps,Ut=this.getLazyLoadImage();return(me||De)&&!ze||$e||pt?this.getWrappedLazyLoadImage(Ut):Ut}}])&&hs(ne.prototype,Se),Object.defineProperty(ne,"prototype",{writable:!1}),wt})(l().Component);ps.propTypes={onLoad:u.PropTypes.func,afterLoad:u.PropTypes.func,beforeLoad:u.PropTypes.func,delayMethod:u.PropTypes.string,delayTime:u.PropTypes.number,effect:u.PropTypes.string,placeholderSrc:u.PropTypes.string,threshold:u.PropTypes.number,useIntersectionObserver:u.PropTypes.bool,visibleByDefault:u.PropTypes.bool,wrapperClassName:u.PropTypes.string,wrapperProps:u.PropTypes.object},ps.defaultProps={onLoad:function(){},afterLoad:function(){return{}},beforeLoad:function(){return{}},delayMethod:"throttle",delayTime:300,effect:"",placeholderSrc:null,threshold:100,useIntersectionObserver:!0,visibleByDefault:!1,wrapperClassName:""};const on=ps})(),zm.exports=n})()),zm.exports}var av=zL();const $S=Ua(av),FL=Hh({__proto__:null,default:$S},[av]);function DL(t,e){let r=1/0,n=null,s=-1,l=t.points.length;if(l<=1)return[null,r,s];let u=t.points[l-1];for(let d=0;d<l;d++){let h=u;u=t.points[d];let v=h[0]-e[0],g=h[1]-e[1],w=v*v+g*g;w<r&&(n=h,r=w,s=d===0?l-1:d-1)}return[n,r,s]}function Sg(t){if(t.points.length>2){let e=Math.min(...t.points.map(l=>l[0])),r=Math.min(...t.points.map(l=>l[1])),n=Math.max(0,...t.points.map(l=>l[0])),s=Math.max(0,...t.points.map(l=>l[1]));t.boundingBox={x:e,y:r,width:n-e,height:s-r};return}t.boundingBox=null}var NS={type:"move-bounding-box",label:"Move bounding box",isValid(t,e,r){let n=e.polygon.points.length,s=n===e.selectedPoints.length,l=e.polygon.boundingBox;if(n<1||!s||!l)return!1;let u=t[0],d=u[0],h=u[1];return d>=l.x&&d<=l.x+l.width&&h>=l.y&&h<=l.y+l.height},transition(t,e,r){let n=e.transitionOrigin,s=e.polygon.boundingBox,l=t[0],u=l[0]-n[0],d=l[1]-n[1];e.transitionPoints=e.polygon.points.map(h=>h.length===6?[h[0]+u,h[1]+d,h[2],h[3],h[4],h[5]]:[h[0]+u,h[1]+d]),s&&(e.transitionBoundingBox={x:s.x+u,y:s.y+d,width:s.width,height:s.height})},commit(t,e,r){let n=e.transitionPoints;return e.transitionPoints=null,e.transitionBoundingBox=null,{points:n}}},zS={type:"move-shape",label:"Move shape",isValid(t,e,r){return r.Shift?!1:e.slowState.pointerInsideShape&&(!e.isOpen||e.line===null)},transition(t,e,r){NS.transition(t,e,r)},commit(t,e,r){let n=e.transitionPoints;return e.transitionPoints=null,e.transitionBoundingBox=null,{points:n}}};function L0(t,e){return Math.abs(t-e)}function Ns(t,e){let r=L0(t[0],e[0]),n=L0(t[1],e[1]);return Math.sqrt(Math.pow(r,2)+Math.pow(n,2))}function bg(t,e){return[t[0]-e[0],t[1]-e[1]]}function BL(t,e){return t[0]*e[0]+t[1]*e[1]}function FS(t){return t[0]*t[0]+t[1]*t[1]}function dh(t,e){return FS(bg(t,e))}function DS(t,e){let r,n,s,l;var u=function(P,C,j,O,L){if(O<=j+1)return;let A=j,F=0,z=P*P;r=[C[j],C[O]],n=bg(r[1],r[0]);let B=FS(n),$,K,fe,J,H;for(let Y=j+1;Y<O;Y++)$=bg(C[Y],r[0]),J=BL($,n),J<=0?H=dh(C[Y],r[0]):B<=J?H=dh(C[Y],r[1]):(fe=J/B,K=[r[0][0]+fe*n[0],r[0][1]+fe*n[1]],H=dh(C[Y],K)),!(H<=F)&&(A=Y,F=H);F>z&&(L[A]=1,u(P,C,j,A,L),u(P,C,A,O,L))};let d=t.length,h=[],v,g,w,b,R=e*e;for(s=[],l=[],s[0]=t[0],v=g=1,b=0;v<d;v++)dh(t[v],t[b])<R||(s[g++]=t[v],b=v);for(b<d-1&&(s[g++]=t[d-1]),l[0]=l[g-1]=1,u(e,s,0,g-1,l),v=w=0;v<g;v++)l[v]&&(h[w++]=s[v]);return h}var UL={type:"move-point",label:"Move point",modifiers:{Shift:"Constrain to axis"},isValid(t,e,r){if(r.Alt)return!1;let n=r.proximity,[s,l]=t[0],u=e.polygon.points;e.selectedPoints;for(let d=0;d<u.length;d++){let h=u[d],v=h[0]-s,g=h[1]-l;if(v*v+g*g<n*n)return!0}return!1},start(t,e,r){if(e.selectedPoints.length<2){let[n,s,l]=DL(e.polygon,t[0]);return{selectedPoints:[l]}}if(e.slowState.closestPoint&&!e.selectedPoints.includes(e.slowState.closestPoint))return{selectedPoints:[e.slowState.closestPoint]}},transition(t,e,r){let n=e.transitionOrigin,[s,l]=t[0],u=e.polygon.points,d=e.selectedPoints;if(e.slowState.closestPoint){let w=e.slowState.closestPoint;d.indexOf(w)===-1&&(d=[w])}let h=[],v=s-n[0],g=l-n[1];r.Shift&&(Math.abs(v)>Math.abs(g)?g=0:v=0);for(let w=0;w<u.length;w++){let b=d.indexOf(w)!==-1,R=u[w];b?R.length===6?h.push([R[0]+v,R[1]+g,R[2],R[3],R[4],R[5]]):h.push([R[0]+v,R[1]+g]):h.push(R)}e.transitionPoints=h},commit(t,e,r){let n=e.transitionPoints;return e.transitionPoints=null,e.transitionBoundingBox=null,{points:n}}},M0=10,HL={type:"select-point",label:"Select point",trigger:{type:"click"},modifiers:{Shift:"Add to selection"},isValid(t,e,r){let n=-1;if(e.selectedPoints.length===1){let d=e.selectedPoints[0];d===0&&(n=e.polygon.points.length-1),d===e.polygon.points.length-1&&(n=0)}let[s,l]=t[0],u=e.polygon.points;for(let d=0;d<u.length;d++){let h=u[d],v=h[0]-s,g=h[1]-l;if(v*v+g*g<M0*M0)return n!==d}return!1},commit(t,e,r){let n=r.Shift?[...e.selectedPoints]:[],[s,l]=t[0],u=e.polygon.points.map((d,h)=>{let v=d[0]-s,g=d[1]-l;return[v*v+g*g,h]}).sort((d,h)=>d[0]-h[0])[0];if(e.line=null,!n.includes(u[1]))n.push(u[1]);else if(r.Shift)return{selectedPoints:n.filter(d=>d!==u[1])};return{selectedPoints:n}}},BS={type:"split-line",label:"Split line",isValid(t,e,r){return r.Meta||e.slowState.lineMode?!1:!!(e.closestLinePoint&&e.closestLineDistance<r.proximity)},transition(t,e,r){let n=e.transitionOrigin,[s,l]=t[0],u=e.polygon.points,d=[],h=s-n[0],v=l-n[1];for(let g=0;g<u.length;g++)if(d.push(u[g]),e.closestLineIndex===g){let w=e.closestLinePoint;d.push([w[0]+h,w[1]+v])}e.transitionPoints=d},commit(t,e,r){let n=e.transitionPoints;return e.transitionPoints=null,e.transitionBoundingBox=null,{selectedPoints:[e.closestLineIndex+1],points:n}}},WL={type:"add-open-point",label:"Add point",trigger:{type:"click"},isValid(t,e,r){if(!e.isOpen)return!1;if(e.polygon.points.length===0)return!0;if(e.selectedPoints.length!==1||e.polygon.points.length>=2&&e.slowState.lineMode)return!1;let n=e.selectedPoints[0];return n===0||n===e.polygon.points.length-1},commit(t,e,r){let n=e.line?e.line[1]:t[0],s=e.polygon.points;return s.length===0?{selectedPoints:[0],points:[t[0]]}:(r.Shift,e.selectedPoints[0]===0?{selectedPoints:e.slowState.lineMode?[]:[0],points:[n,...s]}:(e.line=null,{selectedPoints:e.slowState.lineMode?[]:[s.length],points:[...s,n]}))}},US={type:"close-shape",label:"Close shape",trigger:{type:"click"},isValid(t,e,r){if(!e.isOpen||e.selectedPoints.length!==1||e.polygon.points.length<2||r.Meta)return!1;let n=e.selectedPoints[0];if(n===0){let s=e.polygon.points[e.polygon.points.length-1];return Ns(t[0],s)<r.proximity}if(n===e.polygon.points.length-1){let s=e.polygon.points[0];return Ns(t[0],s)<r.proximity}return!1},commit(t,e,r){let n=e.selectedPoints[0];if(e.line=null,n===0)return{selectedPoints:[],points:e.polygon.points.slice(0).reverse(),isOpen:!1};if(n===e.polygon.points.length-1)return{selectedPoints:[],isOpen:!1}}},VL={type:"deselect-draw",label:"Deselect draw",trigger:{type:"key",key:"Escape"},isValid(t,e,r){return!0},commit(t,e,r){return{selectedPoints:[]}}},QL={type:"select-shape",label:"Select shape",trigger:{type:"click"},isValid(t,e,r){return zS.isValid(t,e,r)},commit(t,e,r){return{selectedPoints:e.polygon.points.map((n,s)=>s)}}},qL={type:"deselect-bounding-box",label:"Deselect bounding box",trigger:{type:"click"},isValid(t,e,r){return!e.isOpen&&e.selectedPoints.length>2&&e.selectedPoints.length===e.polygon.points.length},commit(t,e,r){return{selectedPoints:[]}}},GL={type:"bounding-box-corners",label:"Drag to resize",modifiers:{Shift:"Maintain aspect ratio",Alt:"Scale from center",Meta:"Rotate"},isValid(t,e,r){if(e.transitionDirection=null,e.transitionRotate=!1,e.isOpen||e.selectedPoints.length!==e.polygon.points.length||!e.polygon.boundingBox)return!1;let n=r.proximity*.5,s=r.proximity*3,l=t[0],u=e.polygon.boundingBox,d=u.x+n,h=u.x+u.width-n*2,v=u.y+n,g=u.y+u.height-n*2;if(l[0]>d&&l[0]<h&&l[1]>v&&l[1]<g)return!1;let w=[u.x+u.width,u.y+u.height],b=[u.x,u.y],R=[u.x+u.width,u.y],P=[u.x,u.y+u.height],C=["ne","nw","se","sw"],j=[Ns(t[0],R),Ns(t[0],b),Ns(t[0],w),Ns(t[0],P)],O=Math.min(...j);if(j[0]<s||j[1]<s||j[2]<s||j[3]<s){(O>r.proximity||r.Meta)&&(e.transitionRotate=!0);let L=j.indexOf(Math.min(...j));return e.transitionDirection=L!==-1?C[L]:null,!0}return!1},start(t,e,r){t[0];let n=e.polygon.boundingBox,s=[n.x+n.width,n.y+n.height],l=[n.x,n.y],u=[n.x+n.width,n.y],d=[n.x,n.y+n.height],h=["ne","nw","se","sw"],v=[Ns(t[0],u),Ns(t[0],l),Ns(t[0],s),Ns(t[0],d)],g=Math.min(...v),w=v.indexOf(g);e.transitionDirection=w!==-1?h[w]:null,g>r.proximity&&(e.transitionRotate=!0)},transition(t,e,r){let n=e.polygon.boundingBox,s=[n.x,n.y],l=e.transitionOrigin||t[0],[u,d]=t[0];if(r.Meta||e.transitionRotate){s=[n.x+n.width/2,n.y+n.height/2];let P=Math.atan2(l[1]-s[1],l[0]-s[0]),C=Math.atan2(d-s[1],u-s[0]),j=r.Shift,O=Math.PI/(r.Alt?4:12),L=C-P;j&&(L=Math.round(L/O)*O);let A=Math.cos(L),F=Math.sin(L),z=[];for(let B of e.polygon.points){let $=B[0]-s[0],K=B[1]-s[1],fe=$*A-K*F,J=$*F+K*A,H=fe+s[0],Y=J+s[1];if(B.length===6){z.push([H,Y,B[2],B[3],B[4],B[5]]);continue}z.push([H,Y])}e.transitionPoints=z,Sg({points:z,boundingBox:null}),e.transitionBoundingBox=e.polygon.boundingBox?{...e.polygon.boundingBox,rotation:L}:null;return}let h=0,v=0;switch(e.transitionDirection){case"se":{s=[n.x,n.y],h=u-l[0],v=d-l[1];break}case"sw":{s=[n.x+n.width,n.y],h=l[0]-u,v=d-l[1];break}case"ne":{s=[n.x,n.y+n.height],h=u-l[0],v=l[1]-d;break}case"nw":{s=[n.x+n.width,n.y+n.height],h=l[0]-u,v=l[1]-d;break}}if(r.Alt&&(s=[n.x+n.width/2,n.y+n.height/2],h*=2,v*=2),r.Shift){let P=n.width/n.height;Math.abs(n.width/h)>Math.abs(n.height/v)?v=h/P:h=v*P}let g=(n.width+h)/n.width,w=(n.height+v)/n.height,b=[];for(let P of e.polygon.points){let C=P[0]-s[0],j=P[1]-s[1],O=C*g,L=j*w,A=O+s[0],F=L+s[1];if(P.length===6){b.push([A,F,P[2],P[3],P[4],P[5]]);continue}b.push([A,F])}e.transitionPoints=b;let R={points:b,boundingBox:null};Sg(R),e.transitionBoundingBox=R.boundingBox},commit(t,e,r){let n=e.transitionPoints;return e.transitionPoints=null,e.transitionBoundingBox=null,e.transitionRotate=!1,{points:n}}},KL={type:"cut-line",label:"Add new point",trigger:{type:"click"},modifiers:{Shift:"Cut line"},isValid(t,e,r){return BS.isValid(t,e,r)},commit(t,e,r){if(r.Shift&&!e.isOpen){let l=e.polygon.points,u=[],d=[],h=!1;for(let v=0;v<l.length;v++)h?d.push(l[v]):u.push(l[v]),e.closestLineIndex===v&&(h=!0);return{isOpen:!0,points:[...d,...u]}}let n=e.polygon.points,s=[];for(let l=0;l<n.length;l++)if(s.push(n[l]),e.closestLineIndex===l){let u=e.closestLinePoint;s.push(u)}return{points:s}}},YL={type:"select-multiple-points",label:"Drag to select multiple points",isValid(t,e,r){return e.slowState.lineMode&&e.polygon.points.length>=2?!0:!e.line},transition(t,e,r){if(!e.transitionOrigin)return;let n=e.transitionOrigin[0],s=e.transitionOrigin[1],l=t[0][0],u=t[0][1],d=Math.min(n,l),h=Math.min(s,u),v=Math.abs(n-l),g=Math.abs(s-u);e.selectionBox={x:d,y:h,width:v,height:g}},commit(t,e,r){if(e.selectionBox){let n=[];r.Shift&&n.push(...e.selectedPoints);for(let s=0;s<e.polygon.points.length;s++){let l=e.polygon.points[s];l[0]>=e.selectionBox.x&&l[0]<=e.selectionBox.x+e.selectionBox.width&&l[1]>=e.selectionBox.y&&l[1]<=e.selectionBox.y+e.selectionBox.height&&n.push(s)}return{selectedPoints:n}}}},XL={type:"deselect-points",label:"Deselect points",trigger:{type:"click"},isValid(t,e,r){return e.selectedPoints.length>0},commit(t,e,r){return{selectedPoints:[]}}},pp=4,ZL={type:"nudge-right",label:"Nudge right",trigger:{type:"key",key:"ArrowRight"},modifiers:{Shift:"Nudge right more"},isValid(t,e,r){return e.selectedPoints.length>0},commit(t,e,r){let n=r.proximity*.3,s=e.polygon.points,l=e.selectedPoints;return{points:s.map((u,d)=>l.includes(d)?[u[0]+(r.Shift?pp*n:1),u[1]]:u)}}},JL={type:"nudge-left",label:"Nudge left",trigger:{type:"key",key:"ArrowLeft"},modifiers:{Shift:"Nudge left more"},isValid(t,e,r){return e.selectedPoints.length>0},commit(t,e,r){let n=r.proximity*.3,s=e.polygon.points,l=e.selectedPoints;return{points:s.map((u,d)=>l.includes(d)?[Math.max(0,u[0]-(r.Shift?pp*n:1)),u[1]]:u)}}},eM={type:"nudge-up",label:"Nudge up",trigger:{type:"key",key:"ArrowUp"},modifiers:{Shift:"Nudge up more"},isValid(t,e,r){return e.selectedPoints.length>0},commit(t,e,r){let n=r.proximity*.3,s=e.polygon.points,l=e.selectedPoints;return{points:s.map((u,d)=>{if(l.includes(d)){let h=u[0],v=Math.max(0,u[1]-(r.Shift?pp*n:1));return u.length===6?[h,v,u[2],u[3],u[4],u[5]]:[h,v]}return u})}}},tM={type:"nudge-down",label:"Nudge down",trigger:{type:"key",key:"ArrowDown"},modifiers:{Shift:"Nudge down more"},isValid(t,e,r){return e.selectedPoints.length>0},commit(t,e,r){let n=r.proximity*.3,s=e.polygon.points,l=e.selectedPoints;return{points:s.map((u,d)=>{let h=u[0],v=Math.max(0,u[1]-(r.Shift?pp*n:1));return l.includes(d)?u.length===6?[h,v,u[2],u[3],u[4],u[5]]:[h,v]:u})}}},rM={type:"delete-point",label:"Delete point",trigger:{type:"key",key:"Backspace"},isValid(t,e,r){return e.selectedPoints.length>0},commit(t,e,r){let n=e.polygon.points.filter((s,l)=>!e.selectedPoints.includes(l));return{isOpen:n.length<3,selectedPoints:[],points:n}}},nM={type:"draw-shape",label:"Draw shape",isValid(t,e,r){let n=r.Alt||e.slowState.drawMode;return!!(e.isOpen&&(e.line||e.polygon.points.length===0)&&n)},start(t,e,r){e.transitionDraw=[]},transition(t,e,r){e.transitionDraw.push(t[0])},commit(t,e,r){let n=DS(e.transitionDraw,e.scale*3);return e.transitionDraw=[],e.selectedPoints[0]===0?{isOpen:!1,points:[...n,...e.polygon.points.slice(0).reverse()]}:{isOpen:!1,points:[...e.polygon.points,...n]}}},iM={type:"stamp-shape",label:"Stamp shape",modifiers:{Shift:"Maintain aspect ratio"},isValid(t,e,r){return e.slowState.selectedStamp!==null},start(t,e,r){let n=t[0];if(n&&e.slowState.selectedStamp){let s=e.slowState.selectedStamp,l=n[0],u=n[1],d=[],h=Math.min(...s.points.map(C=>C[0])),v=Math.min(...s.points.map(C=>C[1])),g=Math.max(...s.points.map(C=>C[0]))-h,w=Math.max(...s.points.map(C=>C[1]))-v,b=g/32;w/32>b&&(b=w/32);let R=[],P=0;for(let C of s.points)R.push(P),d.push([l+(C[0]-h)/b,u+(C[1]-v)/b]),P++;return e.transitionPoints=d,{isOpen:!1,selectedPoints:R,points:d}}},transition(t,e,r){if(!e.transitionOrigin)return;let n=e.polygon.boundingBox,s=[n.x,n.y];e.transitionOrigin||t[0];let[l,u]=t[0],d=e.transitionOrigin[0],h=e.transitionOrigin[1],v=t[0][0],g=t[0][1],w=v-d-32,b=g-h-32;if(r.Shift){let O=n.width/n.height;Math.abs(n.width/w)>Math.abs(n.height/b)?b=w/O:w=b*O}let R=(n.width+w)/n.width,P=(n.height+b)/n.height,C=[];for(let O of e.polygon.points){let L=O[0]-s[0],A=O[1]-s[1],F=L*R,z=A*P,B=F+s[0],$=z+s[1];if(O.length===6){C.push([B,$,O[2],O[3],O[4],O[5]]);continue}C.push([B,$])}e.transitionPoints=C;let j={points:C,boundingBox:null};Sg(j),e.transitionBoundingBox=j.boundingBox},commit(t,e,r){return{isOpen:!1,points:e.transitionPoints}}},sM={type:"close-shape-line",label:"Close shape line",trigger:{type:"click"},isValid(t,e,r){return!e.isOpen||e.polygon.points.length<3||!e.closestLinePoint||e.closestLineDistance>=r.proximity?!1:(e.closestLineIndex===0||(e.closestLineIndex,e.polygon.points.length-2),!0)},commit(t,e,r){return US.commit(t,e,r)}},oM={type:"stamp-fixed-size-shape",label:"Stamp fixed size shape",trigger:{type:"click"},isValid(t,e,r){return e.slowState.selectedStamp!==null},commit(t,e,r){let n=t[0],s=e.slowState.selectedStamp;if(!n||!s)return;let l=n[0],u=n[1],d=[],h=Math.min(...s.points.map(P=>P[0])),v=Math.min(...s.points.map(P=>P[1])),g=Math.max(...s.points.map(P=>P[0]))-h,w=Math.max(...s.points.map(P=>P[1]))-v,b=4*r.proximity,R=g/b;w/b>R&&(R=w/b),l-=g/R/2,u-=w/R/2;for(let P of s.points)d.push([l+(P[0]-h)/R,u+(P[1]-v)/R]);return{isOpen:!1,points:d}}},lM={type:"move-line",label:"Move line",isValid(t,e,r){return e.slowState.lineMode?!!(e.closestLinePoint&&e.closestLineDistance<r.proximity):!1},transition(t,e){let r=e.transitionOrigin;e.polygon.boundingBox;let n=t[0],s=n[0]-r[0],l=n[1]-r[1];e.transitionPoints=e.polygon.points.map(u=>u.length===6?[u[0]+s,u[1]+l,u[2],u[3],u[4],u[5]]:[u[0]+s,u[1]+l])},commit(t,e,r){let n=e.transitionPoints;return e.transitionPoints=null,e.transitionBoundingBox=null,{points:n}}},aM={type:"close-line-box",label:"Close Line Box",trigger:{type:"click"},isValid(t,e,r){return e.slowState.lineBoxMode===!0&&e.polygon.points.length===2&&e.lineBox!==null},commit(t,e,r){return e.lineBox?{isOpen:!1,points:e.lineBox}:{}}};function uM(t={}){let e=t.proximityThreshold||10,r=t.closestLinePointFill||{selected:"#fff",unselected:"rgba(255, 255, 255, .5)"},n=t.closestLinePointStroke||{selected:"#000",unselected:"rgba(0, 0, 0, .5)"};function s(P,C,j){P&&C.transitionBoundingBox&&j.transitioning&&(P.setAttribute("x",""+C.transitionBoundingBox.x),P.setAttribute("y",""+C.transitionBoundingBox.y),P.setAttribute("width",""+C.transitionBoundingBox.width),P.setAttribute("height",""+C.transitionBoundingBox.height))}function l(P,C,j){P&&C.polygon.boundingBox&&j.showBoundingBox&&(P.setAttribute("x",""+C.polygon.boundingBox.x),P.setAttribute("y",""+C.polygon.boundingBox.y),P.setAttribute("width",""+C.polygon.boundingBox.width),P.setAttribute("height",""+C.polygon.boundingBox.height))}function u(P,C,j){if(P&&C.polygon.boundingBox&&j.showBoundingBox){let O=C.transitionBoundingBox||C.polygon.boundingBox;O.rotation?(P.style.transformOrigin=`${O.x+O.width/2}px ${O.y+O.height/2}px`,P.style.transform=`rotate(${Math.round(100*O.rotation*(180/Math.PI))/100}deg)`):P.style.transform="",P.setAttribute("points",[[O.x,O.y],[O.x+O.width,O.y],[O.x+O.width,O.y+O.height],[O.x,O.y+O.height]].map(L=>L.join(",")).join(" "))}}function d(P,C,j){P&&C.transitionPoints&&j.transitioning&&P.setAttribute("points",C.transitionPoints.map(O=>O.join(",")).join(" "))}function h(P,C,j){P&&C.closestLinePoint&&j.hasClosestLine&&(P.setAttribute("cx",""+C.closestLinePoint[0]),P.setAttribute("cy",""+C.closestLinePoint[1]),P.setAttribute("fill",C.closestLineDistance<e?r.selected:r.unselected),P.setAttribute("stroke",C.closestLineDistance<e?n.selected:n.unselected))}function v(P,C,j){P&&C.closestLinePoint&&j.hasClosestLine&&P.setAttribute("transform",`translate(${C.closestLinePoint[0]}, ${C.closestLinePoint[1]})`)}function g(P,C,j){P&&C.selectionBox&&j.transitionIntentType==="select-multiple-points"&&(P.setAttribute("x",""+C.selectionBox.x),P.setAttribute("y",""+C.selectionBox.y),P.setAttribute("width",""+C.selectionBox.width),P.setAttribute("height",""+C.selectionBox.height))}function w(P,C,j){if(P&&C.pointer&&C.selectedPoints.length)if(j.actionIntentType==="close-shape"||j.actionIntentType==="close-shape-line"){let O=C.polygon.points[0],L=C.polygon.points[C.polygon.points.length-1];O&&L&&P.setAttribute("points",`${O.join(",")} ${L.join(",")}`)}else if(C.line)P.setAttribute("points",`${C.line[0].join(",")} ${C.line[1].join(",")}`);else{let O=C.polygon.points[C.selectedPoints[0]];O&&O.length&&P.setAttribute("points",`${C.pointer[0]},${C.pointer[1]} ${O.join(",")}`)}}function b(P,C,j,O=3){P&&C.transitionDraw.length&&P.setAttribute("points",DS(C.transitionDraw,O*3).map(L=>L.join(",")).join(" "))}function R(P,C){P&&C.lineBox&&P.setAttribute("points",C.lineBox.map(j=>j.join(",")).join(" "))}return{updateTransitionBoundingBox:s,updateClosestLinePointTransform:v,updateBoundingBoxPolygon:u,updateBoundingBox:l,updateTransitionShape:d,updateClosestLinePoint:h,updateSelectBox:g,updatePointLine:w,updateDrawPreview:b,updateLineBox:R}}var cM=[iM,GL,UL,lM,BS,zS,NS,nM,YL],dM=[aM,oM,US,HL,sM,KL,WL,QL,qL,XL],fM=[VL,ZL,JL,eM,tM,rM],uv={};cM.forEach(t=>{uv[t.type]=t});dM.forEach(t=>{uv[t.type]=t});fM.forEach(t=>{uv[t.type]=t});_.forwardRef(function({canvasId:t},e){let r=Oj(),n=wS(t||(r==null?void 0:r.id)),s=Kr();return _.useImperativeHandle(e,()=>n,[t,r]),!r||n.enabledPageIds.length===0?null:k.jsx(k.Fragment,{children:n.enabledPageIds.map(l=>k.jsx(Rr.RenderAnnotationPage,{page:s.get(l)},l))})});var{LazyLoadComponent:BA}=FL||$S,hM=_.createContext(Dd());hM.displayName="SelectorHelper";function pM(){return{default:{backgroundColor:"rgba(0,0,0,0)",borderWidth:"2px",borderColor:"rgba(252,0,98, .5)"},highlighted:{backgroundColor:"rgba(75, 103, 225, 0.4)",borderWidth:"1px",borderColor:"rgba(75,103,225,0.99)"},hidden:{borderWidth:"0px",borderColor:"rgba(0,0,0,0)",backgroundColor:"rgba(0,0,0,0)",hidden:!0}}}var mM=_.createContext(pM());mM.displayName="AnnotationStyle";uM();const cv="-",gM=t=>{const e=yM(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:u=>{const d=u.split(cv);return d[0]===""&&d.length!==1&&d.shift(),HS(d,e)||vM(u)},getConflictingClassGroupIds:(u,d)=>{const h=r[u]||[];return d&&n[u]?[...h,...n[u]]:h}}},HS=(t,e)=>{var u;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?HS(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const l=t.join(cv);return(u=e.validators.find(({validator:d})=>d(l)))==null?void 0:u.classGroupId},I0=/^\[(.+)\]$/,vM=t=>{if(I0.test(t)){const e=I0.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},yM=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return xM(Object.entries(t.classGroups),r).forEach(([l,u])=>{Eg(u,n,l,e)}),n},Eg=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const l=s===""?e:A0(e,s);l.classGroupId=r;return}if(typeof s=="function"){if(wM(s)){Eg(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([l,u])=>{Eg(u,A0(e,l),r,n)})})},A0=(t,e)=>{let r=t;return e.split(cv).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},wM=t=>t.isThemeGetter,xM=(t,e)=>e?t.map(([r,n])=>{const s=n.map(l=>typeof l=="string"?e+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([u,d])=>[e+u,d])):l);return[r,s]}):t,SM=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(l,u)=>{r.set(l,u),e++,e>t&&(e=0,n=r,r=new Map)};return{get(l){let u=r.get(l);if(u!==void 0)return u;if((u=n.get(l))!==void 0)return s(l,u),u},set(l,u){r.has(l)?r.set(l,u):s(l,u)}}},WS="!",bM=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],l=e.length,u=d=>{const h=[];let v=0,g=0,w;for(let j=0;j<d.length;j++){let O=d[j];if(v===0){if(O===s&&(n||d.slice(j,j+l)===e)){h.push(d.slice(g,j)),g=j+l;continue}if(O==="/"){w=j;continue}}O==="["?v++:O==="]"&&v--}const b=h.length===0?d:d.substring(g),R=b.startsWith(WS),P=R?b.substring(1):b,C=w&&w>g?w-g:void 0;return{modifiers:h,hasImportantModifier:R,baseClassName:P,maybePostfixModifierPosition:C}};return r?d=>r({className:d,parseClassName:u}):u},EM=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},PM=t=>({cache:SM(t.cacheSize),parseClassName:bM(t),...gM(t)}),CM=/\s+/,kM=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,l=[],u=t.trim().split(CM);let d="";for(let h=u.length-1;h>=0;h-=1){const v=u[h],{modifiers:g,hasImportantModifier:w,baseClassName:b,maybePostfixModifierPosition:R}=r(v);let P=!!R,C=n(P?b.substring(0,R):b);if(!C){if(!P){d=v+(d.length>0?" "+d:d);continue}if(C=n(b),!C){d=v+(d.length>0?" "+d:d);continue}P=!1}const j=EM(g).join(":"),O=w?j+WS:j,L=O+C;if(l.includes(L))continue;l.push(L);const A=s(C,P);for(let F=0;F<A.length;++F){const z=A[F];l.push(O+z)}d=v+(d.length>0?" "+d:d)}return d};function TM(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=VS(e))&&(n&&(n+=" "),n+=r);return n}const VS=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=VS(t[n]))&&(r&&(r+=" "),r+=e);return r};function RM(t,...e){let r,n,s,l=u;function u(h){const v=e.reduce((g,w)=>w(g),t());return r=PM(v),n=r.cache.get,s=r.cache.set,l=d,d(h)}function d(h){const v=n(h);if(v)return v;const g=kM(h,r);return s(h,g),g}return function(){return l(TM.apply(null,arguments))}}const fr=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},QS=/^\[(?:([a-z-]+):)?(.+)\]$/i,_M=/^\d+\/\d+$/,jM=new Set(["px","full","screen"]),OM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,LM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,MM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,IM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,AM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Eo=t=>Zu(t)||jM.has(t)||_M.test(t),Cl=t=>lc(t,"length",HM),Zu=t=>!!t&&!Number.isNaN(Number(t)),Fm=t=>lc(t,"number",Zu),dd=t=>!!t&&Number.isInteger(Number(t)),$M=t=>t.endsWith("%")&&Zu(t.slice(0,-1)),St=t=>QS.test(t),kl=t=>OM.test(t),NM=new Set(["length","size","percentage"]),zM=t=>lc(t,NM,qS),FM=t=>lc(t,"position",qS),DM=new Set(["image","url"]),BM=t=>lc(t,DM,VM),UM=t=>lc(t,"",WM),fd=()=>!0,lc=(t,e,r)=>{const n=QS.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},HM=t=>LM.test(t)&&!MM.test(t),qS=()=>!1,WM=t=>IM.test(t),VM=t=>AM.test(t),QM=()=>{const t=fr("colors"),e=fr("spacing"),r=fr("blur"),n=fr("brightness"),s=fr("borderColor"),l=fr("borderRadius"),u=fr("borderSpacing"),d=fr("borderWidth"),h=fr("contrast"),v=fr("grayscale"),g=fr("hueRotate"),w=fr("invert"),b=fr("gap"),R=fr("gradientColorStops"),P=fr("gradientColorStopPositions"),C=fr("inset"),j=fr("margin"),O=fr("opacity"),L=fr("padding"),A=fr("saturate"),F=fr("scale"),z=fr("sepia"),B=fr("skew"),$=fr("space"),K=fr("translate"),fe=()=>["auto","contain","none"],J=()=>["auto","hidden","clip","visible","scroll"],H=()=>["auto",St,e],Y=()=>[St,e],xe=()=>["",Eo,Cl],te=()=>["auto",Zu,St],Te=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],de=()=>["solid","dashed","dotted","double","none"],je=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ee=()=>["start","end","center","between","around","evenly","stretch"],Q=()=>["","0",St],ue=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[Zu,St];return{cacheSize:500,separator:":",theme:{colors:[fd],spacing:[Eo,Cl],blur:["none","",kl,St],brightness:U(),borderColor:[t],borderRadius:["none","","full",kl,St],borderSpacing:Y(),borderWidth:xe(),contrast:U(),grayscale:Q(),hueRotate:U(),invert:Q(),gap:Y(),gradientColorStops:[t],gradientColorStopPositions:[$M,Cl],inset:H(),margin:H(),opacity:U(),padding:Y(),saturate:U(),scale:U(),sepia:Q(),skew:U(),space:Y(),translate:Y()},classGroups:{aspect:[{aspect:["auto","square","video",St]}],container:["container"],columns:[{columns:[kl]}],"break-after":[{"break-after":ue()}],"break-before":[{"break-before":ue()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Te(),St]}],overflow:[{overflow:J()}],"overflow-x":[{"overflow-x":J()}],"overflow-y":[{"overflow-y":J()}],overscroll:[{overscroll:fe()}],"overscroll-x":[{"overscroll-x":fe()}],"overscroll-y":[{"overscroll-y":fe()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",dd,St]}],basis:[{basis:H()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",St]}],grow:[{grow:Q()}],shrink:[{shrink:Q()}],order:[{order:["first","last","none",dd,St]}],"grid-cols":[{"grid-cols":[fd]}],"col-start-end":[{col:["auto",{span:["full",dd,St]},St]}],"col-start":[{"col-start":te()}],"col-end":[{"col-end":te()}],"grid-rows":[{"grid-rows":[fd]}],"row-start-end":[{row:["auto",{span:[dd,St]},St]}],"row-start":[{"row-start":te()}],"row-end":[{"row-end":te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",St]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",St]}],gap:[{gap:[b]}],"gap-x":[{"gap-x":[b]}],"gap-y":[{"gap-y":[b]}],"justify-content":[{justify:["normal",...ee()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ee(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ee(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[L]}],px:[{px:[L]}],py:[{py:[L]}],ps:[{ps:[L]}],pe:[{pe:[L]}],pt:[{pt:[L]}],pr:[{pr:[L]}],pb:[{pb:[L]}],pl:[{pl:[L]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[$]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[$]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",St,e]}],"min-w":[{"min-w":[St,e,"min","max","fit"]}],"max-w":[{"max-w":[St,e,"none","full","min","max","fit","prose",{screen:[kl]},kl]}],h:[{h:[St,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[St,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[St,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[St,e,"auto","min","max","fit"]}],"font-size":[{text:["base",kl,Cl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Fm]}],"font-family":[{font:[fd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",St]}],"line-clamp":[{"line-clamp":["none",Zu,Fm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Eo,St]}],"list-image":[{"list-image":["none",St]}],"list-style-type":[{list:["none","disc","decimal",St]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[O]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[O]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...de(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Eo,Cl]}],"underline-offset":[{"underline-offset":["auto",Eo,St]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",St]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",St]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[O]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Te(),FM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",zM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},BM]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[P]}],"gradient-via-pos":[{via:[P]}],"gradient-to-pos":[{to:[P]}],"gradient-from":[{from:[R]}],"gradient-via":[{via:[R]}],"gradient-to":[{to:[R]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[O]}],"border-style":[{border:[...de(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[O]}],"divide-style":[{divide:de()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...de()]}],"outline-offset":[{"outline-offset":[Eo,St]}],"outline-w":[{outline:[Eo,Cl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:xe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[O]}],"ring-offset-w":[{"ring-offset":[Eo,Cl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",kl,UM]}],"shadow-color":[{shadow:[fd]}],opacity:[{opacity:[O]}],"mix-blend":[{"mix-blend":[...je(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":je()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",kl,St]}],grayscale:[{grayscale:[v]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[w]}],saturate:[{saturate:[A]}],sepia:[{sepia:[z]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[v]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[w]}],"backdrop-opacity":[{"backdrop-opacity":[O]}],"backdrop-saturate":[{"backdrop-saturate":[A]}],"backdrop-sepia":[{"backdrop-sepia":[z]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[u]}],"border-spacing-x":[{"border-spacing-x":[u]}],"border-spacing-y":[{"border-spacing-y":[u]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",St]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",St]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",St]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[F]}],"scale-x":[{"scale-x":[F]}],"scale-y":[{"scale-y":[F]}],rotate:[{rotate:[dd,St]}],"translate-x":[{"translate-x":[K]}],"translate-y":[{"translate-y":[K]}],"skew-x":[{"skew-x":[B]}],"skew-y":[{"skew-y":[B]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",St]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",St]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",St]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Eo,Cl,Fm]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Tr=RM(QM),qM={"h-1":"lg:min-h-[100px] row-span-1","h-2":"lg:min-h-[200px] row-span-2","h-3":"lg:min-h-[300px] row-span-3","h-4":"lg:min-h-[400px] row-span-4","h-5":"lg:min-h-[500px] row-span-5","h-6":"lg:min-h-[600px] row-span-6","h-7":"lg:min-h-[700px] row-span-7","h-8":"lg:min-h-[800px] row-span-8","h-9":"lg:min-h-[900px] row-span-9","h-10":"lg:min-h-[1000px] row-span-10","h-11":"lg:min-h-[1100px] row-span-11","h-12":"lg:min-h-[1200px] row-span-12"},GM={"w-1":"col-span-1","w-2":"col-span-2","w-3":"col-span-3","w-4":"col-span-4","w-5":"col-span-5","w-6":"col-span-6","w-7":"col-span-7","w-8":"col-span-8","w-9":"col-span-9","w-10":"col-span-10","w-11":"col-span-11","w-12":"col-span-12"};function dv(t,e=!1){(!t||t.length===0)&&(t=["h-8","w-8","image"]);let r=t.find(l=>l.includes("h-"));const n=t.find(l=>l.includes("w-")),s=[];return e&&r==="h-4"&&(r="h-8"),s.push(qM[r]),s.push(GM[n]),s.join(" ")}const fh=Dd(),KM=Zj((t,e)=>({hashValue:null,setHashValue:r=>{t({hashValue:r})}}));function mp(t){const{hashValue:e,setHashValue:r}=KM(),n=_.useCallback(s=>{s&&fh.emit("change",s)},[]);return _.useEffect(()=>{const s=u=>{r(u),t==null||t(u)},l=()=>{fh.emit("change",window.location.hash.slice(1))};return window.addEventListener("hashchange",l),fh.on("change",s),()=>{window.removeEventListener("hashchange",l),fh.off("change",s)}},[]),[e,n]}function YM(t,e,r,n=[]){_.useLayoutEffect(()=>{const s=t==null?void 0:t.current;if(s){const l=new IntersectionObserver(e,{rootMargin:"10% 0px 10% 0px",threshold:1});return l.observe(s),()=>{l.unobserve(s),l.disconnect()}}return()=>{}},[t,r,...n])}function fv({id:t,className:e,children:r,updatesTitle:n=!0,enabled:s=!0,...l}){const[u,d]=mp(),h=_.useRef(null);return YM(h,v=>{if(!(!n||!s))for(const g of v){const w=g.target.id;if(g.isIntersecting&&w===t){w!=="undefined"&&d(w);break}}},void 0,[s]),k.jsx("section",{id:t,ref:h,className:Tr("scroll-m-8",e),...l,children:r})}const GS=typeof document<"u"?ct.useLayoutEffect:()=>{};var Dm;const XM=(Dm=ct.useInsertionEffect)!==null&&Dm!==void 0?Dm:GS;function ka(t){const e=_.useRef(null);return XM(()=>{e.current=t},[t]),_.useCallback((...r)=>{const n=e.current;return n==null?void 0:n(...r)},[])}let Pg=new Map;typeof FinalizationRegistry<"u"&&new FinalizationRegistry(t=>{Pg.delete(t)});function ZM(t,e){if(t===e)return t;let r=Pg.get(t);if(r)return r.forEach(s=>s.current=e),e;let n=Pg.get(e);return n?(n.forEach(s=>s.current=t),t):e}function KS(...t){return(...e)=>{for(let r of t)typeof r=="function"&&r(...e)}}const Il=t=>{var e;return(e=t==null?void 0:t.ownerDocument)!==null&&e!==void 0?e:document},Dh=t=>t&&"window"in t&&t.window===t?t:Il(t).defaultView||window;function JM(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function eI(t){return JM(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let tI=!1;function YS(){return tI}function us(t,e){if(!YS())return e&&t?t.contains(e):!1;if(!t||!e)return!1;let r=e;for(;r!==null;){if(r===t)return!0;r.tagName==="SLOT"&&r.assignedSlot?r=r.assignedSlot.parentNode:eI(r)?r=r.host:r=r.parentNode}return!1}function ki(t){return YS()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}function XS(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=XS(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function rI(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=XS(t))&&(n&&(n+=" "),n+=e);return n}function ZS(...t){let e={...t[0]};for(let r=1;r<t.length;r++){let n=t[r];for(let s in n){let l=e[s],u=n[s];typeof l=="function"&&typeof u=="function"&&s[0]==="o"&&s[1]==="n"&&s.charCodeAt(2)>=65&&s.charCodeAt(2)<=90?e[s]=KS(l,u):(s==="className"||s==="UNSAFE_className")&&typeof l=="string"&&typeof u=="string"?e[s]=rI(l,u):s==="id"&&l&&u?e.id=ZM(l,u):e[s]=u!==void 0?u:l}}return e}function Bh(t){if(nI())t.focus({preventScroll:!0});else{let e=iI(t);t.focus(),sI(e)}}let hh=null;function nI(){if(hh==null){hh=!1;try{document.createElement("div").focus({get preventScroll(){return hh=!0,!0}})}catch{}}return hh}function iI(t){let e=t.parentNode,r=[],n=document.scrollingElement||document.documentElement;for(;e instanceof HTMLElement&&e!==n;)(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)&&r.push({element:e,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),e=e.parentNode;return n instanceof HTMLElement&&r.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),r}function sI(t){for(let{element:e,scrollTop:r,scrollLeft:n}of t)e.scrollTop=r,e.scrollLeft=n}function gp(t){var e;if(typeof window>"u"||window.navigator==null)return!1;let r=(e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands;return Array.isArray(r)&&r.some(n=>t.test(n.brand))||t.test(window.navigator.userAgent)}function hv(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function Wl(t){let e=null;return()=>(e==null&&(e=t()),e)}const Uh=Wl(function(){return hv(/^Mac/i)}),oI=Wl(function(){return hv(/^iPhone/i)}),JS=Wl(function(){return hv(/^iPad/i)||Uh()&&navigator.maxTouchPoints>1}),eb=Wl(function(){return oI()||JS()}),lI=Wl(function(){return gp(/AppleWebKit/i)&&!aI()}),aI=Wl(function(){return gp(/Chrome/i)}),tb=Wl(function(){return gp(/Android/i)}),uI=Wl(function(){return gp(/Firefox/i)});function Id(t,e,r=!0){var n,s;let{metaKey:l,ctrlKey:u,altKey:d,shiftKey:h}=e;uI()&&(!((s=window.event)===null||s===void 0||(n=s.type)===null||n===void 0)&&n.startsWith("key"))&&t.target==="_blank"&&(Uh()?l=!0:u=!0);let v=lI()&&Uh()&&!JS()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:l,ctrlKey:u,altKey:d,shiftKey:h}):new MouseEvent("click",{metaKey:l,ctrlKey:u,altKey:d,shiftKey:h,bubbles:!0,cancelable:!0});Id.isOpening=r,Bh(t),t.dispatchEvent(v),Id.isOpening=!1}Id.isOpening=!1;let Ll=new Map,Cg=new Set;function $0(){if(typeof window>"u")return;function t(n){return"propertyName"in n}let e=n=>{if(!t(n)||!n.target)return;let s=Ll.get(n.target);s||(s=new Set,Ll.set(n.target,s),n.target.addEventListener("transitioncancel",r,{once:!0})),s.add(n.propertyName)},r=n=>{if(!t(n)||!n.target)return;let s=Ll.get(n.target);if(s&&(s.delete(n.propertyName),s.size===0&&(n.target.removeEventListener("transitioncancel",r),Ll.delete(n.target)),Ll.size===0)){for(let l of Cg)l();Cg.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",r)}typeof document<"u"&&(document.readyState!=="loading"?$0():document.addEventListener("DOMContentLoaded",$0));function cI(){for(const[t]of Ll)"isConnected"in t&&!t.isConnected&&Ll.delete(t)}function dI(t){requestAnimationFrame(()=>{cI(),Ll.size===0?t():Cg.add(t)})}function rb(){let t=_.useRef(new Map),e=_.useCallback((s,l,u,d)=>{let h=d!=null&&d.once?(...v)=>{t.current.delete(u),u(...v)}:u;t.current.set(u,{type:l,eventTarget:s,fn:h,options:d}),s.addEventListener(l,h,d)},[]),r=_.useCallback((s,l,u,d)=>{var h;let v=((h=t.current.get(u))===null||h===void 0?void 0:h.fn)||u;s.removeEventListener(l,v,d),t.current.delete(u)},[]),n=_.useCallback(()=>{t.current.forEach((s,l)=>{r(s.eventTarget,s.type,l,s.options)})},[r]);return _.useEffect(()=>n,[n]),{addGlobalListener:e,removeGlobalListener:r,removeAllGlobalListeners:n}}function fI(t,e){GS(()=>{if(t&&t.ref&&e)return t.ref.current=e.current,()=>{t.ref&&(t.ref.current=null)}})}function hI(t){return t.pointerType===""&&t.isTrusted?!0:tb()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function pI(t){return!tb()&&t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"}const mI=typeof Element<"u"&&"checkVisibility"in Element.prototype;function gI(t){const e=Dh(t);if(!(t instanceof e.HTMLElement)&&!(t instanceof e.SVGElement))return!1;let{display:r,visibility:n}=t.style,s=r!=="none"&&n!=="hidden"&&n!=="collapse";if(s){const{getComputedStyle:l}=t.ownerDocument.defaultView;let{display:u,visibility:d}=l(t);s=u!=="none"&&d!=="hidden"&&d!=="collapse"}return s}function vI(t,e){return!t.hasAttribute("hidden")&&!t.hasAttribute("data-react-aria-prevent-focus")&&(t.nodeName==="DETAILS"&&e&&e.nodeName!=="SUMMARY"?t.hasAttribute("open"):!0)}function nb(t,e){return mI?t.checkVisibility({visibilityProperty:!0})&&!t.closest("[data-react-aria-prevent-focus]"):t.nodeName!=="#comment"&&gI(t)&&vI(t,e)&&(!t.parentElement||nb(t.parentElement,t))}const ib=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])',"permission"],yI=ib.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";ib.push('[tabindex]:not([tabindex="-1"]):not([disabled])');function wI(t){return t.matches(yI)&&nb(t)&&!xI(t)}function xI(t){let e=t;for(;e!=null;){if(e instanceof e.ownerDocument.defaultView.HTMLElement&&e.inert)return!0;e=e.parentElement}return!1}function SI(t){let e=t;return e.nativeEvent=t,e.isDefaultPrevented=()=>e.defaultPrevented,e.isPropagationStopped=()=>e.cancelBubble,e.persist=()=>{},e}function bI(t,e){Object.defineProperty(t,"target",{value:e}),Object.defineProperty(t,"currentTarget",{value:e})}function EI(t){for(;t&&!wI(t);)t=t.parentElement;let e=Dh(t),r=e.document.activeElement;if(!r||r===t)return;let n=!1,s=g=>{(g.target===r||n)&&g.stopImmediatePropagation()},l=g=>{(g.target===r||n)&&(g.stopImmediatePropagation(),!t&&!n&&(n=!0,Bh(r),h()))},u=g=>{(g.target===t||n)&&g.stopImmediatePropagation()},d=g=>{(g.target===t||n)&&(g.stopImmediatePropagation(),n||(n=!0,Bh(r),h()))};e.addEventListener("blur",s,!0),e.addEventListener("focusout",l,!0),e.addEventListener("focusin",d,!0),e.addEventListener("focus",u,!0);let h=()=>{cancelAnimationFrame(v),e.removeEventListener("blur",s,!0),e.removeEventListener("focusout",l,!0),e.removeEventListener("focusin",d,!0),e.removeEventListener("focus",u,!0),n=!1},v=requestAnimationFrame(h);return h}let Gu="default",kg="",kh=new WeakMap;function PI(t){if(eb()){if(Gu==="default"){const e=Il(t);kg=e.documentElement.style.webkitUserSelect,e.documentElement.style.webkitUserSelect="none"}Gu="disabled"}else if(t instanceof HTMLElement||t instanceof SVGElement){let e="userSelect"in t.style?"userSelect":"webkitUserSelect";kh.set(t,t.style[e]),t.style[e]="none"}}function N0(t){if(eb()){if(Gu!=="disabled")return;Gu="restoring",setTimeout(()=>{dI(()=>{if(Gu==="restoring"){const e=Il(t);e.documentElement.style.webkitUserSelect==="none"&&(e.documentElement.style.webkitUserSelect=kg||""),kg="",Gu="default"}})},300)}else if((t instanceof HTMLElement||t instanceof SVGElement)&&t&&kh.has(t)){let e=kh.get(t),r="userSelect"in t.style?"userSelect":"webkitUserSelect";t.style[r]==="none"&&(t.style[r]=e),t.getAttribute("style")===""&&t.removeAttribute("style"),kh.delete(t)}}const sb=ct.createContext({register:()=>{}});sb.displayName="PressResponderContext";function CI(t,e){return e.get?e.get.call(t):e.value}function ob(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function kI(t,e){var r=ob(t,e,"get");return CI(t,r)}function TI(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function RI(t,e,r){TI(t,e),e.set(t,r)}function _I(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function z0(t,e,r){var n=ob(t,e,"set");return _I(t,n,r),r}function jI(t){let e=_.useContext(sb);if(e){let{register:r,...n}=e;t=ZS(n,t),r()}return fI(e,t.ref),t}var ph=new WeakMap;class mh{continuePropagation(){z0(this,ph,!1)}get shouldStopPropagation(){return kI(this,ph)}constructor(e,r,n,s){RI(this,ph,{writable:!0,value:void 0}),z0(this,ph,!0);var l;let u=(l=s==null?void 0:s.target)!==null&&l!==void 0?l:n.currentTarget;const d=u==null?void 0:u.getBoundingClientRect();let h,v=0,g,w=null;n.clientX!=null&&n.clientY!=null&&(g=n.clientX,w=n.clientY),d&&(g!=null&&w!=null?(h=g-d.left,v=w-d.top):(h=d.width/2,v=d.height/2)),this.type=e,this.pointerType=r,this.target=n.currentTarget,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.x=h,this.y=v}}const F0=Symbol("linkClicked"),D0="react-aria-pressable-style",B0="data-react-aria-pressable";function OI(t){let{onPress:e,onPressChange:r,onPressStart:n,onPressEnd:s,onPressUp:l,onClick:u,isDisabled:d,isPressed:h,preventFocusOnPress:v,shouldCancelOnPointerExit:g,allowTextSelectionOnPress:w,ref:b,...R}=jI(t),[P,C]=_.useState(!1),j=_.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:O,removeAllGlobalListeners:L}=rb(),A=ka((H,Y)=>{let xe=j.current;if(d||xe.didFirePressStart)return!1;let te=!0;if(xe.isTriggeringEvent=!0,n){let Te=new mh("pressstart",Y,H);n(Te),te=Te.shouldStopPropagation}return r&&r(!0),xe.isTriggeringEvent=!1,xe.didFirePressStart=!0,C(!0),te}),F=ka((H,Y,xe=!0)=>{let te=j.current;if(!te.didFirePressStart)return!1;te.didFirePressStart=!1,te.isTriggeringEvent=!0;let Te=!0;if(s){let de=new mh("pressend",Y,H);s(de),Te=de.shouldStopPropagation}if(r&&r(!1),C(!1),e&&xe&&!d){let de=new mh("press",Y,H);e(de),Te&&(Te=de.shouldStopPropagation)}return te.isTriggeringEvent=!1,Te}),z=ka((H,Y)=>{let xe=j.current;if(d)return!1;if(l){xe.isTriggeringEvent=!0;let te=new mh("pressup",Y,H);return l(te),xe.isTriggeringEvent=!1,te.shouldStopPropagation}return!0}),B=ka(H=>{let Y=j.current;if(Y.isPressed&&Y.target){Y.didFirePressStart&&Y.pointerType!=null&&F(Ta(Y.target,H),Y.pointerType,!1),Y.isPressed=!1,Y.isOverTarget=!1,Y.activePointerId=null,Y.pointerType=null,L(),w||N0(Y.target);for(let xe of Y.disposables)xe();Y.disposables=[]}}),$=ka(H=>{g&&B(H)}),K=ka(H=>{d||u==null||u(H)}),fe=ka((H,Y)=>{if(!d&&u){let xe=new MouseEvent("click",H);bI(xe,Y),u(SI(xe))}}),J=_.useMemo(()=>{let H=j.current,Y={onKeyDown(te){if(Bm(te.nativeEvent,te.currentTarget)&&us(te.currentTarget,ki(te.nativeEvent))){var Te;U0(ki(te.nativeEvent),te.key)&&te.preventDefault();let de=!0;if(!H.isPressed&&!te.repeat){H.target=te.currentTarget,H.isPressed=!0,H.pointerType="keyboard",de=A(te,"keyboard");let je=te.currentTarget,ee=Q=>{Bm(Q,je)&&!Q.repeat&&us(je,ki(Q))&&H.target&&z(Ta(H.target,Q),"keyboard")};O(Il(te.currentTarget),"keyup",KS(ee,xe),!0)}de&&te.stopPropagation(),te.metaKey&&Uh()&&((Te=H.metaKeyEvents)===null||Te===void 0||Te.set(te.key,te.nativeEvent))}else te.key==="Meta"&&(H.metaKeyEvents=new Map)},onClick(te){if(!(te&&!us(te.currentTarget,ki(te.nativeEvent)))&&te&&te.button===0&&!H.isTriggeringEvent&&!Id.isOpening){let Te=!0;if(d&&te.preventDefault(),!H.ignoreEmulatedMouseEvents&&!H.isPressed&&(H.pointerType==="virtual"||hI(te.nativeEvent))){let de=A(te,"virtual"),je=z(te,"virtual"),ee=F(te,"virtual");K(te),Te=de&&je&&ee}else if(H.isPressed&&H.pointerType!=="keyboard"){let de=H.pointerType||te.nativeEvent.pointerType||"virtual",je=z(Ta(te.currentTarget,te),de),ee=F(Ta(te.currentTarget,te),de,!0);Te=je&&ee,H.isOverTarget=!1,K(te),B(te)}H.ignoreEmulatedMouseEvents=!1,Te&&te.stopPropagation()}}},xe=te=>{var Te;if(H.isPressed&&H.target&&Bm(te,H.target)){var de;U0(ki(te),te.key)&&te.preventDefault();let ee=ki(te),Q=us(H.target,ki(te));F(Ta(H.target,te),"keyboard",Q),Q&&fe(te,H.target),L(),te.key!=="Enter"&&pv(H.target)&&us(H.target,ee)&&!te[F0]&&(te[F0]=!0,Id(H.target,te,!1)),H.isPressed=!1,(de=H.metaKeyEvents)===null||de===void 0||de.delete(te.key)}else if(te.key==="Meta"&&(!((Te=H.metaKeyEvents)===null||Te===void 0)&&Te.size)){var je;let ee=H.metaKeyEvents;H.metaKeyEvents=void 0;for(let Q of ee.values())(je=H.target)===null||je===void 0||je.dispatchEvent(new KeyboardEvent("keyup",Q))}};if(typeof PointerEvent<"u"){Y.onPointerDown=de=>{if(de.button!==0||!us(de.currentTarget,ki(de.nativeEvent)))return;if(pI(de.nativeEvent)){H.pointerType="virtual";return}H.pointerType=de.pointerType;let je=!0;if(!H.isPressed){H.isPressed=!0,H.isOverTarget=!0,H.activePointerId=de.pointerId,H.target=de.currentTarget,w||PI(H.target),je=A(de,H.pointerType);let ee=ki(de.nativeEvent);"releasePointerCapture"in ee&&ee.releasePointerCapture(de.pointerId),O(Il(de.currentTarget),"pointerup",te,!1),O(Il(de.currentTarget),"pointercancel",Te,!1)}je&&de.stopPropagation()},Y.onMouseDown=de=>{if(us(de.currentTarget,ki(de.nativeEvent))&&de.button===0){if(v){let je=EI(de.target);je&&H.disposables.push(je)}de.stopPropagation()}},Y.onPointerUp=de=>{!us(de.currentTarget,ki(de.nativeEvent))||H.pointerType==="virtual"||de.button===0&&!H.isPressed&&z(de,H.pointerType||de.pointerType)},Y.onPointerEnter=de=>{de.pointerId===H.activePointerId&&H.target&&!H.isOverTarget&&H.pointerType!=null&&(H.isOverTarget=!0,A(Ta(H.target,de),H.pointerType))},Y.onPointerLeave=de=>{de.pointerId===H.activePointerId&&H.target&&H.isOverTarget&&H.pointerType!=null&&(H.isOverTarget=!1,F(Ta(H.target,de),H.pointerType,!1),$(de))};let te=de=>{if(de.pointerId===H.activePointerId&&H.isPressed&&de.button===0&&H.target){if(us(H.target,ki(de))&&H.pointerType!=null){let je=!1,ee=setTimeout(()=>{H.isPressed&&H.target instanceof HTMLElement&&(je?B(de):(Bh(H.target),H.target.click()))},80);O(de.currentTarget,"click",()=>je=!0,!0),H.disposables.push(()=>clearTimeout(ee))}else B(de);H.isOverTarget=!1}},Te=de=>{B(de)};Y.onDragStart=de=>{us(de.currentTarget,ki(de.nativeEvent))&&B(de)}}return Y},[O,d,v,L,w,B,$,F,A,z,K,fe]);return _.useEffect(()=>{if(!b)return;const H=Il(b.current);if(!H||!H.head||H.getElementById(D0))return;const Y=H.createElement("style");Y.id=D0,Y.textContent=`
@layer {
  [${B0}] {
    touch-action: pan-x pan-y pinch-zoom;
  }
}
    `.trim(),H.head.prepend(Y)},[b]),_.useEffect(()=>{let H=j.current;return()=>{var Y;w||N0((Y=H.target)!==null&&Y!==void 0?Y:void 0);for(let xe of H.disposables)xe();H.disposables=[]}},[w]),{isPressed:h||P,pressProps:ZS(R,J,{[B0]:!0})}}function pv(t){return t.tagName==="A"&&t.hasAttribute("href")}function Bm(t,e){const{key:r,code:n}=t,s=e,l=s.getAttribute("role");return(r==="Enter"||r===" "||r==="Spacebar"||n==="Space")&&!(s instanceof Dh(s).HTMLInputElement&&!lb(s,r)||s instanceof Dh(s).HTMLTextAreaElement||s.isContentEditable)&&!((l==="link"||!l&&pv(s))&&r!=="Enter")}function Ta(t,e){let r=e.clientX,n=e.clientY;return{currentTarget:t,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,clientX:r,clientY:n}}function LI(t){return t instanceof HTMLInputElement?!1:t instanceof HTMLButtonElement?t.type!=="submit"&&t.type!=="reset":!pv(t)}function U0(t,e){return t instanceof HTMLInputElement?!lb(t,e):LI(t)}const MI=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function lb(t,e){return t.type==="checkbox"||t.type==="radio"?e===" ":MI.has(t.type)}let Tg=!1,gh=0;function II(){Tg=!0,setTimeout(()=>{Tg=!1},50)}function H0(t){t.pointerType==="touch"&&II()}function AI(){if(!(typeof document>"u"))return gh===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",H0),gh++,()=>{gh--,!(gh>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",H0)}}function Um(t){let{onHoverStart:e,onHoverChange:r,onHoverEnd:n,isDisabled:s}=t,[l,u]=_.useState(!1),d=_.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;_.useEffect(AI,[]);let{addGlobalListener:h,removeAllGlobalListeners:v}=rb(),{hoverProps:g,triggerHoverEnd:w}=_.useMemo(()=>{let b=(C,j)=>{if(d.pointerType=j,s||j==="touch"||d.isHovered||!C.currentTarget.contains(C.target))return;d.isHovered=!0;let O=C.currentTarget;d.target=O,h(Il(C.target),"pointerover",L=>{d.isHovered&&d.target&&!us(d.target,L.target)&&R(L,L.pointerType)},{capture:!0}),e&&e({type:"hoverstart",target:O,pointerType:j}),r&&r(!0),u(!0)},R=(C,j)=>{let O=d.target;d.pointerType="",d.target=null,!(j==="touch"||!d.isHovered||!O)&&(d.isHovered=!1,v(),n&&n({type:"hoverend",target:O,pointerType:j}),r&&r(!1),u(!1))},P={};return typeof PointerEvent<"u"&&(P.onPointerEnter=C=>{Tg&&C.pointerType==="mouse"||b(C,C.pointerType)},P.onPointerLeave=C=>{!s&&C.currentTarget.contains(C.target)&&R(C,C.pointerType)}),{hoverProps:P,triggerHoverEnd:R}},[e,r,n,s,d,h,v]);return _.useEffect(()=>{s&&w({currentTarget:d.target},d.pointerType)},[s]),{hoverProps:g,isHovered:l}}var $I="Invariant failed";function ab(t,e){if(!t)throw new Error($I)}const mv=_.createContext(null);mv.displayName="Exhibition";function NI({store:t,children:e}){return k.jsx(mv.Provider,{value:t,children:e})}function zI(){const t=_.useContext(mv);return ab(t),Ri(t)}function ub(){const t=zI();return t.currentStep===-1?null:t.steps[t.currentStep]}function FI({vault:t,canvas:e,canvasIndex:r,objectLinks:n,firstStep:s,previousCanvasId:l,nextCanvasId:u}){var v,g,w;const d=[],h=e.annotations[0]?t.get(e.annotations[0]):null;for(const b of(h==null?void 0:h.items)||[]){const R=t.get(b),P=t.get(R.target);if(!P)continue;let C=null;if(P.type==="Canvas"){const L=An(R.target);(Fy(R.label)&&Fy(R.summary)||(v=L.selector)!=null&&v.spatial)&&d.push({label:R.label||null,summary:R.summary||null,region:An(R.target),body:t.get(R.body),objectLink:null,canvasId:e.id,annotationId:R.id,canvasIndex:r,highlight:null,previousCanvasId:l,nextCanvasId:u});continue}let j=null;if(P.body){const L=t.get(P.body);(w=(g=L[0])==null?void 0:g.service)!=null&&w[0]&&(j=L[0].service[0].id||L[0].service[0]["@id"])}P.type==="Canvas"&&(C=An(R.target)),P.type==="Annotation"&&(C=An(P.target));const O=j&&n.find(L=>L.service===j)||null;d.push({label:P.label||null,summary:P.summary||null,region:C,body:[],objectLink:O,canvasId:e.id,annotationId:P.id,canvasIndex:r,highlight:null,previousCanvasId:l,nextCanvasId:u})}return s&&d.unshift({label:e.label||null,summary:e.summary||null,region:null,objectLink:null,canvasId:e.id,body:[],canvasIndex:r,duration:e.duration,annotationId:null,highlight:null,previousCanvasId:l,nextCanvasId:u}),d}function cb(t){const{vault:e,manifest:r,canvases:n,objectLinks:s,timePerSlide:l=5e3,startCanvasIndex:u=0,firstStep:d=!1}=t,h=n||(r==null?void 0:r.items)||[],v=[];for(const[w,b]of h.entries()){const R=e.get(b),P=w>0&&r?r.items[w-1].id:null,C=r&&w<r.items.length-1?r.items[w+1].id:null;if(!R)continue;const j=FI({vault:e,canvas:R,canvasIndex:w,objectLinks:s,previousCanvasId:P,nextCanvasId:C,firstStep:d});v.push(...j)}const g=v.findIndex(w=>w.canvasIndex===u);return Va((w,b)=>{let R=null;const P=()=>{C()},C=()=>{R&&(clearTimeout(R),R=null);const O=()=>{b().nextStep(!0)},L=b().currentStep,A=b().steps[L+1];R=setTimeout(O,(A==null?void 0:A.duration)||l)},j=()=>{R&&(clearTimeout(R),R=null)};return{currentStep:g||0,steps:v,isPlaying:!1,play(){P(),w({isPlaying:!0})},pause(){j(),w({isPlaying:!1})},playPause(){const O=b().isPlaying;O?j():P(),w({isPlaying:!O})},nextStep(O=!1){const L=b().currentStep;L<b().steps.length-1?w({currentStep:L+1}):O&&w({currentStep:0}),b().isPlaying&&C()},previousStep(){const O=b().currentStep;O>-1&&(b().isPlaying&&j(),w({currentStep:O-1,isPlaying:!1}))},goToStep(O){O>=-1&&O<b().steps.length&&w({currentStep:O})},goToCanvasIndex(O){const L=b().steps.findIndex(A=>A.canvasIndex===O);L!==-1&&w({currentStep:L})}}})}function db(){const t=Yr(),e=Kr();return _.useMemo(()=>t!=null&&t.annotations[0]?e.get(t.annotations[0]).items.map(n=>{const s=e.get(n),l=e.get(s.target);return!l||l.type!=="Canvas"?null:An(s.target)}).filter(Boolean):[],[t,e])}function vp({fill:t}){return k.jsx("svg",{width:20,height:20,version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16.5 16.5",xmlSpace:"preserve",children:k.jsx("polygon",{points:"14.8,0 8.2,6.6 1.7,0 0,1.7 6.6,8.2 0,14.8 1.7,16.5 8.2,9.9 14.8,16.5 16.5,14.8 9.9,8.2 16.5,1.7",fill:t||"#000"})})}function fb(t,e){const r=oc(),n=t.behavior||[],s=n.includes("left"),l=n.includes("right"),u=n.includes("bottom"),d=(e==null?void 0:e.canvasId)===t.id,h=e==null?void 0:e.region,v=h?e==null?void 0:e.body.filter(C=>C.type==="TextualBody"):[],g=!!(t.summary&&(s||l||u))||d&&h&&e.label||h&&v.length>0,w=h?e==null?void 0:e.label:t.label,b=h?e==null?void 0:e.summary:t.summary,R=!(w&&b),P=R?(e==null?void 0:e.body.length)===1?(e==null?void 0:e.body)||[]:e==null?void 0:e.body.filter(C=>C.language===r):[];return{isActive:d,label:w,summary:b,showSummary:g,showBody:R,toShow:P}}function DI({canvas:t,step:e,stepIndex:r,index:n,goToStep:s,hoverProps:l}){const{label:u,summary:d,showBody:h,toShow:v}=fb(t,e),g=_.useRef(null);return _.useEffect(()=>{n===r&&g.current&&g.current.scrollIntoView({behavior:"smooth",block:"center"})},[n,r]),k.jsxs("div",{"data-step-id":n,ref:g,...l,className:"mb-2 cursor-pointer",onClick:()=>s(n),children:[k.jsx(Lt,{as:"h3",className:Tr("text-semibold hover:hover:underline",n===r?"text-yellow-400":"text-white"),children:u}),k.jsx(Lt,{as:"div",className:"whitespace-pre-wrap text-sm text-white/50",enableDangerouslySetInnerHTML:!0,children:d}),h&&v?(v||[]).map((w,b)=>w.type==="TextualBody"?k.jsx("div",{className:Tr("prose-sm exhibition-html text-white","text-semibold hover:hover:underline",n===r?"prose-headings:text-yellow-400":"text-white"),children:k.jsx(Lt,{enableDangerouslySetInnerHTML:!0,children:w.value})},b):null):null]})}function BI({cover:t,autoPlay:e=!1,objectLinks:r,alternativeMode:n}){const[s,l]=_.useState(!1),u=Kr(),d=Yr(),h=db(),v=_.useMemo(()=>cb({vault:u,canvases:[d],objectLinks:r,firstStep:!1}),[u,d]),g=d!=null&&d.items[0]?u.get(d.items[0]):null,w=((g==null?void 0:g.items.length)||0)>1,{currentStep:b,goToStep:R,isPlaying:P,nextStep:C,pause:j,play:O,playPause:L,previousStep:A,steps:F}=Ri(v),z=b===-1?null:F[b];_.useEffect(()=>{s&&e&&O(),s||(R(-1),j())},[s,e]),_.useEffect(()=>{$(null)},[z]);const[B,$]=_.useState(null),{hoverProps:K}=Um({onHoverStart:ee=>{const Q=ee.target.dataset.stepId;if(typeof Q<"u"&&Q!==""){const ue=Number.parseInt(Q,10);$(ue)}},onHoverEnd:()=>{$(null)}}),{hoverProps:fe}=Um({onHoverStart:()=>{b!==-1&&F[b+1]&&$(b+1)},onHoverEnd:()=>{$(null)}}),{hoverProps:J}=Um({onHoverStart:()=>{b!==0&&F[b-1]&&$(b-1)},onHoverEnd:()=>{$(null)}}),H=_.useRef(null),[Y,xe]=_.useState(!1),te=_.useMemo(()=>["default-preset",{runtimeOptions:{visibilityRatio:.5,maxOverZoom:3},interactive:s}],[s]),Te=b!==-1,de=b;ab(d),_.useLayoutEffect(()=>{var ee,Q,ue,U,oe,_e,Me,Ne;H.current&&Y&&z&&(((Q=(ee=z==null?void 0:z.region)==null?void 0:ee.selector)==null?void 0:Q.type)==="BoxSelector"||((U=(ue=z==null?void 0:z.region)==null?void 0:ue.selector)==null?void 0:U.type)==="SvgSelector"?H.current.runtime.world.gotoRegion({...(_e=(oe=z.region)==null?void 0:oe.selector)==null?void 0:_e.spatial,padding:50}):z&&((Me=H.current)==null||Me.runtime.world.goHome())),b===-1&&((Ne=H.current)==null||Ne.runtime.world.goHome())},[z,b,Y]);const je=_.useMemo(()=>r.length===1?r[0]:null,[r,de,Te]);return k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"exhibition-canvas-panel z-10 h-full bg-[#373737]",onClick:()=>l(!0),children:k.jsx(Rr.Viewer,{containerStyle:{height:"100%",pointerEvents:s?void 0:"none"},renderPreset:te,homeOnResize:!0,homeCover:t||!w,onCreated:ee=>{const Q=ee.runtime.registerHook("useAfterFrame",()=>{var oe;const ue=ee.renderer.renderers,U=(oe=ue[0])!=null&&oe.canvas?ue[0]:null;U||(xe(!0),Q()),U.isReady()&&(ee.runtime.updateNextFrame(),setTimeout(()=>{xe(!0)},300),Q())});setTimeout(()=>ee.runtime.updateNextFrame(),1e3)},children:k.jsx(Rr.RenderCanvas,{strategies:["images"],enableSizes:!1,children:h.length>1?null:h.map((ee,Q)=>{var U;const ue=(U=ee==null?void 0:ee.selector)==null?void 0:U.spatial;return ue?k.jsx("box",{target:ue,relativeStyle:!0,html:!0,style:{border:"2px dashed red"}},Q):null})})})}),k.jsx("div",{className:"absolute bottom-4 left-0 right-0 z-20 text-center font-mono text-sm text-white",children:k.jsx(Lt,{children:d.label})}),k.jsxs(Fs,{className:"relative z-50",open:s,onClose:()=>l(!1),children:[k.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),k.jsxs("div",{className:"safe-inset fill-height fixed inset-0 z-20 flex w-screen items-center md:p-4",children:[k.jsx("button",{className:"absolute right-4 top-4 z-20 flex  h-16 w-16 items-center justify-center bg-black hover:bg-gray-900",onClick:()=>l(!1),children:k.jsx(vp,{fill:"#fff"})}),k.jsxs(Fs.Panel,{className:"relative z-10 flex h-full w-full flex-col justify-center overflow-y-auto overflow-x-hidden bg-black md:rounded lg:flex-row",children:[k.jsx("div",{className:"flex-shink-0 sticky top-0 z-20 min-h-0 flex-1 bg-[#373737] lg:relative lg:order-2 lg:min-w-0",children:s?k.jsx(Rr.Viewer,{onCreated:ee=>void(H.current=ee),containerStyle:{height:"100%",minHeight:0},renderPreset:te,children:k.jsxs(Rr.RenderCanvas,{strategies:["images"],enableSizes:!1,children:[h.map((ee,Q)=>{var U;const ue=(U=ee==null?void 0:ee.selector)==null?void 0:U.spatial;return ue?k.jsx("box",{target:ue,relativeStyle:!0,html:!0,style:{border:"2px dashed red"}},Q):null}),F.map((ee,Q)=>{var ue,U;if(ee.region&&((ue=ee.region.selector)!=null&&ue.spatial)){const oe=(U=ee.region.selector)==null?void 0:U.spatial;if(oe.x===0&&oe.y===0&&oe.width===(d==null?void 0:d.width)&&oe.height===(d==null?void 0:d.height))return null;const _e=B===Q;return k.jsx("box",{target:ee.region.selector.spatial,relativeStyle:!0,onClick:Me=>{Me.preventDefault(),Me.stopPropagation(),R(Q)},html:!0,style:_e?{background:"rgba(255, 255, 255, .5)",outline:"2px solid rgb(250, 204, 21)",outlineOffset:"4px"}:{background:"rgba(255, 255, 255, 0)",outline:"2px solid transparent",outlineOffset:"4px",":hover":{outline:"2px solid rgb(250, 204, 21)"}}},`hover-overlays-${Q}`)}return null})]})}):null}),n?k.jsxs("div",{className:"z-10 max-h-[40vh] w-full overflow-y-auto text-white lg:order-1 lg:max-h-[100vh] lg:max-w-md",children:[d.label||d.summary?k.jsx("div",{className:"mb-4 bg-black px-8",children:k.jsxs("div",{children:[k.jsx(Lt,{as:"h2",className:"sticky top-0 bg-black pb-4 pt-6 font-mono uppercase",children:d.label}),k.jsx(Lt,{className:"whitespace-pre-wrap",enableDangerouslySetInnerHTML:!0,children:d.summary})]})}):null,F.length>1?k.jsxs("div",{className:"flex flex-col gap-2 bg-black px-8 pb-8",children:[k.jsx("h3",{className:"sticky top-0 bg-black pb-4 pt-6 font-mono uppercase",children:"Annotations"}),F.map((ee,Q)=>k.jsx(DI,{canvas:d,goToStep:R,hoverProps:K,index:Q,step:ee,stepIndex:de},`step-${Q}`))]}):null]}):k.jsxs("footer",{className:"background-black flex flex-col items-center gap-8 p-8 text-white md:min-h-32 md:flex-row",children:[k.jsx("div",{className:"flex-1",children:Te&&z?k.jsxs("div",{children:[k.jsx(Lt,{children:z.label}),k.jsx(Lt,{enableDangerouslySetInnerHTML:!0,className:"whitespace-pre-wrap",children:z.summary})]}):k.jsxs("div",{children:[k.jsx(Lt,{children:d.label}),k.jsx(Lt,{enableDangerouslySetInnerHTML:!0,className:"whitespace-pre-wrap",children:d.summary})]})}),!Te&&je?je.component:null,Te&&z&&z.objectLink?z.objectLink.component:null,k.jsx("div",{className:"px-4",children:Te&&z?k.jsxs("div",{children:[k.jsxs("div",{className:"mb-2 font-mono",children:[de+1," / ",F.length]}),k.jsxs("div",{className:"relative h-2 w-16",children:[k.jsx("div",{className:"absolute inset-0 bg-gray-800"}),k.jsx("div",{className:"absolute inset-0 bg-slate-100",style:{width:`${(de+1)/F.length*100}%`}})]})]}):null}),k.jsx("div",{children:b!==-1?k.jsxs("div",{className:"flex gap-3",children:[k.jsxs("button",{...J,className:"flex items-center gap-2 font-mono underline underline-offset-4",onClick:()=>A(),children:[k.jsx("svg",{className:"",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:k.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",fill:"#fff"})}),de>0?"Previous":"End tour"]}),k.jsxs("button",{...fe,className:"flex items-center gap-2 font-mono underline underline-offset-4",onClick:()=>{de+1<F.length?C():R(-1)},children:[de+1<F.length?"Next":"End tour",k.jsx("svg",{className:"rotate-180",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:k.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",fill:"#fff"})})]})]}):F.length>0&&k.jsx("button",{className:"font-mono underline underline-offset-4",onClick:()=>C(),children:"Start tour"})})]})]})]})]})]})}function UI({canvasId:t,cover:e,index:r,autoPlay:n,objectLinks:s,alternativeMode:l}){const u=k.jsx(Ds,{canvas:t,children:k.jsx(BI,{cover:e,objectLinks:s,autoPlay:n,alternativeMode:l})},t);return r<3?k.jsx("div",{className:"relative h-full w-full bg-[#373737]",children:u}):k.jsx("div",{className:"relative h-full w-full bg-[#373737]",children:k.jsx(av.LazyLoadComponent,{placeholder:k.jsx("div",{}),visibleByDefault:!1,threshold:300,children:u})})}function HI({index:t,canvas:e,id:r,objectLinks:n,autoPlay:s,alternativeMode:l,scrollEnabled:u}){const d=e.behavior||[],h=d.includes("left"),v=d.includes("right"),g=d.includes("bottom"),w=d.includes("cover"),b=!!(e.summary&&(h||v||g)),R=dv(d),P=k.jsx(_.Suspense,{fallback:k.jsx("div",{className:"h-full w-full"}),children:k.jsx(UI,{canvasId:e.id,cover:w,index:t,objectLinks:n,autoPlay:s,alternativeMode:l})});return k.jsx(fv,{id:r||`${t}`,enabled:u,className:Tr(R,"cut-corners relative",!b&&"aspect-square lg:aspect-auto"),children:b?k.jsxs("div",{className:Tr("h-full md:flex",h&&"flex-row-reverse",g&&"flex-col"),children:[k.jsx("div",{className:Tr("cut-corners flex-1 md:w-2/3",g&&"w-full md:w-full","aspect-square md:aspect-auto"),children:P}),k.jsxs("div",{className:Tr("cut-corners flex flex-col bg-black p-5 text-white md:w-1/3",g&&"w-full md:w-full"),children:[k.jsx("div",{className:Tr("mb-4",h&&"place-self-end md:rotate-180"),children:k.jsxs("svg",{className:Tr(g?"rotate-90":"rotate-90 md:rotate-0"),xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[k.jsx("title",{children:"arrow"}),k.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",fill:"#fff"})]})}),k.jsx("div",{className:"text-m mb-4 font-mono uppercase",children:k.jsx(Lt,{children:e.label})}),k.jsxs("div",{className:"exhibition-info-block",children:[k.jsx("div",{children:k.jsx(Lt,{enableDangerouslySetInnerHTML:!0,className:"whitespace-pre-wrap",children:e.summary})}),e.requiredStatement&&k.jsx("div",{className:"",children:k.jsx(Lt,{children:e.requiredStatement.value})})]})]})]}):P})}function hb(t,e){var s;if(t.length===1)return t;const r=t.filter(l=>Object.keys(l.text).includes(e));if(r.length)return r;const n=Object.keys(((s=t[0])==null?void 0:s.text)||{})[0];return n?t.filter(l=>Object.keys(l.text).includes(n)):t}function pb(){const t=Yr(),e=Kr(),r=oc();if(!t)return null;const n=e.get(t.annotations||[]),s=e.get(n.flatMap(l=>l.items||[]));if(!s.length){const l=t.items[0]?e.get(t.items[0]):null;if(l!=null&&l.items.length)s.push(...e.get(l.items));else return null}return k.jsx("article",{className:"prose prose-lg h-fit max-w-2xl leading-snug md:leading-normal",children:s.map(l=>{const u=e.get(Array.isArray(l.body)?l.body:[l.body]);return(u.length===1?u:u.filter(h=>h.language===r)).map((h,v)=>k.jsx(Lt,{className:"mb-3",enableDangerouslySetInnerHTML:!0,children:h.value},l.id+v))})})}function WI(t){return k.jsx(Ds,{canvas:t.canvasId,children:k.jsx(pb,{})})}function VI(){const[t,e]=_.useState(!1);return k.jsxs(k.Fragment,{children:[k.jsxs(Fs,{className:"relative z-50",open:t,onClose:()=>e(!1),children:[k.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),k.jsxs("div",{className:"mobile-height fixed inset-0 flex w-screen items-center p-4",children:[k.jsx("button",{className:"absolute right-8 top-8 z-10 flex h-8 w-8 items-center justify-center rounded hover:bg-slate-100",onClick:()=>e(!1),children:k.jsx(vp,{})}),k.jsx(Fs.Panel,{className:"relative flex h-full w-full justify-center overflow-y-auto overflow-x-hidden rounded bg-white",children:k.jsx(pb,{})})]})]}),k.jsx("button",{onClick:()=>e(!0),className:"underline underline-offset-4",children:k.jsx(Lt,{children:"Read more"})})]})}function QI(t){return k.jsx(Ds,{canvas:t.canvasId,children:k.jsx(VI,{})})}function qI({id:t,index:e,canvas:r,strategy:n,firstInfo:s,scrollEnabled:l}){const u=dv(r.behavior,s),d=oc(),h=hb(n.items,d),v=Kr(),g=v.get(r.annotations||[]),w=v.get(g.flatMap(b=>b.items||[]));return k.jsx(fv,{enabled:l,updatesTitle:!!r.label,id:t||`${e}`,className:Tr("cut-corners bg-black p-6 text-white",u),children:k.jsxs("div",{className:"exhibition-info-block",children:[r.label?k.jsx("div",{className:"text-m mb-4 font-mono uppercase",children:k.jsx(Lt,{children:r.label})}):"",h.map((b,R)=>k.jsx(Lt,{enableDangerouslySetInnerHTML:!0,className:"mb-3",children:b.text},R)),w.length?k.jsx(_.Suspense,{fallback:k.jsx("div",{className:"underline underline-offset-4",children:k.jsx(Lt,{children:"Read more"})}),children:k.jsx(QI,{canvasId:r.id})}):""]})})}function GI(){return typeof window<"u"?window.location.host:""}const KI=_.lazy(()=>jh(()=>import("./IIIFMediaPlayer-oDb2GyZI.js").then(t=>t.E),__vite__mapDeps([0,1])));function YI(t){const[e,r]=_.useState(!1),n=dv(t.canvas.behavior),s=hp({width:1024,height:1024}),l=t.strategy.media,u=l.annotation;return k.jsxs(fv,{id:t.id||`${t.index}`,enabled:t.scrollEnabled,className:Tr("cut-corners bg-black text-white",n),children:[k.jsx("img",{className:"h-full w-full object-cover",src:s==null?void 0:s.id,alt:"",onClick:()=>r(!0)}),k.jsxs(Fs,{className:"relative z-50",open:e,onClose:()=>r(!1),children:[k.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),k.jsxs("div",{className:"mobile-height fixed inset-0 flex w-screen items-center p-4",children:[k.jsx("button",{className:"absolute right-6 top-6 z-20 flex h-16 w-16 items-center justify-center rounded bg-black hover:bg-slate-900",onClick:()=>r(!1),children:k.jsx(vp,{fill:"#fff"})}),k.jsxs(Fs.Panel,{className:"relative flex h-full w-full flex-col justify-center overflow-y-auto overflow-x-hidden rounded bg-black",children:[k.jsx("div",{className:"relative h-full w-full flex-1",children:l.type==="VideoYouTube"?k.jsx("iframe",{title:"YouTube video player",className:"h-full w-full border-none object-cover",src:`https://www.youtube.com/embed/${l.youTubeId}?enablejsapi=1&origin=${GI()}&autoplay=1&modestbranding=1&rel=0`,referrerPolicy:"no-referrer",sandbox:"allow-scripts allow-same-origin allow-presentation"}):k.jsx(_.Suspense,{children:k.jsx(KI,{className:"absolute bottom-0 left-0 right-0 top-0 z-10",media:{duration:l.duration,format:"video/mp4",url:l.url}})})}),u!=null&&u.label||u!=null&&u.summary?k.jsxs("div",{className:"p-8 text-white",children:[u!=null&&u.label?k.jsx("h3",{className:"mb-2 uppercase",children:k.jsx(Lt,{children:u.label})}):null,k.jsx("p",{children:u!=null&&u.summary?k.jsx(Lt,{children:u.summary}):null})]}):null]})]})]})]})}function XI(t){return k.jsx(Ds,{canvas:t.canvas.id,children:k.jsx(YI,{...t})},t.canvas.id)}var Hm,W0;function ZI(){if(W0)return Hm;W0=1;var t="Expected a function",e=NaN,r="[object Symbol]",n=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt,h=typeof Gf=="object"&&Gf&&Gf.Object===Object&&Gf,v=typeof self=="object"&&self&&self.Object===Object&&self,g=h||v||Function("return this")(),w=Object.prototype,b=w.toString,R=Math.max,P=Math.min,C=function(){return g.Date.now()};function j(z,B,$){var K,fe,J,H,Y,xe,te=0,Te=!1,de=!1,je=!0;if(typeof z!="function")throw new TypeError(t);B=F(B)||0,O($)&&(Te=!!$.leading,de="maxWait"in $,J=de?R(F($.maxWait)||0,B):J,je="trailing"in $?!!$.trailing:je);function ee(Qe){var nt=K,ft=fe;return K=fe=void 0,te=Qe,H=z.apply(ft,nt),H}function Q(Qe){return te=Qe,Y=setTimeout(oe,B),Te?ee(Qe):H}function ue(Qe){var nt=Qe-xe,ft=Qe-te,Ct=B-nt;return de?P(Ct,J-ft):Ct}function U(Qe){var nt=Qe-xe,ft=Qe-te;return xe===void 0||nt>=B||nt<0||de&&ft>=J}function oe(){var Qe=C();if(U(Qe))return _e(Qe);Y=setTimeout(oe,ue(Qe))}function _e(Qe){return Y=void 0,je&&K?ee(Qe):(K=fe=void 0,H)}function Me(){Y!==void 0&&clearTimeout(Y),te=0,K=xe=fe=Y=void 0}function Ne(){return Y===void 0?H:_e(C())}function Ke(){var Qe=C(),nt=U(Qe);if(K=arguments,fe=this,xe=Qe,nt){if(Y===void 0)return Q(xe);if(de)return Y=setTimeout(oe,B),ee(xe)}return Y===void 0&&(Y=setTimeout(oe,B)),H}return Ke.cancel=Me,Ke.flush=Ne,Ke}function O(z){var B=typeof z;return!!z&&(B=="object"||B=="function")}function L(z){return!!z&&typeof z=="object"}function A(z){return typeof z=="symbol"||L(z)&&b.call(z)==r}function F(z){if(typeof z=="number")return z;if(A(z))return e;if(O(z)){var B=typeof z.valueOf=="function"?z.valueOf():z;z=O(B)?B+"":B}if(typeof z!="string")return z===0?z:+z;z=z.replace(n,"");var $=l.test(z);return $||u.test(z)?d(z.slice(2),$?2:8):s.test(z)?e:+z}return Hm=j,Hm}ZI();var JI=typeof window<"u"?_.useLayoutEffect:_.useEffect,eA=typeof window>"u";function tA(t,{defaultValue:e=!1,initializeWithValue:r=!0}={}){const n=d=>eA?e:window.matchMedia(d).matches,[s,l]=_.useState(()=>r?n(t):e);function u(){l(n(t))}return JI(()=>{const d=window.matchMedia(t);return u(),d.addListener?d.addListener(u):d.addEventListener("change",u),()=>{d.removeListener?d.removeListener(u):d.removeEventListener("change",u)}},[t]),s}function rA({title:t,withColor:e,...r}){const n=_.useId();return k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",id:"b",viewBox:"0 0 90.63 81.07",width:"1em",height:"1em","aria-labelledby":n,...r,children:[k.jsx("title",{id:n,children:t}),k.jsx("g",{id:"c",children:k.jsx("path",{d:"m1.6 27.71 17.39 6.46-.03 46.53L1.6 74.3V27.71zM19.7 16.41c1.99 5.9-.65 10.68-5.9 10.68S2.66 22.31.67 16.41c-1.99-5.9.65-10.68 5.9-10.68S17.7 10.51 19.7 16.41ZM41.11 27.71l-17.39 6.46.03 46.53 17.36-6.4V27.71zM22.9 16.41c-1.99 5.9.65 10.68 5.9 10.68s11.13-4.78 13.13-10.68c1.99-5.9-.65-10.68-5.9-10.68S24.9 10.51 22.9 16.41ZM45.56 27.71l17.39 6.46-.03 46.53-17.36-6.4V27.71zM63.77 16.41c1.99 5.9-.65 10.68-5.9 10.68s-11.13-4.78-13.13-10.68c-1.99-5.9.65-10.68 5.9-10.68s11.13 4.78 13.13 10.68ZM90.63 0v15.98s-5.63-2.2-6.31 3.49c-.06 6.06 0 8.24 0 8.24l6.31-2.05v14.02l-6.33 2.27v32.7L67 81.08V23.27S66.63 2.45 90.64 0Z",fill:"currentColor"})})]})}function V0({items:t,treeLabel:e}){const r=Vs(),[n]=mp(),s=n?Number.parseInt(n,10):null;return k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"mb-3 flex flex-col gap-4",children:[k.jsxs("div",{className:"flex",children:[k.jsx(Lt,{className:"text-2xl uppercase mb-4 flex-1",children:r==null?void 0:r.label}),k.jsxs("a",{href:`${r==null?void 0:r.id}?manifest=${r==null?void 0:r.id}`,target:"_blank",className:"",title:"Drag and Drop IIIF Resource",rel:"noreferrer",children:[k.jsx(rA,{className:"text-xl text-white/50 hover:text-white",title:"Open IIIF Manifest"}),k.jsx("span",{className:"sr-only",children:"Open IIIF Manifest"})]})]}),e?k.jsx(Lt,{className:"text-lg",children:e}):null]}),k.jsx("ol",{className:"list-decimal flex flex-col gap-2 font-mono",children:t.map((l,u)=>l.label?k.jsx("li",{className:"marker:text-white/40",children:k.jsx(Lt,{as:"a",className:Tr("text-md hover:underline",s===u?"underline":""),href:`#${u}`,children:l.label})},`toc_entry_${u}`):null)})]})}function nA(){return k.jsxs("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("path",{d:"M16 12H3"}),k.jsx("path",{d:"M16 18H3"}),k.jsx("path",{d:"M16 6H3"}),k.jsx("path",{d:"M21 12h.01"}),k.jsx("path",{d:"M21 18h.01"}),k.jsx("path",{d:"M21 6h.01"})]})}function mb(t){return k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...t,children:[k.jsx("title",{children:"play"}),k.jsx("path",{fill:"currentColor",d:"M8 19V5l11 7z"})]})}function iA(){return k.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"0.8em",width:"0.8em",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("path",{d:"M4 21.25a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H4.75a.75.75 0 0 1-.75-.75ZM5.22 9.53a.749.749 0 0 1 0-1.06l6.25-6.25a.749.749 0 0 1 1.06 0l6.25 6.25a.749.749 0 1 1-1.06 1.06l-4.97-4.969V16.75a.75.75 0 0 1-1.5 0V4.561L6.28 9.53a.749.749 0 0 1-1.06 0Z"})})}function gb({initialOpen:t=!1,hideInitial:e=!1,fixed:r=!1,content:n,onPlay:s,children:l}){const[u]=mp(()=>{O(!1)}),d=Vs(),h=Kr(),v=_.useMemo(()=>z2(h),[h]),g=Nn((A,F)=>F.get(((d==null?void 0:d.structures)||[])[0])),w=Nn((A,F)=>F.get((d==null?void 0:d.items)||[])),b=_.useMemo(()=>v.rangeToTableOfContentsTree(g),[g,v]),R=(b==null?void 0:b.items)||w||[],P=u?Number.parseInt(u,10):null,C=P?R[P]:null,[j,O]=_.useState(t),L=OI({onPress:()=>{O(A=>!A)}});return k.jsxs("div",{className:"relative",children:[!r&&j?k.jsx("div",{className:"absolute bottom-0 z-30 mb-14 px-14 py-4 text-white overflow-y-auto bg-[#6d6e70] left-0 right-0",children:k.jsx(V0,{items:R,treeLabel:b==null?void 0:b.label})}):null,k.jsx("div",{className:Tr("z-30 h-14 flex items-center flex-col justify-center bg-[#6d6e70]","transition-opacity drop-shadow-lg px-4",r&&"fixed bottom-0 left-0 right-0 px-4 lg:px-9",C||!e?"pointer-events-auto opacity-1":"pointer-events-none opacity-0"),children:k.jsx("div",{className:"relative z-30 w-full max-w-screen-xl px-5 lg:px-10",children:k.jsxs("div",{className:"flex flex-row items-center justify-between gap-2 text-lg font-medium text-white sm:text-2xl font-mono",children:[k.jsx("div",{className:"my-2 font-light flex-1 min-w-0",children:k.jsx("button",{className:"z-50 uppercase text-white overflow-ellipsis overflow-hidden whitespace-nowrap max-w-full","aria-label":`${j?"Hide":"Show"} table of contents`,...L.pressProps,children:C!=null&&C.label?k.jsx(Lt,{children:C==null?void 0:C.label}):k.jsx(Lt,{children:n.tableOfContents})})}),k.jsxs("div",{className:"flex flex-row items-center gap-2 text-3xl flex-shrink-0",children:[k.jsx("button",{className:"z-50 hover:bg-black/10 w-10 h-10 rounded flex items-center justify-center",...L.pressProps,"aria-label":`${j?"Hide":"Show"} table of contents`,children:k.jsx(nA,{})}),l]})]})})}),r?k.jsx(Fs,{className:Tr("z-40 flex max-h-[90vh] flex-row content-center justify-center bg-[#6d6e70] px-4",r?"fixed bottom-[3.5rem] left-0 right-0 ":"absolute bottom-0","transition-all duration-300 ease-in-out transform origin-bottom",j?"opacity-1 scale-100":"opacity-0 scale-95"),open:j,onClose:()=>O(!1),children:k.jsx(Fs.Panel,{className:"z-40 flex w-full max-w-screen-xl flex-col px-10 py-6 text-white border-b overflow-y-auto border-[#5A5B5D]",children:k.jsx(V0,{treeLabel:b==null?void 0:b.label,items:R})})}):null]})}function sA({label:t,content:e}){return k.jsx("div",{className:"col-span-12 w-full px-5 pb-8 text-black scroll-m-9",id:"top",children:k.jsxs("div",{className:"flex flex-col gap-5",children:[k.jsx("div",{className:"flex flex-row justify-between",children:k.jsx("div",{className:"text-xl uppercase",children:e.exhibition})}),k.jsx("div",{className:"flex flex-row justify-between",children:k.jsx("h2",{className:"text-4xl font-light",children:k.jsx(Lt,{children:t})})})]})})}const oA=_.lazy(()=>jh(()=>Promise.resolve().then(()=>vA),void 0));function lA(t){var g,w,b;const e=_.useRef(null),[r,n]=_.useState(!1),s=Ud(),l=tA("(min-width: 1200px)"),u=Fg(),{cutCorners:d=!1,fullTitleBar:h=!1,alternativeImageMode:v=!0}=t.options||{};return(g=t.manifest)!=null&&g.id&&!s.requestStatus(t.manifest.id)&&s.loadSync(t.manifest.id,JSON.parse(JSON.stringify(t.manifest))),k.jsx(Bd,{vault:s,children:k.jsx(ev,{manifest:t.manifest.id,children:k.jsxs(CS,{language:t.language||"en",children:[k.jsxs(Fs,{className:"relative z-50",open:r,onClose:()=>n(!1),children:[k.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),k.jsxs("div",{className:"mobile-height fixed inset-0 flex w-screen items-center lg:p-4",children:[k.jsx("button",{className:"absolute top-3 right-3 lg:right-8 lg:top-8 z-30 flex h-8 w-8 items-center justify-center rounded bg-black text-white hover:bg-slate-700",onClick:()=>n(!1),children:k.jsx(vp,{fill:"currentColor"})}),k.jsx(Fs.Panel,{className:"relative flex h-full w-full justify-center overflow-y-auto overflow-x-hidden rounded bg-white",children:r?k.jsx(_.Suspense,{children:k.jsx(oA,{...t,options:{autoPlay:!0}})}):null})]})]}),k.jsx(sA,{label:t.manifest.label,content:{exhibition:((w=t.content)==null?void 0:w.exhibition)||"Exhibition"}}),k.jsxs(gb,{fixed:!0,content:{tableOfContents:((b=t.content)==null?void 0:b.tableOfContents)||"Table of Contents"},onPlay:()=>n(!0),children:[k.jsx("a",{href:"#top","aria-label":"Back to top",className:"z-50 hover:bg-black/10 w-10 h-10 rounded flex items-center justify-center",children:k.jsx(iA,{})}),k.jsxs("button",{className:"z-50 hover:bg-black/10 w-10 h-10 rounded flex items-center justify-center",onClick:()=>n(!0),"aria-label":"Play",children:[k.jsx("span",{className:"sr-only",children:"Play"}),k.jsx(mb,{})]})]}),k.jsx("div",{ref:e,"data-cut-corners-enabled":d,children:k.jsx("div",{className:Tr("delft-exhibition-viewer slides mb-12 auto-rows-auto grid-cols-12 content-center justify-center lg:grid",r?"opacity-0":""),children:(t.manifest.items||[]).map((R,P)=>{if(!R)return null;try{const C=u.getPaintables(R),j=Gg({canvas:R,loadImageService:L=>L,paintables:C,supports:["empty","images","media","video","3d-model","textual-content","complex-timeline"]}),O=t.viewObjectLinks.filter(L=>L.canvasId===R.id);return j.type==="textual-content"?k.jsx(qI,{scrollEnabled:!r,index:P,firstInfo:h&&P===1,canvas:R,strategy:j,locale:t.language||"en"},P):j.type==="images"?k.jsx(HI,{scrollEnabled:!r,canvas:R,index:P,objectLinks:O,alternativeMode:v},P):j.type==="media"?k.jsx(_.Suspense,{fallback:k.jsx("div",{className:"cut-corners bg-black text-white"}),children:k.jsx(XI,{scrollEnabled:!r,canvas:R,strategy:j,index:P},P)},P):null}catch{return null}})})})]})})},l?"large":"small")}const vb="/fogg-manifest.json";function aA(){const[t,e]=_.useState(null);return _.useEffect(()=>{fetch(vb).then(r=>r.json()).then(e)},[]),t?k.jsx("div",{children:k.jsx(lA,{manifest:t,language:"en",viewObjectLinks:[]})}):k.jsx("div",{children:"Loading manifest"})}function gv(t){return k.jsx("section",{className:Tr("delft-slide mb-8 override-scrollbars transition-opacity overflow-y-auto",t.active?"z-10 opacity-100":"opacity-0",t.className),children:t.children})}function uA(t){const e=Yr(),r=ub(),n=_.useRef(null),[s,l]=_.useState(!1),u=_.useMemo(()=>["default-preset",{runtimeOptions:{visibilityRatio:.5,maxOverZoom:3},interactive:!0}],[]),d=(r==null?void 0:r.canvasId)===t.canvasId?r:null,h=db(),v=(r==null?void 0:r.canvasId)===t.canvasId||(r==null?void 0:r.previousCanvasId)===t.canvasId||(r==null?void 0:r.nextCanvasId)===t.canvasId;return _.useLayoutEffect(()=>{var g,w,b,R,P,C,j;n.current&&s&&d&&(((w=(g=r==null?void 0:r.region)==null?void 0:g.selector)==null?void 0:w.type)==="BoxSelector"||((R=(b=r==null?void 0:r.region)==null?void 0:b.selector)==null?void 0:R.type)==="SvgSelector"?n.current.runtime.world.gotoRegion({...(C=(P=r.region)==null?void 0:P.selector)==null?void 0:C.spatial,padding:50}):r&&((j=n.current)==null||j.runtime.world.goHome()))},[d,s,t.fullWidth]),_.useEffect(()=>{var g;(g=n.current)==null||g.runtime.world.recalculateWorldSize()},[t.fullWidth]),!e||!v?null:k.jsx("div",{className:"text-white flex flex-col flex-1 min-w-0 min-h-0 h-full",children:k.jsx(Rr.Viewer,{containerStyle:{height:"100%",width:"100%"},renderPreset:u,homeOnResize:!0,onCreated:g=>{var b,R,P,C,j,O,L,A;n.current=g,(b=n.current.em)==null||b.updateBounds(),((P=(R=r==null?void 0:r.region)==null?void 0:R.selector)==null?void 0:P.type)==="BoxSelector"||((j=(C=r==null?void 0:r.region)==null?void 0:C.selector)==null?void 0:j.type)==="SvgSelector"?n.current.runtime.world.gotoRegion({...(L=(O=r.region)==null?void 0:O.selector)==null?void 0:L.spatial,padding:50}):r&&((A=n.current)==null||A.runtime.world.goHome());const w=g.runtime.registerHook("useAfterFrame",()=>{var B;const F=g.renderer.renderers,z=(B=F[0])!=null&&B.canvas?F[0]:null;z||(l(!0),w()),z.isReady()&&(g.runtime.updateNextFrame(),setTimeout(()=>{l(!0)},300),w())});setTimeout(()=>g.runtime.updateNextFrame(),1e3)},children:k.jsx(Rr.RenderCanvas,{strategies:["images"],enableSizes:!1,children:h.length>1?null:h.map((g,w)=>{var R,P;const b=(R=g==null?void 0:g.selector)==null?void 0:R.spatial;return b?((P=g==null?void 0:g.selector)==null?void 0:P.type)==="SvgSelector"?k.jsx("shape",{points:g==null?void 0:g.selector.points,relativeStyle:!0,target:{x:0,y:0,width:e.width,height:e.height},style:{border:"2px solid red"}}):k.jsx("box",{target:b,relativeStyle:!0,html:!0,style:{border:"2px dashed red"}},w):null})})},t.fullWidth?1:2)})}function cA({canvas:t,objectLinks:e,...r}){const n=ub(),s=t.behavior||[],l=s.includes("left"),u=s.includes("bottom"),{isActive:d,showSummary:h,label:v,summary:g,showBody:w,toShow:b}=fb(t,n),R=k.jsx(_.Suspense,{fallback:k.jsx("div",{className:"h-full w-full"}),children:k.jsx(Ds,{canvas:t.id,children:k.jsx(uA,{fullWidth:!h,canvasId:t.id,cover:!1,index:r.index,objectLinks:e})})});return k.jsx(gv,{className:"mb-8 bg-black",index:r.index,active:r.active,children:k.jsxs("div",{className:Tr("h-full md:flex",l&&"flex-row-reverse",u&&"flex-col"),children:[k.jsx("div",{className:Tr("cut-corners flex-1 md:w-2/3",u&&"w-full md:w-full","aspect-square md:aspect-auto",!h&&"w-full md:w-full"),children:R}),k.jsxs("div",{className:Tr("cut-corners flex flex-col bg-black p-5 text-white md:w-1/3",u&&"w-full md:w-full",d?"opacity-100":"opacity-0",!h&&"hidden"),children:[k.jsx("div",{className:Tr("mb-4",l&&"place-self-end md:rotate-180"),children:k.jsxs("svg",{className:Tr(u?"rotate-90":"rotate-90 md:rotate-0"),xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[k.jsx("title",{children:"Arrow"}),k.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",fill:"#fff"})]})}),k.jsx("div",{className:"text-m mb-4 font-mono uppercase",children:k.jsx(Lt,{children:v})}),k.jsxs("div",{className:Tr("exhibition-info-block overflow-y-auto",d?"opacity-100":"opacity-0"),children:[k.jsx("div",{children:k.jsx(Lt,{enableDangerouslySetInnerHTML:!0,className:"whitespace-pre-wrap",children:g})}),w&&b?(b||[]).map((P,C)=>P.type==="TextualBody"?k.jsx("div",{className:"prose-sm exhibition-html text-white",children:k.jsx(Lt,{enableDangerouslySetInnerHTML:!0,children:P.value})},C):null):null,t.requiredStatement&&k.jsx("div",{className:"",children:k.jsx(Lt,{children:t.requiredStatement.value})})]})]})]})})}function dA({canvas:t,index:e,strategy:r,active:n}){const s=oc();return hb(r.items,s),k.jsx(gv,{className:"bg-white flex items-center px-8 pb-8",index:e,active:n,children:k.jsx(WI,{canvasId:t.id})})}function fA(){return typeof window<"u"?window.location.host:""}function hA(t){const e=t.strategy.media;if(t.strategy.media.type!=="VideoYouTube")return null;const r=e.annotation;return k.jsxs(gv,{className:"flex flex-col items-center bg-black px-8 pb-8",index:t.index,active:t.active,children:[k.jsx("div",{className:"h-full w-full flex-1",children:k.jsx("iframe",{title:"YouTube video player",className:"h-full w-full border-none object-cover",src:`https://www.youtube.com/embed/${e.youTubeId}?enablejsapi=1&origin=${fA()}&modestbranding=1&rel=0`,referrerPolicy:"no-referrer",sandbox:"allow-scripts allow-same-origin allow-presentation"})}),k.jsxs("div",{className:"p-8 text-white",children:[r!=null&&r.label?k.jsx("h3",{className:"mb-2 uppercase",children:k.jsx(Lt,{children:r.label})}):null,k.jsx("p",{children:r!=null&&r.summary?k.jsx(Lt,{children:r.summary}):null})]})]})}function pA(t){return k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...t,children:[k.jsx("title",{children:"Next"}),k.jsx("path",{fill:"currentColor",d:"M12.6 12L8 7.4L9.4 6l6 6l-6 6L8 16.6z"})]})}function mA(t){return k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...t,children:[k.jsx("title",{children:"Pause"}),k.jsx("path",{fill:"currentColor",d:"M14 19V5h4v14zm-8 0V5h4v14z"})]})}function gA(t){return k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...t,children:[k.jsx("title",{children:"Previous"}),k.jsx("path",{fill:"currentColor",d:"m14 18l-6-6l6-6l1.4 1.4l-4.6 4.6l4.6 4.6z"})]})}function Rg(t){var L,A;_.useRef(null),_.useRef(null);const e=Ud(),{cutCorners:r,autoPlay:n}=t.options||{},[s,l]=mp(F=>{const z=F?Number.parseInt(F,10):null;z&&h.getState().goToCanvasIndex(z)}),u=s?Number.parseInt(s,10):0;(L=t.manifest)!=null&&L.id&&!e.requestStatus(t.manifest.id)&&e.loadSync(t.manifest.id,JSON.parse(JSON.stringify(t.manifest)));const d=Fg(),h=_.useMemo(()=>cb({vault:e,manifest:t.manifest,objectLinks:t.viewObjectLinks,startCanvasIndex:u,firstStep:!0}),[e,t.manifest]),{currentStep:v,goToStep:g,nextStep:w,previousStep:b,steps:R,play:P,playPause:C,isPlaying:j}=Ri(h),O=v===-1?null:R[v];return _.useEffect(()=>{n&&P()},[]),_.useEffect(()=>{O!=null&&O.canvasIndex&&l(`${O==null?void 0:O.canvasIndex}`)},[O==null?void 0:O.canvasIndex]),k.jsx(NI,{store:h,children:k.jsx(Bd,{vault:e,children:k.jsx(ev,{manifest:t.manifest.id,children:k.jsx(CS,{language:t.language||"en",children:k.jsxs("div",{className:"flex h-full w-full flex-col",children:[k.jsx("div",{"data-cut-corners-enabled":r,className:"delft-presentation-viewer relative min-h-0 w-full flex-1 bg-black",children:t.manifest.items.map((F,z)=>{const B=d.getPaintables(F);try{const $=Gg({canvas:F,loadImageService:fe=>fe,paintables:B,supports:["empty","images","media","video","3d-model","textual-content","complex-timeline"]}),K=t.viewObjectLinks.filter(fe=>fe.canvasId===F.id);return $.type==="textual-content"?k.jsx(dA,{index:z,active:(O==null?void 0:O.canvasId)===F.id,canvas:F,strategy:$,locale:t.language||"en"},z):$.type==="images"?k.jsx(cA,{active:(O==null?void 0:O.canvasId)===F.id,canvas:F,index:z,objectLinks:K},z):$.type==="media"?k.jsx(hA,{active:(O==null?void 0:O.canvasId)===F.id,canvas:F,strategy:$,index:z},z):null}catch{return null}})}),k.jsx("div",{children:k.jsxs(gb,{content:{tableOfContents:((A=t.manifest)==null?void 0:A.label)||"Table of contents"},children:[k.jsx("button",{type:"button",className:"z-50 flex h-10 w-10 items-center justify-center rounded hover:bg-black/10",onClick:C,children:j?k.jsx(mA,{}):k.jsx(mb,{})}),k.jsxs("div",{className:"relative flex w-16 items-center",children:[k.jsx("div",{className:"h-1 w-full rounded-full bg-white/20"}),k.jsx("div",{className:"absolute left-0 top-0 h-1 rounded-full bg-white transition-all",style:{width:`${v/R.length*100}%`}})]}),k.jsx("button",{type:"button",className:"z-50 flex h-10 w-10 items-center justify-center rounded hover:bg-black/10",onClick:b,children:k.jsx(gA,{})}),k.jsx("button",{type:"button",className:"z-50 flex h-10 w-10 items-center justify-center rounded hover:bg-black/10",onClick:()=>w(),children:k.jsx(pA,{})})]})})]})})})})})}const vA=Object.freeze(Object.defineProperty({__proto__:null,DelftPresentation:Rg,default:Rg},Symbol.toStringTag,{value:"Module"}));function yA(){const[t,e]=_.useState(null);return _.useEffect(()=>{fetch(vb).then(r=>r.json()).then(e)},[]),t?k.jsx("div",{className:"h-[800px]",children:k.jsx(Rg,{manifest:t,language:"en",viewObjectLinks:[]})}):k.jsx("div",{children:"Loading manifest"})}const wA=vP([{path:"/",element:k.jsx(LP,{}),children:[{index:!0,element:k.jsx(MP,{})},{path:"exhibition",element:k.jsx(aA,{})},{path:"presentation",element:k.jsx(yA,{})}]}]);_g.createRoot(document.getElementById("root")).render(k.jsx(_.StrictMode,{children:k.jsx(kP,{router:wA})}));export{jh as _,jg as a,Fy as b,k as j,_ as r};
