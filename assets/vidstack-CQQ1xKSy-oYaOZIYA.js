const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vidstack-BeT6vBOi-Wr7vbjzl.js","assets/IIIFMediaPlayer-oDb2GyZI.js","assets/index-D2JuRgPq.js","assets/index-lgqdokA2.css","assets/IIIFMediaPlayer-JvhYHZWX.css"])))=>i.map(i=>d[i]);
var P=Object.defineProperty;var w=t=>{throw TypeError(t)};var k=(t,e,a)=>e in t?P(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var u=(t,e,a)=>k(t,typeof e!="symbol"?e+"":e,a),C=(t,e,a)=>e.has(t)||w("Cannot "+a);var c=(t,e,a)=>(C(t,e,"read from private field"),a?a.call(t):e.get(t)),m=(t,e,a)=>e.has(t)?w("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),E=(t,e,a,o)=>(C(t,e,"write to private field"),o?o.call(t,a):e.set(t,a),a),s=(t,e,a)=>(C(t,e,"access private method"),a);import{_ as A}from"./index-D2JuRgPq.js";import{l as O,I as R,y as b,z as D,c as G,x as L,j as M}from"./IIIFMediaPlayer-oDb2GyZI.js";function N(){return"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"}function T(){var t;return!!((t=window.cast)!=null&&t.framework)}function j(){var t,e;return!!((e=(t=window.chrome)==null?void 0:t.cast)!=null&&e.isAvailable)}function v(){return g().getCastState()===cast.framework.CastState.CONNECTED}function g(){return window.cast.framework.CastContext.getInstance()}function y(){return g().getCurrentSession()}function F(){var t;return(t=y())==null?void 0:t.getSessionObj().media[0]}function B(t){var a;return((a=F())==null?void 0:a.media.contentId)===(t==null?void 0:t.src)}function U(){return{language:"en-US",autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,resumeSavedSession:!0,androidReceiverCompatible:!0}}function V(t){return`Google Cast Error Code: ${t}`}function H(t,e){return O(g(),t,e)}var n,r,_,S,I,l,d;class z{constructor(){m(this,r);u(this,"name","google-cast");u(this,"target");m(this,n)}get cast(){return g()}mediaType(){return"video"}canPlay(e){return R&&!D&&b(e)}async prompt(e){var h;let a,o,i;try{a=await s(this,r,_).call(this,e),c(this,n)||(E(this,n,new cast.framework.RemotePlayer),new cast.framework.RemotePlayerController(c(this,n))),o=e.player.createEvent("google-cast-prompt-open",{trigger:a}),e.player.dispatchEvent(o),s(this,r,l).call(this,e,"connecting",o),await s(this,r,S).call(this,G(e.$props.googleCast)),e.$state.remotePlaybackInfo.set({deviceName:(h=y())==null?void 0:h.getCastDevice().friendlyName}),v()&&s(this,r,l).call(this,e,"connected",o)}catch(p){const f=p instanceof Error?p:s(this,r,d).call(this,(p+"").toUpperCase(),"Prompt failed.");throw i=e.player.createEvent("google-cast-prompt-error",{detail:f,trigger:o??a,cancelable:!0}),e.player.dispatch(i),s(this,r,l).call(this,e,v()?"connected":"disconnected",i),f}finally{e.player.dispatch("google-cast-prompt-close",{trigger:i??o??a})}}async load(e){if(L)throw Error("[vidstack] can not load google cast provider server-side");if(!c(this,n))throw Error("[vidstack] google cast player was not initialized");return new(await A(async()=>{const{GoogleCastProvider:a}=await import("./vidstack-BeT6vBOi-Wr7vbjzl.js");return{GoogleCastProvider:a}},__vite__mapDeps([0,1,2,3,4]))).GoogleCastProvider(c(this,n),e)}}n=new WeakMap,r=new WeakSet,_=async function(e){if(T())return;const a=e.player.createEvent("google-cast-load-start");e.player.dispatch(a),await M(N()),await customElements.whenDefined("google-cast-launcher");const o=e.player.createEvent("google-cast-loaded",{trigger:a});if(e.player.dispatch(o),!j())throw s(this,r,d).call(this,"CAST_NOT_AVAILABLE","Google Cast not available on this platform.");return o},S=async function(e){s(this,r,I).call(this,e);const a=await this.cast.requestSession();if(a)throw s(this,r,d).call(this,a.toUpperCase(),V(a))},I=function(e){var a;(a=this.cast)==null||a.setOptions({...U(),...e})},l=function(e,a,o){const i={type:"google-cast",state:a};e.notify("remote-playback-change",i,o)},d=function(e,a){const o=Error(a);return o.code=e,o};var K=Object.freeze({__proto__:null,GoogleCastLoader:z});export{g as getCastContext,V as getCastErrorMessage,y as getCastSession,F as getCastSessionMedia,B as hasActiveCastSession,H as listenCastContextEvent,K as loader};
