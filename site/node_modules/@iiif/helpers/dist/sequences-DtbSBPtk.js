import{compatVault as e}from"./compat-167ipRuK.js";import{findAllCanvasesInRange as t}from"./ranges-CDE4cufJ.js";function n(t=e){return{getVisibleCanvasesFromCanvasId:(e,n,i=!1)=>r(t,e,n,i),getManifestSequence:(e,n={})=>i(t,e,n)}}function r(t=e,n,r,a=!1){let o=n.behavior||[],s=r?t.get(r):null;if(!s)return[];let c=s.behavior||[],l=a?!1:o.includes(`paged`),u=l?!1:o.includes(`continuous`),d=l||u?!1:o.includes(`individuals`),f=c.includes(`facing-pages`),p=c.includes(`non-paged`);if(f||p||d||a)return[{id:s.id,type:`Canvas`}];let[m,h]=i(t,n);if(u)return m;let g=m.findIndex(e=>e.id===r);if(g===-1)return[];for(let e of h)if(e.includes(g))return e.map(e=>m[e]);return[{id:s.id,type:`Canvas`}]}function i(n=e,r,{disablePaging:i,skipNonPaged:a}={}){let o=r.behavior||[],s=o.includes(`paged`),c=s?!1:o.includes(`continuous`),l=s||c?!1:o.includes(`individuals`),u=r.type===`Manifest`?r.items:t(n,r);if(c)return[u,[u.map((e,t)=>t)]];if(l||!s||i)return[u,u.map((e,t)=>[t])];let d=[],f=[],p=()=>{f.length&&(d.push([...f]),f=[])},m=0,h=!1;for(let e=0;e<u.length;e++){let t=n.get(u[e]),r=t.behavior||[];if(r.includes(`non-paged`)){e===m&&m++,a||(p(),d.push([e]),p());continue}if(e===m||r.includes(`facing-pages`)){f.length&&(h=!0),p(),d.push([e]),p();continue}if(f.push(e),h){p(),h=!1;continue}f.length>1&&p()}return f.length&&p(),[u,d]}export{n as createSequenceHelper,i as getManifestSequence,r as getVisibleCanvasesFromCanvasId};
//# sourceMappingURL=sequences-DtbSBPtk.js.map